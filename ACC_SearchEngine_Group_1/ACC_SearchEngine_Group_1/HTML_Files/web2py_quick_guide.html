<!DOCTYPE html>
<!--[if IE 8]><html class="ie ie8"> <![endif]-->
<!--[if IE 9]><html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html> <!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/web2py/web2py_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 18:14:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Basic -->
<meta charset="utf-8">
<title>Web2py Quick Guide</title>
<meta name="description" content="Web2py Quick Guide - Learn Web2py starting from Introduction, Python Language, Framework Overview, Core, Views, Database Abstraction Layer, Forms and Validators, E-mail and SMS, Access Control, Services, Adding AJAX Effects, Components, Deployment, Security." />
<meta name="keywords" content="Web2py, Tutorial, Introduction, Python Language, Framework Overview, Core, Views, Database Abstraction Layer, Forms and Validators, E-mail and SMS, Access Control, Services, Adding AJAX Effects, Components, Deployment, Security." />
<base  />
<link rel="shortcut icon" href="https://www.tutorialspoint.com/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta property="fb:app_id" content="471319149685276" />
<meta property="og:site_name" content="www.tutorialspoint.com" />
<meta name="robots" content="index, follow"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="author" content="tutorialspoint.com">
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/script-min-v4.js"></script>
<link rel="stylesheet" href="https://www.tutorialspoint.com/theme/css/style-min.css?v=2">
<!-- Head Libs -->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="/theme/css/ie8.css">
<![endif]-->
<style>
pre.prettyprint.tryit {min-height:37px; background: #eee url(https://www.tutorialspoint.com/web2py/images/try-it.jpg) top right no-repeat !important}select{ border:0 !important; outline: 1px inset black !important; outline-offset: -1px !important; }
ul.nav-list.primary>li a.videolink{    background: none; margin: 0px; padding: 0px; border: 1px solid #d6d6d6;}
div.feature-box div.feature-box-icon, .col-md-3 .course-box, li.heading, div.footer-copyright { background: #67817f url(https://www.tutorialspoint.com/images/pattern.png) repeat center center !important;}
.sub-main-menu .sub-menuu div:hover, .sub-main-menu .viewall, header nav ul.nav-main li a:hover, button.btn-responsive-nav, header div.search button.btn-default { background: #67817f !important;}
.submenu-item{ border-bottom: 2px solid #67817f !important; border-top: 2px solid #67817f !important }
.ace_scroller{overflow: auto!important;}
</style>
<script>
$(document).ready(function() {
  $('input[name="q"]').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
});
</script>
</head>
<body onload="prettyPrint()">
<div class="wrapLoader">
   <div class="imgLoader">
      <img  src="https://www.tutorialspoint.com/images/loading-cg.gif" alt="" width="70" height="70" />
   </div>
</div>
<header>
   <div class="container">			
      <h1 class="logo">
      <a href="https://www.tutorialspoint.com/index.htm" title="tutorialspoint">
      <img alt="tutorialspoint" src="https://www.tutorialspoint.com/web2py/images/logo.png">
      </a>
      </h1>			
      <nav>
         <ul class="nav nav-pills nav-top">
            <li><a href="https://www.tutorialspoint.com/about/about_careers.htm" style="background: #fffb09; font-weight: bold;"><i class="icon icon-suitcase"></i> Jobs</a></li>
            <li> <a href="http://www.sendfiles.net/"><i class="fa fa-send"></i> &nbsp;SENDFiles</a> </li>
            <li> <a href="https://www.tutorialspoint.com/whiteboard.htm"><img src="https://www.tutorialspoint.com/theme/css/icons/image-editor.png" alt="Whiteboard" title="Whiteboard"> &nbsp;Whiteboard</a> </li>
            <li> <a href="https://www.tutorialspoint.com/netmeeting.php"><i class="fa-camera"></i> &nbsp;Net Meeting</a> </li>
            <li> <a href="https://www.tutorialspoint.com/online_dev_tools.htm"> <i class="dev-tools-menu" style="opacity:.5"></i> Tools </a> </li>
            <li> <a href="https://www.tutorialspoint.com/articles/index.php"><i class="icon icon-file-text-o"></i> &nbsp;Articles</a> </li>            
            <li class="top-icons">
              <ul class="social-icons">
              <li class="facebook"><a href="https://www.facebook.com/tutorialspointindia" target="_blank" data-placement="bottom" title="tutorialspoint @ Facebook">Facebook</a></li>
              <li class="googleplus"><a href="https://plus.google.com/u/0/116678774017490391259/posts" target="_blank" data-placement="bottom" title="tutorialspoint @ Google+">Google+</a></li>
              <li class="twitter"><a href="https://www.twitter.com/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Twitter">Twitter</a></li>
              <li class="linkedin"><a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Linkedin">Linkedin</a></li>
              <li class="youtube"><a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" data-placement="bottom" title="tutorialspoint YouTube">YouTube</a></li>
              </ul>
           </li>
         </ul>
      </nav>
         <!-- search code here  --> 
      <button class="btn btn-responsive-nav btn-inverse" data-toggle="collapse" data-target=".nav-main-collapse" id="pull" style="top: 24px!important"> <i class="icon icon-bars"></i> </button>
   </div>
  
   <div class="navbar nav-main">
      <div class="container">
         <nav class="nav-main mega-menu">
            <ul class="nav nav-pills nav-main" id="mainMenu">
               <li class="dropdown no-sub-menu"> <a class="dropdown" href="https://www.tutorialspoint.com/index.htm"><i class="icon icon-home"></i> Home</a> </li>   
               <li class="dropdown" id="liTL"><a class="dropdown" href="javascript:void(0);"><span class="tut-lib"> Tutorials Library <i class="fa-caret-down"></i></span></a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/codingground.htm"><i class="fa-code"></i> Coding Ground </a> </li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/tutor_connect/index.php"><i class="fa-user"> </i> Tutor Connect</a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fa-toggle-right"></i> Videos </a></li>
               <li class="dropdown no-sub-menu">
                  <div class="searchform-popup">
                     <input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
                     <div class="magnifying-glass"><i class="icon-search"></i> Search </div>
                 </div>
               </li>
            </ul>
         </nav>
         <div class="submenu-item sub-main-menu" id="top-sub-menu"></div>
         
      </div>
   </div>	
</header>
<div style="clear:both;"></div>
<div role="main" class="main">
<div class="container">
<div class="row">
<div class="col-md-2">
<aside class="sidebar">
<div class="mini-logo">
<img src="https://www.tutorialspoint.com/web2py/images/web2py-mini-logo.jpg" alt="Web2py Tutorial" />
</div>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Web2py Tutorial</li>
<li><a href="https://www.tutorialspoint.com/web2py/index.htm">Web2py - Home</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_introduction.htm">Web2py - Introduction</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_python_language.htm">Web2py - Python Language</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_framework_overview.htm">Web2py - Framework Overview</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_core.htm">Web2py - Core</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_views.htm">Web2py - Views</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_database_abstraction_layer.htm">Web2py - Database Abstraction Layer</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_forms_validators.htm">Web2py - Forms &amp; Validators</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_email_sms.htm">Web2py - Email &amp; SMS</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_access_control.htm">Web2py - Access Control</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_services.htm">Web2py - Services</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_adding_ajax_effects.htm">Web2py - Adding Ajax Effects</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_components.htm">Web2py - Components</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_deployment.htm">Web2py - Deployment</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_security.htm">Web2py - Security</a></li>
</ul>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Web2py Useful Resources</li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_quick_guide.htm">Web2py - Quick Guide</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_useful_resources.htm">Web2py - Useful Resources</a></li>
<li><a href="https://www.tutorialspoint.com/web2py/web2py_discussion.htm">Web2py - Discussion</a></li>
</ul>
<ul class="nav nav-list primary push-bottom left-menu special">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="https://www.tutorialspoint.com/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</aside>
</div>
<!-- PRINTING STARTS HERE -->
<div class="row">
<div class="content">
<div class="col-md-7 middle-col">
<h1>Web2py - Quick Guide</h1>
<div class="topgooglead">
<hr />
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript" 
src="https://pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="https://www.tutorialspoint.com/web2py/web2py_security.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="https://www.tutorialspoint.com/web2py/web2py_useful_resources.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<div class="clearer"></div>
<hr />
<h1>Web2py - Introduction</h1>
<p><b>web2py</b> is defined as a free, open-source web framework for agile development which involves database-driven web applications; it is written in Python and programmable in Python. It is a full-stack framework; it consists of all the necessary components, a developer needs to build a fully functional web application.</p>
<p><b>web2py</b> framework follows the <b>Model-View-Controller</b> pattern of running web applications unlike traditional patterns.</p>
<ul class="list">
<li><p><b>Model</b> is a part of the application that includes logic for the data. The objects in model are used for retrieving and storing the data from the database.</p></li>
<li><p><b>View</b> is a part of the application, which helps in rendering the display of data to end users. The display of data is fetched from Model.</p></li>
<li><p><b>Controller</b> is a part of the application, which handles user interaction. Controllers can read data from a view, control user input, and send input data to the specific model.</p></li>
</ul>
<img src="https://www.tutorialspoint.com/web2py/images/web2py_appliance.jpg" alt="Web2py Appliance" />
<ul class="list">
<li><p><b>web2py</b> has an in-built feature to manage cookies and sessions. After committing a transaction (in terms of SQL), the session is also stored simultaneously.</p></li>
<li><p><b>web2py</b> has the capacity of running the tasks in scheduled intervals after the completion of certain actions. This can be achieved with <b>CRON</b>.</p></li>
</ul>
<h2>web2py – Workflow</h2>
<p>Take a look at the workflow diagram given below.</p>
<img src="https://www.tutorialspoint.com/web2py/images/workflow.jpg" alt="Workflow" />
<p>The workflow diagram is described below.</p>
<ul class="list">
<li><p>The <b>Models</b>, <b>Views</b> and <b>Controller</b> components make up the user web2py application.</p></li>
<li><p>Multiple applications can be hosted in the same instance of web2py.</p></li>
<li><p>The browser sends the HTTP request to the server and the server interacts with <b>Model</b>, <b>Controller</b> and <b>View</b> to fetch the necessary output.</p></li>
<li><p>The arrows represent communication with the database engine(s). The database queries can be written in raw SQL or by using the web2py Database Abstraction Layer (which will be discussed in further chapters), so that <b>web2py</b> application code is independent of any database engine.</p></li>
<li><p><b>Model</b> establishes the database connection with the database and interacts with the <b>Controller</b>. The <b>Controller</b> on the other hand interacts with the <b>View</b> to render the display of data.</p></li>
<li><p>The <b>Dispatcher</b> maps the requested URL as given in HTTP response to a function call in the controller. The output of the function can be a string or a hash table.</p></li>
<li><p>The data is rendered by the <b>View</b>. If the user requests an HTML page (the default), the data is rendered into an HTML page. If the user requests the same page in XML, web2py tries to find a view that can render the dictionary in XML.</p></li>
<li><p>The supported protocols of web2py include HTML, XML, JSON, RSS, CSV, and RTF.</p></li>
</ul>
<h2>Model-View-Controller</h2>
<p>The <b>model-view-controller</b> representation of web2py is as follows &minus;</p>
<h3>Model</h3>
<pre class="result notranslate">
"db.py" is the model:
db = DAL('sqlite://storage.sqlite')
db.define_table(employee, Field('name'), Field(‘phone’))
</pre>
<p>The <b>Model</b> includes the logic of application data. It connects to the database as mentioned in the figure above. Consider SQLite is being used and is stored in <b>storage.sqlite</b> file with a table defined as employee. If the table does not exist, web2py helps by creating the respective table.</p>
<h3>Controller</h3>
<p>The program <b>"default.py"</b> is the <b>Controller</b>.</p>
<pre class="prettyprint notranslate">
def employees():
   grid = SQLFORM.grid(db.contact, user_signature = False)
   return locals()
</pre>
<p>In <b>web2py</b>, URL mapping helps in accessing the functions and modules. For the above example, the Controller contains a single function (or "action") called employees.</p>
<p>The action taken by the <b>Controller</b> returns a string or a Python dictionary, which is a combination of key and value including a local set of variables.</p>
<h3>View</h3>
<p><b>"default/contacts.html"</b> is the <b>View</b>.</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
&lt;h1&gt;Manage My Employees&lt;/h1&gt;
{{=grid}}
</pre>
<p>For the given example, <b>View</b> displays the output after the associated controller function is executed.</p>
<p>The purpose of this <b>View</b> is to render the variables in the dictionary, which is in the form of HTML. The <b>View</b> file is written in HTML, but it embeds Python code with the help of <b>{{ and }}</b> delimiters.</p>
<p>The code embedded into HTML consists of Python code in the dictionary.</p>
<h2>Start with web2py</h2>
<p><b>web2py</b> comes in binary packages for all the major operating systems like Windows, UNIX and Mac OS X.</p>
<p>It is easy to install web2py because &minus;</p>
<ul class="list">
<li><p>It comprises of the Python interpreter, so you do not need to have it pre-installed. There is also a source code version that runs on all the operating systems.</p></li>
<li><p>The following link comprises of the binary packages of <b>web2py</b> for download as per the user’s need &minus; <a target="_blank" rel="nofollow" href="http://www.web2py.com/init/default/download">www.web2py.com</a></p></li>
<li><p>The <b>web2py</b> framework requires no pre-installation unlike other frameworks. The user needs to download the zip file and unzip as per the operating system requirement.</p></li>
<li><p>The <b>web2py</b> framework is written in Python, which is a complete dynamic language that does not require any compilation or complicated installation to run.</p></li>
<li><p>It uses a virtual machine like other programming languages such as Java or .net and it can transparently byte-compile the source code written by the developers.</p></li>
</ul>
<table class="table table-bordered">
<tr>
<th style="text-align:center;">Operating System</th>
<th style="text-align:center;">Command</th>
</tr>
<tr>
<td>Unix and Linux (source distribution)</td>
<td>python web2py.py</td>
</tr>
<tr>
<td>OS X (binary distribution)</td>
<td>open web2py.app</td>
</tr>
<tr>
<td>Windows (binary web2py distribution)</td>
<td>web2py.exe</td>
</tr>
<tr>
<td>Windows (source web2py distribution)</td>
<td>c:/Python27/python.exe web2py.py</td>
</tr>
</table>
<h1>Web2py - Python Language</h1>
<p>Python can be defined as a combination of object-oriented and interactive language. It is an open source software. Guido van Rossum conceived python in the late 1980s.</p>
<p>Python is a language similar to PERL (Practical Extraction and Reporting Language), which has gained popularity because of its clear syntax and readability.</p>
<p>The main notable features of Python are as follows &minus;</p>
<ul class="list">
<li><p>Python is said to be relatively easy to learn and portable. Its statements can be easily interpreted in a number of operating systems, including UNIX-based systems, <b>Mac OS</b>, <b>MS-DOS</b>, <b>OS/2</b>, and various versions of Windows.</p></li>
<li><p>Python is portable with all the major operating systems. It uses an easy to understand syntax, making the programs, which are user friendly.</p></li>
<li><p>It comes with a large standard library that supports many tasks.</p></li>
</ul>
<img src="https://www.tutorialspoint.com/web2py/images/scripting_languages.jpg" alt="Scripting Languages" />
<p>From the above diagram, it is clearly visible that Python is a combination of scripting as well as programming language. They are interpreted within another program like scripting languages.</p>
<h2>Versions of Python</h2>
<p>Python has three production-quality implementations, which are called as CPython, Jython, and IronPython. These are also termed as versions of Python.</p>
<ul class="list">
<li><p><b>Classic Python</b> a.k.a <b>CPython</b> is a compiler, interpreter and consists of built-in and optional extension modules which is implemented in standard C language.</p></li>
<li><p><b>Jython</b> is a Python implementation for Java Virtual Machine (JVM).</p></li>
<li><p><b>IronPython</b> is designed by Microsoft, which includes Common Language Runtime (CLR). It is commonly known as .NET</p></li>
</ul>
<h2>Starting Up</h2>
<p>A basic Python program in any operating system starts with a header. The programs are stored with <b>.py</b> extension and Python command is used for running the programs.</p>
<p>For example, <b>python_rstprogram.py</b> will give you the required output. It will also generate errors, if present.</p>
<p>Python uses indentation to delimit blocks of code. A block starts with a line ending with colon, and continues for all lines in the similar fashion that have a similar or higher indentation as the next line.</p>
<pre class="prettyprint notranslate tryit">
# Basic program in Python
print "Welcome to Python!\n"
</pre>
<p>The output of the program will be &minus;</p>
<pre class="result notranslate">
Welcome to Python!
</pre>
<h2>Indentation</h2>
<p>Indentations of the programs are quite important in Python. There are some prejudices and myths about Python's indentation rules for the developers who are beginners to Python.</p>
<p>The thumb rule for all the programmers is &minus;</p>
<blockquote>“Whitespace is significant in Python source code.”</blockquote>
<p>Leading whitespace, which includes spaces and tabs at the beginning of a logical line of Python computes the indentation level of line.</p>
<h3>Note</h3>
<ul class="list">
<li><p>The indentation level also determines the grouping of the statements.</p></li>
<li><p>It is common to use four spaces i.e. tab for each level of indentation.</p></li>
<li><p>It is a good policy not to mix tabs with spaces, which can result in confusion, which is invisible.</p></li>
</ul>
<p>Python also generates a compile time error if there is lack of indentation.</p>
<pre class="result notranslate">
IndentationError: expected an indented block
</pre>
<h2>Control Flow Statements</h2>
<p>The control flow of a Python program is regulated by conditional statements, loops and function calls.</p>
<ul class="list">
<li><p>The <b>If</b> statement, executes a block of code under specified condition, along with else and elif(a combination of else-if).</p></li>
<li><p>The <b>For</b> statement, iterates over an object, capturing each element to a local variable for use by the attached block.</p></li>
<li><p>The <b>While</b> statement, executes a block of code under the condition, which is <b>True</b>.</p></li>
<li><p>The <b>With</b> statement, encloses a code block within the context manager. It has been added as a more readable alternative to the <b>try/finally</b> statement.</p></li>
</ul>
<pre class="prettyprint notranslate">
# If statement in Python
   x = int(raw_input("Please enter an integer: ")) #Taking input from the user
if x&lt;0:
   print "1 - Got a negative expression value"
   print x
else:
   print "1 - Got a positive expression value"
   print x
print "Good bye!"
</pre>
<h3>Output</h3>
<pre class="result notranslate">
sh-4.3$ python main.py
Please enter an integer: 4
1 - Got a positive expression value
4
Good bye!
</pre>
<h2>Functions</h2>
<p>The statements in a typical Python program are organized and grouped in a particular format called, <b>“Functions"</b>. A function is a group of statements that perform an action based on the request. Python provides many built-in functions and allows programmers to define their own functions.</p>
<p>In Python, functions are values that are handled like other objects in programming languages.</p>
<p>The <b>def</b> statement is the most common way to define a function. <b>def</b> is a single-clause compound statement with the following syntax &minus;</p>
<pre class="result notranslate">
def function-name (parameters):statement(s)
</pre>
<p>The following example demonstrates a generator function. It can be used as an iterable object, which creates its objects in a similar way.</p>
<pre class="prettyprint notranslate tryit">
def demo ():
   for i in range(5):
      yield (i*i)
	
for j in demo():
   print j
</pre>
<h3>Output</h3>
<pre class="result notranslate">
sh-4.3$ python main.py
0
1
4
9
16
</pre>
<h2>Special Attributes, Methods, and Operators</h2>
<p>The attributes, methods, and operators starting with double underscore of a class are usually private in behavior. Some of them are reserved keywords, which include a special meaning.</p>
<p>Three of them are listed below &minus;</p>
<ul class="list">
<li><p><b>__len__</b></p></li>
<li><p><b>__getitem__</b></p></li>
<li><p><b>__setitem__</b></p></li>
</ul>
<p>The other special operators include __getattr__ and __setattr__, which defines the <b>get</b> and <b>set</b> attributes for the class.</p>
<h2>File I/O Functions</h2>
<p>Python includes a functionality to open and close particular files. This can be achieved with the help of <b>open()</b>, <b>write()</b> and <b>close()</b> functions.</p>
<p>The commands which help in file input and output are as follows &minus;</p>
<table class="table table-bordered">
<tr>
<th style="width:10%;">Sr.No</th>
<th style="text-align:center;">Command &amp; Functionality</th>
</tr>
<tr>
<td style="text-align:center;">1</td>
<td>
<p><b>open()</b></p>
<p>It helps in opening a file or document</p>
</td>
</tr>
<tr>
<td style="text-align:center;">2</td>
<td>
<p><b>write()</b></p>
<p>It helps to write a string in file or document</p>
</td>
</tr>
<tr>
<td style="text-align:center;">3</td>
<td>
<p><b>read()</b></p>
<p>It helps in reading the content in existing file</p>
</td>
</tr>
<tr>
<td style="text-align:center;">4</td>
<td>
<p><b>close()</b></p>
<p>This method closes the file object.</p>
</td>
</tr>
</table>
<h3>Example</h3>
<p>Consider a file named <b>“demo.txt”</b>, which already exists with a text “This is a demo file”.</p>
<pre class="prettyprint notranslate">
#!/usr/bin/python
# Open a file
fo = open("demo.txt", "wb")
fo.write( "Insering new line \n");
# Close opend file
fo.close()
</pre>
<p>The string available after opening the file will be &minus;</p>
<pre class="result notranslate">
This is a demo file
Inserting a new line
</pre>
<h1>Web2py - Framework Overview</h1>
<p>web2py is a full-stack web framework that can be used by a developer to completely develop a web application. It includes SQL database integration and multi-threaded web server for designing a program.</p>
<h2>Web Interface for Designing a User’s Program</h2>
<p>Once the command is executed as per the operating system, web2py displays a startup window and then displays a GUI widget that asks the user to choose &minus;</p>
<ul class="list">
<li>a one-time administrator password,</li>
<li>the IP address of the network interface to be used for the web server,</li>
<li>and a port number from which to serve requests.</li>
</ul>
<p>The administrator includes all the authority for addition and editing any new web application.</p>
<p>By default, web2py runs its web server on <b>127.0.0.1:8000</b> (port 8000 on localhost) but a user can run it on any available IP address and port as per the requirement.</p>
<p>The web2py GUI widget will be displayed as shown below.</p>
<img src="https://www.tutorialspoint.com/web2py/images/gui_widget.jpg" alt="GUI Widget" />
<p>The password is used in the administrative interface for any changes in the new module.</p>
<p>After the user has set the administration password, web2py starts up the web browser at the page with the following URL &minus; <b>http://127.0.0.1:8000/</b></p>
<p>The welcome page of the framework will be displayed as shown below.</p>
<img src="https://www.tutorialspoint.com/web2py/images/framework.jpg" alt="Framework" />
<h2>Designing a Basic Program in web2py</h2>
<p>After starting the web2py application, with the above-mentioned URL, we can use the administrative interface for creating a new module, for example, <b>“helloWorld”</b>.</p>
<p>The administrative interface will ask for the password for authentication purpose as the administrator holds all the authority for addition and editing any new web application.</p>
<img src="https://www.tutorialspoint.com/web2py/images/web2py_applications.jpg" alt="Web2py Applications" />
<p>The snapshot given above includes the page details, which lists all the installed web2py applications and allows the administrator to manage them. By default, the web2py framework comes with three applications. They are &minus;</p>
<ul class="list">
<li><p>An <b>admin</b> application, which the user is implementing currently.</p></li>
<li><p>An <b>examples</b> application, with the online interactive documentation and an instance of the web2py official website.</p></li>
<li><p>A <b>welcome</b> application. It includes the basic template for any other web2py application. It is also known as the <b>scaffolding application</b>. The application also welcomes a user at the startup.</p></li>
</ul>
<p>Let the name of the new application be <b>“helloWorld”</b>.</p>
<p>Once, a new application is created, the user is redirected to a page comprising of view, model and controllers of the respective application.</p>
<img src="https://www.tutorialspoint.com/web2py/images/edit_application.jpg" alt="Edit Application" />
<p>The user can look at the newly created application by mentioning the following URL &minus; <b>http://127.0.0.1:8000/helloWorld</b></p>
<p>By default, a user can view the following screen on hitting the above-mentioned URL.</p>
<p>For printing the message of the given web application <b>“helloWorld”</b>, the change is made in the <b>default.py</b> controller.</p>
<img src="https://www.tutorialspoint.com/web2py/images/web_application.jpg" alt="Web Application" />
<p>The function named <b>“index”</b> is the default function for returning the value and displaying the necessary output. As mentioned above, the string <b>“Hello World- Welcome to my first web application”</b> is used as the return value, which displays the output in the screen.</p>
<p>The output is displayed as follows &minus;</p>
<img src="https://www.tutorialspoint.com/web2py/images/output.jpg" alt="Output" />
<h2>Postbacks</h2>
<p>The mechanism of validating the input of form is very common and is not considered as such a good programming practice. The input is validated each time, which is a burden for validation.</p>
<p>A better pattern in web2py is to submit forms to the same action, which generates them. This mechanism is called as <b>“postback”</b> which is the main feature of web2py. In short, self-submission is achieved in <b>postback</b>.</p>
<pre class="prettyprint notranslate">
def first():
   if request.vars.visitor_name: #if visitor name exists
      session.visitor_name = request.vars.visitor_name
      redirect(URL('second'))#postback is implemented
   return dict()
</pre>
<h2>CRUD Application</h2>
<p>web2py includes applications, which perform the functions of Create, retrieve, update and delete. The <b>CRUD</b> cycle describes the elemental functions of a database, which is persistent.</p>
<p>All the application logic is written in the models, which are retrieved by the controllers and displayed to the users with the help of view.</p>
<h3>appadmin</h3>
<p>For PHP, the application server includes listing of all the databases under <b>phpmyadmin</b>. In a similar way, web2py provides an interface for managing, creating and deleting tables or databases, which is termed as <b>“appadmin.”</b></p>
<p>Before implementing the logic behind the tables, it is necessary to create database and its associated tables.</p>
<p>The URL to access <b>appadmin</b> &minus;</p>
<p><b>http://127.0.0.1:8000/applicationname/appadmin</b></p>
<p>On hitting the URL, the user will get the list of tables associated for the given application.</p>
<img src="https://www.tutorialspoint.com/web2py/images/list_of_tables.jpg" alt="List Of Tables" />
<p>This interface is not intended to be public. It is designed to get an easy access to the database. It consists of two files namely &minus; a controller <b>“appadmin.py”</b> and a view <b>“appadmin.html”</b>.</p>
<p>It can paginate up to 100 records at a time. The usage of <b>“appadmin”</b> is discussed in subsequent chapters.</p>
<h1>Web2py - Core</h1>
<h2>Command Line Options</h2>
<p>We have learnt how to start the web2py server using GUI widget in the previous chapter.</p>
<p>This widget can be skipped by starting the server from <b>command line</b> prompt.</p>
<p>python web2py.py -a 'your password' -i 127.0.0.1 -p 8000</p> 
<p>Whenever web2py server starts, it creates a file "<b>parameters_8000.py</b>" where all the passwords are stored in a hashed form.</p>
<p>For additional security purpose, the following command line can be used &minus;</p>
<pre class="result notranslate">
python web2py.py -a '&lt;recycle&gt;' -i 127.0.0.1 -p 8000
</pre>
<p>For the above scenario, web2py reuses the hashed passwords stored in "<b>parameters_8000.py</b>".</p>
<p>In case, if the file "<b>parameters_8000.py</b>" is deleted accidently or due to some other reasons, the web-based administrative interface is disabled in web2py.</p>
<h2>URL Mapping / Dispatching</h2>
<p>The functioning of web2py is based on model-view-controller, which maps the URL in a specific form &minus; <b>http://127.0.0.1:8000/a/d/f.html</b></p>
<p>It routes till the function <b>“f()”</b> mentioned in the controller <b>d.py</b> is under the application named “a”. If the controller is not present in the application then web2py uses a default controller named <b>“default.py”</b>.</p>
<p>If the function, as given in the URL is not present, then the default function called <b>init()</b> is used. The working of the URL is shown schematically in the image below.</p>
<img src="https://www.tutorialspoint.com/web2py/images/function_init.jpg" alt="Function Init" />
<p>The extension <b>.html</b> is optional for the URL. The extension determines the extension of <b>View</b> that renders the output of the function defined in the controller. The same content is served in multiple formats namely html, xml, json, rss etc.</p>
<p>The request is passed, based on the functions, which accept the arguments and gives the appropriate output to the user. It is the controller, which interacts with model and view of the application for giving the output as per the user’s need.</p>
<h2>web2py – Workflow</h2>
<p>The workflow of web2py is discussed below &minus;</p>
<ul class="list">
<li><p>The web server manages each and every HTTP requests simultaneously in its own thread.</p></li>
<li><p>The HTTP request header is parsed and passed to the dispatcher.</p></li>
<li><p>The Dispatcher manages the application requests and maps the <b>PATH_INFO</b> in the URL of the function call. Every function call is represented in the URL.</p></li>
<li><p>All the requests for files included in the static folder are managed directly, and large file are streamed to the client.</p></li>
<li><p>Requests for anything but a static file are mapped into an action.</p></li>
<li><p>If the request header contains a session cookie for the app, the session object is retrieved; or else, a session id is created.</p></li>
<li><p>If the action returns a value as string, this is returned to the client.</p></li>
<li><p>If the action returns an iterable, it is used to loop and stream the data to the client.</p></li>
</ul>
<h2>Conditional Models</h2>
<p>In the previous chapter, we saw the functionality of the <b>Controllers</b>. web2py uses models, views and controllers in each of its application. Therefore, it is also necessary to understand the functionality of the <b>Model</b>.</p>
<p>Unlike any other MVC application, Models in web2py are treated as conditional. Models in subfolders are executed, based on its controller’s usage. This can be demonstrated with following example &minus;</p>
<p>Consider the URL &minus; <b>http://127.0.0.1:8000/a/d/f.html</b></p>
<p>In this case, <b>‘a’</b> is the name of the application, <b>‘d’</b> is the controller’s name and <b>f()</b> is the function associated with the controller. The list of models, which will be executed are as follows &minus;</p>
<pre class="result notranslate">
applications/a/models/*.py
applications/a/models/d/*.py
applications/a/models/d/f/*.py
</pre>
<h2>Libraries</h2>
<p>web2py includes libraries, which are exposed to the all the applications as the objects. These objects are defined inside the core files under the directory named “gluon”.</p>
<p>Many of the modules like DAL template have no dependencies and can be implemented outside the framework of web2py. It also maintains the unit tests which is considered as good practice.</p>
<h2>Applications</h2>
<p>web2py applications are shown below in a diagrammatic form.</p>
<img src="https://www.tutorialspoint.com/web2py/images/diagrammatic_form.jpg" alt="Diagrammatic Form" />
<p>The <b>Applications</b> developed in web2py are composed of the following parts &minus;</p>
<ul class="list">
<li><p><b>Models</b> &minus; Represents data and database tables.</p></li>
<li><p><b>Controllers</b> &minus; Describes the application logic and workflow.</p></li>
<li><p><b>Views</b> &minus; Helps rendering the display of the data.</p></li>
<li><p><b>Languages</b> &minus; describe how to translate strings in the application into various supported languages.</p></li>
<li><p><b>Static files</b> &minus; Do not require processing (e.g. images, CSS style sheets etc).</p></li>
<li><p><b>ABOUT</b> and <b>README</b> &minus; Details of the project.</p></li>
<li><p><b>Errors</b> &minus; Stores error reports generated by the application.</p></li>
<li><p><b>Sessions</b> &minus; Stores information related to each particular user.</p></li>
<li><p><b>Databases</b> &minus; store SQLite databases and additional table information.</p></li>
<li><p><b>Cache</b> &minus; Store cached application items.</p></li>
<li><p><b>Modules</b> &minus; Modules are other optional Python modules.</p></li>
<li><p><b>Private</b> &minus; Included files are accessed by the controllers but not directly by the developer.</p></li>
<li><p><b>Uploads</b> &minus; Files are accessed by the models but not directly by the developer.</p></li>
</ul>
<h2>API</h2>
<p>In web2py, <b>models</b>, <b>controllers</b> and <b>views</b> are executed in an environment where certain objects are imported for the developers.</p>
<p><b>Global Objects</b> &minus; request, response, session, cache.</p>
<p><b>Helpers</b> &minus; web2py includes helper class, which can be used to build HTML programmatically. It corresponds to HTML tags, termed as <b>“HTML helpers”</b>.</p>
<p>For example, A, B, FIELDSET, FORM, etc.</p>
<h2>Session</h2>
<p>A session can be defined as a server-side storage of information, which is persisted throughout the user's interaction throughout the web application.</p>
<p>Session in web2py is the instance of storage class.</p>
<p>For example, a variable can be stored in session as</p>
<pre class="result notranslate">
session.myvariable = "hello"
</pre>
<p>This value can be retrieved as</p>
<pre class="result notranslate">
a = session.myvariable
</pre>
<p>The value of the variable can be retrieved as long as the code is executed in the same session by the same user.</p>
<p>One of the important methods in web2py for session is <b>“forget”</b> &minus;</p>
<pre class="result notranslate">
session.forget(response);
</pre>
<p>It instructs web2py not to save the session.</p>
<h2>Running Tasks in Background</h2>
<p>An HTTP request arrives to the web server, which handles each request in its own thread, in parallel. The task, which is active, takes place in the foreground while the others are kept in background. Managing the background tasks is also one of the main features of web2py.</p>
<p>Time-consuming tasks are preferably kept in the background. Some of the mechanisms are listed as follows, which manage the background tasks &minus;</p>
<ul class="list">
<li><p><b>CRON</b></p></li>
<li><p><b>Queues</b></p></li>
<li><p><b>Scheduler</b></p></li>
</ul>
<h3>CRON</h3>
<p>In web2py, <b>CRON</b> gives the ability to run the task within the specified intervals of the time. Each application includes a CRON file, which defines its functionalities.</p>
<h3>Scheduler</h3>
<p>The built-in scheduler helps in running the tasks in background by setting the priority. It provides a mechanism for creating, scheduling and modifying the tasks.</p>
<p>The scheduled events are listed in models with the file name <b>“scheduler.py”</b>.</p>
<h2>Building an Application</h2>
<p>We had an overview of creating models and controllers in web2py. Here, we will focus on the creation of the application named <b>“Contacts”</b>. The application needs to maintain a list of companies, and a list of people who work at those companies.</p>
<h3>Creation of Model</h3>
<p>Here, identification of the tables for the data dictionary is the model. The model for the contacts application will be created under the “<b>models</b>” folders. The file is stored in <b>models/db_contacts.py</b>.</p>
<pre class="prettyprint notranslate">
# in file: models/db_custom.py
db.define_table('company', Field('name', notnull = True, unique = True), format = '%(name)s')
db.define_table(
   'contact',
   Field('name', notnull = True),
   Field('company', 'reference company'),
   Field('picture', 'upload'),
   Field('email', requires = IS_EMAIL()),
   Field('phone_number', requires = IS_MATCH('[\d\-\(\) ]&plus;')),
   Field('address'),
   format = '%(name)s'
)

db.define_table(
   'log',
   Field('body', 'text', notnull = True),
   Field('posted_on', 'datetime'),
   Field('contact', 'reference contact')
)
</pre>
<p>Once the above file is created, the tables can be accessed with the help of URL <b>http://127.0.0.1:8000/contacts/appadmin</b></p>
<h3>Creation of Controller</h3>
<p>The <b>Controller</b> will include some functions for listing, editing and deleting the contacts.</p>
<pre class="prettyprint notranslate">
# in file: controllers/default.py
def index():return locals()
def companies():companies = db(db.company).select(orderby = db.company.name)
return locals()

def contacts():company = db.company(request.args(0)) or redirect(URL('companies'))
contacts = db(db.contact.company == company.id).select(orderby = db.contact.name)
return locals()

@auth.requires_login()
def company_create():form = crud.create(db.company, next = 'companies')
return locals()

@auth.requires_login()
def company_edit():company = db.company(request.args(0)) or redirect(URL('companies'))
form = crud.update(db.company, company, next='companies')
return locals()

@auth.requires_login()
def contact_create():db.contact.company.default = request.args(0)
form = crud.create(db.contact, next = 'companies')
return locals()

@auth.requires_login()
def contact_edit():contact = db.contact(request.args(0)) or redirect(URL('companies'))
form = crud.update(db.contact, contact, next = 'companies')
return locals()

def user():return dict(form = auth())
</pre>
<p>The creation of the <b>view</b> along with its output will be discussed in the next chapter.</p>
<h1>Web2py - Views</h1>
<p>web2py framework uses <b>Models</b>, <b>Controllers</b> and <b>Views</b> in its applications. It includes a slightly modified Python syntax in the <b>Views</b> for more readable code without any restriction as imposed on proper Python usage.</p>
<p>The main purpose of a web2py <b>View</b> is to embed the python code in an HTML document. However, it faces some issues, which are as follows &minus;</p>
<ul class="list">
<li>Escaping of embedded python code in an HTML document.</li>
<li>Following indentation based on Python, which may affect HTML rules.</li>
</ul>
<p>To escape with the problems, web2py uses delimiters {{..}} in the view section. The delimiters help in escaping the embedded python code. It also helps in following the HTML rules of indentation.</p>
<p>The code included within <b>{{..}}</b> delimiters include unintended Python code. Since Python normally uses indentation to delimit blocks of code, the unintended code within the delimiters should be maintained in proper way. To overcome this problem, web2py uses the <b>“pass”</b> keyword.</p>
<p>The code block beginning with a line terminates with a colon and ends with a line beginning with pass.</p>
<p><b>Note</b> &minus; pass is a Python keyword, it is not a web2py keyword.</p>
<p>The following code shows the implementation of pass keyword &minus;</p>
<pre class="prettyprint notranslate">
{{
   if num &gt; 0:
      response.write('positive number')
   else:
      response.write('negative number')
      pass
}}
</pre>
<h2>HTML Helpers</h2>
<p>web2py includes helper class which can be used to build HTML programmatically. It corresponds to the HTML tags, termed as “HTML helpers”.</p>
<p>For example &minus;</p>
<pre class="prettyprint notranslate">
[(A('Home', _href = URL('default', 'home')), False, None, []), ...]
</pre>
<p>Here, <b>A</b> is the helper corresponding to the anchor <b>&lt;a&gt;</b> tag of HTML. It builds the HTML anchor <b>&lt;a&gt;</b> tag programmatically.</p>
<p>HTML helpers consists of two types, namely <b>positional</b> and <b>named</b> arguments.</p>
<ul class="list">
<li><p><b>Positional</b> arguments are interpreted as objects contained between the HTML open and close tags.</p></li>
<li><p><b>Named</b> arguments begins with an underscore are interpreted as HTML tag.</p></li>
</ul>
<p>Helpers are also useful in serialization of strings, with the <b>_str_</b> and xml methods. For example &minus;</p>
<pre class="prettyprint notranslate">
&gt;&gt;&gt; print str(DIV(“hello world”))
</pre>
<h3>Output</h3>
<pre class="result notranslate">
&lt;div&gt; hello world &lt;/div&gt;
</pre>
<p><b>Note</b> &minus; HTML helpers provide a server-side representation of the Document Object Model (DOM).</p>
<h2>XML Helpers</h2>
<p>XML is termed as an object, which encapsulates text that should not be escaped. The text may or may not contain valid XML.</p>
<p>For example, for the below mentioned code, it could contain JavaScript.</p>
<pre class="prettyprint notranslate">
&gt;&gt;&gt; print XML('&lt;script&gt;alert("unsafe!")&lt;/script&gt;')
</pre>
<h3>Output</h3>
<pre class="prettyprint notranslate">
&lt;script&gt; alert(“unsafe!”)&lt;/script&gt;
</pre>
<h2>Built-in Helpers</h2>
<p>There are many built-in helpers used in web2py. Some of the HTML built-in helpers are listed as below.</p>
<table class="table table-bordered" style="font-size:12px;">
<tr>
<th style="text-align:center;">Name</th>
<th style="text-align:center;">Usage</th>
<th style="text-align:center;">Example</th>
</tr>
<tr>
<td>A</td>
<td>This helper is used to build links. It corresponds to the anchor tag</td>
<td>
<pre class="prettyprint notranslate">
[
(A('Home', _href = URL('default', 'home')), False, None, []),
...]
</pre>
</td>
</tr>
<tr>
<td>B</td>
<td>This helper helps in making the contents of the text, bold.</td>
<td>
<pre class="prettyprint notranslate">
B('&lt;hello&gt;', XML('&lt;i&gt;world&lt;/i&gt;'), _class = 'test', _id = 0)
</pre>
</td>
</tr>
<tr>
<td>BODY</td>
<td>This helper makes the body of a page. It also includes a multiplication operator to increase the number of breaks.</td>
<td>
<pre class="prettyprint notranslate">
BR()
</pre>
</td>
</tr>
<tr>
<td>CODE</td>
<td>It performs syntax highlighting for Python, C, C&plus;&plus; and web2py code. This helper also has the ability to link an API documentation.</td>
<td>
<pre class="prettyprint notranslate">
CODE('print "hello"', language = 'python').xml()
</pre>
</td>
</tr>
<tr>
<td>FIELDSET</td>
<td>It creates an input field together with its label.</td>
<td>
<pre class="prettyprint notranslate">
FIELDSET('Height:', INPUT(_name = 'height'), _class = 'test')
</pre>
</td>
</tr>
<tr>
<td>HEAD</td>
<td>It helps in tagging &lt;head&gt; tag of an HTML page.</td>
<td>
<pre class="prettyprint notranslate">
HEAD(TITLE('&lt;hello&gt;'))
</pre>
</td>
</tr>
<tr>
<td>IMG</td>
<td>It helps in embedding images for the given HTML page.</td>
<td>
<pre class="prettyprint notranslate">
IMG(_src = 'http://example.com/image.png',_alt = 'test')
</pre>
</td>
</tr>
</table>
<h2>Custom Helpers</h2>
<p>These helpers are used to customize the tags as per the requirements. web2py uses following custom helpers &minus;</p>
<h3>TAG</h3>
<p>web2py uses TAG as the universal tag generator. It helps in generating customized XML tags. The general syntax is as follows &minus;</p>
<pre class="prettyprint notranslate">
{{ = TAG.name('a', 'b', _c = 'd')}}
</pre>
<p>It generates the XML code as : &lt;name c = "d"&gt;ab&lt;/name&gt;</p>
<p>TAG is an object and <code>TAG.name</code> or <code>TAG['name']</code> is a function that returns a temporary helper class.</p>
<h3>MENU</h3>
<p>This helper makes a list of the list items or the values of the menu items, generating a tree-like structure representing the menu. The list of menu items is in the form of <b>response.menu</b>. For example &minus;</p>
<pre class="prettyprint notranslate">
print MENU([['One', False, 'link1'], ['Two', False, 'link2']])
</pre>
<p>The output will be displayed as follows &minus;</p>
<pre class="prettyprint notranslate">
&lt;ul class = "web2py-menu web2py-menu-vertical"&gt;
   &lt;li&gt;&lt;a href = "link1"&gt;One&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href = "link2"&gt;Two&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</pre>
<h3>BEAUTIFY</h3>
<p>It helps in building representations of compound objects, including lists and dictionaries. For example,</p>
<pre class="prettyprint notranslate">
{{ = BEAUTIFY({"a": ["hello", XML("world")], "b": (1, 2)})}}
</pre>
<p>It returns an XML object serializable to XML, with a representation of its constructor argument. In this case, the representation would be &minus;</p>
<pre class="prettyprint notranslate">
{"a": ["hello", XML("world")], "b": (1, 2)}
</pre>
<p>The output will be rendered as &minus;</p>
<pre class="prettyprint notranslate">
&lt;table&gt;
   &lt;tr&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;:&lt;/td&gt;
      &lt;td&gt;hello&lt;br /&gt;world&lt;/td&gt;
   &lt;/tr&gt;
   
   &lt;tr&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;:&lt;/td&gt;
      &lt;td&gt;1&lt;br /&gt;2&lt;/td&gt;
   &lt;/tr&gt;
&lt;/table&gt;
</pre>
<h2>Server-side DOM Rendering</h2>
<p>Server-side rendering allows a user to pre-render the initial state of web2py components. All the derived helpers provide search element and elements to render DOM on server side.</p>
<p>The <b>element</b> returns the first child element matching a specified condition. On the other hand, <b>elements</b> return a list of all the matching children. Both use same syntax.</p>
<p>This can be demonstrated with the following example &minus;</p>
<pre class="prettyprint notranslate">
a = DIV(DIV(DIV('a', _id = 'target',_class = 'abc')))
d = a.elements('div#target')
d[0][0] = 'changed'
print a
</pre>
<p>The output is given as &minus;</p>
<pre class="result notranslate">
&lt;div&gt;&lt;div&gt;&lt;div id = "target" class = "abc"&gt;changed&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
</pre>
<h2>Page Layout</h2>
<p>Views are used to display the output to the end users. It can extend as well as include other views as well. This will implement a tree-like structure.</p>
<p>Example &minus; <b>“index.html”</b> extends to <b>“layout.html”</b> which can include <b>“menu.html”</b> which in turn includes <b>“header.html”</b>.</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
&lt;h1&gt;Hello World&lt;/h1&gt;
{{include 'page.html'}}
</pre>
<h3>Example</h3>
<p>In the previous chapters, we created models and controllers for the company module. Now, we will focus on the creation of view, which helps in rendering the display of data.</p>
<p>By default, the views in web2py include <b>layout.html</b> and <b>index.html</b>, which defines the overall section of displaying data.</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
&lt;h2&gt;Companies&lt;/h2&gt;

&lt;table&gt;
   {{for company in companies:}}
   &lt;tr&gt;
      &lt;td&gt;{{ = A(company.name, _href = URL('contacts', args = company.id))}}&lt;/td&gt;
      &lt;td&gt;{{ = A('edit', _href = URL('company_edit', args = company.id))}}&lt;/td&gt;
   &lt;/tr&gt;
   
   {{pass}}
   &lt;tr&gt;
      &lt;td&gt;{{ = A('add company', _href = URL('company_create'))}}&lt;/td&gt;
   &lt;/tr&gt;
	
&lt;/table&gt;
</pre>
<p>The output will be as follows &minus;</p>
<img src="https://www.tutorialspoint.com/web2py/images/view_creation.jpg" alt="View Creation" />
<h1>Web2py - Database Abstraction Layer</h1>
<p>The <b>Database Abstraction Layer (DAL)</b> is considered as the major strength of web2py. The DAL exposes a simple Applications Programming Interface (API) to the underlying SQL syntax.</p>
<p>In this chapter, we will get to know the non-trivial applications of DAL, such as building queries to search by tags efficiently and building a hierarchical category tree.</p>
<p>Some important features of DAL are &minus;</p>
<ul class="list">
<li><p>web2py includes a Database Abstraction Layer (DAL), an API which maps Python objects into database objects. The database objects can be queries, tables and records.</p></li>
<li><p>The DAL dynamically generates the SQL in real time using the specified dialect for the database back end, so that it is not mandatory for a developer to write complete SQL query.</p></li>
<li><p>The major advantage of using DAL is that the applications will be portable with different kinds of databases.</p></li>
</ul>
<h2>Getting Started with DAL</h2>
<p>Most applications in web2py require a database connection. Therefore, building the database model is the first step in the design of an application.</p>
<p>Consider the newly created application named <b>“helloWorld”</b>. The database is implemented under the Models of the application. All the models for the respective application are comprised under file named &minus; <b>models/db_custom.py.</b></p>
<p>The following steps are used for implementing DAL &minus;</p>
<h3>Step 1 - DAL Constructor</h3>
<p>Establish a database connection. This is created using DAL object which is also called the DAL constructor.</p>
<pre class="result notranslate">
db = DAL ('sqlite://storage.sqlite')
</pre>
<p>The notable feature of DAL is that it allows multiple connections with the same database or with different databases, even with different types of database. It is observed that this line is already in the file <b>models/db.py</b>. Therefore, you may not need it, unless you deleted it or need to connect to a different database. By default, web2py connects to a SQLite database stored in file <b>storage.sqlite</b>.</p>
<p>This file is located in the application's databases folder. If the file is absent, it is created by web2py when the application is first executed.</p>
<p>SQLite is fast, and stores all the data in one single file. This means that your data can be easily transferred from one application to another. In fact, the SQLite database(s) are packaged by web2py together with the applications. It provides full SQL support, including translations, joins, and aggregates.</p>
<p>There are two disadvantages of SQLite.</p>
<ul class="list">
<li><p>One is that it does not enforce column types, and there is no ALTER TABLE except for adding and dropping columns.</p></li>
<li><p>The other disadvantage is that the entire database is locked by any transaction that requires write access.</p></li>
</ul>
<h3>Step 2 - Table Constructor</h3>
<p>Once the connection with database is established, we can use the <b>define_table</b> method to define new tables.</p>
<p>For example &minus;</p>
<pre class="result notranslate">
db.define_table('invoice',Field('name'))
</pre>
<p>The above method is also used among Table constructor. The syntax for the table constructor is the same. The first argument is the table name, and it is followed by a list of <b>Field(s)</b>. The field constructor takes the following arguments &minus;</p>
<table class="table table-bordered">
<tr>
<th width="10%">Sr.No</th>
<th style="text-align:center;">Arguments &amp; Usage</th>
</tr>
<tr>
<td style="text-align:center;">1</td>
<td>
<p><b>The field name</b></p>
<p>Name of the field in table.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">2</td>
<td>
<p><b>The field type</b></p>
<p>takes values having any of the datatypes such as string (default), text, boolean, integer and so on.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">3</td>
<td>
<p><b>Length</b></p>
<p>Defines the maximum length.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">4</td>
<td>
<p><b>default = None</b></p>
<p>This is the default value when a new record is inserted.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">5</td>
<td>
<p><b>update = None</b></p>
<p>This works the same as default, but the value is used only on update, not on insert.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">6</td>
<td>
<p><b>Notnull</b></p>
<p>This specifies whether the field value can be NULL or not.</p></td>
</tr>
<tr>
<td style="text-align:center;">7</td>
<td>
<p><b>readable = True</b></p>
<p>This specifies whether the field is readable in forms or not.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">8</td>
<td>
<p><b>writable = True</b></p>
<p>This specifies whether the field is writable in forms or not.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">9</td>
<td>
<p><b>label = "Field Name"</b></p>
<p>This is the label to be used for this field in forms.</p>
</td>
</tr>
</table>
<p>The <b>define_table</b> method also takes three named arguments &minus;</p>
<h3>Syntax</h3>
<pre class="result notranslate">
db.define_table('....',migrate=True, fake_migrate=False, format = '%(id)s')
</pre>
<ul class="list">
<li><p><b>migrate = True</b> &minus; This instructs web2py to create the table if it does not exist, or alter it if it does not match the model definition.</p></li>
<li><p><b>fake_migrate = False</b> &minus; If the model matches the database table content, then set fake_migrate = True which helps web2py to rebuild a data.</p></li>
<li><p><b>format = '%(id)s'</b> &minus; This is a format string that determines how records on the given table should be represented.</p></li>
</ul>
<h2>Generating Raw SQL</h2>
<p>Using DAL, we can establish a connection to database and create new tables and their fields using the table constructor and field constructor.</p>
<p>Sometimes, it is necessary to generate SQL statements to conform to the necessary output. web2py includes various functions, which help in generating raw SQL, which are given as follows &minus;</p>
<h3>_insert</h3>
<p>It helps in fetching insert statements for the given table. For example,</p>
<pre class="prettyprint notranslate">
print db.person._insert(name ='ABC')
</pre>
<p>It will retrieve the insert statement for table named “person”.</p>
<p>SQL statement output &minus;</p>
<pre class="result notranslate">
INSERT INTO person(name) VALUES ('ABC');
</pre>
<h3>_count</h3>
<p>It helps in fetching SQL statement, which gives the count of records. For example, consider a table named ‘person’ and we need to find the count of persons with name ‘ABC’.</p>
<pre class="prettyprint notranslate">
print db(db.person.name ==' ABC ')._count()
</pre>
<p>SQL statement output &minus;</p>
<pre class="result notranslate">
SELECT count(*) FROM person WHERE person.name = ' ABC ';
</pre>
<h3>_select</h3>
<p>It helps in fetching select SQL statements. For example, consider a table named ‘person’ and we need to find the list of persons with name ‘ABC’.</p>
<pre class="prettyprint notranslate">
print db(db.person.name == ' ABC ')._select()
</pre>
<p>SQL statement output &minus;</p>
<pre class="result notranslate">
SELECT person.name FROM person WHERE person.name = ' ABC ';
</pre>
<h3>_delete</h3>
<p>It helps in fetching the <b>delete SQL</b> statements. For example, consider for table named ‘person’ and we need to delete the statements with name ‘ABC’</p>
<pre class="prettyprint notranslate">
print db(db.person.name == ' ABC ')._delete()
</pre>
<p>SQL statement output &minus;</p>
<pre class="result notranslate">
DELETE FROM person WHERE person.name = ' ABC ';4
</pre>
<h3>_update</h3>
<p>It helps in fetching updated SQL statements. For example, consider for table named ‘person’ and we need to update a column name with some other value</p>
<pre class="prettyprint notranslate">
print db(db.person.name == ' ABC ')._update()
</pre>
<p>SQL statement output &minus;</p>
<pre class="result notranslate">
UPDATE person SET WHERE person.name = ’Alex’;
</pre>
<h2>Issues with DAL (Gotchas)</h2>
<h3>SQLite</h3>
<p>SQLite lacks the support of dropping or altering the columns. Deleting a field from the table keeps it active in the database, due to which web2py will not be aware of any changes made.</p>
<p>In this case, it is necessary to set the <b>fake_migrate = True</b> which will help to redefine the metadata such that any changes such as alter or delete will be kept under the knowledge of web2py.</p>
<p>SQLite does not support Boolean types. For this, web2py internally maps the Booleans to 1 character string, with 'T' and 'F' representing <b>true</b> and <b>False</b> respectively.</p>
<h3>MySQL</h3>
<p>MySQL does not support ALTER TABLE feature. Thus, migration of database involves multiple commits. This situation can be avoided by setting the parameter <b>fake_migrate = True</b> while defining the database, which will persist all the metadata.</p>
<h3>Oracle</h3>
<p>Oracle does not support the feature of pagination of records. It also lacks the support for the keywords OFFSET or limit. For this, web2py achieves pagination with the help of a complex three-way nested select of DAL. DAL needs to handle pagination on its own, if Oracle database has been used.</p>
<h1>Web2py - Forms &amp; Validators</h1>
<p>web2py comes with powerful functions for form generation. Four distinct ways to build forms in web2py are as follows &minus;</p>
<ul class="list">
<li><p><b>FORM</b> &minus; In terms of HTML helpers, it is considered as a low-level implementation. A FORM object is aware of its field contents.</p></li>
<li><p><b>SQLFORM</b> &minus; It provides the functionalities of Create, Update and Delete to the existing database.</p></li>
<li><p><b>SQLFORM.factory</b> &minus; It is considered as abstraction layer on the top of SQLFORM, which generates a form similar to SQLFORM. Here, there is no need to create a new database.</p></li>
<li><p><b>CRUD Methods</b> &minus; As the name suggests, it provides Create, Retrieve, Update and Delete features with the similar functionalities based on SQLFORM.</p></li>
</ul> 
<h2>FORM</h2>
<p>Consider an application, which accepts an input from the user and has a “submit” button to submit the response.</p>
<h3>Controller</h3>
<p>“default.py” controller will include the following associated function</p>
<pre class="prettyprint notranslate">
def display_form():
   return dict()
</pre>
<h3>View</h3>
<p>The associated view "default/display_form.html" will render the display of form in HTML as &minus;</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
&lt;h2&gt;Basic Form&lt;/h2&gt;

&lt;form enctype = "multipart/form-data" action = "{{= URL()}}" method = "post"&gt;
   Your name:
   &lt;input name = "name" /&gt;
   &lt;input type = "submit" /&gt;
&lt;/form&gt;

&lt;h2&gt;Submitted variables&lt;/h2&gt;
{{= BEAUTIFY(request.vars)}}
</pre>
<p>The above example is the normal HTML form, which asks for the user input. The same form can be generated with the helpers like FORM object.</p>
<h3>Controller</h3>
<pre class="prettyprint notranslate">
def display_form():
   form = FORM('Value:', INPUT(_value = 'name'), INPUT(_type = 'submit'))
   return dict(form = form)
</pre>
<p>The above function in “default.py” controller includes FORM object (HTML helper) which helps in creation of form.</p>
<h3>View</h3>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
&lt;h2&gt;Basic form&lt;/h2&gt;

{{= form}}
&lt;h2&gt;Submitted variables&lt;/h2&gt;

{{= BEAUTIFY(request.vars)}}
</pre>
<p>He form which is generated by the statement <b>{{= form}}</b> serializes the FORM object. When a user fills the form and clicks on the submit button, the form self-submits, and the variable <b>request.vars.value</b> along with its input value is displayed at the bottom.</p>
<h2>SQLFORM</h2>
<p>It helps in creation of a form to the existing database. The steps for its implementation are discussed below.</p>
<p>Establishing connection with database using DAL, this is created using DAL object which is also called DAL constructor. After establishing the connection, user can create the respective table.</p>
<pre class="prettyprint notranslate">
db = DAL('sqlite://storage.sqlite')
db.define_table('employee', Field('name', requires = IS_NOT_EMPTY()))
</pre>
<p>Thus, we have created a table named “employee”. The controller builds the form and button with the following statements &minus;</p>
<pre class="prettyprint notranslate">
form = SQLFORM(
   db.mytable,
   record = mytable_index,
   deletable = True,
   submit_button = T('Update')
)
</pre>
<p>Therefore, for the employee table created, the modification in the controller would be &minus;</p>
<pre class="prettyprint notranslate">
def display_form():
   form = SQLFORM(db.person)
</pre>
<p>There is no modification in <b>View</b>. In the new controller, it is necessary build a FORM, since the SQLFORM constructor built one from the table db.employee is defined in the model. The new form, when serialized, appears as follows &minus;</p>
<pre class="prettyprint notranslate">
&lt;form enctype = "multipart/form-data" action = "" method = "post"&gt;
   
   &lt;table&gt;
      &lt;tr id = "employee_name__row"&gt;
         &lt;td&gt;
            &lt;label id = "person_name__label" for = "person_name"&gt;Your name: &lt;/label&gt;
         &lt;/td&gt;
         
         &lt;td&gt;
            &lt;input type = "text" class = "string" name = "name" value = "" id = "employee_name" /&gt;
         &lt;/td&gt;
         
         &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;

      &lt;tr id = "submit_record__row"&gt;
         &lt;td&gt;&lt;/td&gt;
         &lt;td&gt;&lt;input value = "Submit" type = "submit" /&gt;&lt;/td&gt;
         &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
		
   &lt;/table&gt;

   &lt;input value = "9038845529" type = "hidden" name = "_formkey" /&gt;
   &lt;input value = "employee" type = "hidden" name = "_formname" /&gt;
	
&lt;/form&gt;
</pre>
<p>All tags in the form have names derived from the table and field name.</p>
<p>An <b>SQLFORM</b> object also deals with "upload" fields by saving uploaded files in the "uploads" folder. This is done automatically. SQLFORM displays “Boolean” values in the form of checkboxes and text values with the help of <b>“textareas”</b>.</p>
<p>SQLFORM also uses the process method.This is necessary if the user wants to keep values with an associated SQLFORM.</p>
<p>If <b>form.process(keepvalues = True)</b> then it is accepted.</p>
<h3>Example</h3>
<pre class="prettyprint notranslate">
def display_form():
   form = SQLFORM(db.employee)
if form.process().accepted:
   response.flash = 'form accepted'

elif form.errors:
   response.flash = 'form has errors'
else:
   response.flash = 'please fill out the form'

return dict(form = form)
</pre>
<h2>SQLFORM.factory</h2>
<p>Sometimes, the user needs to generate a form in a way that there is an existing database table without the implementation of the database. The user simply wants to take an advantage of the SQLFORM capability.</p>
<p>This is done via <b>form.factory</b> and it is maintained in a session.</p>
<pre class="prettyprint notranslate">
def form_from_factory():
   form = SQLFORM.factory(
      Field('your_name', requires = IS_NOT_EMPTY()),
      Field('your_image', 'upload'))

   if form.process().accepted:
      response.flash = 'form accepted'
      session.your_name = form.vars.your_name
      session.your_image = form.vars.your_image
   elif form.errors:
      response.flash = 'form has errors'

   return dict(form = form)
</pre>
<p>The form will appear like SQLFORM with name and image as its fields, but there is no such existing table in database.</p>
<p>The "default/form_from_factory.html" view will represent as &minus;</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
{{= form}}
</pre>
<h2>CRUD Methods</h2>
<p><b>CRUD</b> is an API used on top of SQLFORM. As the name suggests, it is used for creation, retrieval, updating and deletion of appropriate form.</p>
<p>CRUD, in comparison to other APIs in web2py, is not exposed; therefore, it is necessary that it should be imported.</p>
<pre class="prettyprint notranslate">
from gluon.tools import Crud
crud = Crud(db)
</pre>
<p>The CRUD object defined above provides the following API &minus;</p>
<table class="table table-bordered">
<tr>
<th width="10%">Sr.No</th>
<th style="text-align:center;">API &amp; Functionality</th>
</tr>
<tr>
<td style="text-align:center;">1</td>
<td>
<p><b>crud.tables()</b></p>
<p>Returns a list of tables defined in the database.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">2</td>
<td>
<p><b>crud.create(db.tablename)</b></p>
<p>Returns a create form for the <b>table tablename</b>.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">3</td>
<td>
<p><b>crud.read(db.tablename, id)</b></p>
<p>Returns a read-only form for <b>tablename</b> and record id.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">4</td>
<td>
<p><b>crud.delete(db.tablename, id)</b></p>
<p>deletes the record</p>
</td>
</tr>
<tr>
<td style="text-align:center;">5</td>
<td>
<p><b>crud.select(db.tablename, query)</b></p>
<p>Returns a list of records selected from the table.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">6</td>
<td>
<p><b>crud.search(db.tablename)</b></p>
<p>Returns a tuple (form, records) where form is a search form.</p>
</td>
</tr>
<tr>
<td style="text-align:center;">7</td>
<td>
<p><b>crud()</b></p>
<p>Returns one of the above based on the request.args().</p>
</td>
</tr>
</table>
<h2>Creation of Form</h2>
<p>Let us create a form. Follow the codes given below.</p>
<h3>Model</h3>
<p>A new model is created under the <b>models</b> folder of the application. The name of the file would be <b>“dynamic_search.py”</b>.</p>
<pre class="prettyprint notranslate">
def build_query(field, op, value):
   if op == 'equals':
      return field == value
   
   elif op == 'not equal':
      return field != value
   
   elif op == 'greater than':
      return field &gt; value
   
   elif op == 'less than':
      return field &lt; value
   
   elif op == 'starts with':
      return field.startswith(value)
   
   elif op == 'ends with':
      return field.endswith(value)
   
   elif op == 'contains':
      return field.contains(value)

def dynamic_search(table):
   tbl = TABLE()
   selected = []
   ops = ['equals', 
      'not equal',
      'greater than',
      'less than',
      'starts with',
      'ends with',
      'contains']
		
query = table.id &gt; 0

for field in table.fields:
   chkval = request.vars.get('chk'&plus;field,None)
   txtval = request.vars.get('txt'&plus;field,None)
   opval = request.vars.get('op'&plus;field,None)
	
row = TR(TD(INPUT(_type = "checkbox",_name = "chk"&plus;field,value = chkval == 'on')),
   TD(field),TD(SELECT(ops,_name = "op"&plus;field,value = opval)),
   TD(INPUT(_type = "text",_name = "txt"&plus;field,_value = txtval)))
	
tbl.append(row)

if chkval:
   if txtval:
      query &amp;= build_query(table[field], opval,txtval)
      selected.append(table[field])
      form = FORM(tbl,INPUT(_type="submit"))
      results = db(query).select(*selected)
   return form, results
</pre>
<h3>Controller</h3>
<p>The associated file namely <b>“dynamic_search.py”</b> under controllers section will include the following code &minus;</p>
<pre class="prettyprint notranslate">
def index():
   form,results = dynamic_search(db.things)
   return dict(form = form,results = results)
</pre>
<h3>View</h3>
<p>We can render this with the following view.</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
{{= form}}
{{= results}}
</pre>
<p>Here is what it looks like &minus;</p>
<img src="https://www.tutorialspoint.com/web2py/images/view.jpg" alt="View" />
<h1>Web2py - Email &amp; SMS</h1>
<p>web2py includes functionalities of sending e-mail and SMS to the user. It uses libraries to send emails and sms.</p>
<h2>Setting Up Email</h2>
<p>The in-built class namely <b>gluon.tools.Mail</b> class is used to send email in web2py framework. The mailer can be defined with this class.</p>
<pre class="prettyprint notranslate">
from gluon.tools import Mail
mail = Mail()
mail.settings.server = 'smtp.example.com:25'
mail.settings.sender = 'abc@example.com'
mail.settings.login = 'username:password'
</pre>
<p>The sender email as mentioned in the above example along with the password will be authenticated each time when an email is sent.</p>
<p>If the user needs to experiment or use for some debugging purpose, this can be achieved using the following code.</p>
<pre class="prettyprint notranslate">
mail.settings.server = 'logging'
</pre>
<p>Now, all the emails will not be sent but it will be logged in the console.</p>
<h2>Sending an Email</h2>
<p>Once we have set the configuration settings for an email using mail object, an email can be sent to many users.</p>
<p>The complete syntax of <b>mail.send()</b> is as follows &minus;</p>
<pre class="prettyprint notranslate">
send(
   to, subject = 'Abc',
   message = 'None', attachments = [],
   cc = [], bcc = [], reply_to = [],
   sender = None, encoding = 'utf-8',
   raw = True, headers = {}
)
</pre>
<p>The implementation of <b>mail.send()</b> is given below.</p>
<pre class="prettyprint notranslate">
mail.send(
   to = ['sender@example.com'], subject = 'hello',
   reply_to = 'abc@example.com',
   message = 'Hello ! How are you?'
)
</pre>
<p><b>Mail</b> returns a Boolean expression based on the response of the mailing server, that the mail is received by the end user. It returns <b>True</b> if it succeeds in sending an email to the user.</p>
<p>The attributes to, <b>cc</b> and <b>bcc</b> includes the list of valid email addresses for which the mail is intended to be sent.</p>
<h2>Sending SMS</h2>
<p>The implementation for sending SMS messages differs from sending emails in web2py framework as it will require third party service that can relay the messages to the receiver. The third party service is not a free service and will obviously differ based on geographical region (from country to country).</p>
<p>web2py uses a module to help sending SMS with the following process &minus;</p>
<pre class="prettyprint notranslate">
from gluon.contrib.sms_utils
import SMSCODES, sms_email
email = sms_email('1 (111) 111-1111','T-Mobile USA (abc)')
mail.send(to = email, subject = 'test', message = 'test')
</pre>
<p>In the above example, <b>SMSCODES</b> is the dictionary maintained by web2py that maps the names of the major phone companies to the email address postfix.</p>
<p>Telephone companies usually treat emails originating from third party services as spam. A better method is that the phone companies themselves relay the SMS. Every phone company includes a unique email address for every mobile number in its storage and the SMS can be sent directly to the email.</p>
<p>In the above example,</p>
<ul class="list">
<li><p>The <b>sms_email</b> function takes a phone number (as a string), which returns the email address of the phone.</p></li>
<li><p>The scaffolding app includes several files. One of them is models/db.py, which imports four.</p></li>
<li><p>Classes from <b>gluon.tools</b> include mail libraries as well and defines the various global objects.</p></li>
<li><p>The scaffolding application also defines tables required by the auth object, such as <b>db.auth_user</b>. The default scaffolding application is designed to minimize the number of files, not to be modular. In particular, the model file, <b>db.py</b>, contains the configuration, which in a production environment, is best kept in separate files.</p></li>
</ul>
<p>Here, we suggest creating a configuration file &minus;</p>
<pre class="prettyprint notranslate">
from gluon.storage import Storage
   settings = Storage()
   settings.production = False
   
   if
      settings.production:
      settings.db_uri = 'sqlite://production.sqlite'
      settings.migrate = False
   else:
      settings.db_uri = 'sqlite://development.sqlite'
      settings.migrate = True
      settings.title = request.
      settings.subtitle = 'write something here'
		
      settings.author = 'you'
      settings.author_email = 'you@example.come'
		
      settings.keywords = ''
      settings.description = ''
      settings.layout_theme = 'Default'
      settings.security_key = 'a098c897-724b-4e05-b2d8-8ee993385ae6'
		
      settings.email_server = 'localhost'
      settings.email_sender = 'you@example.com'
      settings.email_login = ''
		
      settings.login_method = 'local'
      settings.login_config = ''
</pre>
<h1>Web2py - Access Control</h1>
<h2>Authentication</h2>
<p>Almost every application needs to be able to authenticate users and set permissions. web2py comes with an extensive and customizable role-based access control <b>mechanism.web2py</b>. It also supports the protocols, such as CAS, OpenID, OAuth 1.0, LDAP, PAM, X509, and many more.</p>
<p>web2py includes a mechanism known as Role Based Access Control mechanism (RBAC) which is an approach to restricting system access to authorized users. The web2py class that implements RBAC is called Auth.</p>
<p>Look at the schema given below.</p>
<img src="https://www.tutorialspoint.com/web2py/images/auth.jpg" alt="Auth" />
<p><b>Auth</b> defines the following tables &minus;</p>
<table class="table table-bordered">
<tr>
<th width="10%">Sr.No</th>
<th style="text-align:center;">Table Name &amp; Description</th>
</tr>
<tr>
<td>1</td>
<td><p><b>auth_user</b></p>
<p>stores users' name, email address, password, and status.</p></td>
</tr>
<tr>
<td>2</td>
<td><p><b>auth_group</b></p>
<p>stores groups or roles for users in a many-to-many structure</p></td>
</tr>
<tr>
<td>3</td>
<td><p><b>auth_membership</b></p>
<p>Stores the information of links users and groups in a many-to-many structure</p></td>
</tr>
<tr>
<td>4</td>
<td><p><b>auth_permission</b></p>
<p>The table links groups and permissions.</p></td>
</tr>
<tr>
<td>5</td>
<td><p><b>auth_event</b></p>
<p>logs changes in the other tables and successful access</p></td>
</tr>
<tr>
<td>6</td>
<td><p><b>auth_cas</b></p>
<p>It is used for Central Authentication Service</p></td>
</tr>
</table>
<h2>Customizing Auth</h2>
<p>There are two ways to customize Auth.</p>
<ul class="list">
<li><p>To define a custom <b>db.auth_user</b> table from scratch.</p></li>
<li><p>Let web2py define the <b>auth</b> table.</p></li>
</ul>
<p>Let us look at the last method of defining the <b>auth</b> table. In the <b>db.py</b> model, replace the following line &minus;</p>
<pre class="result notranslate">
auth.define_tables()
</pre>
<p>Replace it with the following code &minus;</p>
<pre class="prettyprint notranslate">
auth.settings.extra_fields['auth_user'] = [
   Field('phone_number',requires = IS_MATCH('\d{3}\-\d{3}\-\d{4}')),
   Field('address','text')
]

auth.define_tables(username = True)
</pre>
<p>The assumption is that each user consists of phone number, username and address.</p>
<p><b>auth.settings.extra_fields</b> is a dictionary of extra fields. The key is the name of the auth table to which to add the extra fields. The value is a list of extra fields. Here, we have added two extra fields, <b>phone_number and address</b>.</p>
<p><b>username</b> has to be treated in a special way, because it is involved in the authentication process, which is normally based on the email field. By passing the username argument to the following line, it is informed to web2py that we want the username field, and we want to use it for login instead of the email field. It acts like a primary key.</p>
<pre class="result notranslate">
auth.define_tables(username = True)
</pre>
<p>The username is treated as a unique value. There may be cases when registration happens outside the normal registration form. It also happens so, that the new user is forced to login, to complete their registration.</p>
<p>This can be done using a dummy field, <b>complete_registration</b> that is set to <b>False</b> by default, and is set to <b>True</b> when they update their profile.</p>
<pre class="prettyprint notranslate">
auth.settings.extra_fields['auth_user'] = [
   Field('phone_number',requires = IS_MATCH('\d{3}\-\d{3}\-\d{4}'),
   comment = "i.e. 123-123-1234"),
   Field('address','text'),
   Field('complete_registration',default = False,update = True,
   writable = False, readable = False)
]

auth.define_tables(username = True)
</pre>
<p>This scenario may intend the new users, upon login, to complete their registration.</p>
<p>In <b>db.py</b>, in the models folder, we can append the following code &minus;</p>
<pre class="prettyprint notranslate">
if auth.user and not auth.user.complete_registration:
if not (request.controller,request.function) == ('default','user'):
   redirect(URL('default','user/profile'))
</pre>
<p>This will force the new users to edit their profile as per the requirements.</p>
<h2>Authorization</h2>
<p>It is the process of granting some access or giving permission of something to the users.</p>
<p>In web2py once the new user is created or registered, a new group is created to contain the user. The role of the new user is conventionally termed as <b>“user_[id]”</b> where id is the unique identification of the user.</p>
<p>The default value for the creation of the new group is &minus;</p>
<pre class="result notranslate">
auth.settings.create_user_groups = "user_%(id)s"
</pre>
<p>The creation of the groups among the users can be disabled by &minus;</p>
<pre class="result notranslate">
auth.settings.create_user_groups = None
</pre>
<p>Creation, granting access to particular members and permissions can be achieved programmatically with the help of appadmin also.</p>
<p>Some of the implementations are listed as follows &minus;</p>
<table class="table table-bordered">
<tr>
<th style="width:13%;">Sr.No</th>
<th style="text-align:center;">Command &amp; Usage</th>
</tr>
<tr>
<td>1</td>
<td><p><b>auth.add_group('role', 'description')</b></p>
<p>returns the id of the newly created group.</p></td>
</tr>
<tr>
<td>2</td>
<td><p><b>auth.del_group(group_id)</b></p>
<p>Deletes the group with the specified id</p></td>
</tr>
<tr>
<td>3</td>
<td><p><b>auth.del_group(auth.id_group('user_7'))</b></p>
<p>Deletes the user group with the given identification.</p></td>
</tr>
<tr>
<td>4</td>
<td><p><b>auth.user_group(user_id)</b></p>
<p>Returns the value of id of group uniquely associated for the given user.</p></td>
</tr>
<tr>
<td>5</td>
<td><p><b>auth.add_membership(group_id, user_id)</b></p>
<p>Returns the value of user_id for the given group_id</p></td>
</tr>
<tr>
<td>6</td>
<td><p><b>auth.del_membership(group_id, user_id)</b></p>
<p>Revokes access of the given member_id i.e. user_id from the given group.</p></td>
</tr>
<tr>
<td>7</td>
<td><p><b>auth.has_membership(group_id, user_id, role)</b></p>
<p>Checks whether user_id belongs to the given group.</p></td>
</tr>
</table>
<h2>Central Authentication Service (CAS)</h2>
<p>web2py provides an industry standard namely, Client Authentication Service – CAS for both client and server built-in web2py. It is a third party authentication tool.</p>
<p>It is an open protocol for distributed authentication. The working of CAS is as follows &minus;</p>
<ul class="list">
<li><p>If the user visits the website, the protocol checks whether the user is authenticated.</p></li>
<li><p>If the user is not authenticated to the application, the protocol redirects to the page where the user can register or log in to the application.</p></li>
<li><p>If the registration is completed, user receives an email. The registration is not complete until and unless user verifies the email.</p></li>
<li><p>After successful registration, the user is authenticated with the key, which is used by CAS appliance.</p></li>
<li><p>The key is used to get the credentials of user via HTTP request, which is set in the background.</p></li>
</ul>
<h1>Web2py - Services</h1>
<p>web2py provides support for various protocols like XML, JSON, RSS, CSV, XMLRPC, JSONRPC, AMFRPC, and SOAP. Each of those protocols is supported in multiple ways, and we make a distinction between &minus;</p>
<ul class="list">
<li>Rendering the output of a function in a given format.</li>
<li>Remote Procedure Calls.</li>
</ul>
<h2>Rendering a Dictionary</h2>
<p>Consider the following code which maintains the count of the sessions.</p>
<pre class="prettyprint notranslate">
def count():
   session.counter = (session.counter or 0) &plus; 1
   return dict(counter = session.counter, now = request.now)
</pre>
<p>The above function increases the number of counts as and when the user visits the page. Suppose the given function is defined in <b>“default.py”</b> controller of web2py application. The page can be requested with the following URL &minus; <b>http://127.0.0.1:8000/app/default/count</b></p>
<p>web2py can render the above page in different protocols and by adding extension to the URL, like &minus;</p>
<p><b>http://127.0.0.1:8000/app/default/count.html</b></p>
<p><b>http://127.0.0.1:8000/app/default/count.xml</b></p>
<p><b>http://127.0.0.1:8000/app/default/count.json</b></p>
<p>The dictionary returned by the above action will be rendered in HTML, XML and JSON.</p>
<h2>Remote Procedure Calls</h2>
<p>web2py framework provides a mechanism which converts a function into a web service. The mechanism described here differs from the mechanism described before because &minus;</p>
<ul class="list">
<li>Inclusion of arguments in function.</li>
<li>The function must be defined in a model.</li>
<li>It enforces a more strict URL naming convention.</li>
<li>It works for a fixed set of protocols and it is easily extensible.</li>
<li>To use this feature it is necessary to import and initiate a service object.</li>
</ul>
<p>To implement this mechanism, at first, you must import and instantiate a service object.</p>
<pre class="prettyprint notranslate">
from gluon.tools import Service
service = Service()
</pre>
<p>This is implemented in the <b>"db.py"</b> model file in the scaffolding application. <b>Db.py</b> model is the default model in web2py framework, which interacts with the database and the controller to achieve the desired output to the users.</p>
<p>After implementing, the service in model can be accessed from the controllers as and when required.</p>
<p>The following example shows various implementations of remote procedure calls using web services and many more.</p>
<h2>Web Services</h2>
<p>Web Services can be defined as a standardized way of integrating Web-based applications using the protocols like XML, SOAP, WSDL and UDDI.</p>
<p>web2py supports most of them, but the integration will be quite tricky.</p>
<h3>Consuming a web2py JSON service with jQuery</h3>
<p>There are many ways to return JSON form web2py, but here we consider the case of a JSON service. For example &minus;</p>
<pre class="prettyprint notranslate">
def consumer():return dict()@service.json
def get_days():return ["Sun", "Mon", "Tues", "Wed", "Thurs", "Fri", "Sat"]
def call():return service()
</pre>
<p>Here, we observe that &minus;</p>
<ul class="list">
<li><p>the function just returns an empty dictionary to render the view, which will consume the service.</p></li>
<li><p><b>get_days</b> defines the service, and the function call exposes all registered services.</p></li>
<li><p><b>get_days</b> does not need to be in the controller, and can be in a model.</p></li>
<li><p><b>call</b> is always in the default.py scaffolding controller.</p></li>
</ul>
<p>View with the consumer actions are as follows &minus;</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
&lt;div id = "target"&gt;&lt;/div&gt;

&lt;script&gt;
   jQuery.getJSON("{{= URL('call',args = ['json','get_days'])}}",
      function(msg){
         jQuery.each(msg, function(){ jQuery("#target").
         append(this &plus; "&lt;br /&gt;"); } )
      }
   );
&lt;/script&gt;
</pre>
<p>The first argument of <b>jQuery.getJSON</b> is the URL of the following service &minus; <b>http://127.0.0.1:8000/app/default/call/json/get_days</b></p>
<p>This always follows the pattern &minus;</p>
<pre class="result notranslate">
http://&lt;domain&gt;/&lt;app&gt;/&lt;controller&gt;/call/&lt;type&gt;/&lt;service&gt;
</pre>
<p>The URL is in between <b>{{...}}</b>, because it is resolved at the server-side, while everything else is executed at the client-side. The second argument of <b>jQuery.getJSON</b> is a callback, which will be passed the JSON response.</p>
<p>In this case, the callback loops over each item in the response (a list of week days as strings), and appends each string, followed by a <b>&lt;br/&gt;</b> to the <b>&lt;div id = "target"&gt;</b>.</p>
<p>In this way, web2py manages implementation of web services using <b>jQuery.getJSON</b>.</p>
<h1>Web2py - Adding Ajax Effects</h1>
<p>In this chapter, we will discuss examples of integration of <b>jQuery</b> plugins with <b>web2py</b>. These plugins help in making forms and tables more interactive and friendly to the user, thus improving the usability of your application.</p>
<p>In particular, we will learn</p>
<ul class="list">
<li><p>how to improve the multi-select drop-down with an interactive add option button,</p></li>
<li><p>how to replace an input field with a slider, and</p></li>
<li><p>how to display tabular data using <b>jqGrid</b> and <b>WebGrid</b>.</p></li>
</ul>
<p>Although web2py is a server-side development component, the <b>welcome</b> scaffolding app includes the base <b>jQuery</b> library. This scaffolding web2py application "welcome" includes a file called <b>views/web2py_ajax.html</b>.</p>
<p>The contents of the view are as follows &minus;</p>
<pre class="prettyprint notranslate">
&lt;script type = "text/javascript"&gt;&lt;!--

   // These variables are used by the web2py_ajax_init function in web2py_ajax.js 
      (which is loaded below).
		
   var w2p_ajax_confirm_message = "{{= T('Are you sure you want to delete this object?')}}";
   var w2p_ajax_disable_with_message = "{{= T('Working...')}}";
   var w2p_ajax_date_format = "{{= T('%Y-%m-%d')}}";
   var w2p_ajax_datetime_format = "{{= T('%Y-%m-%d %H:%M:%S')}}";
   
   var ajax_error_500 = '{{=T.M('An error occured, please [[reload %s]] the page') %
	
      URL(args = request.args, vars = request.get_vars) }}'
		
//--&gt;&lt;/script&gt;

{{
   response.files.insert(0,URL('static','js/jquery.js'))
   response.files.insert(1,URL('static','css/calendar.css'))
   response.files.insert(2,URL('static','js/calendar.js'))
   response.files.insert(3,URL('static','js/web2py.js'))
   response.include_meta()
   response.include_files()
}}
</pre>
<p>The file consists of implementation of JavaScript and AJAX implementation. web2py will prevent the user from using other AJAX libraries such as Prototype, ExtJS, because it is always observed that it is easier to implement such libraries.</p>
<h2>JQuery Effects</h2>
<p>The default rendering of <b>&lt;select multiple = "true"&gt;..&lt;/select&gt;</b> is considered not so intuitive to use, in particular, when it is necessary to select non-contiguous options. This can not be called as an HTML shortcoming, but a poor design of most of the browsers. The presentation of the multiple select can be overwritten using JavaScript. This can be implemented using jQuery plugin called <b>jquery.multiselect.js</b>.</p>
<p>For this, a user should download the plugin <b>jquery.muliselect.js</b> from <b>http://abeautifulsite.net/2008/04/jquery-multiselect,</b> and place the corresponding files into <b>static/js/jquery.multiselect.js</b> and <b>static/css/jquery.multiselect.css</b>.</p>
<h3>Example</h3>
<p>The following code should be added in the corresponding view before <b>{{extend ‘layout.html’}}</b></p>
<pre class="prettyprint notranslate">
{{
   response.files.append('https://ajax.googleapis.com/ajax\
      /libs/jqueryui/1.8.9/jquery-ui.js')
   
   response.files.append('https://ajax.googleapis.com/ajax\
      /libs/jqueryui/1.8.9/themes/ui-darkness/jquery-ui.css')
   
   response.files.append(URL('static','js/jquery.multiSelect.js'))
   response.files.append(URL('static','css/jquery.\multiSelect.css'))
}}
</pre>
<p>Place the following after <b>{{extend 'layout.html'}}</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;script&gt;
   jQuery(document).ready(function(){jQuery('[multiple]').multiSelect();});
&lt;/script&gt;
</pre>
<p>This will help to style <b>multiselect</b> for the given form</p>
<h3>Controller</h3>
<pre class="prettyprint notranslate">
def index():
   is_fruits = IS_IN_SET(['Apples','Oranges','Bananas','Kiwis','Lemons'], multiple = True)
   form = SQLFORM.factory(Field('fruits','list:string', requires = is_fruits))
   
   if form.accepts(request,session):response.flash = 'Yummy!'
return dict(form = form)
</pre>
<p>This action can be tried with the following view &minus;</p>
<pre class="prettyprint notranslate">
{{
   response.files.append('https://ajax.googleapis.com/ajax\
      /libs/jqueryui/1.8.9/jquery-ui.js')
   
   response.files.append('https://ajax.googleapis.com/ajax\
      /libs/jqueryui/1.8.9/themes/ui-darkness/jquery-ui.css')
   
   response.files.append(URL('static','js/jquery.multiSelect.js'))
   response.files.append(URL('static','css/jquery.\multiSelect.css'))
}}

{{extend 'layout.html}}
&lt;script&gt;
   jQuery(document).ready(function(){jQuery('[multiple]'). multiSelect();});
&lt;/script&gt;
{{= form}}
</pre>
<p>The screenshot of the output is as follows &minus;</p>
<img src="https://www.tutorialspoint.com/web2py/images/controller_view.jpg" alt="controller view" />
<p>Some of the useful Jquery events are listed in the following table &minus;</p>
<table class="table table-bordered">
<tr>
<th style="width:10%;">Sr.No.</th>
<th style="text-align:center;">Event &amp; Usage</th>
</tr>
<tr>
<td>1</td>
<td><p><b>onchange</b></p>
<p>to be run when the element changes</p>
</td>
</tr>
<tr>
<td>2</td>
<td><p><b>onsubmit</b></p>
<p>to be run when the form is submitted</p>
</td>
</tr>
<tr>
<td>3</td>
<td><p><b>onselect</b></p>
<p>to be run when the element is selected</p>
</td>
</tr>
<tr>
<td>4</td>
<td><p><b>onblur</b></p>
<p>to be run when the element loses focus</p></td>
</tr>
<tr>
<td>5</td>
<td><p><b>onfocus</b></p>
<p>to be run when the element gets focus</p></td>
</tr>
</table>
<h2>JQuery and Ajax-jqGrid</h2>
<p>jqGrid is an Ajax-enabled JavaScript control built on jQuery that provides a solution for representing and manipulating tabular data. <b>jqGrid</b> is a client-side solution, and it loads data dynamically through Ajax callbacks, thus providing pagination, search popup, inline editing, and so on.</p>
<p>jqGrid is integrated into PluginWiki, but, here, we discuss it as a standalone for web2py programs that do not use the plugin. jqGrid deserves a book of its own but here we will only discuss its basic features and simplest integration.</p>
<p>The syntax of jqGrid will be as follows &minus;</p>
<pre class="result notranslate">
def JQGRID(
   table, fieldname = None,
   fieldvalue = None, col_widths = [],
   colnames = [], _id = None, fields = [],
   col_width = 80, width = 700,
   height = 300, dbname = 'db'
):
</pre>
<h1>Web2py - Components</h1>
<p>A component is defined as the functional part of a web page, which works autonomously. It can be composed of modules, controllers and views, which are embedded in a web page. The component in an application, must be localized tag and the performance is considered to be independent of module.</p>
<p>In web2py, the main focus is on using components that are loaded in page and which communicate with the component controller via AJAX.</p>
<p>web2py includes a function, which is called the <b>LOAD</b> function, which makes implementation of components easy without explicit JavaScript or AJAX programming.</p>
<p>Consider a simple web application namely “<b>test</b>” that extends the web2py application with custom model in file “<b>models/db_comments.py</b>”.</p>
<pre class="prettyprint notranslate">
db.define_table(
   'comment_post', Field('body','text',
   label = 'Your comment'),auth.signature
)
</pre>
<p>The above code will create a table “<b>comment_post</b>” with the proper table definition. The action will be implemented with the help of functions in “<b>controllers/comments.py</b>”.</p>
<pre class="prettyprint notranslate">
def post():
   return dict(
      form = SQLFORM(db.comment_post).process(),
      comments = db(db.comment_post).select()
   )
</pre>
<p>The corresponding view will be displayed as &minus;</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
{{for post in comments:}}

&lt;div class = "post"&gt;
   On {{= post.created_on}} {{= post.created_by.first_name}}
   says &lt;span class = "post_body"&gt;{{= post.body}}&lt;/span&gt;
&lt;/div&gt;

{{pass}}
{{= form}}
</pre>
<p>The page can be accessed using the given URL &minus; <b>http://127.0.0.1:8000/test/comments/post</b></p>
<p>The method mentioned above is a traditional way of accessing a view, which can be changed with the implementation of the LOAD function.</p>
<p>This can be achieved by creating a new view with the extension <b>".load"</b> that does not extend the layout.</p>
<p>The new view created would be <b>"views/comments/post.load"</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;div class = "post"&gt;
   On {{= post.created_on}} {{= post.created_by.first_name}}
   says &lt;blockquote class = "post_body"&gt;{{= post.body}}&lt;/blockquote&gt;
&lt;/div&gt;

{{pass}}
{{= form}}
</pre>
<p>The URL to access the page would be &minus; <b>http://127.0.0.1:8000/test/comments/post.load</b></p>
<p>The LOAD component can be embedded into any other page of web2py application. This can be done by using the following statement.</p>
<pre class="prettyprint notranslate">
{{= LOAD('comments','post.load',ajax = True)}}
</pre>
<p>For example, the <b>Controllers</b> can be edited as &minus;</p>
<pre class="prettyprint notranslate">
def index():
   return dict()
</pre>
<p>In <b>View</b>, we can add the component &minus;</p>
<pre class="prettyprint notranslate">
{{extend 'layout.html'}}
{{= LOAD('comments','post.load',ajax = True)}}
</pre>
<p>The page can be accessed with the URL &minus; <b>http://127.0.0.1:8000/test/default/index</b></p>
<h2>Component Plugins</h2>
<p>Component plugins are the plugins, which uniquely define <b>Components</b>. Components access the database directly with their model definition.</p>
<p>As mentioned in the previous example, comments component into a <b>comments_plugin</b> can be done in the <b>Models</b> section &minus;</p> 
<p>"<b>models/plugin_comments.py</b>" &minus;</p>
<pre class="prettyprint notranslate">
db.define_table(
   'plugin_comments_comment',
   Field('body','text', label = 'Your comment'),
   auth.signature
)
</pre>
<p>The <b>Controller</b> will include the following plugin &minus;</p>
<pre class="prettyprint notranslate">
def plugin_comments():
   return LOAD('plugin_comments','post',ajax = True)
</pre>
<h1>Web2py - Deployment</h1>
<h2>Installation of web2py in Ubuntu (Linux)</h2>
<p>The following steps are implemented for installation of web2py in the Ubuntu Desktop.</p>
<p><b>Step 1</b> &minus; Download web2py</p>
<pre class="result notranslate">
cd /home
mkdir www-dev

cd www-dev
wget http://www.web2py.com/examples/static/web2py_src.zip
</pre>
<p><b>Step 2</b> &minus; After the download is complete, unzip it.</p>
<pre class="result notranslate">
unzip -x web2py_src.zip
</pre>
<p><b>Step 3</b> &minus; Optionally install the tk library for Python, if you need to access the GUI.</p>
<pre class="result notranslate">
sudo apt-get install python-tk
</pre>
<p><b>Step 4</b> &minus; To start web2py, access the web2py directory and run web2py.</p>
<pre class="result notranslate">
cd web2py
python web2py.py
</pre>
<p>The GUI will appear as follows &minus;</p>
<img src="https://www.tutorialspoint.com/web2py/images/web2py_server.jpg" alt="Web2py Server" />
<p>After installation, each time you run it, web2py will ask you to choose a password. This password is your administrative password. If the password is left blank, the administrative interface will be disabled.</p>
<p>Once the server is started, web2py will redirect to the screen with following mentioned URL &minus; <b>http://127.0.0.1:8000/</b></p>
<p>This will conclude that web2py is perfectly running in Ubuntu desktop.</p>
<h2>Production Deployment in Ubuntu</h2>
<p><b>Step 1</b> &minus; Installation of all the modules needed to run web2py.</p>
<h3>Installation of postgreSQL</h3>
<pre class="result notranslate">
sudo apt-get install postgresql
</pre>
<h3>Unzip and open ssh-server</h3>
<pre class="result notranslate">
sudo apt-get install unzip
sudo apt-get install openssh-server
</pre>
<h3>Installation of Apache 2 and mod-wsgi</h3>
<pre class="result notranslate">
sudo apt-get install apache2
sudo apt-get install libapache2-mod-wsgi
</pre>
<p><b>Step 2</b> &minus; Installation of web2py in /home/www-data</p>
<p>This helps for proper deployment in production environment.</p>
<pre class="result notranslate">
sudo apt-get install unzip
sudo apt-get install openssh-server
cd /home
sudo mkdir www-data
cd www-data
</pre>
<p>Get the web2py source from the web2py site &minus;</p>
<pre class="result notranslate">
sudo wget http://web2py.com/examples/static/web2py_src.zip
sudo unzip web2py_src.zip
sudo chown -R www-data:www-data web2py
</pre>
<p><b>Step 3</b> &minus; Create a self-signed certificate. SSL certificates should be obtained from a trusted Certificate Authority. Maintain an SSL folder with the certificates in it.</p>
<p><b>Step 4</b> &minus; Edit the apache configuration as per the requirement of production environment.</p>
<p><b>Step 5</b> &minus; Restart the Apache server and verify if the production environment works for the given IP address.</p>
<h2>Installing web2py on Windows</h2>
<p>Although there is a binary distribution for Windows environments (packaging executables and standard libraries), web2py is open source, and can be used with a normal Python installation.</p>
<p>This method allows working with the latest releases of web2py, and customizing the python modules to be used.</p>
<p><b>Step 1</b> &minus; Download the source package from web2py official website &minus; <b>http://www.web2py.com/examples/static/web2py_src.zip</b> and unzip it.</p>
<p>As web2py does not require installation, the user can unzip it in any folder.</p>
<p><b>Step 2</b> &minus; To start it, double-click <b>web2py.py</b>. From the console &minus;</p>
<pre class="result notranslate">
cd c:\web2py
c:\python27\python.exe web2py.py
</pre>
<p><b>Step 3</b> &minus; Here command line parameters can be added (&minus;a to set an admin password, &minus;p to specify an alternate port). The startup options are visible through &minus;</p>
<pre class="result notranslate">
C:\web2py&gt;c:\python27\python.exe web2py.py --help
</pre>
<h3>Note</h3>
<ul class="list">
<li><p>web2py is written in Python, a portable, interpreted and dynamic language that does not require compilation or complicated installation to run.</p></li>
<li><p>It uses a virtual machine (such as Java and .Net), and it can transparently byte-compile your source code on the fly when you run your scripts.</p></li>
</ul>
<h2>Functionalities in web2py for Database and Testing</h2>
<p>It is a software called SQLDesigner which helps in making web2py models and generates the corresponding code. Given below are some of the screenshots &minus;</p>
<img src="https://www.tutorialspoint.com/web2py/images/sql_designer.jpg" alt="SQL Designer" />
<p>SQLDesigner helps in maintaining the relations of the tables in simple manner and generates the corresponding code in the models of given application.</p>
<img src="https://www.tutorialspoint.com/web2py/images/sql_designer_table.jpg" alt="SQL Designer Table" />
<h2>Functional Testing</h2>
<p>Functional testing involves testing of the functions of components or overall system. It can be based on requirement and business process.</p>
<p>web2py comes with a module <b>gluon.contrib.webclient</b>, which performs functional testing in remote and local web2py applications. It is basically designed to understand web2py session and postbacks.</p>
<p>All it requires is to import the package such that the functional testing would be implemented on the given module.</p>
<p>The syntax to import the package is as follows &minus;</p>
<pre class="result notranslate">
from gluon.contrib.webclient import WebClient
</pre>
<h1>Web2py - Security</h1>
<p>In the previous chapters, there was complete information on the implementation of web2py with various tools. The major concern for developing web2py applications includes security from a user’s perspective.</p>
<p>The unique features of web2py are as follows &minus;</p>
<ul class="list">
<li><p>Users can learn the implementation easily. It requires no installation and dependencies.</p></li>
<li><p>It has been stable since the day of launch.</p></li>
<li><p>web2py is lightweight and includes libraries for Data Abstraction Layer and template language.</p></li>
<li><p>It works with the help of Web Server Gateway Interface, which acts as a communication between web servers and applications.</p></li>
</ul>
<p>Open web application security project (OWASP) is a community, which lists down the security breaches of web application.</p>
<h2>Security Breaches</h2>
<p>With respect to OWASP, issues related to web applications and how web2py overcomes them is discussed below.</p>
<h3>Cross Side Scripting</h3>
<p>It is also known as XSS. It occurs whenever an application takes a user supplied data and sends it to the user’s browser without encoding or validating the content. The attackers execute scripts to inject worms and viruses using cross side scripting.</p>
<p>web2py helps in preventing XSS by preventing all the rendered variables in the <b>View</b>.</p>
<h3>Information Leakage</h3>
<p>Sometimes, applications leak information about internal workings, privacy and configurations. Attackers use this to breach sensitive data, which could lead to serious attacks.</p>
<p>web2py prevents this by ticketing system. It logs all the errors and the ticket is issued to the user whose error is being registered. These errors are only accessible to the administrator.</p>
<h3>Broken Authentication</h3>
<p>Account credentials are not often protected. Attackers compromise on passwords, authentication tokens to steal the user’s identities.</p>
<p>web2py provides a mechanism for administrative interface. It also forces to use secure sessions when the client is not “localhost”.</p>
<h3>Insecure Communications</h3>
<p>Sometimes applications fail to encrypt the network traffic. It is necessary to manage traffic to protect sensitive communications.</p>
<p>web2py provides SSL enabled certificates to provide encryption of communications. This also helps to maintain sensitive communication.</p>
<h3>Restriction in URL Access</h3>
<p>Web applications normally protect the sensitive functionality by preventing display of the links and URLs to some users. Attackers can try to breach some sensitive data by manipulating the URL with some information.</p>
<p>In wb2py, a URL maps to the modules and functions rather than the given file. It also includes a mechanism, which specifies which functions are public and which are maintained as private. This helps in resolving the issue.</p>
<hr />
<div class="pre-btn">
<a href="https://www.tutorialspoint.com/web2py/web2py_security.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="print-btn center">
<a href="https://www.tutorialspoint.com/cgi-bin/printpage.cgi" target="_blank"><i class="icon icon-print big-font"></i> Print</a>
</div>
<div class="nxt-btn">
<a href="https://www.tutorialspoint.com/web2py/web2py_useful_resources.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<hr />
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div class="bottomadtag">Advertisements</div>
<script type="text/javascript"><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
<div class="row">
<div class="col-md-3" id="rightbar">
<div class="simple-ad">
<a href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.facebook.com/sharer.php?u=' + 'http://www.tutorialspoint.com/web2py/web2py_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/facebookIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://twitter.com/share?url=' + 'http://www.tutorialspoint.com/web2py/web2py_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/twitterIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.linkedin.com/cws/share?url=' + 'http://www.tutorialspoint.com/web2py/web2py_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/linkedinIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://plus.google.com/share?url=http://www.tutorialspoint.com/web2py/web2py_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/googlePlusIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.stumbleupon.com/submit?url=http://www.tutorialspoint.com/web2py/web2py_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/StumbleUponIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://reddit.com/submit?url=http://www.tutorialspoint.com/web2py/web2py_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=656,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/reddit.jpg" alt="img" />
</a>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 600;
google_ad_format = "300x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-2537027957187252";
/* Right Side Ad */
google_ad_slot = "right_side_ad";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="footer-copyright">
<div class="container">
<div class="row">
<div class="col-md-1">
<a href="https://www.tutorialspoint.com/index.htm" class="logo"> <img alt="Tutorials Point" class="img-responsive" src="https://www.tutorialspoint.com/scripts/img/logo-footer.png"> </a>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <nav id="sub-menu">
      <ul>
         <li><a href="https://www.tutorialspoint.com/about/tutorials_writing.htm">Write for us</a></li>
         <li><a href="https://www.tutorialspoint.com/about/faq.htm">FAQ's</a></li>
         <li><a href="https://www.tutorialspoint.com/about/about_helping.htm">Helping</a></li>
         <li><a href="https://www.tutorialspoint.com/about/contact_us.htm">Contact</a></li>
      </ul>
   </nav>
</div>
<div class="col-md-3 col-sm-12 col-xs-12">
<p>&copy; Copyright 2017. All Rights Reserved.</p>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <div class="news-group">
      <input type="text" class="form-control-foot search" name="textemail" id="textemail" autocomplete="off" placeholder="Enter email for newsletter" onfocus="if (this.value == 'Enter email for newsletter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Enter email for newsletter...';}">
      <span class="input-group-btn"> <button class="btn btn-default btn-footer" id="btnemail" type="submit" onclick="javascript:void(0);">go</button> </span>
      <div id="newsresponse"></div>
   </div>
</div>
</div>
</div>
</div>
</div>
<!-- Libs -->
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/custom-min.js?v=5"></script>
<script src="https://www.google-analytics.com/urchin.js">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
$('.pg-icon').click(function(){
   $('.wrapLoader').show();
});
</script>
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/jquery.colorbox-min.js"></script>
<script type="text/javascript">
   var tryit = new $.TryIt('https://www.tutorialspoint.com/web2py/try_web2py.php');
   tryit.compile();
</script>
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Web2py Quick Guide",
    "name": "Web2py Quick Guide",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.tutorialspoint.com/web2py/web2py_quick_guide.htm"
    },
    "image": {
        "@type": "ImageObject",
        "url": "https://www.tutorialspoint.com/web2py/images/web2py_appliance.jpg",
        "width": 400,
        "height": 106
    },
    "author": {
        "@type": "Organization",
        "name": "Tutorials Point",
        "url": "https://www.tutorialspoint.com",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.tutorialspoint.com/images/logo60.png",
            "width": 210,
            "height": 60
        }
    },
    "datePublished": "August 15 2017 02:44:32.",
    "dateModified": "August 15 2017 02:34:21.",
    "publisher": {
        "@type": "Organization",
        "name": "Tutorials Point",
        "url": "https://www.tutorialspoint.com",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.tutorialspoint.com/images/logo60.png",
            "width": 210,
            "height": 60
        }
    },
    "description": "web2py is defined as a free, open-source web framework for agile development which involves database-driven web applications; it is written in Python and programmable in Python. It is a full-stack framework; it consists of all the necessary components, a ..."
}
</script>
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "item": {
                "name": "www.tutorialspoint.com",
                "@id": "https://www.tutorialspoint.com"
            }
        },
        {
            "@type": "ListItem",
            "position": 2,
            "item": {
                "name": "Web2py",
                "@id": "https://www.tutorialspoint.com/web2py"
            }
        },
        {
            "@type": "ListItem",
            "position": 3,
            "item": {
                "name": "Web2py - Quick Guide"
            }
        }
    ]
}
</script>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/web2py/web2py_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 18:14:52 GMT -->
</html>
