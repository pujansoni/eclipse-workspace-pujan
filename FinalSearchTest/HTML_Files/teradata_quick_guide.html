<!DOCTYPE html>
<!--[if IE 8]><html class="ie ie8"> <![endif]-->
<!--[if IE 9]><html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html> <!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/teradata/teradata_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 16:44:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Basic -->
<meta charset="utf-8">
<title>Teradata Quick Guide</title>
<meta name="description" content="Teradata Quick Guide - Learn Teradata starting from Introduction, Installation, Architecture, Relational Concepts, Data Types, Tables, Data Manipulation, SELECT Statement, Logical and Conditional Operators, SET Operators, String Manipulation, Date/Time Functions, Built-in Functions, Aggregate Functions, CASE and COALESCE, Primary Index, Joins, SubQueries, Table Types, Space Concepts, Secondary Index, Statistics, Compression, Explain, Hashing Algorithm, JOIN Index, Views, Macros, Stored Procedure, JOIN strategies, Partitioned Primary Index, OLAP Functions, Data Protection, User Management, Performance Tuning, FastLoad, MultiLoad, FastExport, BTEQ." /> 
<meta name="keywords" content="Teradata, Tutorial, Introduction, Installation, Architecture, Relational Concepts, Data Types, Tables, Data Manipulation, SELECT Statement, Logical and Conditional Operators, SET Operators, String Manipulation, Date/Time Functions, Built-in Functions, Aggregate Functions, CASE and COALESCE, Primary Index, Joins, SubQueries, Table Types, Space Concepts, Secondary Index, Statistics, Compression, Explain, Hashing Algorithm, JOIN Index, Views, Macros, Stored Procedure, JOIN strategies, Partitioned Primary Index, OLAP Functions, Data Protection, User Management, Performance Tuning, FastLoad, MultiLoad, FastExport, BTEQ." /> 
<base  />
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta property="fb:app_id" content="471319149685276" />
<meta property="og:site_name" content="www.tutorialspoint.com" />
<meta name="robots" content="index, follow"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="author" content="tutorialspoint.com">
<script type="text/javascript" src="../theme/js/script-min-v4.js"></script>
<link rel="stylesheet" href="../theme/css/style-min5e1f.css?v=2">
<!-- Head Libs -->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="/theme/css/ie8.css">
<![endif]-->
<style>
select{ border:0 !important; outline: 1px inset black !important; outline-offset: -1px !important; }
ul.nav-list.primary>li a.videolink{    background: none; margin: 0px; padding: 0px; border: 1px solid #d6d6d6;}
div.feature-box div.feature-box-icon, .col-md-3 .course-box, li.heading, div.footer-copyright { background: #ef8a1e url(../images/pattern.png) repeat center center !important;}
.sub-main-menu .sub-menuu div:hover, .sub-main-menu .viewall, header nav ul.nav-main li a:hover, button.btn-responsive-nav, header div.search button.btn-default { background: #ef8a1e !important;}
.submenu-item{ border-bottom: 2px solid #ef8a1e !important; border-top: 2px solid #ef8a1e !important }
.ace_scroller{overflow: auto!important;}
</style>
<script>
$(document).ready(function() {
  $('input[name="q"]').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
});
</script>
</head>
<body onload="prettyPrint()">
<div class="wrapLoader">
   <div class="imgLoader">
      <img  src="../images/loading-cg.gif" alt="" width="70" height="70" />
   </div>
</div>
<header>
   <div class="container">			
      <h1 class="logo">
      <a href="../index-2.html" title="tutorialspoint">
      <img alt="tutorialspoint" src="images/logo.png">
      </a>
      </h1>			
      <nav>
         <ul class="nav nav-pills nav-top">
            <li><a href="../about/about_careers.html" style="background: #fffb09; font-weight: bold;"><i class="icon icon-suitcase"></i> Jobs</a></li>
            <li> <a href="http://www.sendfiles.net/"><i class="fa fa-send"></i> &nbsp;SENDFiles</a> </li>
            <li> <a href="../whiteboard.html"><img src="../theme/css/icons/image-editor.png" alt="Whiteboard" title="Whiteboard"> &nbsp;Whiteboard</a> </li>
            <li> <a href="../netmeeting.html"><i class="fa-camera"></i> &nbsp;Net Meeting</a> </li>
            <li> <a href="../online_dev_tools.html"> <i class="dev-tools-menu" style="opacity:.5"></i> Tools </a> </li>
            <li> <a href="../articles/index.html"><i class="icon icon-file-text-o"></i> &nbsp;Articles</a> </li>            
            <li class="top-icons">
              <ul class="social-icons">
              <li class="facebook"><a href="https://www.facebook.com/tutorialspointindia" target="_blank" data-placement="bottom" title="tutorialspoint @ Facebook">Facebook</a></li>
              <li class="googleplus"><a href="https://plus.google.com/u/0/116678774017490391259/posts" target="_blank" data-placement="bottom" title="tutorialspoint @ Google+">Google+</a></li>
              <li class="twitter"><a href="https://www.twitter.com/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Twitter">Twitter</a></li>
              <li class="linkedin"><a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Linkedin">Linkedin</a></li>
              <li class="youtube"><a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" data-placement="bottom" title="tutorialspoint YouTube">YouTube</a></li>
              </ul>
           </li>
         </ul>
      </nav>
         <!-- search code here  --> 
      <button class="btn btn-responsive-nav btn-inverse" data-toggle="collapse" data-target=".nav-main-collapse" id="pull" style="top: 24px!important"> <i class="icon icon-bars"></i> </button>
   </div>
  
   <div class="navbar nav-main">
      <div class="container">
         <nav class="nav-main mega-menu">
            <ul class="nav nav-pills nav-main" id="mainMenu">
               <li class="dropdown no-sub-menu"> <a class="dropdown" href="../index-2.html"><i class="icon icon-home"></i> Home</a> </li>   
               <li class="dropdown" id="liTL"><a class="dropdown" href="javascript:void(0);"><span class="tut-lib"> Tutorials Library <i class="fa-caret-down"></i></span></a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="../codingground.html"><i class="fa-code"></i> Coding Ground </a> </li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="../tutor_connect/index.html"><i class="fa-user"> </i> Tutor Connect</a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="../videotutorials/index.html"><i class="fa-toggle-right"></i> Videos </a></li>
               <li class="dropdown no-sub-menu">
                  <div class="searchform-popup">
                     <input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
                     <div class="magnifying-glass"><i class="icon-search"></i> Search </div>
                 </div>
               </li>
            </ul>
         </nav>
         <div class="submenu-item sub-main-menu" id="top-sub-menu"></div>
         
      </div>
   </div>	
</header>
<div style="clear:both;"></div>
<div role="main" class="main">
<div class="container">
<div class="row">
<div class="col-md-2">
<aside class="sidebar">
<div class="mini-logo">
<img src="images/teradata-mini-logo.jpg" alt="Teradata Tutorial" />
</div>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Teradata Tutorial</li>
<li><a href="index.html">Teradata - Home</a></li>
</ul>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Teradata Basics</li>
<li><a href="teradata_introduction.html">Teradata - Introduction</a></li>
<li><a href="teradata_installation.html">Teradata - Installation</a></li>
<li><a href="teradata_architecture.html">Teradata - Architecture</a></li>
<li><a href="teradata_relational_concepts.html">Teradata - Relational Concepts</a></li>
<li><a href="teradata_data_types.html">Teradata - Data Types</a></li>
<li><a href="teradata_tables.html">Teradata - Tables</a></li>
<li><a href="teradata_data_manipulation.html">Teradata - Data Manipulation</a></li>
<li><a href="teradata_select_statement.html">Teradata - SELECT Statement</a></li>
<li><a href="teradata_logical_and_conditional_operators.html">Logical &amp; Conditional Operators</a></li>
<li><a href="teradata_set_operators.html">Teradata - SET Operators</a></li>
<li><a href="teradata_string_manipulation.html">Teradata - String Manipulation</a></li>
<li><a href="teradata_date_time_functions.html">Teradata - Date/Time Functions</a></li>
<li><a href="teradata_built_in_functions.html">Teradata - Built-in Functions</a></li>
<li><a href="teradata_aggregate_functions.html">Teradata - Aggregate Functions</a></li>
<li><a href="teradata_case_and_coalesce.html">Teradata - CASE &amp; COALESCE</a></li>
<li><a href="teradata_primary_index.html">Teradata - Primary Index</a></li>
<li><a href="teradata_joins.html">Teradata - Joins</a></li>
<li><a href="teradata_sub_queries.html">Teradata - SubQueries</a></li>
</ul>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Teradata Advanced</li>
<li><a href="teradata_table_types.html">Teradata - Table Types</a></li>
<li><a href="teradata_space_concepts.html">Teradata - Space Concepts</a></li>
<li><a href="teradata_secondary_index.html">Teradata - Secondary Index</a></li>
<li><a href="teradata_statistics.html">Teradata - Statistics</a></li>
<li><a href="teradata_compression.html">Teradata - Compression</a></li>
<li><a href="teradata_explain.html">Teradata - Explain</a></li>
<li><a href="teradata_hashing_algorithm.html">Teradata - Hashing Algorithm</a></li>
<li><a href="teradata_join_index.html">Teradata - Join Index</a></li>
<li><a href="teradata_views.html">Teradata - Views</a></li>
<li><a href="teradata_macros.html">Teradata - Macros</a></li>
<li><a href="teradata_stored_procedure.html">Teradata - Stored Procedure</a></li>
<li><a href="teradata_join_strategies.html">Teradata - JOIN Strategies</a></li>
<li><a href="teradata_partitioned_primary_index.html">Teradata - Partitioned Primary Index</a></li>
<li><a href="teradata_olap_functions.html">Teradata - OLAP Functions</a></li>
<li><a href="teradata_data_protection.html">Teradata - Data Protection</a></li>
<li><a href="teradata_user_management.html">Teradata - User Management</a></li>
<li><a href="teradata_performance_tuning.html">Teradata - Performance Tuning</a></li>
<li><a href="teradata_fastload.html">Teradata - FastLoad</a></li>
<li><a href="teradata_multiload.html">Teradata - MultiLoad</a></li>
<li><a href="teradata_fastexport.html">Teradata - FastExport</a></li>
<li><a href="teradata_bteq.html">Teradata - BTEQ</a></li>
</ul>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Teradata Useful Resources</li>
<li><a href="teradata_questions_answers.html">Teradata - Questions &amp; Answers</a></li>
<li><a href="teradata_quick_guide.html">Teradata - Quick Guide</a></li>
<li><a href="teradata_useful_resources.html">Teradata - Useful Resources</a></li>
<li><a href="teradata_discussion.html">Teradata - Discussion</a></li>
</ul>
<ul class="nav nav-list primary push-bottom left-menu special">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../questions_and_answers.html">Questions and Answers</a></li>
<li><a target="_top" href="../effective_resume_writing.html">Effective Resume Writing</a></li>
<li><a target="_top" href="../hr_interview_questions/index.html">HR Interview Questions</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</aside>
</div>
<!-- PRINTING STARTS HERE -->
<div class="row">
<div class="content">
<div class="col-md-7 middle-col">
<h1>Teradata - Quick Guide</h1>
<div class="topgooglead">
<hr />
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="teradata_questions_answers.html"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="teradata_useful_resources.html">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<div class="clearer"></div>
<hr />
<h1>Teradata - Introduction</h1>
<h2>What is Teradata?</h2>
<p>Teradata is one of the popular Relational Database Management System. It is mainly suitable for building large scale data warehousing applications. Teradata achieves this by the concept of parallelism. It is developed by the company called Teradata.</p>
<h2>History of Teradata</h2> 
<p>Following is a quick summary of the history of Teradata, listing major milestones.</p>
<ul class="list">
<li><p><b>1979</b> &minus; Teradata was incorporated.</p></li>
<li><p><b>1984</b> &minus; Release of first database computer DBC/1012.</p></li>
<li><p><b>1986</b> &minus; <i>Fortune</i> magazine names Teradata as ‘Product of the Year’.</p></li>
<li><p><b>1999</b> &minus; Largest database in the world using Teradata with 130 Terabytes.</p></li>
<li><p><b>2002</b> &minus; Teradata V2R5 released with Partition Primary Index and compression.</p></li>
<li><p><b>2006</b> &minus; Launch of Teradata Master Data Management solution.</p></li>
<li><p><b>2008</b> &minus; Teradata 13.0 released with Active Data Warehousing.</p></li>
<li><p><b>2011</b> &minus; Acquires Teradata Aster and enters into Advanced Analytics Space.</p></li>
<li><p><b>2012</b> &minus; Teradata 14.0 introduced.</p></li>
<li><p><b>2014</b> &minus; Teradata 15.0 introduced.</p></li>
</ul>
<h2>Features of Teradata</h2>
<p>Following are some of the features of Teradata &minus;</p>
<ul class="list">
<li><p><b>Unlimited Parallelism</b> &minus; Teradata database system is based on Massively Parallel Processing (MPP) Architecture. MPP architecture divides the workload evenly across the entire system. Teradata system splits the task among its processes and runs them in parallel to ensure that the task is completed quickly.</p></li>
<li><p><b>Shared Nothing Architecture</b> &minus; Teradata’s architecture is called as Shared Nothing Architecture. Teradata Nodes, its Access Module Processors (AMPs) and the disks associated with AMPs work independently. They are not shared with others.</p></li>
<li><p><b>Linear Scalability</b> &minus; Teradata systems are highly scalable. They can scale up to 2048 Nodes. For example, you can double the capacity of the system by doubling the number of AMPs.</p></li>
<li><p><b>Connectivity</b> &minus; Teradata can connect to Channel-attached systems such as Mainframe or Network-attached systems.</p></li>
<li><p><b>Mature Optimizer</b> &minus; Teradata optimizer is one of the matured optimizer in the market. It has been designed to be parallel since its beginning. It has been refined for each release.</p></li>
<li><p><b>SQL</b> &minus; Teradata supports industry standard SQL to interact with the data stored in tables. In addition to this, it provides its own extension.</p></li>
<li><p><b>Robust Utilities</b> &minus; Teradata provides robust utilities to import/export data from/to Teradata system such as FastLoad, MultiLoad, FastExport and TPT.</p></li>
<li><p><b>Automatic Distribution</b> &minus; Teradata automatically distributes the data evenly to the disks without any manual intervention.</p></li>
</ul>
<h1>Teradata - Installation</h1>
<p>Teradata provides Teradata express for VMWARE which is a fully operational Teradata virtual machine. It provides up to 1 terabyte of storage. Teradata provides both 40GB and 1TB version of VMware.</p>
<h3>Prerequisites</h3> 
<p>Since the VM is 64 bit, your CPU must support 64-bit.</p>
<h2>Installation Steps for Windows</h2>
<p><b>Step 1</b> &minus; Download the required VM version from the link, <a href="http://downloads.teradata.com/download/database/teradata-express-for-vmware-player" rel="nofollow" target="_blank"> http://downloads.teradata.com/download/database/teradata-express-for-vmware-player</a></p>
<p><b>Step 2</b> &minus; Extract the file and specify the target folder.</p>
<p><b>Step 3</b> &minus; Download the VMWare Workstation player from the link, <a href="https://my.vmware.com/web/vmware/downloads" rel="nofollow" target="_blank"> https://my.vmware.com/web/vmware/downloads</a>. It is available for both Windows and Linux. Download the VMWARE workstation player for Windows.</p>
<img src="images/vmware_workstation_player.jpg" alt="VMWare Workstation player" />
<p><b>Step 4</b> &minus; Once the download is complete, install the software.</p>  
<p><b>Step 5</b> &minus; After the installation is complete, run the VMWARE client.</p>  
<p><b>Step 6</b> &minus; Select 'Open a Virtual Machine'. Navigate through the extracted Teradata VMWare folder and select the file with extension .vmdk.</p>
<img src="images/open_virtual_machine.jpg" alt="Open Virtual Machine" />
<p><b>Step 7</b> &minus; Teradata VMWare is added to the VMWare client. Select the added Teradata VMware and click ‘Play Virtual Machine’.</p>
<img src="images/play_virtual_machine.jpg" alt="Play Virtual Machine" />
<p><b>Step 8</b> &minus; If you get a popup on software updates, you can select ‘Remind Me Later’.</p>
<p><b>Step 9</b> &minus; Enter the user name as root, press tab and enter password as root and again press Enter.</p>
<img src="images/welcome_tdexpress.jpg" alt="Welcome TDExpress" />
<p><b>Step 10</b> &minus; Once the following screen appears on the desktop, double-click on ‘root’s home’. Then double-click on ‘Genome’s Terminal’. This will open the Shell.</p>
<img src="images/open_shell.jpg" alt="Open Shell" />
<p><b>Step 11</b> &minus; From the following shell, enter the command /etc/init.d/tpa start. This will start the Teradata server.</p>
<img src="images/start_teradata_server.jpg" alt="Start Teradata server" />
<h2>Starting BTEQ</h2>
<p>BTEQ utility is used to submit SQL queries interactively. Following are the steps to start BTEQ utility.</p>
<p><b>Step 1</b> &minus; Enter the command /sbin/ifconfig and note down the IP address of the VMWare.</p>
<p><b>Step 2</b> &minus; Run the command bteq. At the logon prompt, enter the command.</p>
<p>Logon &lt;ipaddress&gt;/dbc,dbc; and enter At the password prompt, enter password as dbc;</p>
<img src="images/start_bteq.jpg" alt="Starting BTEQ" />
<p>You can log into Teradata system using BTEQ and run any SQL queries.</p>
<h1>Teradata - Architecture</h1>
<p>Teradata architecture is based on Massively Parallel Processing (MPP) architecture. The major components of Teradata are Parsing Engine, BYNET and Access Module Processors (AMPs). The following diagram shows the high level architecture of a Teradata Node.</p>
<img src="images/teradata_node_architecture.jpg" alt="Teradata Node Architecture" />
<h2>Components of Teradata</h2>
<p>The key components of Teradata are as follows &minus;</p>
<ul class="list">
<li><p><b>Node</b> &minus; It is the basic unit in Teradata System. Each individual server in a Teradata system is referred as a Node. A node consists of its own operating system, CPU, memory, own copy of Teradata RDBMS software and disk space. A cabinet consists of one or more Nodes.</p></li>
<li><p><b>Parsing Engine</b> &minus; Parsing Engine is responsible for receiving queries from the client and preparing an efficient execution plan. The responsibilities of parsing engine are &minus;</p>
<ul class="list">
<li><p>Receive the SQL query from the client</p></li>
<li><p>Parse the SQL query check for syntax errors</p></li>
<li><p>Check if the user has required privilege against the objects used in the SQL query</p></li>
<li><p>Check if the objects used in the SQL actually exists</p></li>
<li><p>Prepare the execution plan to execute the SQL query and pass it to BYNET</p></li>
<li><p>Receives the results from the AMPs and send to the client</p></li>
</ul>
</li>
<li><p><b>Message Passing Layer</b> &minus; Message Passing Layer called as BYNET, is the networking layer in Teradata system. It allows the communication between PE and AMP and also between the nodes. It receives the execution plan from Parsing Engine and sends to AMP. Similarly, it receives the results from the AMPs and sends to Parsing Engine.</p></li>
<li><p><b>Access Module Processor (AMP)</b> &minus; AMPs, called as Virtual Processors (vprocs) are the one that actually stores and retrieves the data. AMPs receive the data and execution plan from Parsing Engine, performs any data type conversion, aggregation, filter, sorting and stores the data in the disks associated with them. Records from the tables are evenly distributed among the AMPs in the system. Each AMP is associated with a set of disks on which data is stored. Only that AMP can read/write data from the disks.</p></li>
</ul>
<h2>Storage Architecture</h2>
<p>When the client runs queries to insert records, Parsing engine sends the records to BYNET. BYNET retrieves the records and sends the row to the target AMP. AMP stores these records on its disks. Following diagram shows the storage architecture of Teradata.</p>
<img src="images/storage_architecture.jpg" alt="Storage Architecture" />
<h2>Retrieval Architecture</h2>
<p>When the client runs queries to retrieve records, the Parsing engine sends a request to BYNET. BYNET sends the retrieval request to appropriate AMPs. Then AMPs search their disks in parallel and identify the required records and sends to BYNET. BYNET then sends the records to Parsing Engine which in turn will send to the client. Following is the retrieval architecture of Teradata.</p>
<img src="images/retrieval_architecture.jpg" alt="Retrieval Architecture" />
<h1>Teradata - Relational Concepts</h1>
<p>Relational Database Management System (RDBMS) is a DBMS software that helps to interact with databases. They use Structured Query Language (SQL) to interact with the data stored in tables.</p>
<h2>Database</h2>
<p>Database is a collection of logically related data. They are accessed by many users for different purposes. For example, a sales database contains entire information about sales which is stored in many tables.</p>
<h2>Tables</h2>
<p>Tables is the basic unit in RDBMS where the data is stored. A table is a collection of rows and columns. Following is an example of employee table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>12/1/1984</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>4/1/1983</td>
</tr>
</table>
<h2>Columns</h2>
<p>A column contains similar data. For example, the column BirthDate in Employee table contains birth_date information for all employees.</p>
<table class="table table-bordered" style="text-align:center; width:50%; margin:auto;">
<tr>
<th style="text-align:center;">BirthDate</th>
</tr>
<tr>
<td>1/5/1980</td>
</tr>
<tr>
<td>11/6/1984</td>
</tr>
<tr>
<td>3/5/1983</td>
</tr>
<tr>
<td>12/1/1984</td>
</tr>
<tr>
<td>4/1/1983 </td>
</tr>
</table>
<h2>Row</h2>
<p>Row is one instance of all the columns. For example, in employee table one row contains information about single employee.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>1/5/1980 </td>
</tr>
</table>
<h2>Primary Key</h2>
<p>Primary key is used to uniquely identify a row in a table. No duplicate values are allowed in a primary key column and they cannot accept NULL values. It is a mandatory field in a table.</p>
<h2>Foreign Key</h2>
<p>Foreign keys are used to build a relationship between the tables. A foreign key in a child table is defined as the primary key in the parent table. A table can have more than one foreign key. It can accept duplicate values and also null values. Foreign keys are optional in a table.</p>
<h1>Teradata - Data Types</h1>
<p>Each column in a table is associated with a data type. Data types specify what kind of values will be stored in the column. Teradata supports several data types. Following are some of the frequently used data types.</p>
<table class="table table-bordered">
<tr>
<th style="text-align:center; width:20%">Data Types</th>
<th style="text-align:center; width:25%">Length (Bytes)</th>
<th style="text-align:center">Range of values</th>
</tr>
<tr>
<td>BYTEINT</td>
<td>1</td>
<td>-128 to &plus;127</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>2</td>
<td>-32768 to &plus;32767</td>
</tr>
<tr>
<td>INTEGER</td>
<td>4</td>
<td>-2,147,483,648 to &plus;2147,483,647</td>
</tr>
<tr>
<td>BIGINT</td>
<td>8</td>
<td>-9,233,372,036,854,775,80 8 to &plus;9,233,372,036,854,775,8 07</td>
</tr>
<tr>
<td>DECIMAL</td>
<td>1-16</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>NUMERIC</td>
<td>1-16</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>FLOAT</td>
<td>8</td>
<td>IEEE format</td>
</tr>
<tr>
<td>CHAR</td>
<td>Fixed Format</td>
<td>1-64,000</td>
</tr>
<tr>
<td>VARCHAR</td>
<td>Variable</td>
<td>1-64,000</td>
</tr>
<tr>
<td>DATE</td>
<td>4</td>
<td>YYYYYMMDD</td>
</tr>
<tr>
<td>TIME</td>
<td>6 or 8</td>
<td>HHMMSS.nnnnnn <b>or</b> HHMMSS.nnnnnn&plus;HHMM</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>10 or 12</td>
<td>YYMMDDHHMMSS.nnnnnn <b>or</b> YYMMDDHHMMSS.nnnnnn &plus;HHMM</td>
</tr>
</table>
<h1>Teradata - Tables</h1>
<p>Tables in Relational model are defined as collection of data. They are represented as rows and columns.</p>
<h2>Table Types</h2>
<p>Types Teradata supports different types of tables.</p>
<ul class="list">
<li><p><b>Permanent Table</b> &minus; This is the default table and it contains data inserted by the user and stores the data permanently.</p></li>
<li><p><b>Volatile Table</b> &minus; The data inserted into a volatile table is retained only during the user session. The table and data is dropped at the end of the session. These tables are mainly used to hold the intermediate data during data transformation.</p></li>
<li><p><b>Global Temporary Table</b> &minus; The definition of Global Temporary table are persistent but the data in the table is deleted at the end of user session.</p></li>
<li><p><b>Derived Table</b> &minus; Derived table holds the intermediate results in a query. Their lifetime is within the query in which they are created, used and dropped.</p></li>
</ul>
<h3>Set Versus Multiset</h3>
<p>Teradata classifies the tables as SET or MULTISET tables based on how the duplicate records are handled. A table defined as SET table doesn’t store the duplicate records, whereas the MULTISET table can store duplicate records.</p>
<table class="table table-bordered">
<tr>
<th>Sr.No</th>
<th>Table Commands &amp; Description</th>
</tr>
<tr>
<td>1</td>
<td><a href="teradata_create_table.html">Create Table</a>
<p>CREATE TABLE command is used to create tables in Teradata.</p>
</td>
</tr>
<tr>
<td>2</td>
<td><a href="teradata_alter_table.html">Alter Table</a>
<p>ALTER TABLE command is used to add or drop columns from an existing table. </p>
</td>
</tr>
<tr>
<td>3</td>
<td><a href="teradata_drop_table.html">Drop Table</a>
<p>DROP TABLE command is used to drop a table.</p>
</td>
</tr>
</table>
<h1>Teradata - Data Manipulation</h1>
<p>This chapter introduces the SQL commands used to manipulate the data stored in Teradata tables.</p>
<h2>Insert Records</h2> 
<p>INSERT INTO statement is used to insert records into the table.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax for INSERT INTO.</p>
<pre class="result notranslate">
INSERT INTO &lt;tablename&gt; 
(column1, column2, column3,…) 
VALUES 
(value1, value2, value3 …);
</pre>
<h3>Example</h3>
<p>The following example inserts records into the employee table.</p>
<pre class="prettyprint notranslate">
INSERT INTO Employee (
   EmployeeNo, 
   FirstName, 
   LastName, 
   BirthDate, 
   JoinedDate, 
   DepartmentNo 
)
VALUES ( 
   101, 
   'Mike', 
   'James', 
   '1980-01-05', 
   '2005-03-27', 
   01
);
</pre>
<p>Once the above query is inserted, you can use the SELECT statement to view the records from the table.</p>
<table class="table table-bordered" style="text-align:center; font-size:13px;">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">JoinedDate</th>
<th style="text-align:center">DepartmentNo</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>3/27/2005</td>
<td>1</td>
<td>1/5/1980</td>
</tr>
</table>
<h2>Insert from Another Table</h2>
<p>INSERT SELECT statement is used to insert records from another table.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax for INSERT INTO.</p>
<pre class="result notranslate">
INSERT INTO &lt;tablename&gt; 
(column1, column2, column3,…) 
SELECT 
column1, column2, column3… 
FROM  
&lt;source table&gt;;
</pre>
<h3>Example</h3>
<p>The following example inserts records into the employee table. Create a table called Employee_Bkup with the same column definition as employee table before running the following insert query.</p>
<pre class="prettyprint notranslate">
INSERT INTO Employee_Bkup ( 
   EmployeeNo, 
   FirstName, 
   LastName, 
   BirthDate, 
   JoinedDate, 
   DepartmentNo 
) 
SELECT 
   EmployeeNo, 
   FirstName, 
   LastName, 
   BirthDate, 
   JoinedDate,
   DepartmentNo 
FROM  
   Employee;
</pre>
<p>When the above query is executed, it will insert all records from the employee table into employee_bkup table.</p>
<h3>Rules</h3>
<ul class="list">
<li><p>The number of columns specified in the VALUES list should match with the columns specified in the INSERT INTO clause.</p></li>
<li><p>Values are mandatory for NOT NULL columns.</p></li>
<li><p>If no values are specified, then NULL is inserted for nullable fields.</p></li>
<li><p>The data types of columns specified in the VALUES clause should be compatible with the data types of columns in the INSERT clause.</p></li>
</ul>
<h2>Update Records</h2>
<p>UPDATE statement is used to update records from the table.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax for UPDATE.</p>
<pre class="result notranslate">
UPDATE &lt;tablename&gt; 
SET &lt;columnnamme&gt; = &lt;new value&gt; 
[WHERE condition];
</pre>
<h3>Example</h3>
<p>The following example updates the employee dept to 03 for employee 101.</p>
<pre class="prettyprint notranslate">
UPDATE Employee 
SET DepartmentNo = 03 
WHERE EmployeeNo = 101;
</pre>
<p>In the following output, you can see that the DepartmentNo is updated from 1 to 3 for EmployeeNo 101.</p>
<pre class="prettyprint notranslate">
SELECT Employeeno, DepartmentNo FROM Employee; 
*** Query completed. One row found. 2 columns returned. 
*** Total elapsed time was 1 second.  
EmployeeNo    DepartmentNo 
-----------  ------------- 
   101             3 
</pre>
<h3>Rules</h3>
<ul class="list">
<li><p>You can update one or more values of the table.</p></li>
<li><p>If WHERE condition is not specified then all rows of the table are impacted.</p></li>
<li><p>You can update a table with the values from another table.</p></li>
</ul>
<h2>Delete Records</h2>
<p>DELETE FROM statement is used to update records from the table.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax for DELETE FROM.</p>
<pre class="result notranslate">
DELETE FROM  &lt;tablename&gt; 
[WHERE condition];
</pre>
<h3>Example</h3>
<p>The following example deletes the employee 101 from the table employee.</p>
<pre class="prettyprint notranslate">
DELETE FROM Employee 
WHERE EmployeeNo = 101;
</pre>
<p>In the following output, you can see that employee 101 is deleted from the table.</p>
<pre class="result notranslate">
SELECT EmployeeNo FROM Employee;  
*** Query completed. No rows found. 
*** Total elapsed time was 1 second. 
</pre>
<h3>Rules</h3>
<ul class="list">
<li><p>You can update one or more records of the table.</p></li>
<li><p>If WHERE condition is not specified then all rows of the table are deleted.</p></li>
<li><p>You can update a table with the values from another table.</p></li>
</ul>
<h1>Teradata - SELECT Statement</h1>
<p>SELECT statement is used to retrieve records from a table.</p>
<h3>Syntax</h3>
<p>Following is the basic syntax of SELECT statement.</p>
<pre class="result notranslate">
SELECT 
column 1, column 2, ..... 
FROM  
tablename;
</pre>
<h3>Example</h3>
<p>Consider the following employee table.</p>
<table class="table table-bordered" style="text-align:center; font-size:13px;">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">JoinedDate</th>
<th style="text-align:center">DepartmentNo</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>3/27/2005</td>
<td>1</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>4/25/2007</td>
<td>2</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>3/21/2007</td>
<td>2</td>
<td>4/1/1983</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>2/1/2008</td>
<td>2</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>1/4/2008</td>
<td>3</td>
<td>12/1/1984</td>
</tr>
</table>
<p>Following is an example of SELECT statement.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo,FirstName,LastName 
FROM Employee;
</pre>
<p>When this query is executed, it fetches EmployeeNo, FirstName and LastName columns from the employee table.</p>
<pre class="result notranslate">
 EmployeeNo            FirstName                       LastName 
-----------  ------------------------------  --------------------------- 
   101                   Mike                            James 
   104                   Alex                            Stuart 
   102                   Robert                          Williams 
   105                   Robert                          James 
   103                   Peter                           Paul
</pre>
<p>If you want to fetch all the columns from a table, you can use the following command instead of listing down all columns.</p>
<pre class="result notranslate">
SELECT * FROM Employee;
</pre>
<p>The above query will fetch all records from the employee table.</p>
<h2>WHERE Clause</h2> 
<p>WHERE clause is used to filter the records returned by the SELECT statement. A condition is associated with WHERE clause. Only, the records that satisfy the condition in the WHERE clause are returned.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the SELECT statement with WHERE clause.</p>
<pre class="result notranslate">
SELECT * FROM tablename 
WHERE[condition];
</pre>
<h3>Example</h3>
<p>The following query fetches records where EmployeeNo is 101.</p>
<pre class="prettyprint notranslate">
SELECT * FROM Employee 
WHERE EmployeeNo = 101;
</pre>
<p>When this query is executed, it returns the following records.</p>
<pre class="result notranslate">
 EmployeeNo          FirstName                      LastName 
----------- ------------------------------ ----------------------------- 
   101                 Mike                           James 
</pre>
<h2>ORDER BY</h2>
<p>When the SELECT statement is executed, the returned rows are not in any specific order. ORDER BY clause is used to arrange the records in ascending/descending order on any columns.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the SELECT statement with ORDER BY clause.</p>
<pre class="result notranslate">
SELECT * FROM tablename 
ORDER BY column 1, column 2..;
</pre>
<h3>Example</h3>
<p>The following query fetches records from the employee table and orders the results by FirstName.</p>
<pre class="prettyprint notranslate">
SELECT * FROM Employee 
ORDER BY FirstName;
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
 EmployeeNo         FirstName                      LastName 
----------- ------------------------------ ----------------------------- 
    104               Alex                           Stuart 
    101               Mike                           James 
    103               Peter                          Paul 
    102               Robert                         Williams 
    105               Robert                         James 
</pre>
<h2>GROUP BY</h2>
<p>GROUP BY clause is used with SELECT statement and arranges similar records into groups.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the SELECT statement with GROUP BY clause.</p>
<pre class="result notranslate">
SELECT column 1, column2 …. FROM tablename 
GROUP BY column 1, column 2..;
</pre>
<h3>Example</h3>
<p>The following example groups the records by DepartmentNo column and identifies the total count from each department.</p>
<pre class="prettyprint notranslate">
SELECT DepartmentNo,Count(*) FROM   
Employee 
GROUP BY DepartmentNo;
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
 DepartmentNo    Count(*) 
------------  ----------- 
     3             1 
     1             1 
     2             3 
</pre>
<h1>Teradata - Logical and Conditional Operators</h1>
<p>Teradata supports the following logical and conditional operators. These operators are used to perform comparison and combine multiple conditions.</p>
<table class="table table-bordered">
<tr>
<th style="text-align:center; width:20%">Syntax</th>
<th style="text-align:center">Meaning</th>
</tr>
<tr>
<td style="text-align:center"><b>&gt;</b></td>
<td>Greater than</td>
</tr>
<tr>
<td style="text-align:center"><b>&lt;</b></td>
<td>Less than</td>
</tr>
<tr>
<td style="text-align:center"><b>&gt;=</b></td>
<td>Greater than or equal to</td>
</tr>
<tr>
<td style="text-align:center"><b>&lt;=</b></td>
<td>Less than or equal to</td>
</tr>
<tr>
<td style="text-align:center"><b>=</b></td>
<td>Equal to</td>
</tr>
<tr>
<td style="text-align:center"><b>BETWEEN</b></td>
<td>If values within range</td>
</tr>
<tr>
<td style="text-align:center"><b>IN</b></td>
<td>If values in &lt;expression&gt;</td>
</tr>
<tr>
<td style="text-align:center"><b>NOT IN</b></td>
<td>If values not in &lt;expression&gt;</td>
</tr>
<tr>
<td style="text-align:center"><b>IS NULL</b></td>
<td>If value is NULL</td>
</tr>
<tr>
<td style="text-align:center"><b>IS NOT NULL</b></td>
<td>If value is NOT NULL</td>
</tr>
<tr>
<td style="text-align:center"><b>AND</b></td>
<td>Combine multiple conditions. Evaluates to true only if all conditions are met</td>
</tr>
<tr>
<td style="text-align:center"><b>OR</b></td>
<td>Combine multiple conditions. Evaluates to true only if either of the conditions is met.</td>
</tr>
<tr>
<td style="text-align:center"><b>NOT</b></td>
<td>Reverses the meaning of the condition</td>
</tr>
</table>
<h2>BETWEEN</h2>
<p>BETWEEN command is used to check if a value is within a range of values.</p>
<h3>Example</h3>
<p>Consider the following employee table.</p>
<table class="table table-bordered" style="text-align:center; font-size:12px;">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">JoinedDate</th>
<th style="text-align:center">DepartmentNo</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>3/27/2005</td>
<td>1</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>4/25/2007</td>
<td>2</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>3/21/2007</td>
<td>2</td>
<td>4/1/1983</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>2/1/2008</td>
<td>2</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>1/4/2008</td>
<td>3</td>
<td>12/1/1984</td>
</tr>
</table>
<p>The following example fetches records with employee numbers in the range between 101,102 and 103.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo, FirstName FROM  
Employee 
WHERE EmployeeNo BETWEEN 101 AND 103;
</pre>
<p>When the above query is executed, it returns the employee records with employee no between 101 and 102.</p>
<pre class="result notranslate">
*** Query completed. 3 rows found. 2 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo            FirstName 
-----------  ------------------------------ 
   101                   Mike 
   102                   Robert 
   103                   Peter
</pre>
<h2>IN</h2>
<p>IN command is used to check the value against a given list of values.</p>
<h3>Example</h3> 
<p>The following example fetches records with employee numbers in 101, 102 and 103.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo, FirstName FROM  
Employee 
WHERE EmployeeNo in (101,102,103);
</pre>
<p>The above query returns the following records.</p>
<pre class="result notranslate">
*** Query completed. 3 rows found. 2 columns returned. 
*** Total elapsed time was 1 second.  
 EmployeeNo            FirstName 
-----------  ------------------------------ 
   101                   Mike 
   102                   Robert 
   103                   Peter
</pre>
<h2>NOT IN</h2>
<p>NOT IN command reverses the result of IN command. It fetches records with values that don’t match with the given list.</p>
<h3>Example</h3> 
<p>The following example fetches records with employee numbers not in 101, 102 and 103.</p>
<pre class="prettyprint notranslate">
SELECT * FROM  
Employee 
WHERE EmployeeNo not in (101,102,103);
</pre>
<p>The above query returns the following records.</p>
<pre class="result notranslate">
*** Query completed. 2 rows found. 6 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo          FirstName                      LastName 
----------- ------------------------------ -----------------------------    
    104                Alex                          Stuart 
    105                Robert                        James 
</pre>
<h1>Teradata - SET Operators</h1>
<p>SET operators combine results from multiple SELECT statement. This may look similar to Joins, but joins combines columns from multiple tables whereas SET operators combines rows from multiple rows.</p>
<h3>Rules</h3>
<ul class="list">
<li><p>The number of columns from each SELECT statement should be same.</p></li>
<li><p>The data types from each SELECT must be compatible.</p></li>
<li><p>ORDER BY should be included only in the final SELECT statement.</p></li>
</ul>
<h2>UNION</h2>
<p>UNION statement is used to combine results from multiple SELECT statements. It ignores duplicates.</p>
<h3>Syntax</h3>
<p>Following is the basic syntax of the UNION statement.</p>
<pre class="result notranslate">
SELECT col1, col2, col3… 
FROM  
&lt;table 1&gt; 
[WHERE condition] 
UNION  

SELECT col1, col2, col3… 
FROM  
&lt;table 2&gt; 
[WHERE condition];
</pre>
<h3>Example</h3>
<p>Consider the following employee table and salary table.</p>
<table class="table table-bordered" style="text-align:center; font-size:13px;">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">JoinedDate</th>
<th style="text-align:center">DepartmentNo</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>3/27/2005</td>
<td>1</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>4/25/2007</td>
<td>2</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>3/21/2007</td>
<td>2</td>
<td>4/1/1983</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>2/1/2008</td>
<td>2</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>1/4/2008</td>
<td>3</td>
<td>12/1/1984</td>
</tr>
</table>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">Gross</th>
<th style="text-align:center">Deduction</th>
<th style="text-align:center">NetPay</th>
</tr>
<tr>
<td>101</td>
<td>40,000</td>
<td>4,000</td>
<td>36,000</td>
</tr>
<tr>
<td>102</td>
<td>80,000</td>
<td>6,000</td>
<td>74,000</td>
</tr>
<tr>
<td>103</td>
<td>90,000</td>
<td>7,000</td>
<td>83,000</td>
</tr>
<tr>
<td>104</td>
<td>75,000</td>
<td>5,000</td>
<td>70,000</td>
</tr>
</table>
<p>The following UNION query combines the EmployeeNo value from both Employee and Salary table.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo 
FROM  
Employee 
UNION 

SELECT EmployeeNo 
FROM  
Salary;
</pre>
<p>When the query is executed, it produces the following output.</p>
<pre class="result notranslate">
EmployeeNo 
----------- 
   101 
   102 
   103 
   104 
   105
</pre>
<h2>UNION ALL</h2>
<p>UNION ALL statement is similar to UNION, it combines results from multiple tables including duplicate rows.</p>
<h3>Syntax</h3>
<p>Following is the basic syntax of the UNION ALL statement.</p>
<pre class="result notranslate">
SELECT col1, col2, col3… 
FROM  
&lt;table 1&gt; 
[WHERE condition] 
UNION ALL 

SELECT col1, col2, col3…
FROM  
&lt;table 2&gt; 
[WHERE condition];
</pre>
<h3>Example</h3>
<p>Following is an example for UNION ALL statement.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo 
FROM  
Employee 
UNION ALL 

SELECT EmployeeNo 
FROM  
Salary;
</pre>
<p>When the above query is executed, it produces the following output. You can see that it returns the duplicates also.</p>
<pre class="result notranslate">
 EmployeeNo 
----------- 
    101 
    104 
    102 
    105 
    103 
    101 
    104 
    102 
    103
</pre>
<h2>INTERSECT</h2>
<p>INTERSECT command is also used to combine results from multiple SELECT statements. It returns the rows from the first SELECT statement that has corresponding match in the second SELECT statements. In other words, it returns the rows that exist in both SELECT statements.</p>
<h3>Syntax</h3>
<p>Following is the basic syntax of the INTERSECT statement.</p>
<pre class="result notranslate">
SELECT col1, col2, col3… 
FROM  
&lt;table 1&gt;
[WHERE condition] 
INTERSECT 

SELECT col1, col2, col3… 
FROM  
&lt;table 2&gt; 
[WHERE condition];
</pre>
<h3>Example</h3>
<p>Following is an example of INTERSECT statement. It returns the EmployeeNo values that exist in both tables.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo 
FROM  
Employee 
INTERSECT 

SELECT EmployeeNo 
FROM  
Salary; 
</pre>
<p>When the above query is executed, it returns the following records. EmployeeNo 105 is excluded since it doesn’t exist in SALARY table.</p>
<pre class="result notranslate">
EmployeeNo 
----------- 
   101 
   104 
   102 
   103 
</pre>
<h2>MINUS/EXCEPT</h2>
<p>MINUS/EXCEPT commands combine rows from multiple tables and returns the rows which are in first SELECT but not in second SELECT. They both return the same results.</p>
<h3>Syntax</h3>
<p>Following is the basic syntax of the MINUS statement.</p>
<pre class="prettyprint notranslate">
SELECT col1, col2, col3… 
FROM  
&lt;table 1&gt; 
[WHERE condition] 
MINUS 

SELECT col1, col2, col3… 
FROM  
&lt;table 2&gt; 
[WHERE condition];
</pre>
<h3>Example</h3>
<p>Following is an example of MINUS statement.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo 
FROM  
Employee 
MINUS 

SELECT EmployeeNo 
FROM  
Salary;
</pre>
<p>When this query is executed, it returns the following record.</p>
<pre class="result notranslate">
EmployeeNo 
----------- 
   105 
</pre>
<h1>Teradata - String Manipulation</h1>
<p>Teradata provides several functions to manipulate the strings. These functions are compatible with ANSI standard.</p>
<table class="table table-bordered">
<tr>
<th>Sr.No</th>
<th style="text-align:center">String Function &amp; Description</th>
</tr>
<tr>
<td>1</td>
<td><b>||</b>
<p>Concatenates strings together</p></td>
</tr>
<tr>
<td>2</td>
<td><b>SUBSTR</b>
<p>Extracts a portion of a string (Teradata extension)</p></td>
</tr>
<tr>
<td>3</td>
<td><b>SUBSTRING</b>
<p>Extracts a portion of a string (ANSI standard)</p></td>
</tr>
<tr>
<td>4</td>
<td><b>INDEX</b>
<p>Locates the position of a character in a string (Teradata extension)</p></td>
</tr>
<tr>
<td>5</td>
<td><b>POSITION</b>
<p>Locates the position of a character in a string (ANSI standard)</p></td>
</tr>
<tr>
<td>6</td>
<td><b>TRIM</b>
<p>Trims blanks from a string</p></td>
</tr>
<tr>
<td>7</td>
<td><b>UPPER</b>
<p>Converts a string to uppercase</p></td>
</tr>
<tr>
<td>8</td>
<td><b>LOWER</b>
<p>Converts a string to lowercase</p></td>
</tr>
</table>
<h2>Example</h2>
<p>Following table lists some of the string functions with the results.</p>
<table class="table table-bordered">
<tr>
<th style="text-align:center; width:63%;">String Function</th>
<th style="text-align:center">Result</th>
</tr>
<tr>
<td>SELECT SUBSTRING(‘warehouse’ FROM 1 FOR 4)</td>
<td>ware</td>
</tr>
<tr>
<td>SELECT SUBSTR(‘warehouse’,1,4)</td>
<td>ware</td>
</tr>
<tr>
<td>SELECT ‘data’ || ‘ ‘ || ‘warehouse’</td>
<td>data warehouse</td>
</tr>
<tr>
<td>SELECT UPPER(‘data’)</td>
<td>DATA</td>
</tr>
<tr>
<td>SELECT LOWER(‘DATA’)</td>
<td>data</td>
</tr>
</table>
<h1>Teradata - Date/Time Functions</h1>
<p>This chapter discusses the date/time functions available in Teradata.</p>
<h2>Date Storage</h2> 
<p>Dates are stored as integer internally using the following formula.</p>
<pre class="result notranslate">
((YEAR - 1900) * 10000) &plus; (MONTH * 100) &plus; DAY
</pre>
<p>You can use the following query to check how the dates are stored.</p>
<pre class="result notranslate">
SELECT CAST(CURRENT_DATE AS INTEGER);
</pre>
<p>Since the dates are stored as integer, you can perform some arithmetic operations on them. Teradata provides functions to perform these operations.</p>
<h2>EXTRACT</h2>
<p>EXTRACT function extracts portions of day, month and year from a DATE value. This function is also used to extract hour, minute and second from TIME/TIMESTAMP value.</p>
<h3>Example</h3>
<p>Following examples show how to extract Year, Month, Date, Hour, Minute and second values from Date and Timestamp values.</p>
<pre class="prettyprint notranslate">
SELECT EXTRACT(YEAR FROM CURRENT_DATE);  
EXTRACT(YEAR FROM Date) 
----------------------- 
        2016  
SELECT EXTRACT(MONTH FROM CURRENT_DATE);  
EXTRACT(MONTH FROM Date) 
------------------------ 
          1        
SELECT EXTRACT(DAY FROM CURRENT_DATE);  
EXTRACT(DAY FROM Date) 
------------------------ 
          1    
       
SELECT EXTRACT(HOUR FROM CURRENT_TIMESTAMP);  
EXTRACT(HOUR FROM Current TimeStamp(6)) 
--------------------------------------- 
                 4      
SELECT EXTRACT(MINUTE FROM CURRENT_TIMESTAMP);  
EXTRACT(MINUTE FROM Current TimeStamp(6)) 
----------------------------------------- 
                 54  
SELECT EXTRACT(SECOND FROM CURRENT_TIMESTAMP);  
EXTRACT(SECOND FROM Current TimeStamp(6)) 
----------------------------------------- 
              27.140000
</pre>
<h2>INTERVAL</h2>
<p>Teradata provides INTERVAL function to perform arithmetic operations on DATE and TIME values. There are two types of INTERVAL functions.</p>
<h3>Year-Month Interval</h3>
<ul class="list">
<li>YEAR</li>
<li>YEAR TO MONTH</li>
<li>MONTH</li>
</ul>
<h3>Day-Time Interval</h3>
<ul class="list">
<li>DAY</li>
<li>DAY TO HOUR</li>
<li>DAY TO MINUTE</li>
<li>DAY TO SECOND</li>
<li>HOUR</li>
<li>HOUR TO MINUTE</li>
<li>HOUR TO SECOND</li>
<li>MINUTE</li>
<li>MINUTE TO SECOND</li>
<li>SECOND</li>
</ul>
<h3>Example</h3>
<p>The following example adds 3 years to current date.</p>
<pre class="prettyprint notranslate">
SELECT CURRENT_DATE, CURRENT_DATE &plus; INTERVAL '03' YEAR; 
  Date    (Date&plus; 3) 
--------  --------- 
16/01/01   19/01/01
</pre>
<p>The following example adds 3 years and 01 month to current date.</p>
<pre class="prettyprint notranslate">
SELECT CURRENT_DATE, CURRENT_DATE &plus; INTERVAL '03-01' YEAR TO MONTH; 
 Date     (Date&plus; 3-01) 
--------  ------------ 
16/01/01    19/02/01
</pre>
<p>The following example adds 01 day, 05 hours and 10 minutes to current timestamp.</p>
<pre class="prettyprint notranslate">
SELECT CURRENT_TIMESTAMP,CURRENT_TIMESTAMP &plus; INTERVAL '01 05:10' DAY TO MINUTE; 
     Current TimeStamp(6)         (Current TimeStamp(6)&plus; 1 05:10) 
--------------------------------  -------------------------------- 
2016-01-01 04:57:26.360000&plus;00:00  2016-01-02 10:07:26.360000&plus;00:00
</pre>
<h1>Teradata - Built-in Functions</h1>
<p>Teradata provides built-in functions which are extensions to SQL. Following are the common built-in functions.</p>
<table class="table table-bordered" style="text-align:center;">
<tr>
<th style="text-align:center;">Function</th>
<th style="text-align:center;">Result</th>
</tr>
<tr>
<td style="vertical-align:middle">SELECT DATE;</td>
<td>Date<br /> -------- <br />16/01/01</td>
</tr>
<tr>
<td style="vertical-align:middle">SELECT CURRENT_DATE;</td>
<td>Date<br /> --------<br />16/01/01</td>
</tr>
<tr>
<td style="vertical-align:middle">SELECT TIME;</td>
<td>Time<br />--------<br />04:50:29</td>
</tr>
<tr>
<td style="vertical-align:middle">SELECT CURRENT_TIME;</td>
<td>Time<br /> -------- <br />04:50:29</td>
</tr>
<tr>
<td style="vertical-align:middle">SELECT CURRENT_TIMESTAMP;</td>
<td>Current TimeStamp(6)<br />--------------------------------<br />2016-01-01 04:51:06.990000&plus;00:00</td>
</tr>
<tr>
<td style="vertical-align:middle">SELECT DATABASE;</td>
<td>Database<br />------------------------------<br />TDUSER</td>
</tr>
</table>
<h1>Teradata - Aggregate Functions</h1>
<p>Teradata supports common aggregate functions. They can be used with the SELECT statement.</p>
<ul class="list">
<li><p><b>COUNT</b> &minus; Counts the rows</p></li>
<li><p><b>SUM</b> &minus; Sums up the values of the specified column(s)</p></li>
<li><p><b>MAX</b> &minus; Returns the large value of the specified column</p></li>
<li><p><b>MIN</b> &minus; Returns the minimum value of the specified column</p></li>
<li><p><b>AVG</b> &minus; Returns the average value of the specified column</p></li>
</ul>
<h2>Example</h2>
<p>Consider the following Salary Table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">Gross</th>
<th style="text-align:center">Deduction</th>
<th style="text-align:center">NetPay</th>
</tr>
<tr>
<td>101</td>
<td>40,000</td>
<td>4,000</td>
<td>36,000</td>
</tr>
<tr>
<td>104</td>
<td>75,000</td>
<td>5,000</td>
<td>70,000</td>
</tr>
<tr>
<td>102</td>
<td>80,000</td>
<td>6,000</td>
<td>74,000</td>
</tr>
<tr>
<td>105</td>
<td>70,000</td>
<td>4,000</td>
<td>66,000</td>
</tr>
<tr>
<td>103</td>
<td>90,000</td>
<td>7,000</td>
<td>83,000</td>
</tr>
</table>
<h2>COUNT</h2>
<p>The following example counts the number of records in the Salary table.</p>
<pre class="prettyprint notranslate">
SELECT count(*) from Salary;  

  Count(*) 
----------- 
    5 
</pre>
<h2>MAX</h2>
<p>The following example returns maximum employee net salary value.</p>
<pre class="prettyprint notranslate">
SELECT max(NetPay) from Salary;   
   Maximum(NetPay) 
--------------------- 
       83000 
</pre>
<h2>MIN</h2>
<p>The following example returns minimum employee net salary value from the Salary table.</p>
<pre class="prettyprint notranslate">
SELECT min(NetPay) from Salary;   

   Minimum(NetPay) 
--------------------- 
        36000
</pre>
<h2>AVG</h2>
<p>The following example returns the average of employees net salary value from the table.</p>
<pre class="prettyprint notranslate">
SELECT avg(NetPay) from Salary; 
  
   Average(NetPay) 
--------------------- 
       65800 
</pre>
<h2>SUM</h2>
<p>The following example calculates the sum of employees net salary from all records of the Salary table.</p>
<pre class="prettyprint notranslate">
SELECT sum(NetPay) from Salary;
  
   Sum(NetPay) 
----------------- 
     329000
</pre>
<h1>Teradata - CASE and COALESCE</h1>
<p>This chapter explains the CASE and COALESCE functions of Teradata.</p>
<h2>CASE Expression</h2> 
<p>CASE expression evaluates each row against a condition or WHEN clause and returns the result of the first match. If there are no matches then the result from ELSE part of returned.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the CASE expression.</p>
<pre class="result notranslate">
CASE &lt;expression&gt; 
WHEN &lt;expression&gt; THEN result-1 
WHEN &lt;expression&gt; THEN result-2 

ELSE  
   Result-n 
END
</pre>
<h3>Example</h3>
<p>Consider the following Employee table.</p>
<table class="table table-bordered" style="text-align:center; font-size:12px;">
<tr>
<th>EmployeeNo</th>
<th>FirstName</th>
<th>LastName</th>
<th>JoinedDate</th>
<th>DepartmentNo</th>
<th>BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>3/27/2005</td>
<td>1</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>4/25/2007</td>
<td>2</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>3/21/2007</td>
<td>2</td>
<td>4/1/1983</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>2/1/2008</td>
<td>2</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>1/4/2008</td>
<td>3</td>
<td>12/1/1984</td>
</tr>
</table>
<p>The following example evaluates the DepartmentNo column and returns value of 1 if the department number is 1; returns 2 if the department number is 3; otherwise it returns value as invalid department.</p>
<pre class="prettyprint notranslate">
SELECT 
   EmployeeNo, 
CASE DepartmentNo 
   WHEN 1 THEN 'Admin' 
   WHEN 2 THEN 'IT' 
ELSE 'Invalid Dept'
   END AS Department 
FROM Employee; 
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
*** Query completed. 5 rows found. 2 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo    Department 
-----------   ------------ 
   101         Admin 
   104         IT 
   102         IT 
   105         Invalid Dept 
   103         IT
</pre>
<p>The above CASE expression can also be written in the following form which will produce the same result as above.</p>
<pre class="result notranslate">
SELECT 
   EmployeeNo, 
CASE  
   WHEN DepartmentNo = 1 THEN 'Admin' 
   WHEN  DepartmentNo = 2 THEN 'IT' 
ELSE 'Invalid Dept' 
   END AS Department  
FROM Employee;
</pre>
<h2>COALESCE</h2>
<p>COALESCE is a statement that returns the first non-null value of the expression. It returns NULL if all the arguments of the expression evaluates to NULL. Following is the syntax.</p>
<h3>Syntax</h3>
<pre class="result notranslate">
COALESCE(expression 1, expression 2, ....) 
</pre>
<h3>Example</h3>
<pre class="prettyprint notranslate">
SELECT 
   EmployeeNo, 
   COALESCE(dept_no, 'Department not found') 
FROM  
   employee;
</pre>
<h2>NULLIF</h2>
<p>NULLIF statement returns NULL if the arguments are equal.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the NULLIF statement.</p>
<pre class="result notranslate">
NULLIF(expression 1, expression 2) 
</pre>
<h3>Example</h3>
<p>The following example returns NULL if the DepartmentNo is equal to 3. Otherwise, it returns the DepartmentNo value.</p>
<pre class="prettyprint notranslate">
SELECT 
   EmployeeNo,  
   NULLIF(DepartmentNo,3) AS department 
FROM Employee;
</pre>
<p>The above query returns the following records. You can see that employee 105 has department no. as NULL.</p>
<pre class="result notranslate">
*** Query completed. 5 rows found. 2 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo      department 
-----------  ------------------ 
    101              1 
    104              2 
    102              2 
    105              ? 
    103              2
</pre>
<h1>Teradata - Primary Index</h1>
<p>Primary index is used to specify where the data resides in Teradata. It is used to specify which AMP gets the data row. Each table in Teradata is required to have a primary index defined. If the primary index is not defined, Teradata automatically assigns the primary index. Primary index provides the fastest way to access the data. A primary may have a maximum of 64 columns.</p>
<p>Primary index is defined while creating a table. There are 2 types of Primary Indexes.</p>
<ul class="list">
<li>Unique Primary Index(UPI)</li>
<li>Non Unique Primary Index(NUPI)</li>
</ul>
<h2>Unique Primary Index (UPI)</h2>
<p>If the table is defined to be having UPI, then the column deemed as UPI should not have any duplicate values. If any duplicate values are inserted, they will be rejected.</p> 
<h3>Create Unique Primary Index</h3> 
<p>The following example creates the Salary table with column EmployeeNo as Unique Primary Index.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE Salary ( 
   EmployeeNo INTEGER, 
   Gross INTEGER,  
   Deduction INTEGER, 
   NetPay INTEGER 
) 
UNIQUE PRIMARY INDEX(EmployeeNo);
</pre>
<h2>Non Unique Primary Index (NUPI)</h2>
<p>If the table is defined to be having NUPI, then the column deemed as UPI can accept duplicate values.</p>
<h3>Create Non Unique Primary Index</h3>
<p>The following example creates the employee accounts table with column EmployeeNo as Non Unique Primary Index. EmployeeNo is defined as Non Unique Primary Index since an employee can have multiple accounts in the table; one for salary account and another one for reimbursement account.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE Employee _Accounts ( 
   EmployeeNo INTEGER, 
   employee_bank_account_type BYTEINT. 
   employee_bank_account_number INTEGER, 
   employee_bank_name VARCHAR(30), 
   employee_bank_city VARCHAR(30) 
) 
PRIMARY INDEX(EmployeeNo);
</pre>
<h1>Teradata - Joins</h1>
<p>Join is used to combine records from more than one table. Tables are joined based on the common columns/values from these tables.</p>
<p>There are different types of Joins available.</p>
<ul class="list">
<li>Inner Join</li>
<li>Left Outer Join</li>
<li>Right Outer Join</li>
<li>Full Outer Join</li>
<li>Self Join</li>
<li>Cross Join</li>
<li>Cartesian Production Join</li>
</ul>
<h2>INNER JOIN</h2>
<p>Inner Join combines records from multiple tables and returns the values that exist in both the tables.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the INNER JOIN statement.</p>
<pre class="result notranslate">
SELECT col1, col2, col3…. 
FROM  
Table-1 
INNER JOIN 
Table-2 
ON (col1 = col2) 
&lt;WHERE condition&gt;;
</pre>
<h3>Example</h3>
<p>Consider the following employee table and salary table.</p>
<table class="table table-bordered" style="text-align:center; font-size:12px;">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">JoinedDate</th>
<th style="text-align:center">DepartmentNo</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>3/27/2005</td>
<td>1</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>4/25/2007</td>
<td>2</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>3/21/2007</td>
<td>2</td>
<td>4/1/1983</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>2/1/2008</td>
<td>2</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>1/4/2008</td>
<td>3</td>
<td>12/1/1984</td>
</tr>
</table>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">Gross</th>
<th style="text-align:center">Deduction</th>
<th style="text-align:center">NetPay</th>
</tr>
<tr>
<td>101</td>
<td>40,000</td>
<td>4,000</td>
<td>36,000</td>
</tr>
<tr>
<td>102</td>
<td>80,000</td>
<td>6,000</td>
<td>74,000</td>
</tr>
<tr>
<td>103</td>
<td>90,000</td>
<td>7,000</td>
<td>83,000</td>
</tr>
<tr>
<td>104</td>
<td>75,000</td>
<td>5,000</td>
<td>70,000</td>
</tr>
</table>
<p>The following query joins the Employee table and Salary table on the common column EmployeeNo. Each table is assigned an alias A &amp; B and the columns are referenced with the correct alias.</p>
<pre class="prettyprint notranslate">
SELECT A.EmployeeNo, A.DepartmentNo, B.NetPay 
FROM  
Employee A 
INNER JOIN 
Salary B 
ON (A.EmployeeNo = B. EmployeeNo);
</pre>
<p>When the above query is executed, it returns the following records. Employee 105 is not included in the result since it doesn’t have matching records in the Salary table.</p>
<pre class="result notranslate">
*** Query completed. 4 rows found. 3 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo   DepartmentNo     NetPay 
-----------  ------------   ----------- 
    101           1            36000 
    102           2            74000 
    103           2            83000 
    104           2            70000
</pre>
<h2>OUTER JOIN</h2>
<p>LEFT OUTER JOIN and RIGHT OUTER JOIN also combine the results from multiple table.</p>
<ul class="list">
<li><p><b>LEFT OUTER JOIN</b> returns all the records from the left table and returns only the matching records from the right table.</p></li>
<li><p><b>RIGHT OUTER JOIN</b> returns all the records from the right table and returns only matching rows from the left table.</p></li>
<li><p><b>FULL OUTER JOIN</b> combines the results from both LEFT OUTER and RIGHT OUTER JOINS. It returns both matching and non-matching rows from the joined tables.</p></li>
</ul>
<h3>Syntax</h3>
<p>Following is the syntax of the OUTER JOIN statement. You need to use one of the options from LEFT OUTER JOIN, RIGHT OUTER JOIN or FULL OUTER JOIN.</p>
<pre class="result notranslate">
SELECT col1, col2, col3…. 
FROM  
Table-1 
LEFT OUTER JOIN/RIGHT OUTER JOIN/FULL OUTER JOIN 
Table-2 
ON (col1 = col2) 
&lt;WHERE condition&gt;;
</pre>
<h3>Example</h3>
<p>Consider the following example of the LEFT OUTER JOIN query. It returns all the records from Employee table and matching records from Salary table.</p>
<pre class="prettyprint notranslate">
SELECT A.EmployeeNo, A.DepartmentNo, B.NetPay 
FROM  
Employee A 
LEFT OUTER JOIN 
Salary B 
ON (A.EmployeeNo = B. EmployeeNo) 
ORDER BY A.EmployeeNo; 
</pre>
<p>When the above query is executed, it produces the following output. For employee 105, NetPay value is NULL, since it doesn’t have matching records in Salary table.</p>
<pre class="result notranslate">
*** Query completed. 5 rows found. 3 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo  DepartmentNo     NetPay 
-----------  ------------   ----------- 
    101           1           36000 
    102           2           74000 
    103           2           83000 
    104           2           70000 
    105           3             ?
</pre>
<h2>CROSS JOIN</h2>
<p>Cross Join joins every row from the left table to every row from the right table.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the CROSS JOIN statement.</p>
<pre class="result notranslate">
SELECT A.EmployeeNo, A.DepartmentNo, B.EmployeeNo,B.NetPay 
FROM  
Employee A 
CROSS JOIN 
Salary B 
WHERE A.EmployeeNo = 101 
ORDER BY B.EmployeeNo;
</pre>
<p>When the above query is executed, it produces the following output. Employee No 101 from Employee table is joined with each and every record from Salary Table.</p>
<pre class="result notranslate">
*** Query completed. 4 rows found. 4 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo  DepartmentNo   EmployeeNo    NetPay 
-----------  ------------  -----------  ----------- 
    101           1            101         36000 
    101           1            104         70000 
    101           1            102         74000 
    101           1            103         83000
</pre>
<h1>Teradata - SubQueries</h1>
<p>A subquery returns records from one table based on the values from another table. It is a SELECT query within another query. The SELECT query called as inner query is executed first and the result is used by the outer query. Some of its salient features are &minus;</p>
<ul class="list">
<li><p>A query can have multiple subqueries and subqueries may contain another subquery.</p></li>
<li><p>Subqueries doesn't return duplicate records.</p></li>
<li><p>If subquery returns only one value, you can use = operator to use it with the outer query. If it returns multiple values you can use IN or NOT IN.</p></li>
</ul>
<h2>Syntax</h2>
<p>Following is the generic syntax of subqueries.</p>
<pre class="result notranslate">
SELECT col1, col2, col3,… 
FROM  
Outer Table 
WHERE col1 OPERATOR ( Inner SELECT Query);
</pre>
<h2>Example</h2>
<p>Consider the following Salary table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">Gross</th>
<th style="text-align:center">Deduction</th>
<th style="text-align:center">NetPay</th>
</tr>
<tr>
<td>101</td>
<td>40,000</td>
<td>4,000</td>
<td>36,000</td>
</tr>
<tr>
<td>102</td>
<td>80,000</td>
<td>6,000</td>
<td>74,000</td>
</tr>
<tr>
<td>103</td>
<td>90,000</td>
<td>7,000</td>
<td>83,000</td>
</tr>
<tr>
<td>104</td>
<td>75,000</td>
<td>5,000</td>
<td>70,000</td>
</tr>
</table>
<p>The following query identifies the employee number with highest salary. The inner SELECT performs the aggregation function to return the maximum NetPay value and the outer SELECT query uses this value to return the employee record with this value.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo, NetPay 
FROM Salary 
WHERE NetPay =  
(SELECT MAX(NetPay)  
FROM Salary);
</pre>
<p>When this query is executed, it produces the following output.</p>
<pre class="result notranslate">
*** Query completed. One row found. 2 columns returned. 
*** Total elapsed time was 1 second.  
 EmployeeNo     NetPay 
-----------  ----------- 
    103         83000 
</pre>
<h1>Teradata - Table Types</h1>
<p>Teradata supports the following table types to hold temporary data.</p>
<ul class="list">
<li>Derived Table</li>
<li>Volatile Table</li>
<li>Global Temporary Table</li>
</ul>
<h2>Derived Table</h2>
<p>Derived tables are created, used and dropped within a query. These are used to store intermediate results within a query.</p>
<h3>Example</h3>
<p>The following example builds a derived table EmpSal with records of employees with salary greater than 75000.</p>
<pre class="prettyprint notranslate">
SELECT 
Emp.EmployeeNo, 
Emp.FirstName, 
Empsal.NetPay 
FROM 
Employee Emp, 
(select EmployeeNo , NetPay 
from Salary
where NetPay &gt;= 75000) Empsal 
where Emp.EmployeeNo = Empsal.EmployeeNo;
</pre>
<p>When the above query is executed, it returns the employees with salary greater than 75000.</p>
<pre class="result notranslate">
*** Query completed. One row found. 3 columns returned. 
*** Total elapsed time was 1 second. 
 EmployeeNo            FirstName               NetPay 
-----------  ------------------------------  ----------- 
    103                  Peter                 83000 
</pre>
<h2>Volatile Table</h2>
<p>Volatile tables are created, used and dropped within a user session. Their definition is not stored in data dictionary. They hold intermediate data of the query which is frequently used. Following is the syntax.</p>
<h3>Syntax</h3>
<pre class="result notranslate">
CREATE [SET|MULTISET] VOALTILE TABLE tablename 
&lt;table definitions&gt; 
&lt;column definitions&gt; 
&lt;index definitions&gt; 
ON COMMIT [DELETE|PRESERVE] ROWS
</pre>
<h3>Example</h3>
<pre class="prettyprint notranslate">
CREATE VOLATILE TABLE dept_stat ( 
   dept_no INTEGER, 
   avg_salary INTEGER, 
   max_salary INTEGER, 
   min_salary INTEGER 
) 
PRIMARY INDEX(dept_no) 
ON COMMIT PRESERVE ROWS;
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
*** Table has been created. 
*** Total elapsed time was 1 second.
</pre>
<h2>Global Temporary Table</h2>
<p>The definition of Global Temporary table is stored in data dictionary and they can be used by many users/sessions. But the data loaded into global temporary table is retained only during the session. You can materialize up to 2000 global temporary tables per session. Following is the syntax.</p>
<h3>Syntax</h3>
<pre class="result notranslate">
CREATE [SET|MULTISET] GLOBAL TEMPORARY TABLE tablename 
&lt;table definitions&gt; 
&lt;column definitions&gt; 
&lt;index definitions&gt; 
</pre>
<h3>Example</h3>
<pre class="prettyprint notranslate">
CREATE SET GLOBAL TEMPORARY TABLE dept_stat ( 
   dept_no INTEGER, 
   avg_salary INTEGER, 
   max_salary INTEGER, 
   min_salary INTEGER 
) 
PRIMARY INDEX(dept_no);
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
*** Table has been created. 
*** Total elapsed time was 1 second.
</pre>
<h1>Teradata - Space Concepts</h1>
<p>There are three types of spaces available in Teradata.</p>
<h2>Permanent Space</h2> 
<p>Permanent space is the maximum amount of space available for the user/database to hold data rows. Permanent tables, journals, fallback tables and secondary index sub-tables use permanent space.</p>
<p>Permanent space is not pre-allocated for the database/user. They are just defined as the maximum amount of space the database/user can use. The amount of permanent space is divided by the number of AMPs. Whenever per AMP limit exceeds, an error message is generated.</p>
<h2>Spool Space</h2> 
<p>Spool space is the unused permanent space which is used by the system to keep the intermediate results of the SQL query. Users without spool space cannot execute any query.</p>
<p>Similar to Permanent space, spool space defines the maximum amount of space the user can use. Spool space is divided by the number of AMPs. Whenever per AMP limit exceeds, the user will get a spool space error.</p>
<h2>Temp Space</h2> 
<p>Temp space is the unused permanent space which is used by Global Temporary tables. Temp space is also divided by the number of AMPs.</p>
<h1>Teradata - Secondary Index</h1>
<p>A table can contain only one primary index. More often, you will come across scenarios where the table contains other columns, using which the data is frequently accessed. Teradata will perform full table scan for those queries. Secondary indexes resolve this issue.</p>
<p>Secondary indexes are an alternate path to access the data. There are some differences between the primary index and the secondary index.</p>
<ul class="list">
<li><p>Secondary index is not involved in data distribution.</p></li>
<li><p>Secondary index values are stored in sub tables. These tables are built in all AMPs.</p></li>
<li><p>Secondary indexes are optional.</p></li>
<li><p>They can be created during table creation or after a table is created.</p></li>
<li><p>They occupy additional space since they build sub-table and they also require maintenance since the sub-tables need to be updated for each new row.</p></li>
</ul>
<p>There are two types of secondary indexes &minus;</p>
<ul class="list">
<li>Unique Secondary Index (USI)</li>
<li>Non-Unique Secondary Index (NUSI)</li>
</ul>
<h2>Unique Secondary Index (USI)</h2>
<p>A Unique Secondary Index allows only unique values for the columns defined as USI. Accessing the row by USI is a two amp operation.</p>
<h3>Create Unique Secondary Index</h3> 
<p>The following example creates USI on EmployeeNo column of employee table.</p>
<pre class="result notranslate">
CREATE UNIQUE INDEX(EmployeeNo) on employee;
</pre>
<h2>Non Unique Secondary Index (NUSI)</h2>
<p>A Non-Unique Secondary Index allows duplicate values for the columns defined as NUSI. Accessing the row by NUSI is all-amp operation.</p>
<h3>Create Non Unique Secondary Index</h3> 
<p>The following example creates NUSI on FirstName column of employee table.</p>
<pre class="result notranslate">
CREATE INDEX(FirstName) on Employee;
</pre>
<h1>Teradata - Statistics</h1>
<p>Teradata optimizer comes up with an execution strategy for every SQL query. This execution strategy is based on the statistics collected on the tables used within the SQL query. Statistics on the table is collected using COLLECT STATISTICS command. Optimizer requires environment information and data demographics to come up with optimal execution strategy.</p>
<h3>Environment Information</h3>
<ul class="list">
<li>Number of Nodes, AMPs and CPUs</li>
<li>Amount of memory</li>
</ul>
<h3>Data Demographics</h3>
<ul class="list">
<li>Number of rows</li>
<li>Row size</li>
<li>Range of values in the table</li>
<li>Number of rows per value</li>
<li>Number of Nulls</li>
</ul>
<p>There are three approaches to collect statistics on the table.</p>
<ul class="list">
<li>Random AMP Sampling</li>
<li>Full statistics collection</li>
<li>Using SAMPLE option</li>
</ul>
<h2>Collecting Statistics</h2>
<p>COLLECT STATISTICS command is used to collect statistics on a table.</p>
<h3>Syntax</h3>
<p>Following is the basic syntax to collect statistics on a table.</p>
<pre class="result notranslate">
COLLECT [SUMMARY] STATISTICS   
INDEX (indexname) COLUMN (columnname) 
ON &lt;tablename&gt;;
</pre>
<h3>Example</h3>
<p>The following example collects statistics on EmployeeNo column of Employee table.</p>
<pre class="prettyprint notranslate">
COLLECT STATISTICS COLUMN(EmployeeNo) ON Employee;
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
*** Update completed. 2 rows changed. 
*** Total elapsed time was 1 second.
</pre>
<h2>Viewing Statistics</h2>
<p>You can view the collected statistics using HELP STATISTICS command.</p>
<h3>Syntax</h3>
<p>Following is the syntax to view the statistics collected.</p>
<pre class="result notranslate">
HELP STATISTICS &lt;tablename&gt;; 
</pre>
<h3>Example</h3>
<p>Following is an example to view the statistics collected on Employee table.</p>
<pre class="prettyprint notranslate">
HELP STATISTICS employee;
</pre>
<p>When the above query is executed, it produces the following result.</p>
<pre class="result notranslate">
  Date       Time      Unique Values           Column Names 
--------   -------- -------------------- ----------------------- 
16/01/01   08:07:04         5                       * 
16/01/01   07:24:16         3                   DepartmentNo 
16/01/01   08:07:04         5                   EmployeeNo
</pre>
<h1>Teradata - Compression</h1>
<p>Compression is used to reduce the storage used by the tables. In Teradata, compression can compress up to 255 distinct values including NULL. Since the storage is reduced, Teradata can store more records in a block. This results in improved query response time since any I/O operation can process more rows per block. Compression can be added at table creation using CREATE TABLE or after table creation using ALTER TABLE command.</p>
<h2>Limitations</h2>
<ul class="list">
<li>Only 255 values can be compressed per column.</li>
<li>Primary Index column cannot be compressed.</li>
<li>Volatile tables cannot be compressed.</li>
</ul>
<h2>Multi-Value Compression (MVC)</h2>
<p>The following table compresses the field DepatmentNo for values 1, 2 and 3. When compression is applied on a column, the values for this column is not stored with the row. Instead the values are stored in the Table header in each AMP and only presence bits are added to the row to indicate the value.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE employee ( 
   EmployeeNo integer, 
   FirstName CHAR(30), 
   LastName CHAR(30), 
   BirthDate DATE FORMAT 'YYYY-MM-DD-', 
   JoinedDate DATE FORMAT 'YYYY-MM-DD-', 
   employee_gender CHAR(1), 
   DepartmentNo CHAR(02) COMPRESS(1,2,3) 
) 
UNIQUE PRIMARY INDEX(EmployeeNo);
</pre>
<p>Multi-Value compression can be used when you have a column in a large table with finite values.</p>
<h1>Teradata - Explain</h1>
<p>EXPLAIN command returns the execution plan of parsing engine in English. It can be used with any SQL statement except on another EXPLAIN command. When a query is preceded with EXPLAIN command, the execution plan of the Parsing Engine is returned to the user instead of AMPs.</p>
<h2>Examples of EXPLAIN</h2>
<p>Consider the table Employee with the following definition.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE EMPLOYEE,FALLBACK ( 
   EmployeeNo INTEGER, 
   FirstName VARCHAR(30), 
   LastName VARCHAR(30),
   DOB DATE FORMAT 'YYYY-MM-DD', 
   JoinedDate DATE FORMAT 'YYYY-MM-DD', 
   DepartmentNo BYTEINT 
) 
UNIQUE PRIMARY INDEX ( EmployeeNo );
</pre>
<p>Some examples of EXPLAIN plan are given below.</p>
<h2>Full Table Scan (FTS)</h2>
<p>When no conditions are specified in the SELECT statement, then the optimizer may choose to use Full Table Scan where each and every row of the table is accessed.</p>
<h3>Example</h3>
<p>Following is a sample query where the optimizer may choose FTS.</p>
<pre class="prettyprint notranslate">
EXPLAIN SELECT * FROM employee;
</pre>
<p>When the above query is executed, it produces the following output. As can be seen the optimizer chooses to access all AMPs and all rows within the AMP.</p>
<pre class="result notranslate">
1) First, we lock a distinct TDUSER."pseudo table" for read on a 
   RowHash to prevent global deadlock for TDUSER.employee.  
2) Next, we lock TDUSER.employee for read.  
3) We do an all-AMPs RETRIEVE step from TDUSER.employee by way of an
   all-rows scan with no residual conditions into Spool 1 
   (group_amps), which is built locally on the AMPs.  The size of 
   Spool 1 is estimated with low confidence to be 2 rows (116 bytes).  
   The estimated time for this step is 0.03 seconds.  
4) Finally, we send out an END TRANSACTION step to all AMPs involved 
   in processing the request. 
&rarr; The contents of Spool 1 are sent back to the user as the result of 
   statement 1.  The total estimated time is 0.03 seconds.
</pre>
<h2>Unique Primary Index</h2>
<p>When the rows are accessed using Unique Primary Index, then it is one AMP operation.</p>
<pre class="result notranslate">
EXPLAIN SELECT * FROM employee WHERE EmployeeNo = 101;
</pre>
<p>When the above query is executed, it produces the following output. As can be seen it is a single-AMP retrieval and the optimizer is using the unique primary index to access the row.</p>
<pre class="result notranslate">
1) First, we do a single-AMP RETRIEVE step from TDUSER.employee by 
   way of the unique primary index "TDUSER.employee.EmployeeNo = 101" 
   with no residual conditions. The estimated time for this step is 
   0.01 seconds.  
&rarr; The row is sent directly back to the user as the result of 
   statement 1.  The total estimated time is 0.01 seconds.
</pre>
<h2>Unique Secondary Index</h2>
<p>When the rows are accessed using Unique Secondary Index, it’s a two amp operation.</p>
<h3>Example</h3>
<p>Consider the table Salary with the following definition.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE SALARY,FALLBACK ( 
   EmployeeNo INTEGER, 
   Gross INTEGER, 
   Deduction INTEGER, 
   NetPay INTEGER 
)
PRIMARY INDEX ( EmployeeNo ) 
UNIQUE INDEX (EmployeeNo);
</pre>
<p>Consider the following SELECT statement.</p>
<pre class="result notranslate">
EXPLAIN SELECT * FROM Salary WHERE EmployeeNo = 101;
</pre>
<p>When the above query is executed, it produces the following output. As can be seen the optimizer retrieves the row in two amp operation using unique secondary index.</p>
<pre class="result notranslate">
1) First, we do a two-AMP RETRIEVE step from TDUSER.Salary 
   by way of unique index # 4 "TDUSER.Salary.EmployeeNo = 
   101" with no residual conditions.  The estimated time for this 
   step is 0.01 seconds.  
&rarr; The row is sent directly back to the user as the result of 
   statement 1.  The total estimated time is 0.01 seconds.
</pre>
<h2>Additional Terms</h2>
<p>Following is the list of terms commonly seen in EXPLAIN plan.</p>
<p><b>... (Last Use) …</b></p> 
<p style="padding-left:10%;">A spool file is no longer needed and will be released when this step completes.</p>
<p><b>... with no residual conditions …</b></p>
<p style="padding-left:10%;">All applicable conditions have been applied to the rows.</p>
<p><b>... END TRANSACTION …</b></p>
<p style="padding-left:10%;">Transaction locks are released, and changes are committed.</p>
<p><b>... eliminating duplicate rows ...</b></p>
<p style="padding-left:10%;">Duplicate rows only exist in spool files, not set tables. Doing a DISTINCT operation.</p>
<p><b>... by way of a traversal of index #n extracting row ids only …</b></p>
<p style="padding-left:10%;">A spool file is built containing the Row IDs found in a secondary index (index #n)</p>
<p><b>... we do a SMS (set manipulation step) …</b></p>
<p style="padding-left:10%;">Combining rows using a UNION, MINUS, or INTERSECT operator.</p>
<p><b>... which is redistributed by hash code to all AMPs.</b></p>  
<p style="padding-left:10%;">Redistributing data in preparation for a join.</p>
<p><b>... which is duplicated on all AMPs.</b></p>
<p style="padding-left:10%;">Duplicating data from the smaller table (in terms of SPOOL) in preparation for a join.</p>
<p><b>... (one_AMP) or (group_AMPs)</b></p>
<p style="padding-left:10%;">Indicates one AMP or subset of AMPs will be used instead of all AMPs.</p>
<h1>Teradata - Hashing Algorithm</h1>
<p>A row is assigned to a particular AMP based on the primary index value. Teradata uses hashing algorithm to determine which AMP gets the row.</p>
<p>Following is a high level diagram on hashing algorithm.</p>
<img src="images/hashing_algorithm.jpg" alt="Hashing Algorithm" />
<p>Following are the steps to insert the data.</p>
<ul class="list">
<li><p>The client submits a query.</p></li>
<li><p>The parser receives the query and passes the PI value of the record to the hashing algorithm.</p></li>
<li><p>The hashing algorithm hashes the primary index value and returns a 32 bit number, called Row Hash.</p></li>
<li><p>The higher order bits of the row hash (first 16 bits) is used to identify the hash map entry. The hash map contains one AMP #. Hash map is an array of buckets which contains specific AMP #.</p></li>
<li><p>BYNET sends the data to the identified AMP.</p></li>
<li><p>AMP uses the 32 bit Row hash to locate the row within its disk.</p></li>
<li><p>If there is any record with same row hash, then it increments the uniqueness ID which is a 32 bit number. For new row hash, uniqueness ID is assigned as 1 and incremented whenever a record with same row hash is inserted.</p></li>
<li><p>The combination of Row hash and Uniqueness ID is called as Row ID.</p></li>
<li><p>Row ID prefixes each record in the disk.</p></li>
<li><p>Each table row in the AMP is logically sorted by their Row IDs.</p></li>
</ul>
<h2>How Tables are Stored</h2>
<p>Tables are sorted by their Row ID (Row hash &plus; uniqueness id) and then stored within the AMPs. Row ID is stored with each data row.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">Row Hash</th>
<th style="text-align:center">Uniqueness ID</th>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
</tr>
<tr>
<td>2A01 2611</td>
<td>0000 0001</td>
<td>101</td>
<td>Mike</td>
<td>James</td>
</tr>
<tr>
<td>2A01 2612</td>
<td>0000 0001</td>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
</tr>
<tr>
<td>2A01 2613</td>
<td>0000 0001</td>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
</tr>
<tr>
<td>2A01 2614</td>
<td>0000 0001</td>
<td>105</td>
<td>Robert</td>
<td>James</td>
</tr>
<tr>
<td>2A01 2615</td>
<td>0000 0001</td>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
</tr>
</table>
<h1>Teradata - JOIN Index</h1>
<p>JOIN INDEX is a materialized view. Its definition is permanently stored and the data is updated whenever the base tables referred in the join index is updated. JOIN INDEX may contain one or more tables and also contain pre-aggregated data. Join indexes are mainly used for improving the performance.</p>
<p>There are different types of join indexes available.</p>
<ul class="list">
<li>Single Table Join Index (STJI)</li>
<li>Multi Table Join Index (MTJI)</li>
<li>Aggregated Join Index (AJI)</li>
</ul>
<h2>Single Table Join Index</h2>
<p>Single Table Join index allows to partition a large table based on the different primary index columns than the one from the base table.</p>
<h3>Syntax</h3>
<p>Following is the syntax of a JOIN INDEX.</p>
<pre class="result notranslate">
CREATE JOIN INDEX &lt;index name&gt; 
AS 
&lt;SELECT Query&gt; 
&lt;Index Definition&gt;;
</pre>
<h3>Example</h3>
<p>Consider the following Employee and Salary tables.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE EMPLOYEE,FALLBACK ( 
   EmployeeNo INTEGER, 
   FirstName VARCHAR(30) , 
   LastName VARCHAR(30) , 
   DOB DATE FORMAT 'YYYY-MM-DD', 
   JoinedDate DATE FORMAT 'YYYY-MM-DD', 
   DepartmentNo BYTEINT 
) 
UNIQUE PRIMARY INDEX ( EmployeeNo );

CREATE SET TABLE SALARY,FALLBACK ( 
   EmployeeNo INTEGER, 
   Gross INTEGER, 
   Deduction INTEGER, 
   NetPay INTEGER 
) 
PRIMARY INDEX ( EmployeeNo ) 
UNIQUE INDEX (EmployeeNo);
</pre>
<p>Following is an example that creates a Join index named Employee_JI on Employee table.</p>
<pre class="prettyprint notranslate">
CREATE JOIN INDEX Employee_JI 
AS 
SELECT EmployeeNo,FirstName,LastName, 
BirthDate,JoinedDate,DepartmentNo 
FROM Employee 
PRIMARY INDEX(FirstName);
</pre>
<p>If the user submits a query with a WHERE clause on EmployeeNo, then the system will query the Employee table using the unique primary index. If the user queries the employee table using employee_name, then the system may access the join index Employee_JI using employee_name. The rows of the join index are hashed on employee_name column. If the join index is not defined and the employee_name is not defined as secondary index, then the system will perform full table scan to access the rows which is time consuming.</p>
<p>You can run the following EXPLAIN plan and verify the optimizer plan. In the following example you can see that the optimizer is using the Join Index instead of base Employee table when the table queries using the Employee_Name column.</p>
<pre class="result notranslate">
EXPLAIN SELECT * FROM EMPLOYEE WHERE FirstName='Mike'; 
*** Help information returned. 8 rows. 
*** Total elapsed time was 1 second. 
Explanation 
------------------------------------------------------------------------ 
   1) First, we do a single-AMP RETRIEVE step from EMPLOYEE_JI by 
      way of the primary index "EMPLOYEE_JI.FirstName = 'Mike'" 
      with no residual conditions into Spool 1 (one-amp), which is built 
      locally on that AMP.  The size of Spool 1 is estimated with low 
      confidence to be 2 rows (232 bytes).  The estimated time for this 
      step is 0.02 seconds.
   &rarr; The contents of Spool 1 are sent back to the user as the result of 
      statement 1.  The total estimated time is 0.02 seconds. 
</pre>
<h2>Multi Table Join Index</h2>
<p>A multi-table join index is created by joining more than one table. Multi-table join index can be used to store the result set of frequently joined tables to improve the performance.</p>
<h3>Example</h3>
<p>The following example creates a JOIN INDEX named Employee_Salary_JI by joining Employee and Salary tables.</p>
<pre class="prettyprint notranslate">
CREATE JOIN INDEX Employee_Salary_JI 
AS 
SELECT a.EmployeeNo,a.FirstName,a.LastName, 
a.BirthDate,a.JoinedDate,a.DepartmentNo,b.Gross,b.Deduction,b.NetPay 
FROM Employee a 
INNER JOIN Salary b 
ON(a.EmployeeNo = b.EmployeeNo) 
PRIMARY INDEX(FirstName);
</pre>
<p>Whenever the base tables Employee or Salary are updated, then the Join index Employee_Salary_JI is also automatically updated. If you are running a query joining Employee and Salary tables, then the optimizer may choose to access the data from Employee_Salary_JI directly instead of joining the tables. EXPLAIN plan on the query can be used to verify if the optimizer will choose the base table or Join index.</p>
<h2>Aggregate Join Index</h2>
<p>If a table is consistently aggregated on certain columns, then aggregate join index can be defined on the table to improve the performance. One limitation of aggregate join index is that it supports only SUM and COUNT functions.</p>
<h3>Example</h3>
<p>In the following example Employee and Salary is joined to identify the total salary per Department.</p>
<pre class="prettyprint notranslate">
CREATE JOIN INDEX Employee_Salary_JI 
AS 
SELECT a.DepartmentNo,SUM(b.NetPay) AS TotalPay 
FROM Employee a 
INNER JOIN Salary b 
ON(a.EmployeeNo = b.EmployeeNo)
GROUP BY a.DepartmentNo 
Primary Index(DepartmentNo); 
</pre>
<h1>Teradata - Views</h1>
<p>Views are database objects that are built by the query. Views can be built using a single table or multiple tables by way of join. Their definition is stored permanently in data dictionary but they don't store copy of the data. Data for the view is built dynamically.</p>
<p>A view may contain a subset of rows of the table or a subset of columns of the table.</p>
<h2>Create a View</h2> 
<p>Views are created using CREATE VIEW statement.</p>
<h3>Syntax</h3>
<p>Following is the syntax for creating a view.</p>
<pre class="result notranslate">
CREATE/REPLACE VIEW &lt;viewname&gt; 
AS  
&lt;select query&gt;; 
</pre>
<h3>Example</h3>
<p>Consider the following Employee table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>12/1/1984</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>4/1/1983</td>
</tr>
</table>
<p>The following example creates a view on Employee table.</p>
<pre class="prettyprint notranslate">
CREATE VIEW Employee_View 
AS 
SELECT 
EmployeeNo, 
FirstName, 
LastName, 
FROM  
Employee;
</pre>
<h2>Using Views</h2>
<p>You can use regular SELECT statement to retrieve data from Views.</p>
<h3>Example</h3>
<p>The following example retrieves the records from Employee_View;</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo, FirstName, LastName FROM Employee_View;
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
*** Query completed. 5 rows found. 3 columns returned. 
*** Total elapsed time was 1 second.  
 EmployeeNo            FirstName                       LastName 
-----------  ------------------------------  --------------------------- 
    101                  Mike                           James 
    104                  Alex                           Stuart 
    102                  Robert                         Williams 
    105                  Robert                         James 
    103                  Peter                          Paul 
</pre>
<h2>Modifying Views</h2>
<p>An existing view can be modified using REPLACE VIEW statement.</p>
<p>Following is the syntax to modify a view.</p>
<pre class="result notranslate">
REPLACE VIEW &lt;viewname&gt; 
AS  
&lt;select query&gt;;
</pre>
<h3>Example</h3>
<p>The following example modifies the view Employee_View for adding additional columns.</p>
<pre class="prettyprint notranslate">
REPLACE VIEW Employee_View 
AS 
SELECT 
EmployeeNo, 
FirstName, 
BirthDate,
JoinedDate 
DepartmentNo 
FROM  
Employee; 
</pre>
<h2>Drop View</h2>
<p>An existing view can be dropped using DROP VIEW statement.</p>
<h3>Syntax</h3>
<p>Following is the syntax of DROP VIEW.</p>
<pre class="result notranslate">
DROP VIEW &lt;viewname&gt;; 
</pre>
<h3>Example</h3>
<p>Following is an example to drop the view Employee_View.</p>
<pre class="prettyprint notranslate">
DROP VIEW Employee_View; 
</pre>
<h3>Advantages of Views</h3>
<ul class="list">
<li><p>Views provide additional level of security by restricting the rows or columns of a table.</p></li>
<li><p>Users can be given access only to views instead of base tables.</p></li>
<li><p>Simplifies the use of multiple tables by pre-joining them using Views.</p></li>
</ul>
<h1>Teradata - Macros</h1>
<p>Macro is a set of SQL statements which are stored and executed by calling the Macro name. The definition of Macros is stored in Data Dictionary. Users only need EXEC privilege to execute the Macro. Users don't need separate privileges on the database objects used inside the Macro. Macro statements are executed as a single transaction. If one of the SQL statements in Macro fails, then all the statements are rolled back. Macros can accept parameters. Macros can contain DDL statements, but that should be the last statement in Macro.</p>
<h2>Create Macros</h2>
<p>Macros are created using CREATE MACRO statement.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax of CREATE MACRO command.</p>
<pre class="result notranslate">
CREATE MACRO &lt;macroname&gt; [(parameter1, parameter2,...)] ( 
   &lt;sql statements&gt; 
);
</pre>
<h3>Example</h3>
<p>Consider the following Employee table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>12/1/1984</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>4/1/1983</td>
</tr>
</table>
<p>The following example creates a Macro called Get_Emp. It contains a select statement to retrieve records from employee table.</p>
<pre class="prettyprint notranslate">
CREATE MACRO Get_Emp AS ( 
   SELECT 
   EmployeeNo, 
   FirstName, 
   LastName 
   FROM  
   employee 
   ORDER BY EmployeeNo; 
);
</pre>
<h2>Executing Macros</h2>
<p>Macros are executed using EXEC command.</p>
<h3>Syntax</h3>
<p>Following is the syntax of EXECUTE MACRO command.</p>
<pre class="result notranslate">
EXEC &lt;macroname&gt;; 
</pre>
<h3>Example</h3>
<p>The following example executes the Macro names Get_Emp; When the following command is executed, it retrieves all records from employee table.</p>
<pre class="prettyprint notranslate">
EXEC Get_Emp; 
*** Query completed. 5 rows found. 3 columns returned. 
*** Total elapsed time was 1 second.  
EmployeeNo             FirstName                      LastName 
-----------  ------------------------------  --------------------------- 
   101                  Mike                          James 
   102                  Robert                        Williams 
   103                  Peter                         Paul 
   104                  Alex                          Stuart 
   105                  Robert                        James 
</pre>
<h2>Parameterized Macros</h2>
<p>Teradata Macros can accept parameters. Within a Macro, these parameters are referenced with ; (semicolon).</p>
<p>Following is an example of a Macro that accepts parameters.</p>
<pre class="prettyprint notranslate">
CREATE MACRO Get_Emp_Salary(EmployeeNo INTEGER) AS ( 
   SELECT 
   EmployeeNo, 
   NetPay 
   FROM  
   Salary 
   WHERE EmployeeNo = :EmployeeNo; 
);
</pre>
<h2>Executing Parameterized Macros</h2>
<p>Macros are executed using EXEC command. You need EXEC privilege to execute the Macros.</p>
<h3>Syntax</h3>
<p>Following is the syntax of EXECUTE MACRO statement.</p>
<pre class="result notranslate">
EXEC &lt;macroname&gt;(value);
</pre>
<h3>Example</h3>
<p>The following example executes the Macro names Get_Emp; It accepts employee no as parameter and extracts records from employee table for that employee.</p>
<pre class="prettyprint notranslate">
EXEC Get_Emp_Salary(101); 
*** Query completed. One row found. 2 columns returned. 
*** Total elapsed time was 1 second.
 
EmployeeNo      NetPay 
-----------  ------------ 
   101           36000 
</pre>
<h1>Teradata - Stored Procedure</h1>
<p>A stored procedure contains a set of SQL statements and procedural statements. They may contain only procedural statements. The definition of stored procedure is stored in database and the parameters are stored in data dictionary tables.</p>
<h3>Advantages </h3>
<ul class="list">
<li><p>Stored procedures reduce the network load between the client and the server.</p></li>
<li><p>Provides better security since the data is accessed through stored procedures instead of accessing them directly.</p></li>
<li><p>Gives better maintenance since the business logic is tested and stored in the server.</p></li>
</ul>
<h2>Creating Procedure</h2>
<p>Stored Procedures are created using CREATE PROCEDURE statement.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax of the CREATE PROCEDURE statement.</p>
<pre class="result notranslate">
CREATE PROCEDURE &lt;procedurename&gt; ( [parameter 1 data type, parameter 2 data type..] ) 
BEGIN 
   &lt;SQL or SPL statements&gt;; 
END;
</pre>
<h3>Example</h3>
<p>Consider the following Salary Table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">Gross</th>
<th style="text-align:center">Deduction</th>
<th style="text-align:center">NetPay</th>
</tr>
<tr>
<td>101</td>
<td>40,000</td>
<td>4,000</td>
<td>36,000</td>
</tr>
<tr>
<td>102</td>
<td>80,000</td>
<td>6,000</td>
<td>74,000</td>
</tr>
<tr>
<td>103</td>
<td>90,000</td>
<td>7,000</td>
<td>83,000</td>
</tr>
<tr>
<td>104</td>
<td>75,000</td>
<td>5,000</td>
<td>70,000</td>
</tr>
</table>
<p>The following example creates a stored procedure named InsertSalary to accept the values and insert into Salary Table.</p>
<pre class="prettyprint notranslate">
CREATE PROCEDURE InsertSalary ( 
   IN in_EmployeeNo INTEGER, IN in_Gross INTEGER, 
   IN in_Deduction INTEGER, IN in_NetPay INTEGER 
) 
BEGIN 
   INSERT INTO Salary ( 
      EmployeeNo, 
      Gross, 
      Deduction, 
      NetPay 
   ) 
   VALUES ( 
      :in_EmployeeNo, 
      :in_Gross, 
      :in_Deduction, 
      :in_NetPay 
   ); 
END;
</pre>
<h2>Executing Procedures</h2>
<p>Stored Procedures are executed using CALL statement.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax of the CALL statement.</p>
<pre class="result notranslate">
CALL &lt;procedure name&gt; [(parameter values)];
</pre>
<h3>Example</h3>
<p>The following example calls the stored procedure InsertSalary and inserts records to Salary Table.</p>
<pre class="prettyprint notranslate">
CALL InsertSalary(105,20000,2000,18000);
</pre>
<p>Once the above query is executed, it produces the following output and you can see the inserted row in Salary table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">Gross</th>
<th style="text-align:center">Deduction</th>
<th style="text-align:center">NetPay</th>
</tr>
<tr>
<td>101</td>
<td>40,000</td>
<td>4,000</td>
<td>36,000</td>
</tr>
<tr>
<td>102</td>
<td>80,000</td>
<td>6,000</td>
<td>74,000</td>
</tr>
<tr>
<td>103</td>
<td>90,000</td>
<td>7,000</td>
<td>83,000</td>
</tr>
<tr>
<td>104</td>
<td>75,000</td>
<td>5,000</td>
<td>70,000</td>
</tr>
<tr>
<td>105</td>
<td>20,000</td>
<td>2,000</td>
<td>18,000</td>
</tr>
</table>
<h1>Teradata - JOIN strategies</h1>
<p>This chapter discusses the various JOIN strategies available in Teradata.</p>
<h2>Join Methods</h2> 
<p>Teradata uses different join methods to perform join operations. Some of the commonly used Join methods are &minus;</p>
<ul class="list">
<li>Merge Join</li>
<li>Nested Join</li>
<li>Product Join</li>
</ul>
<h2>Merge Join</h2>
<p>Merge Join method takes place when the join is based on the equality condition. Merge Join requires the joining rows to be on the same AMP. Rows are joined based on their row hash. Merge Join uses different join strategies to bring the rows to the same AMP.</p>
<h3>Strategy #1</h3>
<p>If the join columns are the primary indexes of the corresponding tables, then the joining rows are already on the same AMP. In this case, no distribution is required.</p>
<p>Consider the following Employee and Salary Tables.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE EMPLOYEE,FALLBACK ( 
   EmployeeNo INTEGER, 
   FirstName VARCHAR(30) , 
   LastName VARCHAR(30) , 
   DOB DATE FORMAT 'YYYY-MM-DD', 
   JoinedDate DATE FORMAT 'YYYY-MM-DD', 
   DepartmentNo BYTEINT 
) 
UNIQUE PRIMARY INDEX ( EmployeeNo );
</pre>
<pre class="prettyprint notranslate">
CREATE SET TABLE Salary ( 
   EmployeeNo INTEGER, 
   Gross INTEGER,  
   Deduction INTEGER, 
   NetPay INTEGER 
) 
UNIQUE PRIMARY INDEX(EmployeeNo); 
</pre>
<p>When these two tables are joined on EmployeeNo column, then no redistribution takes place since EmployeeNo is the primary index of both the tables which are being joined.</p>
<h3>Strategy #2</h3>
<p>Consider the following Employee and Department tables.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE EMPLOYEE,FALLBACK (
   EmployeeNo INTEGER, 
   FirstName VARCHAR(30) , 
   LastName VARCHAR(30) , 
   DOB DATE FORMAT 'YYYY-MM-DD', 
   JoinedDate DATE FORMAT 'YYYY-MM-DD', 
   DepartmentNo BYTEINT 
) 
UNIQUE PRIMARY INDEX ( EmployeeNo );
</pre>
<pre class="prettyprint notranslate">
CREATE SET TABLE DEPARTMENT,FALLBACK ( 
   DepartmentNo BYTEINT, 
   DepartmentName CHAR(15) 
) 
UNIQUE PRIMARY INDEX ( DepartmentNo );
</pre>
<p>If these two tables are joined on DeparmentNo column, then the rows need to be redistributed since DepartmentNo is a primary index in one table and non-primary index in another table. In this scenario, joining rows may not be on the same AMP. In such case, Teradata may redistribute employee table on DepartmentNo column.</p>
<h3>Strategy #3</h3>
<p>For the above Employee and Department tables, Teradata may duplicate the Department table on all AMPs, if the size of Department table is small.</p>
<h2>Nested Join</h2>
<p>Nested Join doesn’t use all AMPs. For the Nested Join to take place, one of the condition should be equality on the unique primary index of one table and then joining this column to any index on the other table.</p>
<p>In this scenario, the system will fetch the one row using Unique Primary index of one table and use that row hash to fetch the matching records from other table. Nested join is the most efficient of all Join methods.</p>
<h2>Product Join</h2>
<p>Product Join compares each qualifying row from one table with each qualifying row from other table. Product join may take place due to some of the following factors &minus;</p>
<ul class="list">
<li>Where condition is missing.</li>
<li>Join condition is not based on equality condition.</li>
<li>Table aliases is not correct.</li>
<li>Multiple join conditions.</li>
</ul>
<h1>Teradata - Partitioned Primary Index</h1>
<p>Partitioned Primary Index (PPI) is an indexing mechanism that is useful in improving the performance of certain queries. When rows are inserted into a table, they are stored in an AMP and arranged by their row hash order. When a table is defined with PPI, the rows are sorted by their partition number. Within each partition, they are arranged by their row hash. Rows are assigned to a partition based on the partition expression defined.</p>
<h2>Advantages</h2>
<ul class="list">
<li><p>Avoid full table scan for certain queries.</p></li>
<li><p>Avoid using secondary index that requires additional physical structure and additional I/O maintenance.</p></li>
<li><p>Access a subset of a large table quickly.</p></li>
<li><p>Drop the old data quickly and add new data.</p></li>
</ul>
<h2>Example</h2>
<p>Consider the following Orders table with Primary Index on OrderNo.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">StoreNo</th>
<th style="text-align:center">OrderNo</th>
<th style="text-align:center">OrderDate</th>
<th style="text-align:center">OrderTotal</th>
</tr>
<tr>
<td>101</td>
<td>7501</td>
<td>2015-10-01</td>
<td>900</td>
</tr>
<tr>
<td>101</td>
<td>7502</td>
<td>2015-10-02</td>
<td>1,200</td>
</tr>
<tr>
<td>102</td>
<td>7503</td>
<td>2015-10-02</td>
<td>3,000</td>
</tr>
<tr>
<td>102</td>
<td>7504</td>
<td>2015-10-03</td>
<td>2,454</td>
</tr>
<tr>
<td>101</td>
<td>7505</td>
<td>2015-10-03</td>
<td>1201</td>
</tr>
<tr>
<td>103</td>
<td>7506</td>
<td>2015-10-04</td>
<td>2,454</td>
</tr>
<tr>
<td>101</td>
<td>7507</td>
<td>2015-10-05</td>
<td>1201</td>
</tr>
<tr>
<td>101</td>
<td>7508</td>
<td>2015-10-05</td>
<td>1201</td>
</tr>
</table>
<p>Assume that the records are distributed between AMPs as shown in the following tables. Recorded are stored in AMPs, sorted based on their row hash.</p>
<p><b><center>AMP 1</center></b></p>
<table class="table table-bordered" style="text-align:center; width:60%; margin:auto;">
<tr>
<th style="text-align:center">RowHash</th>
<th style="text-align:center">OrderNo</th>
<th style="text-align:center">OrderDate</th>
</tr>
<tr>
<td>1</td>
<td>7505</td>
<td>2015-10-03</td>
</tr>
<tr>
<td>2</td>
<td>7504</td>
<td>2015-10-03</td>
</tr>
<tr>
<td>3</td>
<td>7501</td>
<td>2015-10-01</td>
</tr>
<tr>
<td>4</td>
<td>7508</td>
<td>2015-10-05</td>
</tr>
</table>
<p><b><center>AMP 2</center></b></p>
<table class="table table-bordered" style="text-align:center; width:60%; margin:auto;">
<tr>
<th style="text-align:center">RowHash</th>
<th style="text-align:center">OrderNo</th>
<th style="text-align:center">OrderDate</th>
</tr>
<tr>
<td>1</td>
<td>7507</td>
<td>2015-10-05</td>
</tr>
<tr>
<td>2</td>
<td>7502</td>
<td>2015-10-02</td>
</tr>
<tr>
<td>3</td>
<td>7506</td>
<td>2015-10-04</td>
</tr>
<tr>
<td>4</td>
<td>7503</td>
<td>2015-10-02</td>
</tr>
</table>
<p>If you run a query to extract the orders for a particular date, then the optimizer may choose to use Full Table Scan, then all the records within the AMP may be accessed. To avoid this, you can define the order date as Partitioned Primary Index. When rows are inserted into orders table, they are partitioned by the order date. Within each partition they will be ordered by their row hash.</p>
<p>The following data shows how the records will be stored in AMPs, if they are partitioned by Order Date. If a query is run to access the records by Order Date, then only the partition that contains the records for that particular order will be accessed.</p>
<p><b><center>AMP 1</center></b></p>
<table class="table table-bordered" style="text-align:center; width:60%; margin:auto;">
<tr>
<th style="text-align:center">Partition</th>
<th style="text-align:center">RowHash</th>
<th style="text-align:center">OrderNo</th>
<th>OrderDate</th>
</tr>
<tr>
<td>0</td>
<td>3</td>
<td>7501</td>
<td>2015-10-01</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>7505</td>
<td>2015-10-03</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td>7504</td>
<td>2015-10-03</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
<td>7508</td>
<td>2015-10-05</td>
</tr>
</table>
<p><b><center>AMP 2</center></b></p>
<table class="table table-bordered" style="text-align:center; width:60%; margin:auto;">
<tr>
<th style="text-align:center">Partition</th>
<th style="text-align:center">RowHash</th>
<th style="text-align:center">OrderNo</th>
<th style="text-align:center">OrderDate</th>
</tr>
<tr>
<td>0</td>
<td>2</td>
<td>7502</td>
<td>2015-10-02</td>
</tr>
<tr>
<td>0</td>
<td>4</td>
<td>7503</td>
<td>2015-10-02</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>7506</td>
<td>2015-10-04</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>7507</td>
<td>2015-10-05</td>
</tr>
</table>
<p>Following is an example to create a table with partition primary Index. PARTITION BY clause is used to define the partition.</p>
<pre class="prettyprint notranslate">
CREATE SET TABLE Orders (
   StoreNo SMALLINT, 
   OrderNo INTEGER, 
   OrderDate DATE FORMAT 'YYYY-MM-DD', 
   OrderTotal INTEGER 
) 
PRIMARY INDEX(OrderNo) 
PARTITION BY RANGE_N  (
   OrderDate BETWEEN DATE '2010-01-01' AND '2016-12-31' EACH INTERVAL '1' DAY
);
</pre>
<p>In the above example, the table is partitioned by OrderDate column. There will be one separate partition for each day.</p>
<h1>Teradata - OLAP Functions</h1>
<p>OLAP functions are similar to aggregate functions except that the aggregate functions will return only one value whereas the OLAP function will provide the individual rows in addition to the aggregates.</p>
<h3>Syntax</h3>
<p>Following is the general syntax of the OLAP function.</p>
<pre class="result notranslate">
&lt;aggregate function&gt; OVER  
([PARTITION BY] [ORDER BY columnname][ROWS BETWEEN 
UNBOUDED PRECEDING AND UNBOUNDED FOLLOWING) 
</pre>
<p>Aggregation functions can be SUM, COUNT, MAX,MIN, AVG.</p>
<h3>Example</h3>
<p>Consider the following Salary table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">Gross</th>
<th style="text-align:center">Deduction</th>
<th style="text-align:center">NetPay</th>
</tr>
<tr>
<td>101</td>
<td>40,000</td>
<td>4,000</td>
<td>36,000</td>
</tr>
<tr>
<td>102</td>
<td>80,000</td>
<td>6,000</td>
<td>74,000</td>
</tr>
<tr>
<td>103</td>
<td>90,000</td>
<td>7,000</td>
<td>83,000</td>
</tr>
<tr>
<td>104</td>
<td>75,000</td>
<td>5,000</td>
<td>70,000</td>
</tr>
</table>
<p>Following is an example to find the cumulative sum or running total of NetPay on Salary table. Records are sorted by EmployeeNo and cumulative sum is calculated on NetPay column.</p>
<pre class="prettyprint notranslate">
SELECT  
EmployeeNo, NetPay, 
SUM(Netpay) OVER(ORDER BY EmployeeNo ROWS  
UNBOUNDED PRECEDING) as TotalSalary 
FROM Salary;
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
EmployeeNo     NetPay     TotalSalary 
-----------  -----------  ----------- 
   101         36000        36000 
   102         74000        110000 
   103         83000        193000 
   104         70000        263000 
   105         18000        281000 
</pre>
<h2>RANK</h2>
<p>RANK function orders the records based on the column provided. RANK function can also filter the number of records returned based on the rank.</p>
<h3>Syntax</h3>
<p>Following is the generic syntax to use the RANK function.</p>
<pre class="result notranslate">
RANK() OVER 
([PARTITION BY columnnlist] [ORDER BY columnlist][DESC|ASC])
</pre>
<h3>Example</h3>
<p>Consider the following Employee table.</p>
<table class="table table-bordered" style="text-align:center; font-size:12px;">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">JoinedDate</th>
<th style="text-align:center">DepartmentID</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>3/27/2005</td>
<td>1</td>
<td>1/5/1980 </td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>4/25/2007</td>
<td>2</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>3/21/2007</td>
<td>2</td>
<td>4/1/1983</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>2/1/2008</td>
<td>2</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>1/4/2008</td>
<td>3</td>
<td>12/1/1984</td>
</tr>
</table>
<p>Following query orders the records of the employee table by Joined Date and assigns the ranking on Joined Date.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo, JoinedDate,RANK() 
OVER(ORDER BY JoinedDate) as Seniority 
FROM Employee;
</pre>
<p>When the above query is executed, it produces the following output.</p>
<pre class="result notranslate">
EmployeeNo   JoinedDate   Seniority 
-----------  ----------  ----------- 
   101       2005-03-27       1 
   103       2007-03-21       2 
   102       2007-04-25       3 
   105       2008-01-04       4 
   104       2008-02-01       5 
</pre>
<p>PARTITION BY clause groups the data by the columns defined in the PARTITION BY clause and performs the OLAP function within each group. Following is an example of the query that uses PARTITION BY clause.</p>
<pre class="prettyprint notranslate">
SELECT EmployeeNo, JoinedDate,RANK() 
OVER(PARTITION BY DeparmentNo ORDER BY JoinedDate) as Seniority 
FROM Employee;
</pre>
<p>When the above query is executed, it produces the following output. You can see that the Rank is reset for each Department.</p>
<pre class="result notranslate">
EmployeeNo  DepartmentNo  JoinedDate   Seniority 
-----------  ------------  ----------  ----------- 

    101           1        2005-03-27       1 
    103           2        2007-03-21       1 
    102           2        2007-04-25       2 
    104           2        2008-02-01       3 
    105           3        2008-01-04       1 
</pre>
<h1>Teradata - Data Protection</h1>
<p>This chapter discusses the features available for data protection in Teradata.</p>
<h2>Transient Journal</h2>
<p>Teradata uses Transient Journal to protect data from transaction failures. Whenever any transactions are run, Transient journal keeps a copy of the before images of the affected rows until the transaction is successful or rolled back successfully. Then, the before images are discarded. Transient journal is kept in each AMPs. It is an automatic process and cannot be disabled.</p>
<h2>Fallback</h2> 
<p>Fallback protects the table data by storing the second copy of rows of a table on another AMP called as Fallback AMP. If one AMP fails, then the fallback rows are accessed. With this, even if one AMP fails, data is still available through fallback AMP. Fallback option can be used at table creation or after table creation. Fallback ensures that the second copy of the rows of the table is always stored in another AMP to protect the data from AMP failure. However, fallback occupies twice the storage and I/O for Insert/Delete/Update.</p>
<p>Following diagram shows how fallback copy of the rows are stored in another AMP.</p>
<img src="images/fallback.jpg" alt="Fallback" />
<h2>Down AMP Recovery Journal</h2>
<p>The Down AMP recovery journal is activated when the AMP fails and the table is fallback protected. This journal keeps track of all the changes to the data of the failed AMP. The journal is activated on the remaining AMPs in the cluster. It is an automatic process and cannot be disabled. Once the failed AMP is live then the data from the Down AMP recovery journal is synchronized with the AMP. Once this is done, the journal is discarded.</p>
<img src="images/down_amp_recovery_journal.jpg" alt="Down AMP Recovery Journal" />
<h2>Cliques</h2>
<p>Clique is a mechanism used by Teradata to protect data from Node failures. A clique is nothing but a set of Teradata nodes that share a common set of Disk Arrays. When a node fails, then the vprocs from the failed node will migrate to other nodes in the clique and continue to access their disk arrays.</p>
<h2>Hot Standby Node</h2>
<p>Hot Standby Node is a node that does not participate in the production environment. If a node fails then the vprocs from the failed nodes will migrate to the hot standby node. Once the failed node is recovered it becomes the hot standby node. Hot Standby nodes are used to maintain the performance in case of node failures.</p>
<h2>RAID</h2>
<p>Redundant Array of Independent Disks (RAID) is a mechanism used to protect data from Disk Failures. Disk Array consists of a set of disks which are grouped as a logical unit. This unit may look like a single unit to the user but they may be spread across several disks.</p>
<p>RAID 1 is commonly used in Teradata. In RAID 1, each disk is associated with a mirror disk. Any changes to the data in primary disk is reflected in mirror copy also. If the primary disk fails, then the data from mirror disk can be accessed.</p>
<img src="images/raid.jpg" alt="RAID" />
<h1>Teradata - User Management</h1>
<p>This chapter discussed the various strategies of user management in Teradata.</p>
<h2>Users</h2>
<p>A user is created using CREATE USER command. In Teradata, a user is also similar to a database. They both can be assigned space and contain database objects except that the user is assigned a password.</p>
<h3>Syntax</h3>
<p>Following is the syntax for CREATE USER.</p>
<pre class="result notranslate">
CREATE USER username 
AS  
[PERMANENT|PERM] = n BYTES 
PASSWORD = password 
TEMPORARY = n BYTES 
SPOOL = n BYTES;
</pre>
<p>While creating a user, the values for user name, Permanent space and Password is mandatory. Other fields are optional.</p>
<h3>Example</h3>
<p>Following is an example to create the user TD01.</p>
<pre class="prettyprint notranslate">
CREATE USER TD01 
AS  
PERMANENT = 1000000 BYTES 
PASSWORD = ABC$124 
TEMPORARY = 1000000 BYTES 
SPOOL = 1000000 BYTES;
</pre>
<h2>Accounts</h2>
<p>While creating a new user, the user may be assigned to an account. ACCOUNT option in CREATE USER is used to assign the account. A user may be assigned to multiple accounts.</p>
<h3>Syntax</h3>
<p>Following is the syntax for CREATE USER with account option.</p>
<pre class="result notranslate">
CREATE USER username 
PERM = n BYTES 
PASSWORD = password 
ACCOUNT = accountid
</pre>
<h3>Example</h3>
<p>The following example creates the user TD02 and assigns the account as IT and Admin.</p>
<pre class="prettyprint notranslate">
CREATE USER TD02 
AS  
PERMANENT = 1000000 BYTES 
PASSWORD = abc$123 
TEMPORARY = 1000000 BYTES 
SPOOL = 1000000 BYTES 
ACCOUNT = (‘IT’,’Admin’);
</pre>
<p>The user can specify the account id while logging into Teradata system or after being logged into the system using SET SESSION command.</p>
<pre class="result notranslate">
.LOGON username, passowrd,accountid 
OR 
SET SESSION ACCOUNT = accountid 
</pre>
<h2>Grant Privileges</h2>
<p>GRANT command is used to assign one or more privileges on the database objects to the user or database.</p>
<h3>Syntax</h3>
<p>Following is the syntax of the GRANT command.</p>
<pre class="result notranslate">
GRANT privileges ON objectname TO username;
</pre>
<p>Privileges can be INSERT, SELECT, UPDATE, REFERENCES.</p>
<h3>Example</h3>
<p>Following is an example of GRANT statement.</p>
<pre class="prettyprint notranslate">
GRANT SELECT,INSERT,UPDATE ON Employee TO TD01;
</pre>
<h2>Revoke Privileges</h2>
<p>REVOKE command removes the privileges from the users or databases. The REVOKE command can only remove explicit privileges.</p>
<h3>Syntax</h3>
<p>Following is the basic syntax for REVOKE command.</p>
<pre class="result notranslate">
REVOKE [ALL|privileges] ON objectname FROM username;
</pre>
<h3>Example</h3>
<p>Following is an example of REVOKE command.</p>
<pre class="prettyprint notranslate">
REVOKE INSERT,SELECT ON Employee FROM TD01;
</pre>
<h1>Teradata - Performance Tuning</h1>
<p>This chapter discusses the procedure of performance tuning in Teradata.</p>
<h2>Explain</h2>
<p>The first step in performance tuning is the use of EXPLAIN on your query. EXPLAIN plan gives the details of how optimizer will execute your query. In the Explain plan, check for the keywords like confidence level, join strategy used, spool file size, redistribution, etc.</p>
<h2>Collect Statistics</h2>
<p>Optimizer uses Data demographics to come up with effective execution strategy. COLLECT STATISTICS command is used to collect data demographics of the table. Make sure that the statistics collected on the columns are up to date.</p>
<ul class="list">
<li><p>Collect statistics on the columns that are used in WHERE clause and on the columns used in the joining condition.</p></li>
<li><p>Collect statistics on the Unique Primary Index columns.</p></li>
<li><p>Collect statistics on Non Unique Secondary Index columns. Optimizer will decide if it can use NUSI or Full Table Scan.</p></li>
<li><p>Collect statistics on the Join Index though the statistics on base table is collected.</p></li>
<li><p>Collect statistics on the partitioning columns.</p></li>
</ul>
<h2>Data Types</h2>
<p>Make sure that proper data types are used. This will avoid the use of excessive storage than required.</p>
<h2>Conversion</h2>
<p>Make sure that the data types of the columns used in join condition are compatible to avoid explicit data conversions.</p>
<h2>Sort</h2>
<p>Remove unnecessary ORDER BY clauses unless required.</p>
<h2>Spool Space Issue</h2>
<p>Spool space error is generated if the query exceeds per AMP spool space limit for that user. Verify the explain plan and identify the step that consumes more spool space. These intermediate queries can be split and put as separately to build temporary tables.</p>
<h2>Primary Index</h2>
<p>Make sure that the Primary Index is correctly defined for the table. The primary index column should evenly distribute the data and should be frequently used to access the data.</p>
<h2>SET Table</h2>
<p>If you define a SET table, then the optimizer will check if the record is duplicate for each and every record inserted. To remove the duplicate check condition, you can define Unique Secondary Index for the table.</p>
<h2>UPDATE on Large Table</h2>
<p>Updating the large table will be time consuming. Instead of updating the table, you can delete the records and insert the records with modified rows.</p>
<h2>Dropping Temporary Tables</h2>
<p>Drop the temporary tables (staging tables) and volatiles if they are no longer needed. This will free up permanent space and spool space.</p>
<h2>MULTISET Table</h2>
<p>If you are sure that the input records will not have duplicate records, then you can define the target table as MULTISET table to avoid the duplicate row check used by SET table.</p>
<h1>Teradata - FastLoad</h1>
<p>FastLoad utility is used to load data into empty tables. Since it does not use transient journals, data can be loaded quickly. It doesn't load duplicate rows even if the target table is a MULTISET table.</p>
<h3>Limitation</h3>
<p>Target table should not have secondary index, join index and foreign key reference.</p>
<h2>How FastLoad Works</h2> 
<p>FastLoad is executed in two phases.</p>
<h3>Phase 1</h3>
<ul class="list">
<li><p>The Parsing engines read the records from the input file and sends a block to each AMP.</li>
<li><p>Each AMP stores the blocks of records.</p></li>
<li><p>Then AMPs hash each record and redistribute them to the correct AMP.</p></li>
<li><p>At the end of Phase 1, each AMP has its rows but they are not in row hash sequence.</p></li>
</ul>
<h3>Phase 2</h3>
<ul class="list">
<li><p>Phase 2 starts when FastLoad receives the END LOADING statement.</p></li>
<li><p>Each AMP sorts the records on row hash and writes them to the disk.</p></li>
<li><p>Locks on the target table is released and the error tables are dropped.</p></li>
</ul>
<h3>Example</h3>
<p>Create a text file with the following records and name the file as employee.txt.</p>
<pre class="prettyprint notranslate">
101,Mike,James,1980-01-05,2010-03-01,1  
102,Robert,Williams,1983-03-05,2010-09-01,1 
103,Peter,Paul,1983-04-01,2009-02-12,2 
104,Alex,Stuart,1984-11-06,2014-01-01,2 
105,Robert,James,1984-12-01,2015-03-09,3
</pre>
<p>Following is a sample FastLoad script to load the above file into Employee_Stg table.</p>
<pre class="prettyprint notranslate">
LOGON 192.168.1.102/dbc,dbc;  
   DATABASE tduser;  
   BEGIN LOADING tduser.Employee_Stg  
      ERRORFILES Employee_ET, Employee_UV  
      CHECKPOINT 10;  
      SET RECORD VARTEXT ",";  
      DEFINE in_EmployeeNo (VARCHAR(10)), 
         in_FirstName (VARCHAR(30)), 
         in_LastName (VARCHAR(30)), 
         in_BirthDate (VARCHAR(10)), 
         in_JoinedDate (VARCHAR(10)), 
         in_DepartmentNo (VARCHAR(02)), 
         FILE = employee.txt;
      INSERT INTO Employee_Stg (
         EmployeeNo,
         FirstName,
         LastName,
         BirthDate,
         JoinedDate, 
         DepartmentNo
      ) 
      VALUES (  
         :in_EmployeeNo, 
         :in_FirstName, 
         :in_LastName, 
         :in_BirthDate (FORMAT 'YYYY-MM-DD'), 
         :in_JoinedDate (FORMAT 'YYYY-MM-DD'),
         :in_DepartmentNo
      ); 
   END LOADING;  
LOGOFF;
</pre>
<h2>Executing a FastLoad Script</h2>
<p>Once the input file employee.txt is created and the FastLoad script is named as EmployeeLoad.fl, you can run the FastLoad script using the following command in UNIX and Windows.</p>
<pre class="result notranslate">
FastLoad &lt; EmployeeLoad.fl;
</pre>
<p>Once the above command is executed, the FastLoad script will run and produce the log. In the log, you can see the number of records processed by FastLoad and status code.</p>
<pre class="result notranslate">
**** 03:19:14 END LOADING COMPLETE 
   Total Records Read              =  5 
   Total Error Table 1             =  0  ---- Table has been dropped 
   Total Error Table 2             =  0  ---- Table has been dropped 
   Total Inserts Applied           =  5 
   Total Duplicate Rows            =  0 
   Start:   Fri Jan  8 03:19:13 2016 
   End  :   Fri Jan  8 03:19:14 2016 
**** 03:19:14 Application Phase statistics: 
              Elapsed time: 00:00:01 (in hh:mm:ss) 
0008  LOGOFF; 
**** 03:19:15 Logging off all sessions
</pre>
<h2>FastLoad Terms</h2>
<p>Following is the list of common terms used in FastLoad script.</p>
<ul class="list">
<li><p><b>LOGON</b> &minus; Logs into Teradata and initiates one or more sessions.</p></li>
<li><p><b>DATABASE</b> &minus; Sets the default database.</p></li>
<li><p><b>BEGIN LOADING</b> &minus; Identifies the table to be loaded.</p></li>
<li><p><b>ERRORFILES</b> &minus; Identifies the 2 error tables that needs to be created/updated.</p></li>
<li><p><b>CHECKPOINT</b> &minus; Defines when to take checkpoint.</p></li>
<li><p><b>SET RECORD</b> &minus; Specifies if the input file format is formatted, binary, text or unformatted.</p></li>
<li><p><b>DEFINE</b> &minus; Defines the input file layout.</p></li>
<li><p><b>FILE</b> &minus; Specifies the input file name and path.</p></li>
<li><p><b>INSERT</b> &minus; Inserts the records from the input file into the target table.</p></li>
<li><p><b>END LOADING</b> &minus; Initiates phase 2 of the FastLoad. Distributes the records into the target table.</p></li>
<li><p><b>LOGOFF</b> &minus; Ends all sessions and terminates FastLoad.</p></li>
</ul>
<h1>Teradata - MultiLoad</h1>
<p>MultiLoad can load multiple tables at a time and it can also perform different types of tasks such as INSERT, DELETE, UPDATE and UPSERT. It can load up to 5 tables at a time and perform up to 20 DML operations in a script. The target table is not required for MultiLoad.</p>
<p>MultiLoad supports two modes &minus;</p>
<ul class="list">
<li>IMPORT</li>
<li>DELETE</li>
</ul>
<p>MultiLoad requires a work table, a log table and two error tables in addition to the target table.</p>
<ul class="list">
<li><p><b>Log Table</b> &minus; Used to maintain the checkpoints taken during load which will be used for restart.</p></li>
<li><p><b>Error Tables</b> &minus; These tables are inserted during load when an error occurs. First error table stores conversion errors whereas second error table stores duplicate records.</p></li>
<li><p><b>Log Table</b> &minus; Maintains the results from each phase of MultiLoad for restart purpose.</p></li>
<li><p><b>Work table</b> &minus; MultiLoad script creates one work table per target table. Work table is used to keep DML tasks and the input data.</p></li>
</ul>
<h2>Limitation</h2>
<p>MultiLoad has some limitations.</p>
<ul class="list">
<li>Unique Secondary Index not supported on target table.</li>
<li>Referential integrity not supported.</li>
<li>Triggers not supported.</li>
</ul>
<h2>How MultiLoad Works</h2>
<p>MultiLoad import has five phases &minus;</p>
<ul class="list">
<li><p><b>Phase 1</b> &minus; Preliminary Phase – Performs basic setup activities.</p></li>
<li><p><b>Phase 2</b> &minus; DML Transaction Phase – Verifies the syntax of DML statements and brings them to Teradata system.</p></li>
<li><p><b>Phase 3</b> &minus; Acquisition Phase – Brings the input data into work tables and locks the table.</p></li>
<li><p><b>Phase 4</b> &minus; Application Phase – Applies all DML operations.</p></li>
<li><p><b>Phase 5</b> &minus; Cleanup Phase – Releases the table lock.</p></li>
</ul>
<p>The steps involved in a MultiLoad script are &minus;</p>
<ul class="list">
<li><p><b>Step 1</b> &minus; Set up the log table.</p></li>
<li><p><b>Step 2</b> &minus; Log on to Teradata.</p></li>
<li><p><b>Step 3</b> &minus; Specify the Target, Work and Error tables.</p></li>
<li><p><b>Step 4</b> &minus; Define INPUT file layout.</p></li>
<li><p><b>Step 5</b> &minus; Define the DML queries.</p></li>
<li><p><b>Step 6</b> &minus; Name the IMPORT file.</p></li>
<li><p><b>Step 7</b> &minus; Specify the LAYOUT to be used.</p></li>
<li><p><b>Step 8</b> &minus; Initiate the Load.</p></li>
<li><p><b>Step 9</b> &minus; Finish the load and terminate the sessions.</p></li>
</ul>
<h3>Example</h3>
<p>Create a text file with the following records and name the file as employee.txt.</p>
<pre class="prettyprint notranslate">
101,Mike,James,1980-01-05,2010-03-01,1  
102,Robert,Williams,1983-03-05,2010-09-01,1 
103,Peter,Paul,1983-04-01,2009-02-12,2 
104,Alex,Stuart,1984-11-06,2014-01-01,2 
105,Robert,James,1984-12-01,2015-03-09,3 
</pre>
<p>The following example is a MultiLoad script that reads records from employee table and loads into Employee_Stg table.</p>
<pre class="prettyprint notranslate">
.LOGTABLE tduser.Employee_log;  
.LOGON 192.168.1.102/dbc,dbc; 
   .BEGIN MLOAD TABLES Employee_Stg;  
      .LAYOUT Employee;  
      .FIELD in_EmployeeNo * VARCHAR(10);  
      .FIELD in_FirstName * VARCHAR(30); 
      .FIELD in_LastName * VARCHAR(30);  
      .FIELD in_BirthDate * VARCHAR(10); 
      .FIELD in_JoinedDate * VARCHAR(10);  
      .FIELD in_DepartmentNo * VARCHAR(02);

      .DML LABEL EmpLabel; 
      INSERT INTO Employee_Stg (
         EmployeeNo,
         FirstName,
         LastName,
         BirthDate,
         JoinedDate,
         DepartmentNo
      )  
      VALUES (
         :in_EmployeeNo,
         :in_FirstName,
         :in_Lastname,
         :in_BirthDate,
         :in_JoinedDate,
         :in_DepartmentNo
      );
      .IMPORT INFILE employee.txt  
      FORMAT VARTEXT ','
      LAYOUT Employee
      APPLY EmpLabel;  
   .END MLOAD;  
LOGOFF;
</pre>
<h2>Executing a MultiLoad Script</h2>
<p>Once the input file employee.txt is created and the multiload script is named as EmployeeLoad.ml, then you can run the Multiload script using the following command in UNIX and Windows.</p>
<pre class="result notranslate">
Multiload &lt; EmployeeLoad.ml;
</pre>
<h1>Teradata - FastExport</h1>
<p>FastExport utility is used to export data from Teradata tables into flat files. It can also generate the data in report format. Data can be extracted from one or more tables using Join. Since FastExport exports the data in 64K blocks, it is useful for extracting large volume of data.</p>
<h3>Example</h3>
<p>Consider the following Employee table.</p>
<table class="table table-bordered" style="text-align:center">
<tr>
<th style="text-align:center">EmployeeNo</th>
<th style="text-align:center">FirstName</th>
<th style="text-align:center">LastName</th>
<th style="text-align:center">BirthDate</th>
</tr>
<tr>
<td>101</td>
<td>Mike</td>
<td>James</td>
<td>1/5/1980</td>
</tr>
<tr>
<td>104</td>
<td>Alex</td>
<td>Stuart</td>
<td>11/6/1984</td>
</tr>
<tr>
<td>102</td>
<td>Robert</td>
<td>Williams</td>
<td>3/5/1983</td>
</tr>
<tr>
<td>105</td>
<td>Robert</td>
<td>James</td>
<td>12/1/1984</td>
</tr>
<tr>
<td>103</td>
<td>Peter</td>
<td>Paul</td>
<td>4/1/1983</td>
</tr>
</table>
<p>Following is an example of a FastExport script. It exports data from employee table and writes into a file employeedata.txt.</p>
<pre class="prettyprint notranslate">
.LOGTABLE tduser.employee_log;  
.LOGON 192.168.1.102/dbc,dbc;  
   DATABASE tduser;  
   .BEGIN EXPORT SESSIONS 2;  
      .EXPORT OUTFILE employeedata.txt  
      MODE RECORD FORMAT TEXT;
      SELECT CAST(EmployeeNo AS CHAR(10)), 
         CAST(FirstName AS CHAR(15)), 
         CAST(LastName AS CHAR(15)), 
         CAST(BirthDate AS CHAR(10))   
      FROM
      Employee;
   .END EXPORT;
.LOGOFF;
</pre>
<h2>Executing a FastExport Script</h2>
<p>Once the script is written and named as employee.fx, you can use the following command to execute the script.</p>
<pre class="result notranslate">
fexp &lt; employee.fx
</pre>
<p>After executing the above command, you will receive the following output in the file employeedata.txt.</p>
<pre class="result notranslate">
103       Peter          Paul           1983-04-01 
101       Mike           James          1980-01-05 
102       Robert         Williams       1983-03-05 
105       Robert         James          1984-12-01 
104       Alex           Stuart         1984-11-06
</pre>
<h2>FastExport Terms</h2>
<p>Following is the list of terms commonly used in FastExport script.</p>
<ul class="list">
<li><p><b>LOGTABLE</b> &minus; Specifies the log table for restart purpose.</p></li>
<li><p><b>LOGON</b> &minus; Logs into Teradata and initiates one or more sessions.</p></li>
<li><p><b>DATABASE</b> &minus; Sets the default database.</p></li>
<li><p><b>BEGIN EXPORT</b> &minus; Indicates the beginning of the export.</p></li>
<li><p><b>EXPORT</b> &minus; Specifies the target file and the export format.</p></li>
<li><p><b>SELECT</b> &minus; Specifies the select query to export data.</p></li>
<li><p><b>END EXPORT</b> &minus; Specifies the end of FastExport.</p></li>
<li><p><b>LOGOFF</b> &minus; Ends all sessions and terminates FastExport.</p></li>
</ul>
<h1>Teradata - BTEQ</h1>
<p>BTEQ utility is a powerful utility in Teradata that can be used in both batch and interactive mode. It can be used to run any DDL statement, DML statement, create Macros and stored procedures. BTEQ can be used to import data into Teradata tables from flat file and it can also be used to extract data from tables into files or reports.</p>
<h2>BTEQ Terms</h2>
<p>Following is the list of terms commonly used in BTEQ scripts.</p>
<ul class="list">
<li><p><b>LOGON</b> &minus; Used to log into Teradata system.</p></li>
<li><p><b>ACTIVITYCOUNT</b> &minus; Returns the number of rows affected by the previous query.</p></li>
<li><p><b>ERRORCODE</b> &minus; Returns the status code of the previous query.</p></li>
<li><p><b>DATABASE</b> &minus; Sets the default database.</p></li>
<li><p><b>LABEL</b> &minus; Assigns a label to a set of SQL commands.</p></li>
<li><p><b>RUN FILE</b> &minus; Executes the query contained in a file.</p></li>
<li><p><b>GOTO</b> &minus; Transfers control to a label.</p></li>
<li><p><b>LOGOFF</b> &minus; Logs off from database and terminates all sessions.</p></li>
<li><p><b>IMPORT</b> &minus; Specifies the input file path.</p></li>
<li><p><b>EXPORT</b> &minus; Specifies the output file path and initiates the export.</p></li>
</ul>
<h3>Example</h3>
<p>Following is a sample BTEQ script.</p>
<pre class="prettyprint notranslate">
.LOGON 192.168.1.102/dbc,dbc; 
   DATABASE tduser;

   CREATE TABLE employee_bkup ( 
      EmployeeNo INTEGER, 
      FirstName CHAR(30), 
      LastName CHAR(30), 
      DepartmentNo SMALLINT, 
      NetPay INTEGER 
   )
   Unique Primary Index(EmployeeNo);

   .IF ERRORCODE &lt;&gt; 0 THEN .EXIT ERRORCODE;
  
   SELECT * FROM  
   Employee 
   Sample 1; 
   .IF ACTIVITYCOUNT &lt;&gt; 0 THEN .GOTO InsertEmployee;  

   DROP TABLE employee_bkup;
  
   .IF ERRORCODE &lt;&gt; 0 THEN .EXIT ERRORCODE; 
 
   .LABEL InsertEmployee 
   INSERT INTO employee_bkup 
   SELECT a.EmployeeNo, 
      a.FirstName, 
      a.LastName, 
      a.DepartmentNo, 
      b.NetPay 
   FROM  
   Employee a INNER JOIN Salary b 
   ON (a.EmployeeNo = b.EmployeeNo);  

   .IF ERRORCODE &lt;&gt; 0 THEN .EXIT ERRORCODE; 
.LOGOFF; 
</pre>
<p>The above script performs the following tasks.</p>
<ul class="list">
<li><p>Logs into Teradata System.</p></li>
<li><p>Sets the Default Database.</p></li>
<li><p>Creates a table called employee_bkup.</p></li>
<li><p>Selects one record from Employee table to check if the table has any records.</li>
<li><p>Drops employee_bkup table, if the table is empty.</p></li>
<li><p>Transfers the control to a Label InsertEmployee which inserts records into employee_bkup table</p></li>
<li><p>Checks ERRORCODE to make sure that the statement is successful, following each SQL statement.</p></li>
<li><p>ACTIVITYCOUNT returns number of records selected/impacted by the previous SQL query.</p></li>
</ul>
<hr />
<div class="pre-btn">
<a href="teradata_questions_answers.html"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="print-btn center">
<a href="../cgi-bin/printpage.html" target="_blank"><i class="icon icon-print big-font"></i> Print</a>
</div>
<div class="nxt-btn">
<a href="teradata_useful_resources.html">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<hr />
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div class="bottomadtag">Advertisements</div>
<script type="text/javascript"><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>
</div>
</div>
</div>
<div class="row">
<div class="col-md-3" id="rightbar">
<div class="simple-ad">
<a href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.facebook.com/sharer.php?u=' + 'http://www.tutorialspoint.com/teradata/teradata_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="../images/facebookIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://twitter.com/share?url=' + 'http://www.tutorialspoint.com/teradata/teradata_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="../images/twitterIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.linkedin.com/cws/share?url=' + 'http://www.tutorialspoint.com/teradata/teradata_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="../images/linkedinIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://plus.google.com/share?url=http://www.tutorialspoint.com/teradata/teradata_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="../images/googlePlusIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.stumbleupon.com/submit?url=http://www.tutorialspoint.com/teradata/teradata_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="../images/StumbleUponIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://reddit.com/submit?url=http://www.tutorialspoint.com/teradata/teradata_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=656,top='+sTop+',left='+sLeft);return false;">
<img src="../images/reddit.jpg" alt="img" />
</a>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 600;
google_ad_format = "300x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-2537027957187252";
/* Right Side Ad */
google_ad_slot = "right_side_ad";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/f.txt">
</script>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="footer-copyright">
<div class="container">
<div class="row">
<div class="col-md-1">
<a href="../index-2.html" class="logo"> <img alt="Tutorials Point" class="img-responsive" src="../scripts/img/logo-footer.png"> </a>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <nav id="sub-menu">
      <ul>
         <li><a href="../about/tutorials_writing.html">Write for us</a></li>
         <li><a href="../about/faq.html">FAQ's</a></li>
         <li><a href="../about/about_helping.html">Helping</a></li>
         <li><a href="../about/contact_us.html">Contact</a></li>
      </ul>
   </nav>
</div>
<div class="col-md-3 col-sm-12 col-xs-12">
<p>&copy; Copyright 2017. All Rights Reserved.</p>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <div class="news-group">
      <input type="text" class="form-control-foot search" name="textemail" id="textemail" autocomplete="off" placeholder="Enter email for newsletter" onfocus="if (this.value == 'Enter email for newsletter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Enter email for newsletter...';}">
      <span class="input-group-btn"> <button class="btn btn-default btn-footer" id="btnemail" type="submit" onclick="javascript:void(0);">go</button> </span>
      <div id="newsresponse"></div>
   </div>
</div>
</div>
</div>
</div>
</div>
<!-- Libs -->
<script type="text/javascript" src="../theme/js/custom-min7b30.js?v=4"></script>
<script src="../../www.google-analytics.com/urchin.js">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
$('.pg-icon').click(function(){
   $('.wrapLoader').show();
});
</script>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/teradata/teradata_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 16:44:51 GMT -->
</html>
