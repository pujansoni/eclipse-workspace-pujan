<!DOCTYPE html>
<!--[if IE 8]><html class="ie ie8"> <![endif]-->
<!--[if IE 9]><html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html> <!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 18:14:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Basic -->
<meta charset="utf-8">
<title>Ruby on Rails Quick Guide</title>
<meta name="Description" content="Ruby on Rails Quick Guide - Learn Ruby on Rails in simple and easy steps. You will learn its Introduction, Installation, Framework, Directory Structure, strengths with examples and you will learn about actionpack, actionview, activerecord, Migrations, Controller, Routes, Views, Layouts, Heinemeier, Scaffolding, Ajax, File Uploading, Sending Emails, Hansson etc." />
<meta name="Keywords" content="Learning, Tutorial, Ruby, Rails, strengths, framework, Introduction, Installation, Examples, RubyGems, Resources, Guide, Actionpack, Actionview, Basics, Directory Structure, Advance, Activerecord, Migrations, libraries, Model, Routes, Views, Layouts, Controller, Embeded Ruby, Erb, Rolling, Metaprogramming, Built-in, testing, David, Black, Hansson, Heinemeier, RAA, Ajax, File Uploading, Sending Emails, Scaffolding." />
<base  />
<link rel="shortcut icon" href="https://www.tutorialspoint.com/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta property="fb:app_id" content="471319149685276" />
<meta property="og:site_name" content="www.tutorialspoint.com" />
<meta name="robots" content="index, follow"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="author" content="tutorialspoint.com">
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/script-min-v4.js"></script>
<link rel="stylesheet" href="https://www.tutorialspoint.com/theme/css/style-min.css?v=2">
<!-- Head Libs -->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="/theme/css/ie8.css">
<![endif]-->
<style>
select{ border:0 !important; outline: 1px inset black !important; outline-offset: -1px !important; }
ul.nav-list.primary>li a.videolink{    background: none; margin: 0px; padding: 0px; border: 1px solid #d6d6d6;}
div.feature-box div.feature-box-icon, .col-md-3 .course-box, li.heading, div.footer-copyright { background: #c90e19 url(https://www.tutorialspoint.com/images/pattern.png) repeat center center !important;}
.sub-main-menu .sub-menuu div:hover, .sub-main-menu .viewall, header nav ul.nav-main li a:hover, button.btn-responsive-nav, header div.search button.btn-default { background: #c90e19 !important;}
.submenu-item{ border-bottom: 2px solid #c90e19 !important; border-top: 2px solid #c90e19 !important }
.ace_scroller{overflow: auto!important;}
</style>
<script>
$(document).ready(function() {
  $('input[name="q"]').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
});
</script>
</head>
<body onload="prettyPrint()">
<div class="wrapLoader">
   <div class="imgLoader">
      <img  src="https://www.tutorialspoint.com/images/loading-cg.gif" alt="" width="70" height="70" />
   </div>
</div>
<header>
   <div class="container">			
      <h1 class="logo">
      <a href="https://www.tutorialspoint.com/index.htm" title="tutorialspoint">
      <img alt="tutorialspoint" src="https://www.tutorialspoint.com/ruby-on-rails/images/logo.png">
      </a>
      </h1>			
      <nav>
         <ul class="nav nav-pills nav-top">
            <li><a href="https://www.tutorialspoint.com/about/about_careers.htm" style="background: #fffb09; font-weight: bold;"><i class="icon icon-suitcase"></i> Jobs</a></li>
            <li> <a href="http://www.sendfiles.net/"><i class="fa fa-send"></i> &nbsp;SENDFiles</a> </li>
            <li> <a href="https://www.tutorialspoint.com/whiteboard.htm"><img src="https://www.tutorialspoint.com/theme/css/icons/image-editor.png" alt="Whiteboard" title="Whiteboard"> &nbsp;Whiteboard</a> </li>
            <li> <a href="https://www.tutorialspoint.com/netmeeting.php"><i class="fa-camera"></i> &nbsp;Net Meeting</a> </li>
            <li> <a href="https://www.tutorialspoint.com/online_dev_tools.htm"> <i class="dev-tools-menu" style="opacity:.5"></i> Tools </a> </li>
            <li> <a href="https://www.tutorialspoint.com/articles/index.php"><i class="icon icon-file-text-o"></i> &nbsp;Articles</a> </li>            
            <li class="top-icons">
              <ul class="social-icons">
              <li class="facebook"><a href="https://www.facebook.com/tutorialspointindia" target="_blank" data-placement="bottom" title="tutorialspoint @ Facebook">Facebook</a></li>
              <li class="googleplus"><a href="https://plus.google.com/u/0/116678774017490391259/posts" target="_blank" data-placement="bottom" title="tutorialspoint @ Google+">Google+</a></li>
              <li class="twitter"><a href="https://www.twitter.com/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Twitter">Twitter</a></li>
              <li class="linkedin"><a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Linkedin">Linkedin</a></li>
              <li class="youtube"><a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" data-placement="bottom" title="tutorialspoint YouTube">YouTube</a></li>
              </ul>
           </li>
         </ul>
      </nav>
         <!-- search code here  --> 
      <button class="btn btn-responsive-nav btn-inverse" data-toggle="collapse" data-target=".nav-main-collapse" id="pull" style="top: 24px!important"> <i class="icon icon-bars"></i> </button>
   </div>
  
   <div class="navbar nav-main">
      <div class="container">
         <nav class="nav-main mega-menu">
            <ul class="nav nav-pills nav-main" id="mainMenu">
               <li class="dropdown no-sub-menu"> <a class="dropdown" href="https://www.tutorialspoint.com/index.htm"><i class="icon icon-home"></i> Home</a> </li>   
               <li class="dropdown" id="liTL"><a class="dropdown" href="javascript:void(0);"><span class="tut-lib"> Tutorials Library <i class="fa-caret-down"></i></span></a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/codingground.htm"><i class="fa-code"></i> Coding Ground </a> </li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/tutor_connect/index.php"><i class="fa-user"> </i> Tutor Connect</a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fa-toggle-right"></i> Videos </a></li>
               <li class="dropdown no-sub-menu">
                  <div class="searchform-popup">
                     <input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
                     <div class="magnifying-glass"><i class="icon-search"></i> Search </div>
                 </div>
               </li>
            </ul>
         </nav>
         <div class="submenu-item sub-main-menu" id="top-sub-menu"></div>
         
      </div>
   </div>	
</header>
<div style="clear:both;"></div>
<div role="main" class="main">
<div class="container">
<div class="row">
<div class="col-md-2">
<aside class="sidebar">
<div class="mini-logo">
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/rails-mini-logo.jpg" alt="Ruby on Rails Tutorial" />
</div>
<ul class="nav nav-list primary left-menu">
<li class="heading">Ruby on Rails Tutorial</li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/index.htm">Ruby on Rails - Home</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-introduction.htm">Ruby on Rails - Introduction</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-installation.htm">Ruby on Rails - Installation</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-framework.htm">Ruby on Rails - Framework</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-directory-structure.htm">Ruby on Rails - Directory Structure</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-examples.htm">Ruby on Rails - Examples</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-database-setup.htm">Ruby on Rails - Database Setup</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-active-records.htm">Ruby on Rails - Active Records</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-migrations.htm">Ruby on Rails - Migrations</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-controllers.htm">Ruby on Rails - Controllers</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-routes.htm">Ruby on Rails - Routes</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-views.htm">Ruby on Rails - Views</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-layouts.htm">Ruby on Rails - Layouts</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-scaffolding.htm">Ruby on Rails - Scaffolding</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-and-ajax.htm">Ruby on Rails - AJAX</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-file-uploading.htm">Ruby on Rails - File Uploading</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-send-email.htm">Ruby on Rails - Send Emails</a></li>
</ul>
<ul class="nav nav-list primary left-menu">
<li class="heading">Ruby on Rails Resources</li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-references-guide.htm" >Ruby on Rails - References Guide</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm" >Ruby on Rails - Quick Guide</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-resources.htm" >Ruby on Rails - Resources</a></li>
<li><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-discussion.htm" >Ruby on Rails - Discussion</a></li>
</ul>
<ul class="nav nav-list primary left-menu">
<li class="heading">Ruby Tutorial</li>
<li><a href="https://www.tutorialspoint.com/ruby">Ruby Tutorial</a></li>
</ul>
<ul class="nav nav-list primary push-bottom left-menu special">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="https://www.tutorialspoint.com/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</aside>
</div>
<!-- PRINTING STARTS HERE -->
<div class="row">
<div class="content">
<div class="col-md-7 middle-col">
<h1>Ruby on Rails - Quick Guide</h1>
<div class="topgooglead">
<hr />
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="https://www.tutorialspoint.com/ruby-on-rails/rails-references-guide.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="https://www.tutorialspoint.com/ruby-on-rails/rails-resources.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<div class="clearer"></div>
<hr />
<h1>Ruby on Rails - Introduction</h1>
<h2>What is Ruby?</h2>
<p>Before we ride on Rails, let us recapitulate a few points of Ruby, which is the base of Rails.</p>
<p>Ruby is the successful combination of &minus;</p>
<ul class="list">
<li>Smalltalk's conceptual elegance,</li>
<li>Python's ease of use and learning, and</li>
<li>Perl's pragmatism.</li>
</ul>
<p>Ruby is &minus;</p>
<ul class="list">
<li>A high-level programming language.</li>
<li>Interpreted like Perl, Python, Tcl/TK.</li>
<li>Object-oriented like Smalltalk, Eiffel, Ada, Java.</li>
</ul>
<h2>Why Ruby?</h2>
<p>Ruby originated in Japan and now it is gaining popularity in US and Europe as well. The following factors contribute towards its popularity &minus;</p>
<ul class="list">
<li>Easy to learn</li>
<li>Open source (very liberal license)</li>
<li>Rich libraries</li>
<li>Very easy to extend</li>
<li>Truly object-oriented</li>
<li>Less coding with fewer bugs</li>
<li>Helpful community</li>
</ul>
<p>Although we have many reasons to use Ruby, there are a few drawbacks as well that you may have to consider before implementing Ruby &minus;</p>
<ul class="list">
<li><p><b>Performance Issues</b> &minus; Although it rivals Perl and Python, it is still an interpreted language and we cannot compare it with high-level programming languages like C or C++.</p></li>
<li><p><b>Threading model</b> &minus; Ruby does not use native threads. Ruby threads are simulated in the VM rather than running as native OS threads.</p></li>
</ul>
<h2>Sample Ruby Code</h2>
<p>Here is a sample Ruby code to print "Hello Ruby"</p>
<pre class="prettyprint notranslate">
# The Hello Class
class Hello
   
   def initialize( name )
      @name = name.capitalize
   end

   def salute
      puts "Hello #{@name}!"
   end
   
end

# Create a new object
h = Hello.new("Ruby")

# Output "Hello Ruby!"
h.salute
</pre>
<p><b>Output</b> &minus; This will produce the following result &minus;</p>
<pre class="result notranslate">
Hello Ruby!
</pre>
<h2>Embedded Ruby</h2>
<p>Ruby provides a program called ERB (Embedded Ruby), written by <i>Seki Masatoshi</i>. ERB allows you to put Ruby codes inside an HTML file. ERB reads along, word for word, and then at a certain point, when it encounters a Ruby code embedded in the document, it starts executing the Ruby code.</p>
<p>You need to know only two things to prepare an ERB document &minus;</p>
<ul class="list">
<li><p>If you want some Ruby code executed, enclose it between <b>&lt;%</b> and <b>%&gt;.</b></p></li>
<li><p>If you want the result of the code execution to be printed out, as a part of the output, enclose the code between <b>&lt;%=</b> and <b>%&gt;</b>.</p></li>
</ul>
<p>Here's an example. Save the code in erbdemo.rb file. Note that a Ruby file will have an extension <b>.rb</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;% page_title = "Demonstration of ERB" %&gt;
&lt;% salutation = "Dear programmer," %&gt;

&lt;html&gt;

   &lt;head&gt;
      &lt;title&gt;&lt;%= page_title %&gt;&lt;/title&gt;
   &lt;/head&gt;
	
   &lt;body&gt;
      &lt;p&gt;&lt;%= salutation %&gt;&lt;/p&gt;
      &lt;p&gt;This is an example of how ERB fills out a template.&lt;/p&gt;
   &lt;/body&gt;
	
&lt;/html&gt;
</pre> 
<p>Now, run the program using the command-line utility <b>erb</b>.</p>
<pre class="result notranslate">
tp&gt; erb erbdemo.rb
</pre> 
<p>This will produce the following result &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;

   &lt;head&gt;
      &lt;title&gt;Demonstration of ERb&lt;/title&gt;
   &lt;/head&gt;
	
   &lt;body&gt;
      &lt;p&gt;Dear programmer,&lt;/p&gt;
      &lt;p&gt;This is an example  of how ERb fills out a template.&lt;/p&gt;
   &lt;/body&gt;
	
&lt;/html&gt;
</pre> 
<h2>What is Rails?</h2>
<ul class="list">
<li><p>An extremely productive web-application framework.</p></li>
<li><p>Written in Ruby by David Heinemeier Hansson.</p></li>
<li><p>You could develop a web application at least ten times faster with Rails than you could with a typical Java framework.</p></li>
<li><p>An open source Ruby framework for developing database-backed web applications.</p></li>
<li><p>Configure your code with Database Schema.</p></li>
<li><p>No compilation phase required.</p></li>
</ul>	
<h2>Full Stack Framework</h2>
<ul class="list">
<li><p>Includes everything needed to create a database-driven web application, using the Model-View-Controller pattern.</p></li>
<li><p>Being a full-stack framework means all the layers are built to work seamlessly together with less code.</p></li>
<li><p>Requires fewer lines of code than other frameworks.</p></li>
</ul>
<h2>Convention over Configuration</h2>
<ul class="list">
<li><p>Rails shuns configuration files in favor of conventions, reflection, and dynamic runtime extensions.</p></li>
<li><p>Your application code and your running database already contain everything that Rails needs to know!</p></li>
</ul>
<h2>Rails Strengths</h2>
<p>Rails is packed with features that make you more productive, with many of the following features building on one other.</p>
<h3>Metaprogramming</h3>
<p>Where other frameworks use extensive code generation from scratch, Rail framework uses Metaprogramming techniques to write programs. Ruby is one of the best languages for Metaprogramming, and Rails uses this capability well. Rails also uses code generation but relies much more on Metaprogramming for the heavy lifting.</p>
<h3>Active Record</h3>
<p>Rails introduces the Active Record framework, which saves objects into the database. The Rails version of the Active Record discovers the columns in a database schema and automatically attaches them to your domain objects using metaprogramming.</p>
<h3>Convention over configuration</h3>
<p>Most web development frameworks for .NET or Java force you to write pages of configuration code. If you follow the suggested naming conventions, Rails doesn't need much configuration.</p>
<h3>Scaffolding</h3>
<p>You often create temporary code in the early stages of development to help get an application up quickly and see how major components work together. Rails automatically creates much of the scaffolding you'll need.</p>
<h3>Built-in testing</h3>
<p>Rails creates simple automated tests you can then extend. Rails also provides supporting code called harnesses and fixtures that make test cases easier to write and run. Ruby can then execute all your automated tests with the rake utility.</p>
<h3>Three environments</h3>
<p>Rails gives you three default environments: development, testing, and production. Each behaves slightly differently, making your entire software development cycle easier. For example, Rails creates a fresh copy of the Test database for each test run.</p>
<h1>Ruby on Rails - Installation</h1>
<p>To develop a web application using Ruby on Rails Framework, you need to install the following software &minus;</p>
<ul class="list">
<li>Ruby</li>
<li>The Rails Framework</li>
<li>A Web Server</li>
<li>A Database System</li>
</ul>
<p>We assume that you already have installed a Web Server and a Database System on your computer. You can use the WEBrick Web Server, which comes with Ruby. Most websites however use Apache or lightTPD web servers in production.</p>
<p>Rails works with many database systems, including MySQL, PostgreSQL, SQLite, Oracle, DB2 and SQL Server. Please refer to a corresponding Database System Setup manual to set up your database.</p>
<p>Let's look at the installation instructions for Rails on Windows and Linux.</p>
<h2>Rails Installation on Windows</h2>
<p>Follow the steps given below for installing Ruby on Rails.</p>
<h3>Step 1: Check Ruby Version </h3>
<p>First, check if you already have Ruby installed. Open the command prompt and type <b>ruby -v</b>. If Ruby responds, and if it shows a version number at or above 2.2.2, then type <b>gem --version</b>. If you don't get an error, skip <b>Install Ruby</b> step. Otherwise, we'll install a fresh Ruby.</p>
<h3>Step 2: Install Ruby </h3>
<p>If Ruby is not installed, then download an installation package from <b><a target="_blank" rel="nofollow" href="http://rubyinstaller.org/">rubyinstaller.org</a></b>. Follow the <b>download</b> link, and run the resulting installer. This is an exe file <b>rubyinstaller-2.2.2.x.exe</b> and will be installed in a single click. It's a very small package, and you'll get RubyGems as well along with this package. Please check the <b>Release Notes</b> for more detail.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ruby_home.jpg" alt="Ruby Home" />
<h3>Step 3: Install Rails </h3>
<p><b>Install Rails</b> &minus; With Rubygems loaded, you can install all of Rails and its dependencies using the following command through the command line &minus;</p>
<pre class="result notranslate">
C:\&gt; gem install rails
</pre>
<p></p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/gem_install.jpg" alt="GEM Install" />
<p><b>Note</b> &minus; The above command may take some time to install all dependencies. Make sure you are connected to the internet while installing gems dependencies.</p>
<h3>Step 4: Check Rails Version </h3>
<p>Use the following command to check the rails version.</p>
<pre class="result notranslate">
C:\&gt; rails -v
</pre>
<p><b>Output</b></p>
<pre class="result notranslate">
Rails 4.2.4
</pre>
<p>Congratulations! You are now on Rails over Windows.</p>
<h2>Rails Installation on Linux</h2>
<p>We are installing Ruby On Rails on Linux using <b>rbenv</b>. It is a lightweight Ruby Version Management Tool. The <b>rbenv</b> provides an easy installation procedure to manage various versions of Ruby, and a solid environment for developing Ruby on Rails applications.</p>
<p>Follow the steps given below to install Ruby on Rails using rbenv tool.</p>
<h3>Step 1: Install Prerequisite Dependencies</h3>
<p>First of all, we have to install <b>git - core</b> and some ruby dependences that help to install Ruby on Rails. Use the following command for installing Rails dependencies using <b>yum</b>.</p>
<pre class="result notranslate">
tp&gt; sudo yum install -y git-core zlib zlib-devel gcc-c++ patch readline readline-devel libyaml-devel libffi-devel openssl-devel make bzip2 autoconf automake libtool bison curl sqlite-devel
</pre>
<h3>Step 2: Install rbenv</h3>
<p>Now we will install rbenv and set the appropriate environment variables. Use the following set of commands to get rbenv for git repository.</p>
<pre class="result notranslate">
tp&gt; git clone git://github.com/sstephenson/rbenv.git .rbenv
tp&gt; echo 'export PATH="$HOME/.rbenv/bin:$PATH"' &gt;&gt; ~/.bash_profile
tp&gt; echo 'eval "$(rbenv init -)"' &gt;&gt; ~/.bash_profile
tp&gt; exec $SHELL

tp&gt; git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
tp&gt; echo 'export PATH="$HOME/.rbenv/plugins/ruby-build/bin:$PATH"' &lt;&lt; ~/.bash_profile
tp&gt; exec $SHELL
</pre>
<h3>Step 3: Install Ruby </h3>
<p>Before installing Ruby, determine which version of Ruby you want to install. We will install Ruby 2.2.3. Use the following command for installing Ruby.</p>
<pre class="result notranslate">
tp&gt; rbenv install -v 2.2.3
</pre>
<p>Use the following command for setting up the current Ruby version as default.</p>
<pre class="result notranslate">
tp&gt; rbenv global 2.2.3
</pre>
<p>Use the following command to verify the Ruby version.</p>
<pre class="result notranslate">
tp&gt; ruby -v
</pre>
<p><b>Output</b></p>
<pre class="result notranslate">
ruby 2.2.3p173 (2015-08-18 revivion 51636) [X86_64-linux]
</pre>
<p>Ruby provides a keyword <b>gem</b> for installing the supported dependencies; we call them <b>gems</b>. If you don't want to install the documentation for Ruby-gems, then use the following command.</p>
<pre class="result notranslate">
tp&gt; echo "gem: --no-document" &gt; ~/.gemrc
</pre>
<p>Thereafter, it is better to install the Bundler gem, because it helps to manage your application dependencies. Use the following command to install bundler gem.</p>
<pre class="result notranslate">
tp&gt; gem install bundler
</pre>
<h3>Step 4: Install Rails</h3>
<p>Use the following command for installing Rails version 4.2.4.</p>
<pre class="result notranslate">
tp&gt; install rails -v 4.2.4
</pre>
<p>Use the following command to make Rails executable available.</p>
<pre class="result notranslate">
tp&gt; rbenv rehash
</pre>
<p>Use the following command for checking the rails version.</p>
<pre class="result notranslate">
tp&gt; rails -v
</pre>
<p><b>Output</b></p>
<pre class="result notranslate">
tp&gt; Rails 4.2.4
</pre>
<p>Ruby on Rails framework requires JavaScript Runtime Environment (Node.js) to manage the features of Rails. Next, we will see how we can use Node.js to manage Asset Pipeline which is a Rails feature.</p> 
<h3>Step 5: Install JavaScript Runtime</h3>
<p>Let us install Node.js from the Yum repository. We will take Node.js from EPEL yum repository. Use the following command to add the EPEL package to the yum repository.</p>
<pre class="result notranslate">
tp&gt; sudo yum -y install epel-release
</pre>
<p>Use the following command for installing the Node.js package.</p>
<pre class="result notranslate">
tp&gt; sudo yum install nodejs
</pre>
<p>Congratulations! You are now on Rails over Linux.</p>
<h3>Step 6: Install Database</h3>
<p>By default, Rails uses sqlite3, but you may want to install MySQL, PostgreSQL, or other RDBMS. This is optional; if you have the database installed, then you may skip this step and it is not mandatory that you have a database installed to start the rails server. For this tutorial, we are using PostgreSQL database. Therefore use the following commands to install PostgreSQL.</p>
<pre class="result notranslate">
tp&gt; sudo yum install postgresql-server postgresql-contrib
</pre>
<p>Accept the prompt, by responding with a <b>y</b>. Use the following command to create a PostgreSQl database cluster.</p>
<pre class="result notranslate">
tp&gt; sudo postgresql-setup initdb
</pre>
<p>Use the following command to start and enable PostgreSQL.</p>
<pre class="result notranslate">
tp&gt; sudo systemctl start postgresql
tp&gt; sudo systemctl enable postgresql
</pre>
<h2>Keeping Rails Up-to-Date</h2>
<p>Assuming you have installed Rails using RubyGems, keeping it up-to-date is relatively easy. We can use the same command in both Windows and Linux platform. Use the following command &minus;</p>
<pre class="result notranslate">
tp&gt; gem update rails
</pre>
<p><b>Output</b></p>
<p>The following screenshot shows a Windows command prompt. The Linux terminal also provides the same output.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/gem_update.png" alt="GEM Update" />
<p>This will automatically update your Rails installation. The next time you restart your application, it will pick up this latest version of Rails. While using this command, make sure you are connected to the internet.</p>
<h2>Installation Verification</h2>
<p>You can verify if everything is set up according to your requirements or not. Use the following command to create a demo project.</p>
<pre class="result notranslate">
tp&gt; rails new demo
</pre>
<p><b>Output</b></p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/rails_new_demo.jpg" alt="Rails New Demo" />
<p>It will generate a demo rail project; we will discuss about it later. Currently we have to check if the environment is set up or not. Next, use the following command to run WEBrick web server on your machine.</p>
<pre class="result notranslate">
tp&gt; cd demo
tp&gt; rails server
</pre>
<p>It will generate auto-code to start the server</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/rails_server.jpg" alt="Rails Server" />
<p>Now open your browser and type the following &minus;</p>
<pre class="result notranslate">
http://localhost:3000
</pre>
<p>It should display a message, something like, "Welcome aboard" or "Congratulations".</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/rails_welcome.jpg" alt="Rails Welcome" />
<h1>Ruby on Rails - Framework</h1>
<p>A framework is a program, set of programs, and/or code library that writes most of your application for you. When you use a framework, your job is to write the parts of the application that make it do the specific things you want.</p>
<p>When you set out to write a Rails application, leaving aside the configuration and other housekeeping chores, you have to perform three primary tasks &minus;</p>
<ul class="list">
<li><p><b>Describe and model your application's domain</b> &minus; The domain is the universe of your application. The domain may be a music store, a university, a dating service, an address book, or a hardware inventory. So here you have to figure out what's in it, what entities exist in this universe and how the items in it relate to each other. This is equivalent to modeling a database structure to keep the entities and their relationship.</p></li>
<li><p><b>Specify what can happen in this domain</b> &minus; The domain model is static; you have to make it dynamic. Addresses can be added to an address book. Musical scores can be purchased from music stores. Users can log in to a dating service. Students can register for classes at a university. You need to identify all the possible scenarios or actions that the elements of your domain can participate in.</p></li>
<li><p><b>Choose and design the publicly available views of the domain</b> &minus; At this point, you can start thinking in Web-browser terms. Once you've decided that your domain has students, and that they can register for classes, you can envision a welcome page, a registration page, and a confirmation page, etc. Each of these pages, or views, shows the user how things stand at a certain point.</p></li>
</ul>
<p>Based on the above three tasks, Ruby on Rails deals with a Model/View/Controller (MVC) framework.</p>
<h2>Ruby on Rails MVC Framework</h2>
<p>The <b><u>M</u></b>odel <b><u>V</u></b>iew <b><u>C</u></b>ontroller principle divides the work of an application into three separate but closely cooperative subsystems.</p>
<h3>Model (ActiveRecord )</h3>
<p>It maintains the relationship between the objects and the database and handles validation, association, transactions, and more.</p>
<p>This subsystem is implemented in ActiveRecord library, which provides an interface and binding between the tables in a relational database and the Ruby program code that manipulates database records. Ruby method names are automatically generated from the field names of database tables.</p>
<h3>View ( ActionView )</h3>
<p>It is a presentation of data in a particular format, triggered by a controller's decision to present the data. They are script-based template systems like JSP, ASP, PHP, and very easy to integrate with AJAX technology.</p>
<p>This subsystem is implemented in ActionView library, which is an Embedded Ruby (ERb) based system for defining presentation templates for data presentation. Every Web connection to a Rails application results in the displaying of a view.</p>
<h3>Controller ( ActionController )</h3>
<p>The facility within the application that directs traffic, on the one hand, querying the models for specific data, and on the other hand, organizing that data (searching, sorting, messaging it) into a form that fits the needs of a given view.</p>
<p>This subsystem is implemented in ActionController, which is a data broker sitting between ActiveRecord (the database interface) and ActionView (the presentation engine).</p>
<h2>Pictorial Representation of MVC Framework</h2>
<p>Given below is a pictorial representation of Ruby on Rails Framework &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/rails-framework.gif" alt="Rails Framework" />
<h2>Directory Representation of MVC Framework</h2>
<p>Assuming a standard, default installation over Linux, you can find them like this &minus;</p>
<pre class="result notranslate">
tp&gt; cd /usr/local/lib/ruby/gems/2.2.0/gems
tp&gt; ls
</pre>
<p>You will see subdirectories including (but not limited to) the following &minus;</p>
<ul class="list">
<li>actionpack-x.y.z</li>
<li>activerecord-x.y.z</li>
<li>rails-x.y.z</li>
</ul>
<p>Over a windows installation, you can find them like this &minus;</p>
<pre class="result notranslate">
tp&gt;cd ruby\lib\ruby\gems\2.2.0\gems
ruby\lib\ruby\gems\2.2.0\gems\&gt;dir
</pre>
<p>You will see subdirectories including (but not limited to) the following &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/mvc.jpg" alt="MVC" />
<p>ActionView and ActionController are bundled together under ActionPack.</p>
<p>ActiveRecord provides a range of programming techniques and shortcuts for manipulating data from an SQL database. ActionController and ActionView provides facilities for manipulating and displaying that data. Rails ties it all together.</p>
<h1>Ruby on Rails - Directory Structure</h1>
<p>When you use the Rails helper script to create your application, it creates the entire directory structure for the application. Rails knows where to find things it needs within this structure, so you don't have to provide any input.</p>
<p>Here is a top-level view of a directory tree created by the helper script at the time of application creation. Except for minor changes between releases, every Rails project will have the same structure, with the same naming conventions. This consistency gives you a tremendous advantage; you can quickly move between Rails projects without relearning the project's organization.</p>
<p>To understand this directory structure, let's use the <b>demo</b> application created in the Installation chapter. It can be created using a simple helper command <b>rails demo</b>.</p>
<p>Now, go into the demo application root directory as follows &minus;</p>
<pre class="result notranslate">
tp&gt; cd demo
demo&gt; dir
</pre>
<p>You will find a directory structure in Windows as follows &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/dir.jpg" alt="Directory" />
<p>Now let's explain the purpose of each directory</p>
<ul class="list">
<li><p><b>app</b> &minus; It organizes your application components. It's got subdirectories that hold the view (views and helpers), controller (controllers), and the backend business logic (models).</p></li>
<li><p><b>app/controllers</b> &minus; The controllers subdirectory is where Rails looks to find the controller classes. A controller handles a web request from the user.</p></li>
<li><p><b>app/helpers</b> &minus; The helpers subdirectory holds any helper classes used to assist the model, view, and controller classes. This helps to keep the model, view, and controller code small, focused, and uncluttered.</p></li>
<li><p><b>app/models</b> &minus; The models subdirectory holds the classes that model and wrap the data stored in our application's database. In most frameworks, this part of the application can grow pretty messy, tedious, verbose, and error-prone. Rails makes it dead simple!</p></li>
<li><p><b>app/view</b> &minus; The views subdirectory holds the display templates to fill in with data from our application, convert to HTML, and return to the user's browser.</p></li>
<li><p><b>app/view/layouts</b> &minus; Holds the template files for layouts to be used with views. This models the common header/footer method of wrapping views. In your views, define a layout using the &lt;tt&gt;layout:default&lt;/tt&gt; and create a file named default.html.erb. Inside default.html.erb, call &lt;% yield %&gt; to render the view using this layout.</p></li>
<li><p><b>components</b> &minus; This directory holds components, tiny self-contained applications that bundle model, view, and controller.</p></li>
<li><p><b>config</b> &minus; This directory contains the small amount of configuration code that your application will need, including your database configuration (in database.yml), your Rails environment structure (environment.rb), and routing of incoming web requests (routes.rb). You can also tailor the behavior of the three Rails environments for test, development, and deployment with files found in the environments directory.</p></li>
<li><p><b>db</b> &minus; Usually, your Rails application will have model objects that access relational database tables. You can manage the relational database with scripts you create and place in this directory.</p></li>
<li><p><b>doc</b> &minus; Ruby has a framework, called RubyDoc, that can automatically generate documentation for code you create. You can assist RubyDoc with comments in your code. This directory holds all the RubyDoc-generated Rails and application documentation.</p></li>
<li><p><b>lib</b> &minus; You'll put libraries here, unless they explicitly belong elsewhere (such as vendor libraries).</p></li>
<li><p><b>log</b> &minus; Error logs go here. Rails creates scripts that help you manage various error logs. You'll find separate logs for the server (server.log) and each Rails environment (development.log, test.log, and production.log).</p></li>
<li><p><b>public</b> &minus; Like the public directory for a web server, this directory has web files that don't change, such as JavaScript files (public/javascripts), graphics (public/images), stylesheets (public/stylesheets), and HTML files (public).</p></li>
<li><p><b>script</b> &minus; This directory holds scripts to launch and manage the various tools that you'll use with Rails. For example, there are scripts to generate code (generate) and launch the web server (server).</p></li>
<li><p><b>test</b> &minus; The tests you write and those that Rails creates for you, all goes here. You'll see a subdirectory for mocks (mocks), unit tests (unit), fixtures (fixtures), and functional tests (functional).</p></li>
<li><p><b>tmp</b> &minus; Rails uses this directory to hold temporary files for intermediate processing.</p></li>
<li><p><b>vendor</b> &minus; Libraries provided by third-party vendors (such as security libraries or database utilities beyond the basic Rails distribution) go here.</p></li>
</ul>
<p>Apart from these directories, there will be two files available in demo directory.</p>
<ul class="list">
<li><p><b>README</b> &minus; This file contains a basic detail about Rail Application and description of the directory structure explained above.</p></li>
<li><p><b>Rakefile</b> &minus; This file is similar to Unix Makefile, which helps with building, packaging and testing the Rails code. This will be used by rake utility supplied along with the Ruby installation.</p></li>
</ul>
<h1>Ruby on Rails - Examples</h1>
<p>In this chapter, we will create a simple but operational online library system for holding and managing the books.</p>
<p>This application has a basic architecture and will be built using two ActiveRecord models to describe the types of data that is stored &minus;</p>
<ul class="list">
<li>Books, which describes an actual listing.</li>
<li>Subject, which is used to group books  together.</li>
</ul>
<h2>Workflow for Creating Rails Applications</h2>
<p>A recommended work flow for creating Rails Application is as follows &minus;</p>
<ul class="list">
<li><p>Use the rails command to create the basic skeleton of the application.</p></li>
<li><p>Create a database on the PostgreSQL server to hold your data.</p></li>
<li><p>Configure the application to know where your database is located and the login credentials for it.</p></li>
<li><p>Create Rails Active Records (Models), because they are the business objects you'll be working with in your controllers.</p></li>
<li><p>Generate Migrations that simplify the creating and maintaining of database tables and columns.</p></li>
<li><p>Write Controller Code to put a life in your application.</p></li>
<li><p>Create Views to present your data through User Interface.</p></li>
</ul>
<p>So, let us start with creating our library application.</p>
<h2>Creating an Empty Rails Web Application</h2>
<p>Rails is both a runtime web application framework and a set of helper scripts that automate many of the things you do when developing a web application. In this step, we will use one such helper script to create the entire directory structure and the initial set of files to start our Library System application.</p>
<ul class="list">
<li><p>Go into ruby installation directory to create your application.</p></li>
<li><p>Run the following command to create a skeleton for library application. It  will create the directory structure in the current directory.</p></li>
</ul>
<pre class="result notranslate">
tp&gt; rails new library
</pre>
<p>This will create a subdirectory for the library application containing a complete directory tree of folders and files for an empty Rails application. Check a complete directory structure of the application. Check <a href="https://www.tutorialspoint.com/ruby-on-rails/rails-directory-structure.htm">Rails Directory Structure</a> for more detail.</p>
<p>Most of our development work will be creating and editing files in the <b>library/app</b> subdirectories. Here's a quick run down of how to use them &minus;</p>
<ul class="list">
<li><p>The <i>controllers</i> subdirectory is where Rails looks to find controller classes. A controller handles a web request from the user.</p></li>
<li><p>The <i>views</i> subdirectory holds the display templates to fill in with data from our application, convert to HTML, and return to the user's browser.</p></li>
<li><p>The <i>models</i> subdirectory holds the classes that model and wrap the data stored in our application's database. In most frameworks, this part of the application can grow pretty messy, tedious, verbose, and error-prone. Rails makes it dead simple.</p></li>
<li><p>The <i>helpers</i> subdirectory holds any helper classes used to assist the model, view, and controller classes. This helps to keep the model, view, and controller code small, focused, and uncluttered.</p></li>
</ul>
<h2>Starting Web Server</h2>
<p>Rails web application can run under virtually any web server, but the most convenient way to develop a Rails web application is to use the built-in WEBrick web server. Let's start this web server and then browse to our empty library application &minus;</p>
<p>This server will be started from the application directory as follows. It runs on port number 3000.</p>
<pre class="result notranslate">
tp&gt; cd ruby\library 
tp\ruby\library\&gt; Rails server
</pre>
<p>It generates the auto code to start the server as shown below &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/rails_server.jpg" alt="Rails Server" />
<p>This will start your WEBrick web server.</p>
<p>Now open your browser and browse to <b>http://127.0.0.1:3000</b>. If everything is gone fine, then you should see a greeting message from WEBrick, otherwise there is something wrong with your setting. If everything goes well it will generate the output as follows.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/web_server.jpg" alt="Web Server" />
<h2>What is next?</h2>
<p>The next chapter explains how to create databases for your application and what is the configuration required to access these created databases.</p>
<p>Further, we will see what Rails Migration is and how it is used to maintain database tables.</p>
<h1>Ruby on Rails - Database Setup</h1>
<p>Before starting with this chapter, make sure your database server is up and running. Ruby on Rails recommends to create three databases - a database each for development, testing, and production environment. According to convention, their names should be &minus;</p>
<ul class="list">
<li>library_development</li>
<li>library_production</li>
<li>library_test</li>
</ul>
<p>You should initialize all three of them and create a user and password for them with full read and write privileges. We are using the <b>root</b> user ID for our application.</p>
<h2>Database Setup for MySQL</h2>
<p>In MySQL, we are using the <b>root</b> user ID for our application. The MySQL console session in which you do this looks something like &minus;</p>
<pre class="result notranslate">
mysql&gt; create database library_development;
Query OK, 1 row affected (0.01 sec)

mysql&gt; grant all privileges on library_development.*
to 'root'@'localhost' identified by 'password';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)
</pre>
<p>You can do the same thing for two more databases <b>library_production</b> and <b>library_test</b>.</p>
<h2>Configuring database.yml</h2>
<p>At this point, you need to let Rails know about the user name and password for the databases. You do this in the file <b>database.yml</b>, available in the <b>library\config</b> subdirectory of Rails Application you created. This file has live configuration sections for MySQL databases. In each of the sections you use, you need to change the username and password lines to reflect the permissions on the databases you've created.</p> 
<p>When you finish, it should look something like &minus;</p>
<pre class="result notranslate">
development:
   adapter: mysql
   database: library_development
   username: root
   password: [password]
   host: localhost
	
test:
   adapter: mysql
   database: library_test
   username: root
   password: [password]
   host: localhost
   
production:
   adapter: mysql
   database: library_production
   username: root
   password: [password]
   host: localhost
</pre>
<h2>Database Setup for PostgreSQL</h2>
<p>By default, PostgreSQL does not provide any users. We have to create new users. Use the following command to create a user with the name <b>rubyuser</b>.</p>
<pre class="result notranslate">
tp&gt; sudo -u postgres createuser rubyuser -s
</pre>
<p>If you want to create a password for the new user, then use the following command.</p>
<pre class="result notranslate">
tp&gt; sudo -u postgres psql

postgres=# \password rubyuser
</pre>
<p>Use the following command for creating a database <b>library_development</b>.</p>
<pre class="result notranslate">
postgres=# CREATE DATABASE library_development OWNER rubyuser; 

CREATE DATABASE
</pre>
<p>Use the following command for creating a database <b>library_production</b>.</p>
<pre class="result notranslate">
postgres=# CREATE DATABASE library_production OWNER rubyuser; 

CREATE DATABASE
</pre>
<p>Use the following command for creating a database <b>library_test</b>.</p>
<pre class="result notranslate">
postgres=# CREATE DATABASE library_test OWNER rubyuser; 

CREATE DATABASE
</pre>
<p>Press <b>Ctrl+D</b> to terminate PosgreSQL.</p>
<h3>Configuring database.yml</h3>  
<p>At this point, you need to let Rails know the username and password for the databases. You do this in the file <b>database.yml</b>, available in the <b>library\config</b> subdirectory of Rails Application you created. This file has live configuration sections for PostgreSQL databases. In each of the sections, you need to change the username and password lines to reflect the permissions on the databases you've created.</p> 
<p>When you finish, it should look as follows &minus;</p>
<pre class="result notranslate">
default: &amp;default
   adapter: postgresql
   encoding: unicode
  
development:
   adapter: postgresql
   encoding: unicode
   database: library_development
   username: rubyuser
   password: &lt;Password for rubyuser&gt;

test:
   adapter: postgresql
   encoding: unicode
   database: library_test
   username: rubyuser
   password: &lt;Password for rubyuser&gt;
 
production:
   adapter: postgresql
   encoding: unicode
   database: library_production
   username: rubyuser
   password: &lt;Password for rubyuser&gt;
</pre>
<h2>What is Next?</h2>
<p>The next two chapters explain how to model your database tables and how to manage those using Rails Migrations.</p>
<h1>Ruby on Rails - Active Records</h1>
<p>Rails Active Record is the Object/Relational Mapping (ORM) layer supplied with Rails. It closely follows the standard ORM model, which is as follows &minus;</p>
<ul class="list">
<li>tables map to classes,</li>
<li>rows map to objects and</li>
<li>columns map to object attributes.</li>
</ul>
<p>Rails Active Records provide an interface and binding between the tables in a relational database and the Ruby program code that manipulates database records. Ruby method names are automatically generated from the field names of database tables.</p>
<p>Each Active Record object has CRUD (<b><u>C</u></b>reate, <b><u>R</u></b>ead, <b><u>U</u></b>pdate, and <b><u>D</u></b>elete) methods for database access. This strategy allows simple designs and straight forward mappings between database tables and application objects.</p>
<h2>Translating a Domain Model into SQL</h2>
<p>Translating a domain model into SQL is generally straight forward, as long as you remember that you have to write Rails-friendly SQL. In practical terms, you have to follow certain rules &minus;</p>
<ul class="list">
<li><p>Each entity (such as book) gets a table in the database named after it, but in the plural (books).</p></li>
<li><p>Each such entity-matching table has a field called <i>id</i>, which contains a unique integer for each record inserted into the table.</p></li>
<li><p>Given entity x and entity y, if entity y belongs to entity x, then table y has a field called x_id.</p></li>
<li><p>The bulk of the fields in any table store the values for that entity's simple properties (anything that's a number or a string).</p></li>
</ul>
<h2>Creating Active Record Files (Models)</h2>
<p>To create the Active Record files for our entities for library application, introduced in the previous chapter, issue the following command from the top level of the application directory.</p>
<pre class="result notranslate">
library\&gt; ruby script/generate model Book
library\&gt; ruby script/generate model Subject
</pre>
<p>Above <b>rails generate model book</b> commands generates the auto code as below &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/book_generate.jpg" alt="Book Generate" />
<p>You're telling the generator to create models called Book and Subject to store instances of books and subjects. Notice that you are capitalizing Book and Subject and using the singular form. This is a Rails paradigm that you should follow each time you create a model.</p>
<p>When you use the generate tool, Rails creates the actual model file that holds all the methods unique to the model and the business rules you define, a unit test file for performing test-driven development, a sample data file (called fixtures) to use with the unit tests, and a Rails migration that makes creating database tables and columns easy.</p>
<p>Apart from creating many other files and directories, this will create files named <b>book.rb</b> and <b>subject.rb</b> containing a skeleton definition in the <b>app/models</b> directory.</p>
<p>Content available in book.rb &minus;</p>
<pre class="result notranslate">
class Book &lt; ActiveRecord::Base
end
</pre>
<p>Content available in subject.rb &minus;</p>
<pre class="result notranslate">
class Subject &lt; ActiveRecord::Base
end
</pre>
<h2>Creating Associations between Models</h2>
<p>When you have more than one model in your rails application, you would need to create connection between those models. You can do this via associations. Active Record supports three types of associations &minus;</p>
<ul class="list">
<li><p><b>one-to-one</b> &minus; A one-to-one relationship exists when one item has exactly one of another item. For example, a person has exactly one birthday or a dog has exactly one owner.</p></li>
<li><p><b>one-to-many</b> &minus; A one-to-many relationship exists when a single object can be a member of many other objects. For instance, one subject can have many books.</p></li> 
<li><p><b>many-to-many</b> &minus; A many-to-many relationship exists when the first object is related to one or more of a second object, and the second object is related to one or many of the first object.</p></li>
</ul>
<p>You indicate these associations by adding declarations to your models: has_one, has_many, belongs_to, and has_and_belongs_to_many.</p>
<p>Now, you need to tell Rails what relationships you want to establish within the library data system. To do so, modify book.rb and subject.rb to look like this &minus;</p>
<pre class="prettyprint notranslate">
class Book &lt; ActiveRecord::Base
   belongs_to :subject
end
</pre>
<p>We have used a singular subject in the above example, because one Book can belong to a single Subject.</p>
<pre class="prettyprint notranslate">
class Subject &lt; ActiveRecord::Base
   has_many :books
end
</pre>
<p>We have used plural books here, because one subject can have multiple books.</p>
<h2>Implementing Validations on Models</h2>
<p>The implementation of validations is done in a Rails model. The data you are entering into the database is defined in the actual Rails model, so it only makes sense to define what valid data entails in the same location.</p>
<p>The validations are &minus;</p>
<ul class="list">
<li><p>The value of title field should not be NULL.</p></li>
<li><p>The value of price field should be numeric.</p></li>
</ul>
<p>Open <b>book.rb</b> in the <b>app\model</b> subdiractory and put the following validations &minus;</p>
<pre class="result notranslate">
class Book &lt; ActiveRecord::Base
   belongs_to :subject
   validates_presence_of :title
   validates_numericality_of :price, :message=&gt;"Error Message"
end
</pre>
<ul class="list">
<li><p><b>validates_presence_of</b> &minus; protects "NOT NULL" fields against missing user input.</p></li>
<li><p><b>validates_numericality_of</b> &minus; prevents the user, entering non numeric data.</p></li>
</ul>
<p>Besides the validations mentioned above, there are other common validations. Check <a href="https://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm">Rails Quick Guide</a>.</p>
<h2>What is Next?</h2>
<p>In the next chapter, we will learn Rails Migration, which allows you to use Ruby to define changes to your database schema, making it possible to use a version control system to keep things synchronized with the actual code.</p>
<h1>Ruby on Rails - Migrations</h1>
<p>Rails Migration allows you to use Ruby to define changes to your database schema, making it possible to use a version control system to keep things synchronized with the actual code.</p>
<p>This has many uses, including &minus;</p>
<ul class="list">
<li><p><b>Teams of developers</b> &minus; If one person makes a schema change, the other developers just need to update, and run "rake migrate".</p></li>
<li><p><b>Production servers</b> &minus; Run "rake migrate" when you roll out a new release to bring the database up to date as well.</p></li>
<li><p><b>Multiple machines</b> &minus; If you develop on both a desktop and a laptop, or in more than one location, migrations can help you keep them all synchronized.</p></li>
</ul>
<h2>What Can Rails Migration Do?</h2>
<ul class="list">
<li>create_table(name, options)</li>
<li>drop_table(name)</li>
<li>rename_table(old_name, new_name)</li>
<li>add_column(table_name, column_name, type, options)</li>
<li>rename_column(table_name, column_name, new_column_name)</li>
<li>change_column(table_name, column_name, type, options)</li>
<li>remove_column(table_name, column_name)</li>
<li>add_index(table_name, column_name, index_type)</li>
<li>remove_index(table_name, column_name)</li>
</ul>
<p><b>Migrations support all the basic data types</b> &minus; The following is the list of data types that migration supports &minus;</p>
<ul class="list">
<li><p><b>string</b> &minus; for small data types such as a title.</p></li>
<li><p><b>text</b> &minus; for longer pieces of textual data, such as the description.</p></li>
<li><p><b>integer</b> &minus; for whole numbers.</p></li>
<li><p><b>float</b> &minus; for decimals.</p></li>
<li><p><b>datetime and timestamp</b> &minus; store the date and time into a column.</p></li>
<li><p><b>date and time</b> &minus; store either the date only or time only.</p></li>
<li><p><b>binary</b> &minus; for storing data such as images, audio, or movies.</p></li>
<li><p><b>Boolean</b> &minus; for storing true or false values.</p></li>
</ul>
<p><b>Valid column options are</b> &minus; The following is the list of valid column options.</p>
<ul class="list">
<li><p><b>limit</b> ( :limit =&gt; &#8220;50&#8221; )</p></li>
<li><p><b>default</b> (:default =&gt; &#8220;blah&#8221; )</p></li>
<li><p><b>null</b> (:null =&gt; false implies <span>NOT NULL</span>)</p></li>
</ul>
<p><b>NOTE</b> &minus; The activities done by Rails Migration can be done using any front-end GUI or directly on SQL prompt, but Rails Migration makes all those activities very easy.</p>
<p>See the <a target="_blank" rel="nofollow" href="http://api.rubyonrails.org/classes/ActiveRecord/Migration.html">Rails API</a> for details on these.</p>
<h2>Create the Migrations</h2>
<p>Here is the generic syntax for creating a migration &minus;</p>
<pre class="result notranslate">
application_dir&gt; rails generate migration table_name
</pre>
<p>This will create the file db/migrate/001_table_name.rb. A migration file contains the basic Ruby syntax that describes the data structure of a database table.</p>
<p><b>NOTE</b> &minus; Before running the migration generator, it is recommended to clean the existing migrations generated by model generators.</p>
<p>We will create two migrations corresponding to our three tables &minus; <b><i>books and subjects</i></b>.</p>
<p>Books migration should be as follows &minus;</p>
<pre class="result notranslate">
tp&gt; cd library
library&gt; rails generate migration books
</pre>
<p>Above command generates the following code.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/genarate4.jpg" alt="Genarate" />
<p>subject migration should be as follows &minus;</p>
<pre class="result notranslate">
tp&gt; cd library
library&gt; rails generate migration subjects
</pre>
<p>Above command generates the following code.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/genarate4.jpg" alt="Genarate" />
<p>Notice that you are using lower case for book and subject and plural form while creating migrations. This is a Rails paradigm that you should follow each time you create a Migration.</p>
<h2>Edit the Code</h2>
<p>Go to db/migrate subdirectory of your application and edit each file one by one using any simple text editor.</p>
<p>Modify 001_books.rb as follows &minus;</p>
<p>The ID column will be created automatically, so don't do it here as well.</p>
<pre class="result notranslate">
class Books &lt; ActiveRecord::Migration
   
   def self.up
      create_table :books do |t|
         t.column :title, :string, :limit =&gt; 32, :null =&gt; false
         t.column :price, :float
         t.column :subject_id, :integer
         t.column :description, :text
         t.column :created_at, :timestamp
      end
   end

   def self.down
      drop_table :books
   end
end
</pre>
<p>The method <b>self.up</b> is used when migrating to a new version, <b>self.down</b> is used to roll back any changes if needed. At this moment, the above script will be used to create <b><i>books</i></b> table.</p>
<p>Modify 002_subjects.rb as follows &minus;</p>
<pre class="result notranslate">
class Subjects &lt; ActiveRecord::Migration
   def self.up
      
      create_table :subjects do |t|
         t.column :name, :string
      end
	
      Subject.create :name =&gt; "Physics"
      Subject.create :name =&gt; "Mathematics"
      Subject.create :name =&gt; "Chemistry"
      Subject.create :name =&gt; "Psychology"
      Subject.create :name =&gt; "Geography"
   end

   def self.down
      drop_table :subjects
   end
end
</pre>
<p>The above script will be used to create <b><i>subjects</i></b> table and will create five records in the subjects table.</p>
<h2>Run the Migration</h2>
<p>Now that you have created all the required migration files. It is time to execute them against the database. To do this, go to a command prompt and go to the library directory in which the application is located, and then type <b>rake migrate</b> as follows &minus;</p>
<pre class="result notranslate">
library&gt; rake db:migrate
</pre>
<p>This will create a "schema_info" table if it doesn't exist, which tracks the current version of the database - each new migration will be a new version, and any new migrations will be run until your database is at the current version.</p>
<p><b>Rake</b> is a Ruby build program similar to Unix <i>make</i> program that Rails takes advantage of, to simplify the execution of complex tasks such as updating a database's structure etc.</p>
<h2>Running Migrations for Production and Test Databases</h2>
<p>If you would like to specify what Rails environment to use for the migration, use the RAILS_ENV shell variable.</p>
<p>For example &minus;</p>
<pre class="result notranslate">
library&gt; export RAILS_ENV = production
library&gt; rake db:migrate
library&gt; export RAILS_ENV = test
library&gt; rake db:migrate
library&gt; export RAILS_ENV = development
library&gt; rake db:migrate
</pre>
<p><b>NOTE</b> &minus; In Windows, use "set RAILS_ENV = production" instead of <i>export</i> command.</p>
<h2>What is Next?</h2>
<p>Now we have our database and the required tables available. In the two subsequent chapters, we will explore two important components called Controller (ActionController) and View (ActionView).</p>
<ul class="list">
<li><p>Creating Controllers (Action Controller).</p></li>
<li><p>Creating Views (Action View).</p></li>
</ul>
<h1>Ruby on Rails - Controller</h1>
<p>The Rails controller is the logical center of your application. It coordinates the interaction between the user, the views, and the model. The controller is also a home to a number of important ancillary services.</p>
<ul class="list">
<li><p>It is responsible for routing external requests to internal actions. It handles people-friendly URLs extremely well.</p></li>
<li><p>It manages caching, which can give applications orders-of-magnitude performance boosts.</p></li>
<li><p>It manages helper modules, which extend the capabilities of the view templates without bulking up their code.</p></li>
<li><p>It manages sessions, giving users the impression of an ongoing interaction with our applications.</p></li>
</ul>
<p>The process for creating a controller is very easy, and it's similar to the process we've already used for creating a model. We will create just one controller here &minus;</p>
<pre class="result notranslate">
library\&gt; rails generate controller Book
</pre>
<p>Notice that you are capitalizing Book and using the singular form. This is a Rails paradigm that you should follow each time you create a controller.</p>
<p>This command accomplishes several tasks, of which the following are relevant here &minus;</p>
<ul class="list">
<li><p>It creates a file called <b>app/controllers/book_controller.rb</b></p></li>
</ul>
<p>If you look at book_controller.rb, you will find it as follows &minus;</p>
<pre class="result notranslate">
class BookController &lt; ApplicationController
end
</pre>
<p>Controller classes inherit from <i>ApplicationController,</i> which is the other file in the controllers folder: <b>application.rb</b>.</p>
<p>The <i>ApplicationController</i> contains code that can be run in all your controllers and it inherits from Rails <i>ActionController::Base</i> class.</p>
<p>You don't need to worry with the <i>ApplicationController</i> as of yet, so let's just define a few method stubs in <b>book_controller.rb</b>. Based on your requirement, you could define any number of functions in this file.</p>
<p>Modify the file to look like the following and save your changes. Note that it is upto you what name you want to give to these methods, but better to give relevant names.</p>
<pre class="prettyprint notranslate">
class BookController &lt; ApplicationController
   def list
   end
   
   def show
   end
   
   def new
   end
   
   def create
   end
   
   def edit
   end
   
   def update
   end
   
   def delete
   end
   
end
</pre>
<p>Now let us implement all the methods one by one.</p>
<h2>Implementing the list Method</h2>
<p>The list method gives you a list of all the books in the database. This functionality will be achieved by the following lines of code. Edit the following lines in book_controller.rb file.</p>
<pre class="prettyprint notranslate">
def list
   @books = Book.all
end
</pre>
<p>The <i>@books = Book.all</i> line in the list method tells Rails to search the books table and store each row it finds in the @books instance object.</p>
<h2>Implementing the show Method</h2>
<p>The show method displays only further details on a single book. This functionality will be achieved by the following lines of code.</p>
<pre class="result notranslate">
def show
   @book = Book.find(params[:id])
end
</pre>
<p>The show method's <i>@book = Book.find(params[:id])</i> line tells Rails to find only the book that has the id defined in params[:id].</p>
<p>The params object is a container that enables you to pass values between method calls. For example, when you're on the page called by the list method, you can click a link for a specific book, and it passes the id of that book via the params object so that show can find the specific book.</p>
<h2>Implementing the new Method</h2>
<p>The new method lets Rails know that you will create a new object. So just add the following code in this method.</p>
<pre class="prettyprint notranslate">
def new
   @book = Book.new
   @subjects = Subject.all
end
</pre>
<p>The above method will be called when you will display a page to the user to take user input. Here second line grabs all the subjects from the database and puts them in an array called @subjects.</p>
<h2>Implementing the create Method</h2>
<p>Once you take user input using HTML form, it is time to create a record into the database. To achieve this, edit the create method in the book_controller.rb to match the following &minus;</p>
<pre class="prettyprint notranslate">
def create
   @book = Book.new(book_params)
	
   if @book.save
      redirect_to :action =&gt; 'list'
   else
      @subjects = Subject.all
      render :action =&gt; 'new'
   end
   
end

def book_params
   params.require(:books).permit(:title, :price, :subject_id, :description)
end
</pre>
<p>The first line creates a new instance variable called @book that holds a Book object built from the data, the user submitted. The <b>book_params</b> method is used to collect all the fields from object <b>:books</b>. The data was passed from the new method to create using the params object.</p>
<p>The next line is a conditional statement that redirects the user to the <b>list</b> method if the object saves correctly to the database. If it doesn't save, the user is sent back to the new method. The redirect_to method is similar to performing a meta refresh on a web page: it automatically forwards you to your destination without any user interaction.</p>
<p>Then <i>@subjects = Subject.all</i> is required in case it does not save data successfully and it becomes similar case as with new option.</p>
<h2>Implementing the edit Method</h2>
<p>The edit method looks nearly identical to the show method. Both methods are used to retrieve a single object based on its id and display it on a page. The only difference is that the show method is not editable.</p>
<pre class="prettyprint notranslate">
def edit
   @book = Book.find(params[:id])
   @subjects = Subject.all
end
</pre>
<p>This method will be called to display data on the screen to be modified by the user. The second line grabs all the subjects from the database and puts them in an array called @subjects.</p>
<h2>Implementing the update Method</h2>
<p>This method will be called after the edit method, when the user modifies a data and wants to update the changes into the database. The update method is similar to the create method and will be used to update existing books in the database.</p>
<pre class="prettyprint notranslate">
def update
   @book = Book.find(params[:id])
	
   if @book.update_attributes(book_param)
      redirect_to :action =&gt; 'show', :id =&gt; @book
   else
      @subjects = Subject.all
      render :action =&gt; 'edit'
   end
   
end

def book_param
   params.require(:book).permit(:title, :price, :subject_id, :description)
end
</pre>
<p>The update_attributes method is similar to the save method used by create but instead of creating a new row in the database, it overwrites the attributes of the existing row.</p>
<p>Then <i>@subjects = Subject.all</i> line is required in case it does not save the data successfully, then it becomes similar to edit option.</p>
<h2>Implementing the delete Method</h2>
<p>If you want to delete a record from the database then you will use this method. Implement this method as follows.</p>
<pre class="prettyprint notranslate">
def delete
   Book.find(params[:id]).destroy
   redirect_to :action =&gt; 'list'
end
</pre>
<p>The first line finds the classified based on the parameter passed via the params object and then deletes it using the destroy method. The second line redirects the user to the list method using a redirect_to call.</p>
<h2>Additional Methods to Display Subjects</h2>
<p>Assume you want to give a facility to your users to browse all the books based on a given subject. So, you can create a method inside book_controller.rb to display all the subjects. Assume the method name is <b>show_subjects</b> &minus;</p>
<pre class="prettyprint notranslate">
def show_subjects
   @subject = Subject.find(params[:id])
end
</pre>
<p>Finally your <b>book_controller.rb</b> file will look as follows &minus;</p>
<pre class="prettyprint notranslate">
class BooksController &lt; ApplicationController

   def list
      @books = Book.all
   end

   def show
      @book = Book.find(params[:id])
   end
  
   def new
      @book = Book.new
      @subjects = Subject.all
   end

   def book_params
      params.require(:books).permit(:title, :price, :subject_id, :description)
   end

   def create
      @book = Book.new(book_params)

      if @book.save
         redirect_to :action =&gt; 'list'
      else
         @subjects = Subject.all
         render :action =&gt; 'new'
      end
   end
   
   def edit
      @book = Book.find(params[:id])
      @subjects = Subject.all
   end
   
   def book_param
      params.require(:book).permit(:title, :price, :subject_id, :description)
   end
   
   def update
      @book = Book.find(params[:id])
      
      if @book.update_attributes(book_param)
         redirect_to :action =&gt; 'show', :id =&gt; @book
      else
         @subjects = Subject.all
         render :action =&gt; 'edit'
      end
   end
   
   def delete
      Book.find(params[:id]).destroy
      redirect_to :action =&gt; 'list'
   end
   
   def show_subjects
      @subject = Subject.find(params[:id])
   end

end
</pre>
<p>Now save your controller file.</p>
<h2>What is Next?</h2>
<p>You have created almost all the methods, which will work on backend. Next we will define routes (URLs) for actions.</p>
<h1>Ruby on Rails - Routes</h1>
<p>The routing module provides URL rewriting in native Ruby. It's a way to redirect incoming requests to controllers and actions. It replaces the mod_rewrite rules. Best of all, Rails' Routing works with any web server. Routes are defined in app/config/routes.rb.</p>
<p>Think of creating routes as drawing a map for your requests. The map tells them where to go based on some predefined pattern &minus;</p>
<pre class="result notranslate">
Rails.application.routes.draw do
   Pattern 1 tells some request to go to one place
   Pattern 2 tell them to go to another
   ...
end
</pre>
<h2>Example</h2>
<p>Let us consider our library management application contains a controller called BookController. We have to define the routes for those actions which are defined as methods in the BookController class.</p>
<p>Open routes.rb file in library/config/ directory and edit it with the following content.</p>
<pre class="result notranslate">
Rails.application.routes.draw do
   get 'book/list'
   get 'book/new'
   post 'book/create'
   patch 'book/update'
   get 'book/list'
   get 'book/show'
   get 'book/edit'
   get 'book/delete'
   get 'book/update'
   get 'book/show_subjects'
end
</pre>
<p>The routes.rb file defines the actions available in the applications and the type of action such as get, post, and patch.</p>
<p>Use the following command to list all your defined routes, which are useful for tracking down routing problems in your application, or giving you a good overview of the URLs in an application you're trying to get familiar with.</p>
<pre class="result notranslate">
library&gt; rake routes
</pre>
<h2>What is Next?</h2>
<p>Next, we will create the code to generate screens to display data and to take input from the user.</p>
<h1>Ruby on Rails - Views</h1>
<p>A Rails View is an ERb program that shares data with controllers through mutually accessible variables.</p>
<p>If you look in the app/views directory of the library application, you will see one subdirectory for each of the controllers, we have created: book. Each of these subdirectories was created automatically when the same-named controller was created with the generate script.</p>
<p>Rails let's you know that you need to create the view file for each new method. Each method you define in the controller needs to have a corresponding <b>erb</b> file, with the same name as the method, to display the data that the method is collecting.</p>
<p>So let's create view files for all the methods we have defined in the book_controller.rb. While executing these views, simultaneously check these actions are applicable into the database or not.</p>
<h2>Creating View File for list Method</h2>
<p>Create a file called <b>list.html.erb</b> using your favourite text editor and save it to app/views/book. After creating and saving the file, refresh your web browser. You should see a blank page; if you don't, check the spelling of your file and make sure that it is exactly the same as your controller's method.</p>
<p>Now, display the actual content. Let us put the following code into list.html.erb.</p>
<pre class="prettyprint notranslate">
&lt;% if @books.blank? %&gt;
&lt;p&gt;There are not any books currently in the system.&lt;/p&gt;
&lt;% else %&gt;
&lt;p&gt;These are the current books in our system&lt;/p&gt;

&lt;ul id = "books"&gt;
   &lt;% @books.each do |c| %&gt;
   &lt;li&gt;&lt;%= link_to c.title, {:action =&gt; 'show', :id =&gt; c.id} -%&gt;&lt;/li&gt;
   &lt;% end %&gt;
&lt;/ul&gt;

&lt;% end %&gt;
&lt;p&gt;&lt;%= link_to "Add new Book", {:action =&gt; 'new' }%&gt;&lt;/p&gt;
</pre>
<p>The code to be executed is to check whether the @books array has any objects in it. The <b>.blank?</b> method returns true if the array is empty, and false if it contains any objects. This @books object was created in controller inside the list method.</p>
<p>The code between the &lt;%= %&gt; tags is a <b>link_to</b> method call. The first parameter of link_to is the text to be displayed between the &lt;a&gt; tags. The second parameter is what action is called when the link is clicked. In this case, it is the show method. The final parameter is the id of the book that is passed via the params object.</p>
<p>Now, try refreshing your browser and you should get the following screen because we don't have any book in our library.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/no-book-message.gif" alt="No Book Message" />
<h2>Creating View File for new Method</h2>
<p>Till now, we don't have any book in our library. We have to create few books in the system. So, let us design a view corresponding to the <b>new</b> method defined in the book_controller.rb.</p>
<p>Create a file called new.html.erb using your favorite text editor and save it to app/views/book. Add the following code to the new.html.erb file.</p>
<pre class="prettyprint notranslate">
&lt;h1&gt;Add new book&lt;/h1&gt;

&lt;%= form_tag :action =&gt; 'create' do %&gt;
&lt;p&gt;&lt;label for = "book_title"&gt;Title&lt;/label&gt;:

&lt;%= text_field 'books', 'title' %&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for = "book_price"&gt;Price&lt;/label&gt;:

&lt;%= text_field 'books', 'price' %&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for = "book_subject_id"&gt;Subject&lt;/label&gt;:

&lt;%= collection_select(:books, :subject_id, @subjects, :id, :name, prompt: true) %&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for = "book_description"&gt;Description&lt;/label&gt;&lt;br/&gt;

&lt;%= text_area 'books', 'description' %&gt;&lt;/p&gt;
&lt;%= submit_tag "Create" %&gt;

&lt;% end -%&gt;
&lt;%= link_to 'Back', {:action =&gt; 'list'} %&gt;
</pre>
<p>Here <b>form_tag</b> method interprets the Ruby code into a regular HTML &lt;form&gt; tag using all the information supplied to it. This tag, for example, outputs the following HTML &minus;</p>
<pre class="result notranslate">
&lt;form action = "/book/create" method = "post"&gt;
</pre>
<p>Next method is <b>text_field</b> that outputs an &lt;input&gt; text field. The parameters for text_field are object and field name. In this case, the object is <i>book</i> and the name is <i>title</i>.</p>
<p>Rails method called <b>collection_select</b>, creates an HTML select menu built from an array, such as the @books one. There are five parameters, which are as follows &minus;</p>
<ul class="list">
<li><p><b>:book </b> &minus; The object you are manipulating. In this case, it's a book object.</p></li>
<li><p><b>:subject_id</b> &minus; The field that is populated when the book is saved.</p></li>
<li><p><b>@books</b> &minus; The array you are working with.</p></li>
<li><p><b>:id</b> &minus; The value that is stored in the database. In terms of HTML, this is the &lt;option&gt; tag's value parameter.</p></li>
<li><p><b>:name</b> &minus; The output that the user sees in the pull-down menu. This is the value between the &lt;option&gt; tags.</p></li>
</ul>
<p>The next used is <b>submit_tag</b>, which outputs an &lt;input&gt; button that submits the form. Finally, there is the <b>end</b> method that simply translates into &lt;/form&gt;.</p>
<p>Go to your browser and visit <b>http://localhost:3000/book/new.</b> This will give you the following screen.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/new-book.gif" alt="New Book" />
<p>Enter some data in this form and then click the Create button. Here i have added the following details into the fields &minus;</p> 
<pre class="result notranslate">
Title: Advance Physics
Price: 390
Subject: Physics
Description: This is test to create new book
</pre>  
<p>When you click the <b>Create</b> button, it will call the <b>create</b> method, which does not need any view because this method is using either <b>list</b> or <b>new</b> methods to view the results. So, when you click the Create button, the data should submit successfully and redirect you to the list page, in which you now have a single item listed as follows &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/create-book.gif" alt="Create Book" />
<p>If you click the link, you should see another Template is missing error, since you haven't created the template file for show method yet.</p>
<h2>Creating View File for show Method</h2>
<p>This method will display the complete detail about any book available in the library. Create a show.html.erb file under app/views/book and populate it with the following code &minus;</p>
<pre class="prettyprint notranslate">
&lt;h1&gt;&lt;%= @book.title %&gt;&lt;/h1&gt;

&lt;p&gt;
   &lt;strong&gt;Price: &lt;/strong&gt; $&lt;%= @book.price %&gt;&lt;br /&gt;
   &lt;strong&gt;Subject :&lt;/strong&gt; &lt;%= @book.subject.name %&gt;&lt;br /&gt;
   &lt;strong&gt;Created Date:&lt;/strong&gt; &lt;%= @book.created_at %&gt;&lt;br /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;%= @book.description %&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;%= link_to 'Back', {:action =&gt; 'list'} %&gt;
</pre>
<p>This is the first time you have taken the full advantage of associations, which enable you to easily pull data from related objects.</p>
<p>The format used is <b>@variable.relatedObject.column</b>. In this instance, you can pull the subject's name value through the @book variable using the <b>belongs_to</b> associations. If click on any listed record then it will show you the following screen.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/show-book.gif" alt="Show Book" />
<h2>Creating View File for edit Method</h2>
<p>Create a new file called edit.html.erb and save it in app/views/book. Populate it with the following code &minus;</p>
<pre class="prettyprint notranslate">
&lt;h1&gt;Edit Book Detail&lt;/h1&gt;

&lt;%= form_for @book, :url =&gt;{:action =&gt; "update", :id =&gt;@book} do |f| %&gt;

&lt;p&gt;Title: &lt;%= f.text_field 'title' %&gt;&lt;/p&gt;
&lt;p&gt;Price: &lt;%= f.text_field  'price' %&gt;&lt;/p&gt;
&lt;p&gt;Subject: &lt;%= f.collection_select :subject_id, Subject.all, :id, :name %&gt;&lt;/p&gt;
&lt;p&gt;Description&lt;br/&gt;

&lt;%= f.text_area 'description' %&gt;&lt;/p&gt;
&lt;%= f.submit "Save changes" %&gt;
&lt;% end %&gt;

&lt;%= link_to 'Back', {:action =&gt; 'list' } %&gt;
</pre>
<p>This code is very similar to the <b>new</b> method except action to be updated instead of creating and defining an id.</p>
<p>In this scenario, we used <b>form_for</b> tag for the form action. It will perform better than <b>form_tag</b>. Why because it will create interaction with the Model easily. Therefore it is better to use form_for tag whenever you need interaction between the model and the form fields.</p>
<p>At this point, we need some modification in the <b>list method's</b> view file. Go to the &lt;li&gt;&lt;/li&gt; element and modify it to look like the following &minus;</p>
<pre class="prettyprint notranslate">
&lt;li&gt;
   &lt;%= link_to c.title, {:action =&gt; "show", :id =&gt; c.id} -%&gt;
   &lt;b&gt; &lt;%= link_to 'Edit', {:action =&gt; "edit",
   :id =&gt; c.id} %&gt;&lt;/b&gt;
&lt;/li&gt;
</pre>
<p>Now, try to browse books using the <b>http://localhost:3000/book/list.</b> It will give you the listing of all the books along with <b>Edit</b> option. When you click the Edit option, then you will have next screen as follows &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/edit-book.gif" alt="Edit Book" />
<p>Now, you edit this information and then click the <i>Save Changes</i> button. This will result in a call to <b>update</b> method available in the controller file and it will update all the changed attribute. Notice that the <b>update</b> method does not need any view file because it's using either <b>show</b> or <b>edit</b> methods to show its results.</p>
<h2>Creating View File for delete Method</h2>
<p>Removing information from a database using Ruby on Rails is almost too easy. You do not need to write any view code for the delete method because this method is using <b>list</b> method to display the result. So, let's just modify list.html.erb again and add a delete link.</p>
<p>Go to the &lt;li&gt;&lt;/li&gt; element and modify it to look like the following &minus;</p>
<pre class="prettyprint notranslate">
&lt;li&gt;
   &lt;%= link_to c.title, {:action =&gt; 'show', :id =&gt; c.id} -%&gt;
   &lt;b&gt; &lt;%= link_to 'Edit', {:action =&gt; 'edit', :id =&gt; c.id} %&gt;&lt;/b&gt;
   &lt;b&gt; &lt;%= link_to "Delete", {:action =&gt; 'delete', :id =&gt; c.id},
   :confirm =&gt; "Are you sure you want to delete this item?" %&gt;&lt;/b&gt;
&lt;/li&gt;
</pre>
<p>The <b>:confirm</b> parameter presents a JavaScript confirmation box asking if you really want to perform the action. If the user clicks OK, the action proceeds, and the item is deleted.</p>
<p>Now, try browsing books using <b>http://localhost:3000/book/list.</b> It will give you listing of all the books along with <b>Edit</b> and <b>Delete</b> options as follows &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/delete-book.gif" alt="Delete Book" />
<p>Now using the Delete option, you can delete any listed record.</p>
<h2>Creating View File for show_subjects Method</h2>
<p>Create a new file, show_subjects.html.erb, in the app/views/book directory and add the following code to it &minus;</p>
<pre class="prettyprint notranslate">
&lt;h1&gt;&lt;%= @subject.name -%&gt;&lt;/h1&gt;

&lt;ul&gt;
   &lt;% @subject.books.each do |c| %&gt;
   &lt;li&gt;&lt;%= link_to c.title, :action =&gt; "show", :id =&gt; c.id -%&gt;&lt;/li&gt;
   &lt;% end %&gt;
&lt;/ul&gt;
</pre>
<p>You are taking advantage of associations by iterating through a single subject's many books listings.</p>
<p>Now modify the Subject: line of show.html.erb so that the subject listing shows a link.</p>
<pre class="prettyprint notranslate">
&lt;strong&gt;Subject: &lt;/strong&gt; &lt;%= link_to @book.subject.name,
:action =&gt; "show_subjects", :id =&gt; @book.subject.id %&gt;&lt;br /&gt;
</pre>
<p>This will output a list of subject on the index page, so that users can access them directly.</p>
<p>Modify <b>list.html.erb</b> to add the following to the top of the file &minus;</p>
<pre class="prettyprint notranslate">
&lt;ul id = "subjects"&gt;
   &lt;% Subject.find(:all).each do |c| %&gt;
   &lt;li&gt;&lt;%= link_to c.name, :action =&gt; "show_subjects", :id =&gt; c.id %&gt;&lt;/li&gt;
   &lt;% end %&gt;
&lt;/ul&gt;
</pre>
<p>Now try browsing books using http://localhost:3000/book/list. It will display all subjects with links so that you can browse all the books related to that subject.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/list-subjects.gif" alt="List Subjects" />
<h2>What is Next?</h2>
<p>Hope now you are feeling comfortable with all the operations of Rails.</p>
<p>The next chapter explains how to use <b>Layouts</b> to put your data in a better way. We will show you how to use CSS in your Rails applications.</p>
<h1>Ruby on Rails - Layouts</h1>
<p>A layout defines the surroundings of an HTML page. It's the place to define a common look and feel of your final output. Layout files reside in app/views/layouts.</p>
<p>The process involves defining a layout template and then letting the controller know that it exists and to use it. First, let's create the template.</p>
<p>Add a new file called standard.html.erb to app/views/layouts. You let the controllers know what template to use by the name of the file, so following a same naming scheme is advised.</p>
<p>Add the following code to the new standard.html.erb file and save your changes &minus;</p>
<pre class="prettyprint notranslate">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns = "http://www.w3.org/1999/xhtml"&gt;

   &lt;head&gt;
      &lt;meta http-equiv = "Content-Type" content = "text/html; charset = iso-8859-1" /&gt;
      &lt;meta http-equiv = "Content-Language" content = "en-us" /&gt;
      &lt;title&gt;Library Info System&lt;/title&gt;
      &lt;%= stylesheet_link_tag "style" %&gt;
   &lt;/head&gt;

   &lt;body id = "library"&gt;
      &lt;div id = "container"&gt;
         
         &lt;div id = "header"&gt;
            &lt;h1&gt;Library Info System&lt;/h1&gt;
            &lt;h3&gt;Library powered by Ruby on Rails&lt;/h3&gt;
         &lt;/div&gt;

         &lt;div id = "content"&gt;
            &lt;%= yield -%&gt;
         &lt;/div&gt;

         &lt;div id = "sidebar"&gt;&lt;/div&gt;
         
      &lt;/div&gt;
   &lt;/body&gt;
   
&lt;/html&gt;
</pre>
<p>Everything you just added were standard HTML elements except two lines. The <b>stylesheet_link_tag</b> helper method outputs a stylesheet &lt;link&gt;. In this instance, we are linking style.css style sheet. The <b>yield</b> command lets Rails know that it should put the html.erb for the method called here.</p>
<p>Now open <b>book_controller.rb</b> and add the following line just below the first line &minus;</p>
<pre class="result notranslate">
class BookController &lt; ApplicationController
layout 'standard'
def list
@books = Book.all
end
...................
</pre>
<p>It instructs the controller that we want to use a layout available in the standard.html.erb file. Now try browsing books that will produce the following screen.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/layout-example1.gif" alt="Layout Example" />
<h2>Adding Style Sheet</h2>
<p>Till now, we have not created any style sheet, so Rails is using the default style sheet. Now let's create a new file called style.css and save it in /public/stylesheets. Add the following code to this file.</p>
<pre class="prettyprint notranslate">
body {
   font-family: Helvetica, Geneva, Arial, sans-serif;
   font-size: small;
   font-color: #000;
   background-color: #fff;
}

a:link, a:active, a:visited {
   color: #CD0000;
}

input { 
   margin-bottom: 5px;
}

p { 
   line-height: 150%;
}

div#container {
   width: 760px;
   margin: 0 auto;
}

div#header {
   text-align: center;
   padding-bottom: 15px;
}

div#content {
   float: left;
   width: 450px;
   padding: 10px;
}

div#content h3 {
   margin-top: 15px;
}

ul#books {
   list-style-type: none;
}

ul#books li {
   line-height: 140%;
}

div#sidebar {
   width: 200px;
   margin-left: 480px;
}

ul#subjects {
   width: 700px;
   text-align: center;
   padding: 5px;
   background-color: #ececec;
   border: 1px solid #ccc;
   margin-bottom: 20px;
}

ul#subjects li {
   display: inline;
   padding-left: 5px;
}
</pre>
<p>Now refresh your browser and see the difference &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/layout-example2.gif" alt="Layout Example" />
<h2>What is Next?</h2>
<p>The next chapter explains how to develop applications using Rails Scaffolding to give user access to add, delete, and modify the records in any database.</p>
<h1>Ruby on Rails - Scaffolding</h1>
<p>While you're developing Rails applications, especially those which are mainly providing you with a simple interface to data in a database, it can often be useful to use the scaffold method.</p>
<p>Scaffolding provides more than cheap demo thrills. Here are some benefits &minus;</p>
<ul class="list">
<li><p>You can quickly get code in front of your users for feedback.</p></li>
<li><p>You are motivated by faster success.</p></li>
<li><p>You can learn how Rails works by looking at the generated code.</p></li>
<li><p>You can use scaffolding as a foundation to jump start your development.</p></li>
</ul>
<h2>Scaffolding Example</h2>
<p>To understand <i>scaffolding,</i> let's create a database called <b>cookbook</b> and a table called <b>recipes</b>.</p>
<h2>Creating an Empty Rails Web Application</h2>
<p>Open a command window and navigate to where you want to create this <b>cookbook</b> web application. So, run the following command to create a complete directory structure.</p>
<pre class="result notranslate">
tp&gt; rails new cookbook
</pre>
<h2>Setting up the Database</h2>
<p>Here is the way to create a database &minus;</p>
<pre class="result notranslate">
mysql&gt; create database cookbook;
Query OK, 1 row affected (0.01 sec)

mysql&gt; grant all privileges on cookbook.*
to 'root'@'localhost' identified by 'password';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)
</pre>
<p>To instruct Rails how to find the database, edit the configuration file cookbook\config\database.yml and change the database name to cookbook. Leave the password empty. When you finish, it should look as follows &minus;</p>
<pre class="result notranslate">
development:
   adapter: mysql
   database: cookbook
   username: root
   password: [password]
   host: localhost
	
test:
   adapter: mysql
   database: cookbook
   username: root
   password: [password]
   host: localhost
	
production:
   adapter: mysql
   database: cookbook
   username: root
   password: [password]
   host: localhost
</pre>
<p>Rails lets you run in the development mode, test mode, or production mode, using different databases. This application uses the same database for each.</p>
<h2>The Generated Scaffold Code</h2>
<p>With the scaffold action, Rails generates all the code it needs dynamically. By running <i>scaffold</i> as a script, we can get all the code written to disk, where we can investigate it and then start tailoring it to our requirements.</p>
<p>So now, let's start once again to generate Scaffold code manually by using the scaffold helper script &minus;</p>
<pre class="result notranslate">
cookbook&gt; rails generate scaffold recipe
</pre>
<p>It generates auto-files as shown below &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/scoffold.jpg" alt="Scaffold" />
<h2>The Controller</h2>
<p>Let's look at the code behind the controller. This code is generated by the <b>scaffold</b> generator. If you open app/controllers/recipes_controller.rb, then you will find something as follows &minus;</p>
<pre class="prettyprint notranslate">
class RecipesController &lt; ApplicationController
   before_action :set_recipe, only: [:show, :edit, :update, :destroy]
   
   # GET /recipes
   # GET /recipes.json
   def index
      @recipes = Recipe.all
   end
   
   # GET /recipes/1
   # GET /recipes/1.json
   def show
   end
   
   # GET /recipes/new
   def new
      @recipe = Recipe.new
   end
   
   # GET /recipes/1/edit
   def edit
   end
   
   # POST /recipes
   # POST /recipes.json
   def create
      @recipe = Recipe.new(recipe_params)
      
      respond_to do |format|
         if @recipe.save
            format.html { redirect_to @recipe, notice: 'Recipe was successfully created.' }
            format.json { render :show, status: :created, location: @recipe }
         else
            format.html { render :new }
            format.json { render json: @recipe.errors, status: :unprocessable_entity }
         end
      end
      
   end
   
   # PATCH/PUT /recipes/1
   # PATCH/PUT /recipes/1.json
   def update
      respond_to do |format|
         if @recipe.update(recipe_params)
            format.html { redirect_to @recipe, notice: 'Recipe was successfully updated.' }
            format.json { render :show, status: :ok, location: @recipe }
         else
            format.html { render :edit }
            format.json { render json: @recipe.errors, status: :unprocessable_entity }
         end
      end
      
   end
   
   # DELETE /recipes/1
   # DELETE /recipes/1.json
   def destroy
      @recipe.destroy
         respond_to do |format|
         format.html { redirect_to recipes_url, notice: 'Recipe was successfully destroyed.' }
         format.json { head :no_content }
      end
   end
   
   private
   
   # Use callbacks to share common setup or constraints between actions.
   def set_recipe
      @recipe = Recipe.find(params[:id])
   end
   
   # Never trust parameters from the scary internet, only allow the white list through.
   def recipe_params
      params.require(:recipe).permit(:tittle, :instructions)
   end
end
</pre>
<p>When the user of a Rails application selects an action, e.g. "Show" - the controller will execute any code in the appropriate section - "def show" - and then by default will render a template of the same name - "show.html.erb". This default behavior can be overwritten.</p>
<p>The controller uses ActiveRecord methods such as <i>find, find_all, new, save, update_attributes, and destroy</i> to move data to and from the database tables. Note that you do not have to write any SQL statements, rails will take care of it automatically.</p>
<p>This single line of code will bring the database table to life. It will provide with a simple interface to your data, and ways of &minus;</p>
<ul class="list">
<li>Creating new entries</li>
<li>Editing current entries</li>
<li>Viewing current entries</li>
<li>Destroying current entries</li>
</ul>
<p>When creating or editing an entry, scaffold will do all the hard work like form generation and handling for you, and will even provide clever form generation, supporting the following types of inputs &minus;</p>
<ul class="list">
<li>Simple text strings</li>
<li>Text areas (or large blocks of text)</li>
<li>Date selectors</li>
<li>Date-time selectors</li>
</ul>
<p>You can use Rails Migrations to create and maintain tables.</p>
<pre class="result notranslate">
rake db:migrate RAILS_ENV=development
</pre>
<p>Now, go to the cookbook directory and run the Web Server using the following command &minus;</p>
<pre class="result notranslate">
cookbook&gt; rails server
</pre>
<p>Now, open a browser and navigate to http://127.0.0.1:3000/recipe/new. This will provide you a screen to create new entries in the recipes table. A screenshot is shown below &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/create-recipe.gif" alt="Create Recipe" />
<p>Once you press the <b>Create</b> button to create a new recipe, your record is added into the recipes table and it shows the following result &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/added-recipe.gif" alt="Create Recipe" />
<p>You can see the option to edit, show, and destroy the records. So, play around with these options.</p>
<p>You can also list down all the recipes available in the recipes table using the URL http://127.0.0.1:3000/recipe/list.</p>
<h2>Enhancing the Model</h2>
<p>Rails gives you a lot of error handling for free. To understand this, add some validation rules to the empty recipe  model &minus;</p>
<p>Modify app/models/recipe.rb as follows and then test your application &minus;</p>
<pre class="result notranslate">
class Recipe &lt; ActiveRecord::Base
   validates_length_of :title, :within =&gt; 1..20
   validates_uniqueness_of :title, :message =&gt; "already exists"
end
</pre>
<p>These entries will give automatic checking.</p>
<ul class="list">
<li><p><b>validates_length_of</b> &minus; the field is not blank and not too long.</p></li>
<li><p><b>validates_uniqueness_of</b> &minus; duplicate values are trapped. Instead of the default Rails error message, we have given a custom message here.</p></li>
</ul>
<h2>Alternative Way to Create Scaffolding</h2>
<p>Create an application as shown above and <b>The Generated Scaffold Code</b> as shown below</p>
<pre class="result notranslate">
rails g scaffold Recipe tittle:string instructions:text
</pre>
<p>Above code generates the auto files with data base by using with sqlite3 with tittle and instruction column as shown below an image.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/scoffold.jpg" alt="Scaffold" />
<p>we need to migrate the data base by using below syntax.</p>
<pre class="result notranslate">
$ rake db:migrate RAILS_ENV=development
</pre>
<p>Finally run the application by using the following command line &minus;</p>
<pre class="result notranslate">
rails server
</pre>
<p>It will generate the result as shown above output images.</p>
<h2>The Views</h2>
<p>All the views and corresponding all the controller methods are created by <b>scaffold</b> command and they are available in the app/views/recipes directory.</p>
<h2>How Scaffolding is Different?</h2>
<p>If you have gone through the previous chapters, then you must have seen that we had created methods to list, show, delete and create data etc., but scaffolding does that job automatically.</p>
<h1>Ruby on Rails - AJAX</h1>
<p>Ajax stands for <b>A</b>synchronous <b>J</b>avaScript and <b>X</b>ML. Ajax is not a single technology; it is a suite of several technologies. Ajax incorporates the following &minus;</p>
<ul class="list">
<li>XHTML for the markup of web pages</li>
<li>CSS for the styling</li>
<li>Dynamic display and interaction using the DOM</li>
<li>Data manipulation and interchange using XML</li>
<li>Data retrieval using XMLHttpRequest</li>
<li>JavaScript as the glue that meshes all this together</li>
</ul>
<p>Ajax enables you to retrieve data for a web page without having to refresh the contents of the entire page. In the basic web architecture, the user clicks a link or submits a form. The form is submitted to the server, which then sends back a response.  The response is then displayed for the user on a new page.</p>
<p>When you interact with an Ajax-powered web page, it loads an Ajax engine in the background. The engine is written in JavaScript and its responsibility is to both communicate with the web server and display the results to the user. When you submit data using an Ajax-powered form, the server returns an HTML fragment that contains the server's response and displays only the data that is new or changed as opposed to refreshing the entire page.</p>
<p>For a complete detail on AJAX you can go through our <a href="https://www.tutorialspoint.com/ajax/index.htm">AJAX Tutorial</a></p>
<h2>How Rails Implements Ajax</h2>
<p>Rails has a simple, consistent model for how it implements Ajax operations. Once the browser has rendered and displayed the initial web page, different user actions cause it to display a new web page (like any traditional web application) or trigger an Ajax operation &minus;</p>
<ul class="list">
<li><p><b>Some trigger fires</b> &minus; This trigger could be the user clicking on a button or link, the user making changes to the data on a form or in a field, or just a periodic trigger (based on a timer).</p></li>
<li><p><b>The web client calls the server</b> &minus; A JavaScript method, <i>XMLHttpRequest</i>, sends data associated with the trigger to an action handler on the server. The data might be the ID of a checkbox, the text in an entry field, or a whole form.</p></li>
<li><p><b>The server does processing</b> &minus; The server-side action handler ( Rails controller action )-- does something with the data and returns an HTML fragment to the web client.</p></li>
<li><p><b>The client receives the response</b> &minus; The client-side JavaScript, which Rails creates automatically, receives the HTML fragment and uses it to update a specified part of the current page's HTML, often the content of a &lt;div&gt; tag.</p></li>
</ul>
<p>These steps are the simplest way to use Ajax in a Rails application, but with a little extra work, you can have the server return any kind of data in response to an Ajax request, and you can create custom JavaScript in the browser to perform more involved interactions.</p>
<h2>AJAX Example</h2>
<p>This example works based on scaffold, Destroy concept works based on ajax.</p>
<p>In this example, we will provide, list, show and create operations on ponies table. If you did not understand the scaffold technology then we would suggest you to go through the previous chapters first and then continue with AJAX on Rails.</p>
<h2>Creating An Application</h2>
<p>Let us start with the creation of an application It will be done as follows &minus;</p>
<pre class="result notranslate">
rails new ponies
</pre>
<p>The above command creates an application, now we need to call the app directory using with cd command. It will enter in to an application directory then we need to call a scaffold command. It will be done as follows &minus;</p>
<pre class="result notranslate">
rails generate scaffold Pony name:string profession:string
</pre>
<p>Above command generates the scaffold with name and profession column. We need to migrate the data base as follows command</p>
<pre class="result notranslate">
rake db:migrate
</pre>
<p>Now Run the Rails application as follows command</p>
<pre class="result notranslate">
rails s
</pre>
<p>Now open the web browser and call a url as http://localhost:3000/ponies/new, The output will be as follows</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax.jpg" alt="Ajax" />
<h2>Creating an Ajax</h2>
<p>Now open app/views/ponies/index.html.erb with suitable text editors. Update your destroy line with :remote =&gt; true, :class =&gt; 'delete_pony'.At finally, it looks like as follows.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax1.jpg" alt="Ajax" />
<p>Create a file, destroy.js.erb, put it next to your other .erb files (under app/views/ponies). It should look like this &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax2.jpg" alt="Ajax" />
<p>Now enter the code as shown below in destroy.js.erb</p>
<pre class="prettyprint notranslate">
$('.delete_pony').bind('ajax:success', function() {
   $(this).closest('tr').fadeOut();
});
</pre>
<p>Now Open your controller file which is placed at app/controllers/ponies_controller.rb and add the following  code in destroy method as shown below &minus;</p>
<pre class="prettyprint notranslate">
# DELETE /ponies/1
# DELETE /ponies/1.json
def destroy
   @pony = Pony.find(params[:id])
   @pony.destroy
   
   respond_to do |format|
      format.html { redirect_to ponies_url }
      format.json { head :no_content }
      format.js   { render :layout =&gt; false }
   end
   
end
</pre>
<p>At finally controller page is as shown image.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax3.jpg" alt="Ajax" />
<p>Now run an application, Output called from http://localhost:3000/ponies/new, it will looks like as following image</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax4.jpg" alt="Ajax" />
<p>Press on create pony button, it will generate the result as follows</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax5.jpg" alt="Ajax" />
<p>Now click on back button, it will show all pony created information as shown image</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax6.jpg" alt="Ajax" />
<p>Till now, we are working on scaffold, now click on destroy button, it will call a pop-up as shown below image, the pop-up works based on Ajax.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax7.jpg" alt="Ajax" />
<p>If Click on ok button, it will delete the record from pony. Here I have clicked ok button. Final output will be as follows &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/ajax8.jpg" alt="Ajax" />
<h1>Ruby on Rails - File Uploading</h1>
<p>You may have a requirement in which you want your site visitors to upload a file on your server. Rails makes it very easy to handle this requirement. Now we will proceed with a simple and small Rails project.</p>
<p>As usual, let's start off with a new Rails application called <b>testfile</b>. Let's create the basic structure of the application by using simple rails command.</p>
<pre class="result notranslate">
tp&gt; rails new testfile
</pre>
<p>Before starting application development, we should install gem files as shown below &minus;</p>
<pre class="result notranslate">
gem install carrierwave
gem install bootstrap-sass
</pre>
<p>Open up your gemfile and add the following two gems at the bottom as shown in the following image &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/gem.jpg" alt="GEM" />
<p>After adding gems in the gem file, we need to run the following command on the console &minus;</p>
<pre class="result notranslate">
bundle install
</pre>
<h2>Creating the Model</h2>
<p>We need to create a model with two strings as name and attachment as shown below &minus;</p>
<pre class="result notranslate">
rails g model Resume name:string attachment:string
</pre>
<p>We need to create the database migration as shown below &minus;</p> 
<pre class="result notranslate">
rake db:migrate
</pre>
<p>We need to generate the controller as shown below &minus;</p>
<pre class="result notranslate">
rails g controller Resumes index new create destroy
</pre>
<p>Great! Now we have the basic structure set up. Now we need to create an uploader. An Uploader came from carrierwave gem and it tells to carrierwave how to handle the files. In short, it contained all file processing functionalities. Run the command to create an uploader as shown below</p>
<pre class="result notranslate">
rails g uploader attachment
</pre>
<p>Now open the resume model and call the uploader as shown below. Resume model has placed at app/models/resume.rb &minus;</p>
<pre class="prettyprint notranslate">
class Resume &lt; ActiveRecord::Base
   mount_uploader :attachment, AttachmentUploader # Tells rails to use this uploader for this model.
   validates :name, presence: true # Make sure the owner's name is present.
end
</pre>
<p>Before working on controller, we need to modify our config/routes.db as shown below &minus;</p>
<pre class="prettyprint notranslate">
CarrierWaveExample::Application.routes.draw do
   resources :resumes, only: [:index, :new, :create, :destroy]
   root "resumes#index"
end
</pre>
<p>Lets us edit the controller as shown below.</p>
<pre class="prettyprint notranslate">
class ResumesController &lt; ApplicationController
   def index
      @resumes = Resume.all
   end
   
   def new
      @resume = Resume.new
   end
   
   def create
      @resume = Resume.new(resume_params)
      
      if @resume.save
         redirect_to resumes_path, notice: "The resume #{@resume.name} has been uploaded."
      else
         render "new"
      end
      
   end
   
   def destroy
      @resume = Resume.find(params[:id])
      @resume.destroy
      redirect_to resumes_path, notice:  "The resume #{@resume.name} has been deleted."
   end
   
   private
      def resume_params
      params.require(:resume).permit(:name, :attachment)
   end
   
end
</pre>
<p>Let's add bootstrap implementation in css file.css file could be in app/assets/stylesheets/resumes.css.scss</p>
<pre class="result notranslate">
@import "bootstrap";
</pre>
<p>Now open up app/views/layouts/application.html.erb and add codes as shown below &minus;</p>
<pre class="prettyprint notranslate">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
   
   &lt;head&gt;
      &lt;title&gt;Tutorialspoint&lt;/title&gt;
      &lt;%= stylesheet_link_tag "application", media: "all", "data-turbolinks-track" =&gt; true %&gt;
      &lt;%= javascript_include_tag "application", "data-turbolinks-track" =&gt; true %&gt;
      &lt;%= csrf_meta_tags %&gt;
   &lt;/head&gt;
   
   &lt;body&gt;
      &lt;div class = "container" style = "padding-top:20px;"&gt;
         &lt;%= yield %&gt;
      &lt;/div&gt;
   &lt;/body&gt;

&lt;/html&gt;
</pre>
<p>Now we need to set up index views as shown below &minus;</p>
<pre class="prettyprint notranslate">
&lt;% if !flash[:notice].blank? %&gt;
   &lt;div class = "alert alert-info"&gt;
      &lt;%= flash[:notice] %&gt;
   &lt;/div&gt;
&lt;% end %&gt;

&lt;br /&gt;

&lt;%= link_to "New Resume", new_resume_path, class: "btn btn-primary" %&gt;
&lt;br /&gt;
&lt;br /&gt;

&lt;table class = "table table-bordered table-striped"&gt;
   &lt;thead&gt;.
      &lt;tr&gt;
         &lt;th&gt;Name&lt;/th&gt;
         &lt;th&gt;Download Link&lt;/th&gt;
         &lt;th&gt;&nbsp;&lt;/th&gt;
      &lt;/tr&gt;
   &lt;/thead&gt;
   
   &lt;tbody&gt;
      &lt;% @resumes.each do |resume| %&gt;
         
         &lt;tr&gt;
            &lt;td&gt;&lt;%= resume.name %&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%= link_to "Download Resume", resume.attachment_url %&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%= button_to "Delete",  resume, method: :delete, class: "btn btn-danger", confirm: "Are you sure that you wish to delete #{resume.name}?" %&gt;&lt;/td&gt;
         &lt;/tr&gt;
         
      &lt;% end %&gt;
   &lt;/tbody&gt;
   
&lt;/table&gt;
</pre>
<p>Now, lets edit new.html.erb and add our form code.</p>
<pre class="prettyprint notranslate">
&lt;% if !@resume.errors.empty? %&gt;
   &lt;div class = "alert alert-error"&gt;
      
      &lt;ul&gt;
         &lt;% @resume.errors.full_messages.each do |msg| %&gt;
            &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
         &lt;% end %&gt;
      &lt;/ul&gt;
      
   &lt;/div&gt;
&lt;% end %&gt;

&lt;div class = "well"&gt;
   &lt;%= form_for @resume, html: { multipart: true } do |f| %&gt;
      &lt;%= f.label :name %&gt;
      &lt;%= f.text_field :name %&gt;
      &lt;%= f.label :attachment %&gt;
      &lt;%= f.file_field :attachment %&gt;
      &lt;%= f.submit "Save", class: "btn btn-primary" %&gt;
   &lt;% end %&gt;
&lt;/div&gt;
</pre>
<p>Now start the server and visit http://localhost:3000. It will produce a screen similar to as follows &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/output.jpg" alt="Output" />
<p>One last thing we need to do is filter the list of allowed filetypes. For that we need add simple code as shown below at app/uploaders/attachment_uploader.rb</p>
<pre class="prettyprint notranslate">
class AttachmentUploader &lt; CarrierWave::Uploader::Base
   storage :file
   
   def store_dir
      "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
   end
   
   def extension_white_list
      %w(pdf doc htm html docx)
   end
end
</pre>
<p>Now start the server and visit http://localhost:3000. Now input a wrong format; it will generate a wrong message as shown below &minus;</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/output_wrong.jpg" alt="Output Wrong" />
<p>For a complete detail on <b>File</b> object, you need to go through the <b>Ruby Reference Manual</b>.</p>
<h1>Ruby on Rails - Send Emails</h1>
<p><b>Action Mailer</b> is the Rails component that enables applications to send and receive emails. In this chapter, we will see how to send an email using Rails. Lets start creating an <b>emails</b> project using the following command.</p>
<pre class="result notranslate">
tp&gt; rails new mailtest
</pre>
<p>This will create the required framework to proceed. Now, we will start with configuring the ActionMailer.</p>
<h2>Action Mailer - Configuration</h2>
<p>Following are the steps you have to follow to complete your configuration before proceeding with the actual work &minus;</p>
<p>Go to the config folder of your emails project and open environment.rb file and add the following line at the bottom of this file.</p>
<pre class="result notranslate">
config.action_mailer.delivery_method = :smtp
</pre>
<p>It tells ActionMailer that you want to use the SMTP server. You can also set it to be :sendmail if you are using a Unix-based operating system such as Mac OS X or Linux.</p>
<p>Add the following lines of code at the bottom of your environment.rb as well.</p>
<pre class="prettyprint notranslate">
config.action_mailer.smtp_settings = {
   address:              'smtp.gmail.com',
   port:                 587,
   domain:               'example.com',
   user_name:            '&lt;username&gt;',
   password:             '&lt;password&gt;',
   authentication:       'plain',
   enable_starttls_auto: true  
}
</pre>
<p>Replace each hash value with proper settings for your Simple Mail Transfer Protocol (SMTP) server. You can take this information from your Internet Service Provider if you already don't know. You don't need to change port number 25 and authentication type if you are using a standard SMTP server.</p>
<p>You may also change the default email message format. If you prefer to send email in HTML instead of plain text format, add the following line to config/environment.rb as well &minus;</p>
<pre class="result notranslate">
ActionMailer::Base.default_content_type = "text/html"
</pre>
<p>ActionMailer::Base.default_content_type could be set to "text/plain", "text/html", and "text/enriched". The default value is "text/plain".</p>
<p>The next step will be to create a mailer</p>
<h2>Generate a Mailer</h2>
<p>Use the following command to generate a mailer as follows &minus;</p>
<pre class="result notranslate">
tp&gt; cd emails
emails&gt; rails generate mailer Usermailer
</pre>
<p>This will create a file user_mailer.rb in the app\mailer directory. Check the content of this file as follows &minus;</p>
<pre class="result notranslate">
class Emailer &lt; ActionMailer::Base
end
</pre>
<p>Let's create one method as follows &minus;</p>
<pre class="result notranslate">
class UserMailer &lt; ApplicationMailer
   default from: 'notifications@example.com'
   
   def welcome_email(user)
      @user = user
      @url  = 'http://www.gmail.com'
      mail(to: @user.email, subject: 'Welcome to My Awesome Site')
   end
   
end
</pre>
<ul class="list">
<li><p><b>default Hash</b> &minus; This is a hash of default values for any email you send from this mailer. In this case we are setting the :from header to a value for all messages in this class. This can be overridden on a per-email basis</p></li>
<li><p><b>mail</b> &minus; The actual email message, we are passing the :to and :subject headers in.</p></li>
</ul>
<p>Create a file called welcome_email.html.erb in app/views/user_mailer/. This will be the template used for the email, formatted in HTML &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   
   &lt;head&gt;
      &lt;meta content = 'text/html; charset = UTF-8' http-equiv = 'Content-Type' /&gt;
   &lt;/head&gt;
   
   &lt;body&gt;
      &lt;h1&gt;Welcome to example.com, &lt;%= @user.name %&gt;&lt;/h1&gt;
      
      &lt;p&gt;
         You have successfully signed up to example.com,your username is: 
         &lt;%= @user.login %&gt;.&lt;br&gt;
      &lt;/p&gt;
      
      &lt;p&gt;
         To login to the site, just follow this link: 
         &lt;%= @url %&gt;.
      &lt;/p&gt;
      
      &lt;p&gt;Thanks for joining and have a great day!&lt;/p&gt;
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Next we will create a text part for this application as follow &minus;</p>
<pre class="result notranslate">
Welcome to example.com, &lt;%= @user.name %&gt;
===============================================
 
You have successfully signed up to example.com,
your username is: &lt;%= @user.login %&gt;.
 
To login to the site, just follow this link: &lt;%= @url %&gt;.
 
Thanks for joining and have a great day!
</pre>
<h2>Calling the Mailer</h2>
<p>First, let's create a simple User scaffold</p>
<pre class="result notranslate">
$ bin/rails generate scaffold user name email login
$ bin/rake db:migrate
</pre>
<p>Action Mailer is nicely integrated with Active Job so you can send emails outside of the request-response cycle, so the user doesn't have to wait on it &minus;</p>
<pre class="prettyprint notranslate">
class UsersController &lt; ApplicationController
   # POST /users
   # POST /users.json
   def create
   @user = User.new(params[:user])
   
      respond_to do |format|
         if @user.save
            # Tell the UserMailer to send a welcome email after save
            UserMailer.welcome_email(@user).deliver_later
            
            format.html { redirect_to(@user, notice: 'User was successfully created.') }
            format.json { render json: @user, status: :created, location: @user }
         else
            format.html { render action: 'new' }
            format.json { render json: @user.errors, status: :unprocessable_entity }
         end
         
      end
      
   end
end
</pre>
<p>Now, test your application by using http://127.0.0.1:3000/users/new. It displays the following screen and by using this screen, you will be able to send your message to anybody.</p>
<img src="https://www.tutorialspoint.com/ruby-on-rails/images/send-email.gif" alt="Send Email" />
<p>This will send your message and will display the text message "Message sent successfully" and output as follow &minus;</p>
<pre class="result notranslate">
sent mail to kittuprasad700@gmail.com (2023.Sms)
[ActiveJob] [ActionMailler::DeliveryJob] [2cfde3c-260e-4a33-1a6ada13a9b] Date: Thu, 09 Jul 2015 11:44:05 +0530
From: notification@example.com
To: kittuprasad700@gmail.com
Message-Id: &lt;559e112d63c57_f1031e7f23467@kiranPro.mail&gt;
Subject: Welcome to My Awesome Site
Mime-Version: 1.0
Content-Type: multipart/alternative;
boundary="--mimepart_559e112d601c8_f1031e7f20233f5";
charset=UTF-8
Content-Transfer-Encoding:7bit
</pre>
<p>For more information on how to send emails using Rails, please go through <a href="http://en.wikibooks.org/wiki/Ruby_on_Rails/ActionMailer" rel="nofollow" target="_blank">ActionMailer</a>.</p>
<hr />
<div class="pre-btn">
<a href="https://www.tutorialspoint.com/ruby-on-rails/rails-references-guide.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="print-btn center">
<a href="https://www.tutorialspoint.com/cgi-bin/printpage.cgi" target="_blank"><i class="icon icon-print big-font"></i> Print</a>
</div>
<div class="nxt-btn">
<a href="https://www.tutorialspoint.com/ruby-on-rails/rails-resources.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<hr />
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div class="bottomadtag">Advertisements</div>
<script type="text/javascript"><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
<div class="row">
<div class="col-md-3" id="rightbar">
<div class="simple-ad">
<a href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.facebook.com/sharer.php?u=' + 'http://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/facebookIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://twitter.com/share?url=' + 'http://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/twitterIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.linkedin.com/cws/share?url=' + 'http://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/linkedinIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://plus.google.com/share?url=http://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/googlePlusIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.stumbleupon.com/submit?url=http://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/StumbleUponIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://reddit.com/submit?url=http://www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=656,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/reddit.jpg" alt="img" />
</a>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 600;
google_ad_format = "300x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-2537027957187252";
/* Right Side Ad */
google_ad_slot = "right_side_ad";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="footer-copyright">
<div class="container">
<div class="row">
<div class="col-md-1">
<a href="https://www.tutorialspoint.com/index.htm" class="logo"> <img alt="Tutorials Point" class="img-responsive" src="https://www.tutorialspoint.com/scripts/img/logo-footer.png"> </a>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <nav id="sub-menu">
      <ul>
         <li><a href="https://www.tutorialspoint.com/about/tutorials_writing.htm">Write for us</a></li>
         <li><a href="https://www.tutorialspoint.com/about/faq.htm">FAQ's</a></li>
         <li><a href="https://www.tutorialspoint.com/about/about_helping.htm">Helping</a></li>
         <li><a href="https://www.tutorialspoint.com/about/contact_us.htm">Contact</a></li>
      </ul>
   </nav>
</div>
<div class="col-md-3 col-sm-12 col-xs-12">
<p>&copy; Copyright 2017. All Rights Reserved.</p>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <div class="news-group">
      <input type="text" class="form-control-foot search" name="textemail" id="textemail" autocomplete="off" placeholder="Enter email for newsletter" onfocus="if (this.value == 'Enter email for newsletter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Enter email for newsletter...';}">
      <span class="input-group-btn"> <button class="btn btn-default btn-footer" id="btnemail" type="submit" onclick="javascript:void(0);">go</button> </span>
      <div id="newsresponse"></div>
   </div>
</div>
</div>
</div>
</div>
</div>
<!-- Libs -->
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/custom-min.js?v=4"></script>
<script src="https://www.google-analytics.com/urchin.js">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
$('.pg-icon').click(function(){
   $('.wrapLoader').show();
});
</script>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails/rails-quick-guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 18:14:05 GMT -->
</html>
