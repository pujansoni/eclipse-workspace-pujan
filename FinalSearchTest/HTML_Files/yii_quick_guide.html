<!DOCTYPE html>
<!--[if IE 8]><html class="ie ie8"> <![endif]-->
<!--[if IE 9]><html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html> <!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/yii/yii_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 18:15:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Basic -->
<meta charset="utf-8">
<title>Yii Quick Guide</title>
<meta name="description" content="Yii Quick Guide - Learn Yii starting from Overview, Installation, Create Page, Application Structure, Entry Scripts, Controllers, Using Controllers, Using Actions, Models, Widgets, Modules, Views, Layouts, Assets, Asset Conversion, Extensions, Creating Extensions, HTTP Requests, Responses, URL Formats, URL Routing, Rules of URL, HTML Forms, Ad Hoc and AJAX Validations, Sessions, Using Flash Data, Cookies, Using Cookies, Files Upload, Formatting, Pagination, Sorting, Properties, Data Providers, Data Widgets, ListView Widgets, GridView Widgets, Events, Creating Event, Behaviors, Creating a Behavior, Configurations, Dependency Injection, Database Access, Data Access Objects, Query Builder, Active Record, Database Migration, Theming, RESTful APIs, RESTful APIs in Action, Fields, Testing, Caching, Fragment Caching, Aliases, Logging, Error Handling, Authentication, Authorization, Localization, Gii, Creating a Model, Generating Controller and Module." />
<meta name="keywords" content="Yii, Tutorial, Overview, Installation, Create Page, Application Structure, Entry Scripts, Controllers, Using Controllers, Using Actions, Models, Widgets, Modules, Views, Layouts, Assets, Asset Conversion, Extensions, Creating Extensions, HTTP Requests, Responses, URL Formats, URL Routing, Rules of URL, HTML Forms, Ad Hoc and AJAX Validations, Sessions, Using Flash Data, Cookies, Using Cookies, Files Upload, Formatting, Pagination, Sorting, Properties, Data Providers, Data Widgets, ListView Widgets, GridView Widgets, Events, Creating Event, Behaviors, Creating a Behavior, Configurations, Dependency Injection, Database Access, Data Access Objects, Query Builder, Active Record, Database Migration, Theming, RESTful APIs, RESTful APIs in Action, Fields, Testing, Caching, Fragment Caching, Aliases, Logging, Error Handling, Authentication, Authorization, Localization, Gii, Creating a Model, Generating Controller and Module." />
<base  />
<link rel="shortcut icon" href="https://www.tutorialspoint.com/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta property="fb:app_id" content="471319149685276" />
<meta property="og:site_name" content="www.tutorialspoint.com" />
<meta name="robots" content="index, follow"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="author" content="tutorialspoint.com">
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/script-min-v4.js"></script>
<link rel="stylesheet" href="https://www.tutorialspoint.com/theme/css/style-min.css?v=2">
<!-- Head Libs -->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="/theme/css/ie8.css">
<![endif]-->
<style>
select{ border:0 !important; outline: 1px inset black !important; outline-offset: -1px !important; }
ul.nav-list.primary>li a.videolink{    background: none; margin: 0px; padding: 0px; border: 1px solid #d6d6d6;}
div.feature-box div.feature-box-icon, .col-md-3 .course-box, li.heading, div.footer-copyright { background: #036db0 url(https://www.tutorialspoint.com/images/pattern.png) repeat center center !important;}
.sub-main-menu .sub-menuu div:hover, .sub-main-menu .viewall, header nav ul.nav-main li a:hover, button.btn-responsive-nav, header div.search button.btn-default { background: #036db0 !important;}
.submenu-item{ border-bottom: 2px solid #036db0 !important; border-top: 2px solid #036db0 !important }
.ace_scroller{overflow: auto!important;}
</style>
<script>
$(document).ready(function() {
  $('input[name="q"]').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
});
</script>
</head>
<body onload="prettyPrint()">
<div class="wrapLoader">
   <div class="imgLoader">
      <img  src="https://www.tutorialspoint.com/images/loading-cg.gif" alt="" width="70" height="70" />
   </div>
</div>
<header>
   <div class="container">			
      <h1 class="logo">
      <a href="https://www.tutorialspoint.com/index.htm" title="tutorialspoint">
      <img alt="tutorialspoint" src="https://www.tutorialspoint.com/yii/images/logo.png">
      </a>
      </h1>			
      <nav>
         <ul class="nav nav-pills nav-top">
            <li><a href="https://www.tutorialspoint.com/about/about_careers.htm" style="background: #fffb09; font-weight: bold;"><i class="icon icon-suitcase"></i> Jobs</a></li>
            <li> <a href="http://www.sendfiles.net/"><i class="fa fa-send"></i> &nbsp;SENDFiles</a> </li>
            <li> <a href="https://www.tutorialspoint.com/whiteboard.htm"><img src="https://www.tutorialspoint.com/theme/css/icons/image-editor.png" alt="Whiteboard" title="Whiteboard"> &nbsp;Whiteboard</a> </li>
            <li> <a href="https://www.tutorialspoint.com/netmeeting.php"><i class="fa-camera"></i> &nbsp;Net Meeting</a> </li>
            <li> <a href="https://www.tutorialspoint.com/online_dev_tools.htm"> <i class="dev-tools-menu" style="opacity:.5"></i> Tools </a> </li>
            <li> <a href="https://www.tutorialspoint.com/articles/index.php"><i class="icon icon-file-text-o"></i> &nbsp;Articles</a> </li>            
            <li class="top-icons">
              <ul class="social-icons">
              <li class="facebook"><a href="https://www.facebook.com/tutorialspointindia" target="_blank" data-placement="bottom" title="tutorialspoint @ Facebook">Facebook</a></li>
              <li class="googleplus"><a href="https://plus.google.com/u/0/116678774017490391259/posts" target="_blank" data-placement="bottom" title="tutorialspoint @ Google+">Google+</a></li>
              <li class="twitter"><a href="https://www.twitter.com/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Twitter">Twitter</a></li>
              <li class="linkedin"><a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" data-placement="bottom" title="tutorialspoint @ Linkedin">Linkedin</a></li>
              <li class="youtube"><a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" data-placement="bottom" title="tutorialspoint YouTube">YouTube</a></li>
              </ul>
           </li>
         </ul>
      </nav>
         <!-- search code here  --> 
      <button class="btn btn-responsive-nav btn-inverse" data-toggle="collapse" data-target=".nav-main-collapse" id="pull" style="top: 24px!important"> <i class="icon icon-bars"></i> </button>
   </div>
  
   <div class="navbar nav-main">
      <div class="container">
         <nav class="nav-main mega-menu">
            <ul class="nav nav-pills nav-main" id="mainMenu">
               <li class="dropdown no-sub-menu"> <a class="dropdown" href="https://www.tutorialspoint.com/index.htm"><i class="icon icon-home"></i> Home</a> </li>   
               <li class="dropdown" id="liTL"><a class="dropdown" href="javascript:void(0);"><span class="tut-lib"> Tutorials Library <i class="fa-caret-down"></i></span></a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/codingground.htm"><i class="fa-code"></i> Coding Ground </a> </li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/tutor_connect/index.php"><i class="fa-user"> </i> Tutor Connect</a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fa-toggle-right"></i> Videos </a></li>
               <li class="dropdown no-sub-menu">
                  <div class="searchform-popup">
                     <input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
                     <div class="magnifying-glass"><i class="icon-search"></i> Search </div>
                 </div>
               </li>
            </ul>
         </nav>
         <div class="submenu-item sub-main-menu" id="top-sub-menu"></div>
         
      </div>
   </div>	
</header>
<div style="clear:both;"></div>
<div role="main" class="main">
<div class="container">
<div class="row">
<div class="col-md-2">
<aside class="sidebar">
<div class="mini-logo">
<img src="https://www.tutorialspoint.com/yii/images/yii-mini-logo.jpg" alt="Yii Tutorial" />
</div>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Yii Tutorial</li>
<li><a href="https://www.tutorialspoint.com/yii/index.htm">Yii - Home</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_overview.htm">Yii - Overview</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_installation.htm">Yii - Installation</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_create_page.htm">Yii - Create Page</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_application_structure.htm">Yii - Application Structure</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_entry_scripts.htm">Yii - Entry Scripts</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_controllers.htm">Yii - Controllers</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_using_controllers.htm">Yii - Using Controllers</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_using_actions.htm">Yii - Using Actions</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_models.htm">Yii - Models</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_widgets.htm">Yii - Widgets</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_modules.htm">Yii - Modules</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_views.htm">Yii - Views</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_layouts.htm">Yii - Layouts</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_assets.htm">Yii - Assets</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_asset_conversion.htm">Yii - Asset Conversion</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_extensions.htm">Yii - Extensions</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_creating_extensions.htm">Yii - Creating Extensions</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_http_requests.htm">Yii - HTTP Requests</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_responses.htm">Yii - Responses</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_url_formats.htm">Yii - URL Formats</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_url_routing.htm">Yii - URL Routing</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_rules_of_url.htm">Yii - Rules of URL</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_html_forms.htm">Yii - HTML Forms</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_validation.htm">Yii - Validation</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_ad_hoc_validation.htm">Yii - Ad Hoc Validation</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_ajax_validation.htm">Yii - AJAX Validation</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_sessions.htm">Yii - Sessions</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_using_flash_data.htm">Yii - Using Flash Data</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_cookies.htm">Yii - Cookies</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_using_cookies.htm">Yii - Using Cookies</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_files_upload.htm">Yii - Files Upload</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_formatting.htm">Yii - Formatting</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_pagination.htm">Yii - Pagination</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_sorting.htm">Yii - Sorting</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_properties.htm">Yii - Properties</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_data_providers.htm">Yii - Data Providers</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_data_widgets.htm">Yii - Data Widgets</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_listview_widget.htm">Yii - ListView Widget</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_gridview_widget.htm">Yii - GridView Widget</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_events.htm">Yii - Events</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_creating_event.htm">Yii - Creating Event</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_behaviors.htm">Yii - Behaviors</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_creating_behavior.htm">Yii - Creating a Behavior</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_configurations.htm">Yii - Configurations</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_dependency_injection.htm">Yii - Dependency Injection</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_database_access.htm">Yii - Database Access</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_data_access_objects.htm">Yii - Data Access Objects</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_query_builder.htm">Yii - Query Builder</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_active_record.htm">Yii - Active Record</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_database_migration.htm">Yii - Database Migration</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_theming.htm">Yii - Theming</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_restful_apis.htm">Yii - RESTful APIs</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_restful_apis_action.htm">Yii - RESTful APIs in Action</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_fields.htm">Yii - Fields</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_testing.htm">Yii - Testing</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_caching.htm">Yii - Caching</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_fragment_caching.htm">Yii - Fragment Caching</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_aliases.htm">Yii - Aliases</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_logging.htm">Yii - Logging</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_error_handling.htm">Yii - Error Handling</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_authentication.htm">Yii - Authentication</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_authorization.htm">Yii - Authorization</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_localization.htm">Yii - Localization</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_gii.htm">Yii - Gii</a></li>
<li><a href="https://www.tutorialspoint.com/yii/gii_creating_model.htm">Gii – Creating a Model</a></li>
<li><a href="https://www.tutorialspoint.com/yii/gii_generating_controller.htm">Gii – Generating Controller</a></li>
<li><a href="https://www.tutorialspoint.com/yii/gii_generating_module.htm">Gii – Generating Module</a></li>
</ul>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Yii Useful Resources</li>
<li><a href="https://www.tutorialspoint.com/yii/yii_quick_guide.htm">Yii - Quick Guide</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_useful_resources.htm">Yii - Useful Resources</a></li>
<li><a href="https://www.tutorialspoint.com/yii/yii_discussion.htm">Yii - Discussion</a></li>
</ul>
<ul class="nav nav-list primary push-bottom left-menu special">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="https://www.tutorialspoint.com/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="https://www.tutorialspoint.com/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</aside>
</div>
<!-- PRINTING STARTS HERE -->
<div class="row">
<div class="content">
<div class="col-md-7 middle-col">
<h1>Yii - Quick Guide</h1>
<div class="topgooglead">
<hr />
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="https://www.tutorialspoint.com/yii/gii_generating_module.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="https://www.tutorialspoint.com/yii/yii_useful_resources.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<div class="clearer"></div>
<hr />
<h1>Yii - Overview</h1>
<p>The <b>Yii[ji:]</b> framework is an open-source PHP framework for rapidly-developing, modern Web applications. It is built around the Model-View-Controller composite pattern.</p>
<p>Yii provides secure and professional features to create robust projects rapidly. The Yii framework has a component-based architecture and a full solid caching support. Therefore, it is suitable for building all kinds of Web applications: forums, portals, content managements systems, RESTful services, e-commerce websites, and so forth. It also has a code generation tool called Gii that includes the full CRUD(Create-Read-Update-Delete) interface maker.</p>
<h2>Core Features</h2>
<p>The core features of Yii are as follows &minus;</p>
<ul class="list">
<li>Yii implements the MVC architectural pattern.</li>
<li>It provides features for both relational and NoSQL databases.</li>
<li>Yii never over-designs things for the sole purpose of following some design pattern.</li>
<li>It is extremely extensible.</li>
<li>Yii provides multi-tier caching support.</li>
<li>Yii provides RESTful API development support.</li>
<li>It has high performance.</li>
</ul>
<p>Overall, if all you need is a neat interface for the underlying database, then Yii is the right choice. Currently, Yii has two versions: 1.1 and 2.0.</p>
<p>Version 1.1 is now in maintenance mode and Version 2 adopts the latest technologies, including Composer utility for package distribution, PSR levels 1, 2, and 4, and many PHP 5.4&plus; features. It is version 2 that will receive the main development effort over the next few years.</p>
<p>Yii is a pure OOP (Object-Oriented Programming) framework. Hence, it requires a basic knowledge of OOP. The Yii framework also uses the latest features of PHP, like traits and namespaces. It would be easier for you to pick up Yii 2.0 if you understand these concepts.</p>
<h2>Environment</h2>
<p>The major requirements for Yii2 are <b>PHP 5.4+</b> and a <b>web server</b>. Yii is a powerful console tool, which manages database migrations, asset compilation, and other stuff. It is recommended to have a command line access to the machine where you develop your application.</p>
<p>For development purpose, we will use &minus;</p>
<ul class="list">
<li>Linux Mint 17.1</li>
<li>PHP 5.5.9</li>
<li>PHP built-in web server</li>
</ul>
<h3>Pre-installation check</h3>
<p>To check whether your local machine is good to go with the latest Yii2 version, do the following &minus;</p>
<p><b>Step 1</b> &minus; Install the latest php version.</p>
<pre class="result notranslate">
sudo apt-get install php5 
</pre>
<p><b>Step 2</b> &minus; Install the latest mysql version.</p>
<pre class="result notranslate">
sudo apt-get install mysql-server
</pre>
<p><b>Step 3</b> &minus; Download the Yii2 basic application template.</p>
<pre class="result notranslate">
composer create-project --prefer-dist --stability=dev yiisoft/yii2-app-basic basic
</pre>
<p><b>Step 4</b> &minus; To start a PHP built-in server, inside the <i>basic</i> folder run.</p>
<pre class="result notranslate">
php -S localhost:8080
</pre>
<p>There is a useful script, <b>requirements.php</b>. It checks whether your server meets the requirements to run the application. You can find this script in the root folder of your application.</p>
<img src="https://www.tutorialspoint.com/yii/images/requirements_php.jpg" alt="Requirement PHP Script" />
<p>If you type <b>http://localhost:8080/requirements.php</b> in the address bar of the web browser, the page looks like as shown in the following screenshot &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/run_requirements_php.jpg" alt="Run Requirement PHP Script" />
<h1>Yii - Installation</h1>
<p>The most straightforward way to get started with Yii2 is to use the basic application template provided by the Yii2 team. This template is also available through the Composer tool.</p>
<p><b>Step 1</b> &minus; Find a suitable directory in your hard drive and download the Composer PHAR (PHP archive) via the following command.</p>
<pre class="result notranslate">
curl -sS https://getcomposer.org/installer | php
</pre>
<p><b>Step 2</b> &minus; Then move this archive to the bin directory.</p>
<pre class="result notranslate">
mv composer.phar /usr/local/bin/composer
</pre>
<p><b>Step 3</b> &minus; With the Composer installed, you can install Yii2 basic application template. Run these commands.</p>
<pre class="result notranslate">
composer global require "fxp/composer-asset-plugin:~1.1.1" 
composer create-project --prefer-dist yiisoft/yii2-app-basic helloworld 
</pre>
<p>The first command installs the composer asset plugin, which manages <b>npm</b> and bower dependencies. The second command installs Yii2 basic application template in a directory called <b>helloworld</b>.</p>
<p><b>Step 4</b> &minus; Now open the <b>helloworld</b> directory and launch the web server built into PHP.</p>
<pre class="result notranslate">
php -S localhost:8080 -t web
</pre>
<p><b>Step 5</b> &minus; Then open <b>http://localhost:8080</b> in your browser. You can see the welcome page.</p>
<img src="https://www.tutorialspoint.com/yii/images/welcome_page.jpg" alt="Welcome Page" />
<h1>Yii - Create Page</h1>
<p>Now we are going to create a <b>“Hello world”</b> page in your application. To create a page, we must create an action and a view.</p>
<p>Actions are declared in controllers. The end user will receive the execution result of an action.</p>
<p><b>Step 1</b> &minus; Declare the speak action in the existing <b>SiteController</b>, which is defined in the class file controllers/<b>SiteController.php</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   namespace app\controllers; 
   use Yii; 
   use yii\filters\AccessControl; 
   use yii\web\Controller; 
   use yii\filters\VerbFilter; 
   use app\models\LoginForm; 
   use app\models\ContactForm; 
   class SiteController extends Controller { 
      /* other code */ 
      public function actionSpeak($message = "default message") { 
         return $this-&gt;render("speak",['message' =&gt; $message]); 
      } 
   } 
?&gt;
</pre>
<p>We defined the speak action as a method called <b>actionSpeak</b>. In Yii, all action methods are prefixed with the word action. This is how the framework differentiates action methods from non-action ones. If an action ID requires multiple words, then they will be concatenated by dashes. Hence, the action ID add-post corresponds to the action method <b>actionAddPost</b>.</p>
<p>In the code given above, the <b>‘out’</b> function takes a GET parameter, <b>$message</b>. We also call a method named <b>‘render’</b> to render a view file called speak. We pass the message parameter to the view. The rendering result is a complete HTML page.</p>
<p><b>View</b> is a script that generates a response's content. For the speak action, we create a speak view that prints our message. When the render method is called, it looks for a PHP file names as <b>view/controllerID/vewName.php</b>.</p>
<p><b>Step 2</b> &minus; Therefore, inside the views/site folder create a file called <b>speak.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   use yii\helpers\Html; 
?&gt; 
&lt;?php echo Html::encode($message); ?&gt; 
</pre>
<p>Note that we HTML-encode the message parameter before printing to avoid <b>XSS</b> attack.</p>
<p><b>Step 3</b> &minus; Type the following in your web browser <b>http://localhost:8080/index.php?r=site/speak&amp;message=hello%20world</b>.</p>
<p>You will see the following window &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/speak_php_file.jpg" alt="Speak PHP File" />
<p>The <b>‘r’</b> parameter in the URL stands for route. The route's default format is <b>controllerID/actionID</b>. In our case, the route site/speak will be resolved by the <b>SiteController</b> class and the speak action.</p>
<h1>Yii - Application Structure</h1>
<p>There is only one folder in the overall code base that is publicly available for the web server. It is the web directory. Other folders outside the web root directory are out of reach for the web server.</p>
<p><b>Note</b> &minus; All project dependencies are located in the <b>composer.json</b> file. Yii2 has a few important packages that are already included in your project by Composer. These packages are the following &minus;</p>
<ul class="list">
<li>Gii – The code generator tool</li>
<li>The debug console</li>
<li>The Codeception testing framework</li>
<li>The SwiftMailer library</li>
<li>The Twitter Bootstrap UI library</li>
</ul>
<p>The first three packages are only useful in the development environment.</p>
<p>Yii2's application structure is precise and clear. It contains the following folders &minus;</p>
<ul class="list">
<li><p><b>Assets</b> &minus; This folder includes all .js and .css files referenced in the web page.</p></li>
<li><p><b>Commands</b> &minus; This folder includes the controllers that can be used from the terminal.</p></li>
<li><p><b>Config</b> &minus; This folder contains <b>config</b> files for managing database, application and application parameters.</p></li>
<li><p><b>Mail</b> &minus; This folder includes the mail layout.</p></li>
<li><p><b>Models</b> &minus; This folder includes the models used in the application.</p></li>
<li><p><b>Runtime</b> &minus; This folder is for storing runtime data.</p></li>
<li><p><b>Tests</b> &minus; This folder includes all the tests (acceptance, unit, functional).</p></li>
<li><p><b>Vendor</b> &minus; This folder contains all the third-party packages managed by Composer.</p></li>
<li><p><b>Views</b> &minus; This folder is for views, that are displayed by the controllers. The <i>layout</i> folder is a for page template.</p></li>
<li><p><b>Web</b> &minus; The entry point from web.</p></li>
</ul>
<h2>Application Structure</h2>
<p>Following is the diagrammatic representation of the application structure.</p>
<img src="https://www.tutorialspoint.com/yii/images/application_structure.jpg" alt="Application Structure" />
<h2>Yii2 – Objects</h2>
<p>The following list contains all Yii2's objects &minus;</p>
<h3>Models, Views, and Controllers</h3>
<p>Models are for data representation (usually from the database). View are for displaying the data. Controllers are for processing requests and generating responses.</p>
<h3>Components</h3>
<p>To create a reusable functionality, the user can write his own components. Components are just objects that contain logic. For example, a component could be a weight converter.</p>
<h3>Application components</h3>
<p>These are objects that instanced just one time in the whole application. The main difference between Components and Application components is that the latter can have only one instance in the whole application.</p>
<h3>Widgets</h3>
<p>Widgets are reusable objects containing both logic and rendering code. A widget could be, for example, a gallery slider.</p>
<h3>Filters</h3>
<p>Filters are objects that run before or after the execution of the Controller actions.</p>
<h3>Modules</h3>
<p>You can consider Modules as reusable subapps, containing Models, Views, Controllers, and so forth.</p>
<h3>Extensions</h3>
<p>Extensions are packages that can be managed by the Composer.</p>
<h1>Yii - Entry Scripts</h1>
<p>Entry scripts are responsible for starting a request handling cycle. They are just PHP scripts accessible by users.</p>
<p>The following illustration shows the structure of an application &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/entry_scripts_structure.jpg" alt="Entry Scripts Structure" />
<p>Web application (as well as console application) has a single entry script. The End user makes request to the entry script. Then the entry script instantiates application instances and forwards requests to them.</p>
<p>Entry script for a console application is usually stored in a project base path and named as <b>yii.php</b>. Entry script for a web application must be stored under a web accessible directory. It is often called <b>index.php</b>.</p>
<p>The Entry scripts do the following &minus;</p>
<ul class="list">
<li>Define constants.</li>
<li>Register Composer autoloader.</li>
<li>Include Yii files.</li>
<li>Load configuration.</li>
<li>Create and configure an application instance.</li>
<li>Process the incoming request.</li>
</ul>
<p>The following is the entry script for the <b>basic application</b> template &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   //defining global constants
   defined('YII_DEBUG') or define('YII_DEBUG', true);
   defined('YII_ENV') or define('YII_ENV', 'dev');
 
   //register composer autoloader
   require(__DIR__ . '/../vendor/autoload.php');
   //include yii files
   require(__DIR__ . '/../vendor/yiisoft/yii2/Yii.php');
  
   //load application config
   $config = require(__DIR__ . '/../config/web.php');
  
   //create, config, and process reques
   (new yii\web\Application($config))-&gt;run();
?&gt;
</pre>
<p>The following is the entry script for the <b>console</b> application &minus;</p>
<pre class="prettyprint notranslate">
#!/usr/bin/env php
&lt;?php
   /** 
   * Yii console bootstrap file. 
   * @link http://www.yiiframework.com/ 
   * @copyright Copyright (c) 2008 Yii Software LLC 
   * @license http://www.yiiframework.com/license/ 
   */
   //defining global constants
   defined('YII_DEBUG') or define('YII_DEBUG', true);
  
   //register composer autoloader
   require(__DIR__ . '/vendor/autoload.php');
   require(__DIR__ . '/vendor/yiisoft/yii2/Yii.php');
  
   //load config
   $config = require(__DIR__ . '/config/console.php');
  
   //apply config the application instance 
   $application = new yii\console\Application($config);  

   //process request
   $exitCode = $application->run();
   exit($exitCode);
?&gt;
</pre>
<p>The best place for defining global constants is entry scripts. There are three supported by Yii constants &minus;</p>
<ul class="list">
<li><p><b>YII_DEBUG</b> &minus; Defines whether you are in debug mode or not. If set to true, then we will see more log data and detail error call stack.</p></li>
<li><p><b>YII_ENV</b> &minus; Defines the environment mode. The default value is prod. Available values are prod, dev, and test. They are used in configuration files to define, for example, a different DB connection (local and remote) or other values.</p></li>
<li><p><b>YII_ENABLE_ERROR_HANDLER</b> &minus; Specifies whether to enable the default Yii error handler.</p></li>
</ul>
<p>To define a global constant the following code is used &minus;</p>
<pre class="prettyprint notranslate">
//defining global constants 
defined('YII_DEBUG') or define('YII_DEBUG', true); 
which is equivalent to: 
if(!defined('YII_DEBUG')) { 
   define('YII_DEBUG', true); 
} 
</pre>
<p><b>Note</b> &minus; The global constants should be defined at the beginning of an entry script in order to take effect when other PHP files are included.</p>
<h1>Yii - Controllers</h1>
<p>Controllers are responsible for processing requests and generating responses. After user's request, the controller will analyze request data, pass them to model, then insert the model result into a view, and generate a response.</p>
<h2>Understanding Actions</h2>
<p>Controllers include actions. They are the basic units that user can request for execution. A controller can have one or several actions.</p>
<p>Let us have a look at the <b>SiteController</b> of the basic application template &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php 
   namespace app\controllers; 
   use Yii; 
   use yii\filters\AccessControl; 
   use yii\web\Controller; 
   use yii\filters\VerbFilter; 
   use app\models\LoginForm; 
   use app\models\ContactForm; 
   class SiteController extends Controller { 
      public function behaviors() { 
         return [ 
            'access' =&gt; [ 
               'class' =&gt; AccessControl::className(), 
               'only' =&gt; ['logout'], 
               'rules' =&gt; [ 
                  [ 
                     'actions' =&gt; ['logout'], 
                     'allow' =&gt; true, 
                     'roles' =&gt; ['@'], 
                  ], 
               ], 
            ], 
            'verbs' =&gt; [
               'class' =&gt; VerbFilter::className(), 
               'actions' =&gt; [ 
                  'logout' =&gt; ['post'], 
               ], 
            ], 
         ]; 
      } 
      public function actions() { 
         return [ 
            'error' =&gt; [ 
               'class' =&gt; 'yii\web\ErrorAction', 
            ], 
            'captcha' =&gt; [ 
               'class' =&gt; 'yii\captcha\CaptchaAction', 
               'fixedVerifyCode' =&gt; YII_ENV_TEST ? 'testme' : null, 
            ], 
         ]; 
      } 
      public function actionIndex() { 
         return $this-&gt;render('index'); 
      } 
      public function actionLogin() { 
         if (!\Yii::$app-&gt;user-&gt;isGuest) { 
            return $this-&gt;goHome(); 
         } 
         $model = new LoginForm(); 
         if ($model-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $model-&gt;login()) { 
            return $this-&gt;goBack(); 
         } 
         return $this-&gt;render('login', [ 
            'model' =&gt; $model, 
         ]); 
      }
      public function actionLogout() { 
         Yii::$app-&gt;user-&gt;logout();  
         return $this-&gt;goHome(); 
      } 
      public function actionContact() { 
         //load ContactForm model 
         $model = new ContactForm(); 
         //if there was a POST request, then try to load POST data into a model 
         if ($model-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $model&gt;contact(Yii::$app-&gt;params
            ['adminEmail'])) { 
            Yii::$app-&gt;session-&gt;setFlash('contactFormSubmitted');  
            return $this-&gt;refresh(); 
         } 
         return $this-&gt;render('contact', [ 
            'model' =&gt; $model, 
         ]); 
      } 
      public function actionAbout() { 
         return $this-&gt;render('about'); 
      } 
      public function actionSpeak($message = "default message") { 
         return $this-&gt;render("speak",['message' =&gt; $message]); 
      } 
   } 
?&gt;
</pre>
<p>Run the basic application template using PHP built-in server and go to the web browser at <b>http://localhost:8080/index.php?r=site/contact</b>. You will see the following page &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/run_basic_application.jpg" alt="Run Basic Application" />
<p>When you open this page, the contact action of the <b>SiteController</b> is executed. The code first loads the <b>ContactForm</b> model. Then it renders the contact view and passes the model into it.</p>
<img src="https://www.tutorialspoint.com/yii/images/contact_form_model.jpg" alt="Contact Form Model" />
<p>If you fill in the form and click the submit button, you will see the following &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/submit_form.jpg" alt="Submit Form" />
<p>Notice that this time the following code is executed &minus;</p>
<pre class="prettyprint notranslate">
if ($model-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $model-&gt;contact(Yii::$app&gt;params ['adminEmail'])) { 
   Yii::$app-&gt;session-&gt;setFlash('contactFormSubmitted'); 
   return $this-&gt;refresh(); 
} 
</pre>
<p>If there was a POST request, we assign the POST data to the model and try to send an email. If we success then we set a flash message with the text “Thank you for contacting us. We will respond to you as soon as possible.” and refresh the page.</p>
<h2>Understanding Routes</h2>
<p>In the above example, in the URL, <b>http://localhost:8080/index.php?r=site/contact,</b> the route is <b>site/contact</b>. The contact action (<b>actionContact</b>) in the <b>SiteController</b> will be executed.</p>
<p>A route consists of the following parts&minus;</p>
<ul class="list">
<li><p><b>moduleID</b> &minus; If the controller belongs to a module, then this part of the route exists.</p></li>
<li><p><b>controllerID</b> (site in the above example) &minus; A unique string that identifies the controller among all controllers within the same module or application.</p></li>
<li><p><b>actionID</b> (contact in the above example) &minus; A unique string that identifies the action among all actions within the same controller.</p></li>
</ul>
<p>The format of the route is <b>controllerID/actionID</b>. If the controller belongs to a module, then it has the following format: <b>moduleID/controllerID/actionID</b>.</p>
<h1>Yii - Using Controllers</h1>
<p>Controllers in web applications should extend from <b>yii\web\Controller</b> or its child classes. In console applications, they should extend from yii\console\Controller or its child classes.</p>
<p>Let us create an example controller in the <b>controllers</b> folder.</p>
<p><b>Step 1</b> &minus; Inside the <b>Controllers</b> folder, create a file called <b>ExampleController.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   namespace app\controllers; 
   use yii\web\Controller; 
   class ExampleController extends Controller { 
      public function actionIndex() { 
         $message = "index action of the ExampleController"; 
         return $this-&gt;render("example",[ 
            'message' =&gt; $message 
         ]); 
      } 
   } 
?&gt;
</pre>
<p><b>Step 2</b> &minus; Create an example view in the <b>views/example</b> folder. Inside that folder, create a file called <b>example.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   echo $message; 
?&gt;
</pre>
<p>Each application has a default controller. For web applications, the site is the controller, while for console applications it is help. Therefore, when the <b>http://localhost:8080/index.php</b> URL is opened, the site controller will handle the request. You can change the default controller in the application configuration.</p>
<p>Consider the given code &minus;</p>
<pre class="result notranslate">
'defaultRoute' =&gt; 'main'
</pre>
<p><b>Step 3</b> &minus; Add the above code to the following <b>config/web.php</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   $params = require(__DIR__ . '/params.php'); 
   $config = [ 
      'id' =&gt; 'basic', 
      'basePath' =&gt; dirname(__DIR__), 
      'bootstrap' =&gt; ['log'], 
      'components' =&gt; [ 
         'request' =&gt; [ 
            // !!! insert a secret key in the following (if it is empty) - this is
               //required by cookie validation 
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO', 
         ], 
         'cache' =&gt; [ 
            'class' =&gt; 'yii\caching\FileCache', 
         ], 
         'user' =&gt; [ 
            'identityClass' =&gt; 'app\models\User', 
            'enableAutoLogin' =&gt; true, 
         ], 
         'errorHandler' =&gt; [ 
            'errorAction' =&gt; 'site/error', 
         ], 
         'mailer' =&gt; [ 
            'class' =&gt; 'yii\swiftmailer\Mailer', 
            // send all mails to a file by default. You have to set 
            // 'useFileTransport' to false and configure a transport 
            // for the mailer to send real emails. 
            'useFileTransport' =&gt; true, 
         ], 
         'log' =&gt; [ 
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0, 
            'targets' =&gt; [ 
               [ 
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'], 
               ], 
            ], 
         ], 
         'db' =&gt; require(__DIR__ . '/db.php'), 
      ], 
      //changing the default controller 
      'defaultRoute' =&gt; 'example', 
      'params' =&gt; $params, 
   ]; 
   if (YII_ENV_DEV) { 
      // configuration adjustments for 'dev' environment 
      $config['bootstrap'][] = 'debug'; 
      $config['modules']['debug'] = [ 
         'class' =&gt; 'yii\debug\Module', 
      ]; 
      $config['bootstrap'][] = 'gii'; 
      $config['modules']['gii'] = [ 
         'class' =&gt; 'yii\gii\Module', 
      ]; 
   } 
   return $config; 
?&gt; 						  
</pre>
<p><b>Step 4</b> &minus; Type <b>http://localhost:8080/index.php</b> in the address bar of the web browser, you will see that the default controller is the example controller.</p>
<img src="https://www.tutorialspoint.com/yii/images/controller_example.jpg" alt="Controller Example" />
<p><b>Note</b> &minus; The Controller IDs should contain English letters in lower case, digits, forward slashes, hyphens, and underscores.</p>
<p>To convert the controller ID to the controller class name, you should do the following &minus;</p>
<ul class="list">
<li>Take the first letter from all words separated by hyphens and turn it into uppercase.</li>
<li>Remove hyphens.</li>
<li>Replace forward slashes with backward ones.</li>
<li>Add the Controller suffix.</li>
<li>Prepend the controller namespace.</li>
</ul>
<h3>Examples</h3>
<ul class="list">
<li><p>page becomes <b>app\controllers\PageController</b>.</p></li>
<li><p>post-article becomes <b>app\controllers\PostArticleController</b>.</p></li>
<li><p>user/post-article becomes <b>app\controllers\user\PostArticleController</b>.</p></li>
<li><p>userBlogs/post-article becomes <b>app\controllers\userBlogs\PostArticleController</b>.</p></li>
</ul>
<h1>Yii - Using Actions</h1>
<p>To create an action in a controller class, you should define a public method whose name starts with the word action. The return data of an action represents the response to be sent to the end user.</p>
<p><b>Step 1</b> &minus; Let us define the hello-world action in our <b>ExampleController</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   namespace app\controllers; 
   use yii\web\Controller; 
   class ExampleController extends Controller { 
      public function actionIndex() { 
         $message = "index action of the ExampleController"; 
         return $this-&gt;render("example",[ 
            'message' =&gt; $message 
         ]); 
      } 
      public function actionHelloWorld() { 
         return "Hello world!"; 
      } 
   } 
?&gt;
</pre>
<p><b>Step 2</b> &minus; Type <b>http://localhost:8080/index.php?r=example/hello-world</b> in the address bar of the web browser. You will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/hello_world_action.jpg" alt="Hello World Action" />
<p>Action IDs are usually verbs, such as create, update, delete and so on. This is because actions are often designed to perform a particular change if a resource.</p>
<p>Action IDs should contain only these characters &minus; English letters in lower case, digits, hyphens, and underscores.</p>
<p>There are two types of actions: inline and standalone.</p>
<p>Inline actions are defined in the controller class. The names of the actions are derived from action IDs this way &minus;</p>
<ul class="list">
<li>Turn the first letter in all words of the action ID into uppercase.</li>
<li>Remove hyphens.</li>
<li>Add the action prefix.</li>
</ul>
<p><b>Examples</b> &minus;</p>
<ul class="list">
<li>index becomes actionIndex.</li>
<li>hello-world(as in the example above) becomes actionHelloWorld.</li>
</ul>
<p>If you plan to reuse the same action in different places, you should define it as a standalone action.</p>
<h2>Create a Standalone Action Class</h2>
<p>To create a standalone action class, you should extend yii\base\Action or a child class, and implement a <b>run()</b> method.</p>
<p><b>Step 1</b> &minus; Create a components folder inside your project root. Inside that folder create a file called <b>GreetingAction.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   namespace app\components;
   use yii\base\Action;
   class GreetingAction extends Action {
      public function run() {
         return "Greeting";
      }
   }
?&gt;
</pre>
<p>We have just created a reusable action. To use it in our <b>ExampleController</b>, we should declare our action in the action map by overriding the actions() method.</p>
<p><b>Step 2</b> &minus; Modify the <b>ExampleController.php</b> file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\controllers;
   use yii\web\Controller;
   class ExampleController extends Controller {
      public function actions() {
         return [
            'greeting' =&gt; 'app\components\GreetingAction',
         ];
      }
      public function actionIndex() {
         $message = "index action of the ExampleController";
         
         return $this-&gt;render("example",[
            'message' =&gt; $message
         ]);
      }
      public function actionHelloWorld() {
         return "Hello world!";
      }
   }
?&gt;
</pre>
<p>The <b>actions()</b> method returns an array whose values are class names and keys are action IDs.</p>
<p><b>Step 3</b> &minus; Go to <b>http://localhost:8080/index.php?r=example/greeting</b>. You will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/greeting_example.jpg" alt="Greeting Example" />
<p><b>Step 4</b> &minus; You can also use actions to redirect users to other URLs. Add the following action to the <b>ExampleController.php</b>.</p>
<pre class="prettyprint notranslate">
public function actionOpenGoogle() {
   // redirect the user browser to http://google.com
   return $this-&gt;redirect('http://google.com');
} 
</pre>
<p>Now, if you open <b>http://localhost:8080/index.php?r=example/open-google</b>, you will be redirected to <b>http://google.com</b>.</p>
<p>The action methods can take parameters, called <i>action parameters</i>. Their values are retrieved from <b>$_GET</b> using the parameter name as the key.</p>
<p><b>Step 5</b> &minus; Add the following action to our example controller.</p>
<pre class="prettyprint notranslate">
public function actionTestParams($first, $second) {
   return "$first $second";
}
</pre>
<p><b>Step 6</b> &minus; Type the URL <b>http://localhost:8080/index.php?r=example/testparams&first=hello&second=world</b> in the address bar of your web browser, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/run_hello_world_example.jpg" alt="Run Hello World Example" />
<p>Each controller has a default action. When a route contains the controller ID only, it means that the default action is requested. By default, the action is <b>index</b>. You can easily override this property in the controller.</p>
<p><b>Step 7</b> &minus; Modify our <b>ExampleController</b> this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\controllers;
   use yii\web\Controller;
   class ExampleController extends Controller {
      public $defaultAction = "hello-world";
      /* other actions */
   }
?&gt;
</pre>
<p><b>Step 8</b> &minus; Now, if you go to <b>http://localhost:8080/index.php?r=example</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/run_hello_world_example1.jpg" alt="Run Hello World Example1" />
<p>To fulfill the request, the controller will undergo the following lifecycle &minus;</p>
<ul class="list">
<li><p>The yii\base\Controller:<b>init()</b> method is called.</p></li>
<li><p>The controller creates an action based on the action ID.</p></li>
<li><p>The controller sequentially calls the <b>beforeAction()</b> method of the web application, module, and the controller.</p></li>
<li><p>The controller runs the action.</p></li>
<li><p>The controller sequentially calls the <b>afterAction()</b> method of the web application, module, and the controller.</p></li>
<li><p>The application assigns action result to the response.</p></li>
</ul>
<h2>Important Points</h2>
<p>The Controllers should &minus;</p>
<ul class="list">
<li>Be very thin. Each action should contain only a few lines of code.</li>
<li>Use Views for responses.</li>
<li>Not embed HTML.</li>
<li>Access the request data.</li>
<li>Call methods of models.</li>
<li>Not process the request data. These should be processed in the model.</li>
</ul>
<h1>Yii - Models</h1>
<p>Models are objects representing business logic and rules. To create a model, you should extend the <b>yii\base\Model</b> class or its subclasses.</p>
<h2>Attributes</h2>
<p>Attributes represent the business data. They can be accessed like array elements or object properties. Each attribute is a publicly accessible property of a model. To specify what attributes a model possesses, you should override the <b>yii\base\Model::attributes()</b> method.</p>
<p>Let us have a look at the <b>ContactForm</b> model of the basic application template.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use Yii;
   use yii\base\Model;
   /**
   * ContactForm is the model behind the contact form.
   */
   class ContactForm extends Model {
      public $name;
      public $email;
      public $subject;
      public $body;
      public $verifyCode;
      /**
      * @return array the validation rules.
      */
      public function rules() {
         return [
            // name, email, subject and body are required
            [['name', 'email', 'subject', 'body'], 'required'],
            // email has to be a valid email address
            ['email', 'email'],
            // verifyCode needs to be entered correctly
            ['verifyCode', 'captcha'],
         ];
      }
      /**
      * @return array customized attribute labels
      */
      public function attributeLabels() {
         return [
            'verifyCode' =&gt; 'Verification Code',
         ];
      }
      /**
      * Sends an email to the specified email address using the information 
         collected by this model.
      * @param  string  $email the target email address
      * @return boolean whether the model passes validation
      */
      public function contact($email) {
         if ($this-&gt;validate()) {
            Yii::$app-&gt;mailer-&gt;compose()
               -&gt;setTo($email)
               -&gt;setFrom([$this-&gt;email =&gt; $this-&gt;name])
               -&gt;setSubject($this-&gt;subject)
               -&gt;setTextBody($this-&gt;body)
               -&gt;send();
            return true;
         }
         return false;
      }
   }
?&gt;
</pre>
<p><b>Step 1</b> &minus; Create a function called <b>actionShowContactModel</b> in the <b>SiteController</b> with the following code.</p>
<pre class="prettyprint notranslate">
public function actionShowContactModel() { 
   $mContactForm = new \app\models\ContactForm(); 
   $mContactForm-&gt;name = "contactForm"; 
   $mContactForm-&gt;email = "user@gmail.com"; 
   $mContactForm-&gt;subject = "subject"; 
   $mContactForm-&gt;body = "body"; 
   var_dump($mContactForm); 
}
</pre>
<p>In the above code, we define the <b>ContactForm</b> model, set attributes, and display the model on the screen.</p>
<p><b>Step 2</b> &minus; Now, if you type <b>http://localhost:8080/index.php?r=site/show-contact-model</b> in the address bar of the web browser, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/show_contact_view.jpg" alt="Show Contact View" />
<p>If your model extends from <b>yii\base\Model</b>, then all its member variables (public and non-static) are attributes. There are five attributes in the <b>ContactForm</b> model &minus; name, email, subject, body, <b>verifyCode</b> and you can easily add new ones.</p>
<h2>Attribute Labels</h2>
<p>You often need to display labels associated with attributes. By default, attribute labels are automatically generated by the <b>yii\base\Model::generateAttributeLabel()</b> method. To manually declare attribute labels, you may override the <b>yii\base\Model::attributeLabels()</b> method.</p>
<p><b>Step 1</b> &minus; If you open <b>http://localhost:8080/index.php?r=site/contact,</b> you will see the following page.</p>
<img src="https://www.tutorialspoint.com/yii/images/contact_form.jpg" alt="Contact Form" />
<p>Note that the attribute labels are the same as their names.</p>
<p><b>Step 2</b> &minus; Now, modify the <b>attributeLabels</b> function in the <b>ContactForm</b> model in the following way.</p>
<pre class="prettyprint notranslate">
public function attributeLabels() {
   return [
      'name' =&gt; 'name overridden',
      'email' =&gt; 'email overridden',
      'subject' =&gt; 'subject overridden',
      'body' =&gt; 'body overridden',
      'verifyCode' =&gt; 'verifyCode overridden',
   ];
}
</pre>
<p><b>Step 3</b> &minus; If you open <b>http://localhost:8080/index.php?r=site/contact</b> again, you will notice that the labels have changed as shown in the following image.</p>
<img src="https://www.tutorialspoint.com/yii/images/contact_form_changed.jpg" alt="Contact Changed" />
<h2>Scenarios</h2>
<p>You can use a model in different scenarios. For example, when a guest wants to send a contact form, we need all the model attributes. When a user wants to do the same thing, he is already logged in, so we do not need his name, as we can easily take it from the DB.</p>
<p>To declare scenarios, we should override the <b>scenarios()</b> function. It returns an array whose keys are the scenario names and values are <b>active attributes</b>. Active attributes are the ones to validate. They can also be <b>massively assigned</b>.</p>
<p><b>Step 1</b> &minus; Modify the <b>ContactForm</b> model in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use Yii;
   use yii\base\Model;
   /**
   * ContactForm is the model behind the contact form.
   */
   class ContactForm extends Model {
      public $name;
      public $email;
      public $subject;
      public $body;
      public $verifyCode;
      const SCENARIO_EMAIL_FROM_GUEST = 'EMAIL_FROM_GUEST';
      const SCENARIO_EMAIL_FROM_USER = 'EMAIL_FROM_USER';
      public function scenarios() {
         return [
            self::SCENARIO_EMAIL_FROM_GUEST =&gt; ['name', 'email', 'subject', 
               'body', 'verifyCode'],
            self::SCENARIO_EMAIL_FROM_USER =&gt; ['email' ,'subject', 'body', 
               'verifyCode'],
         ];
      }
      /**
      * @return array the validation rules.
      */
      public function rules() {
         return [
            // name, email, subject and body are required
            [['name', 'email', 'subject', 'body'], 'required'],
            // email has to be a valid email address
            ['email', 'email'],
            // verifyCode needs to be entered correctly
            ['verifyCode', 'captcha'],
         ];
      }
      /**
      * @return array customized attribute labels
      */
      public function attributeLabels() {
         return [
            'name' =&gt; 'name overridden',
            'email' =&gt; 'email overridden',
            'subject' =&gt; 'subject overridden',
            'body' =&gt; 'body overridden',
            'verifyCode' =&gt; 'verifyCode overridden',
         ];
      }
      /**
      * Sends an email to the specified email address using the information 
         collected by this model.
      * @param  string  $email the target email address
      * @return boolean whether the model passes validation
      */
      public function contact($email) {
         if ($this -&gt; validate()) {
            Yii::$app-&gt;mailer-&gt;compose()
               -&gt;setTo($email)
               -&gt;setFrom([$this-&gt;email =&gt; $this-&gt;name]) 
               -&gt;setSubject($this-&gt;subject) 
               -&gt;setTextBody($this-&gt;body)
               -&gt;send();
            return true;
         }
         return false;
      }
   }
?&gt;
</pre>
<p>We have added two scenarios. One for the guest and another for authenticated user. When the user is authenticated, we do not need his name.</p>
<p><b>Step 2</b> &minus; Now, modify the <b>actionContact</b> function of the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionContact() {
   $model = new ContactForm();
   $model-&gt;scenario = ContactForm::SCENARIO_EMAIL_FROM_GUEST;
   if ($model-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $model-&gt;
      contact(Yii::$app-&gt;params ['adminEmail'])) {
         Yii::$app-&gt;session-&gt;setFlash('contactFormSubmitted');  
         return $this-&gt;refresh();
   }
   return $this-&gt;render('contact', [
      'model' =&gt; $model,
   ]);
}
</pre>
<p><b>Step 3</b> &minus; Type <b>http://localhost:8080/index.php?r=site/contact</b> in the web browser. You will notice that currently, all model attributes are required.</p>
<img src="https://www.tutorialspoint.com/yii/images/required_model_attributes.jpg" alt="Required Model Attributes" />
<p><b>Step 4</b> &minus; If you change the scenario of the model in the <b>actionContact</b>, as given in the following code, you will find that the name attribute is no longer required.</p>
<pre class="result notranslate">
$model-&gt;scenario = ContactForm::SCENARIO_EMAIL_FROM_USER;
</pre>
<p></p>
<img src="https://www.tutorialspoint.com/yii/images/change_scenario.jpg" alt="Change Scenario" />
<h2>Massive Assignment</h2>
<p>Massive assignment is a convenient way of creating a model from multiple input attributes via a single line of code.</p>
<p>The lines of code are &minus;</p>
<pre class="prettyprint notranslate">
$mContactForm = new \app\models\ContactForm; 
$mContactForm-&gt;attributes = \Yii::$app-&gt;request-&gt;post('ContactForm');
</pre>
<p>The above given lines of code are equivalent to &minus;</p>
<pre class="prettyprint notranslate">
$mContactForm = new \app\models\ContactForm; 
$postData = \Yii::$app-&gt;request-&gt;post('ContactForm', []); 
$mContactForm-&gt;name = isset($postData['name']) ? $postData['name'] : null; 
$mContactForm-&gt;email = isset($postData['email']) ? $postData['email'] : null; 
$mContactForm-&gt;subject = isset($postData['subject']) ? $postData['subject'] : null; 
$mContactForm-&gt;body = isset($postData['body']) ? $postData['body'] : null;
</pre>
<p>The former is much cleaner. Notice that <b>massive assignment</b> only applies to the <b>safe attributes</b>. They are just the current scenario attributes listed in the <b>scenario()</b> function.</p>
<h2>Data Export</h2>
<p>The Models often need to be exported in different formats. To convert the model into an array, modify the <b>actionShowContactModel</b> function of the <b>SiteController</b> &minus;</p>
<pre class="prettyprint notranslate">
public function actionShowContactModel() {
   $mContactForm = new \app\models\ContactForm();
   $mContactForm-&gt;name = "contactForm";
   $mContactForm-&gt;email = "user@gmail.com";
   $mContactForm-&gt;subject = "subject";
   $mContactForm-&gt;body = "body";
   var_dump($mContactForm-&gt;attributes);
} 
</pre>
<p>Type <b>http://localhost:8080/index.php?r=site/show-contact-model</b> in the address bar and you will see the following &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/data_export.jpg" alt="Data Export" />
<p>To convert the Model to the <b>JSON</b> format, modify the <b>actionShowContactModel</b> function in the following way &minus;</p>
<pre class="prettyprint notranslate">
public function actionShowContactModel() {
   $mContactForm = new \app\models\ContactForm();
   $mContactForm-&gt;name = "contactForm";
   $mContactForm-&gt;email = "user@gmail.com";
   $mContactForm-&gt;subject = "subject";
   $mContactForm-&gt;body = "body";
   return \yii\helpers\Json::encode($mContactForm);
}
</pre>
<p><b>Browser output</b> &minus;</p>
<pre class="result notranslate">
{
   "name":"contactForm",
   "email":"user@gmail.com",
   "subject":"subject",
   "body":"body ",
   "verifyCode":null
}
</pre>
<h2>Important Points</h2>
<p>Models are usually much faster than controllers in a well-designed application. Models should &minus;</p>
<ul class="list">
<li>Contain business logic.</li>
<li>Contain validation rules.</li>
<li>Contain attributes.</li>
<li>Not embed HTML.</li>
<li>Not directly access requests.</li>
<li>Not have too many scenarios.</li>
</ul>
<h1>Yii - Widgets</h1>
<p>A widget is a reusable client-side code, which contains HTML, CSS, and JS. This code includes minimal logic and is wrapped in a <b>yii\base\Widget</b> object. We can easily insert and apply this object in any view.</p>
<p><b>Step 1</b> &minus; To see widgets in action, create an <b>actionTestWidget</b> function in the <b>SiteController</b> with the following code.</p>
<pre class="prettyprint notranslate">
public function actionTestWidget() { 
   return $this-&gt;render('testwidget'); 
}
</pre>
<p>In the above example, we just returned a <b>View</b> called <b>“testwidget”</b>.</p>
<p><b>Step 2</b> &minus; Now, inside the views/site folder, create a View file called <b>testwidget.php.</b></p>
<pre class="prettyprint notranslate">
&lt;?php 
   use yii\bootstrap\Progress; 
?&gt; 
&lt;?= Progress::widget(['percent' =&gt; 60, 'label' =&gt; 'Progress 60%']) ?&gt;
</pre>
<p><b>Step 3</b> &minus; If you go to <b>http://localhost:8080/index.php?r=site/test-widget,</b> you will see the progress bar widget.</p>
<img src="https://www.tutorialspoint.com/yii/images/progress_bar.jpg" alt="Progress Bar" />
<h2>Using Widgets</h2>
<p>To use a widget in a <b>View</b>, you should call the <b>yii\base\Widget::widget()</b> function. This function takes a configuration array for initializing the widget. In the previous example, we inserted a progress bar with percent and labelled parameters of the configuration object.</p>
<p>Some widgets take a block of content. It should be enclosed between <b>yii\base\Widget::begin()</b> and  <b>yii\base\Widget::end()</b> functions. For example, the following widget displays a contact form &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php $form = ActiveForm::begin(['id' =&gt; 'contact-form']); ?&gt; 
   &lt;?= $form-&gt;field($model, 'name') ?&gt; 
   &lt;?= $form-&gt;field($model, 'email') ?&gt; 
   &lt;?= $form-&gt;field($model, 'subject') ?&gt; 
   &lt;?= $form-&gt;field($model, 'body')-&gt;textArea(['rows' =&gt; 6]) ?&gt; 
   &lt;?= $form-&gt;field($model, 'verifyCode')-&gt;widget(Captcha::className(), [ 
      'template' =&gt;
         '&lt;div class="row"&gt;
            &lt;div class = "col-lg-3"&gt;{image}&lt;/div&gt;
            &lt;div class = "col-lg-6"&gt;{input}&lt;/div&gt;
         &lt;/div&gt;', 
   ]) ?&gt; 
   &lt;div class = "form-group"&gt; 
      &lt;?= Html::submitButton('Submit', ['class' =&gt; 'btn btn-primary',
         'name' =&gt; 'contact-button']) ?&gt; 
   &lt;/div&gt; 
&lt;?php ActiveForm::end(); ?&gt; 
</pre>
<h2>Creating Widgets</h2>
<p>To create a widget, you should extend from <b>yii\base\Widget</b>. Then you should override the <b>yii\base\Widget::init()</b> and <b>yii\base\Widget::run()</b> functions. The <b>run()</b> function should return the rendering result. The <b>init()</b> function should normalize the widget properties.</p>
<p><b>Step 1</b> &minus; Create a components folder in the project root. Inside that folder, create a file called <b>FirstWidget.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   namespace app\components; 
   use yii\base\Widget; 
   class FirstWidget extends Widget { 
      public $mes; 
      public function init() { 
         parent::init(); 
         if ($this-&gt;mes === null) { 
            $this-&gt;mes = 'First Widget'; 
         } 
      }  
      public function run() { 
         return "&lt;h1&gt;$this-&gt;mes&lt;/h1&gt;"; 
      } 
   } 
?&gt;
</pre>
<p><b>Step 2</b> &minus; <b>Modify</b> the <b>testwidget</b> view in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   use app\components\FirstWidget; 
?&gt; 
&lt;?= FirstWidget∷widget() ?&gt;
</pre>
<p><b>Step 3</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/test-widget</b>. You will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/first_widget.jpg" alt="First Widget" />
<p><b>Step 4</b> &minus; To enclose the content between the <b>begin()</b> and <b>end()</b> calls, you should modify the <b>FirstWidget.php</b> file.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\components;
   use yii\base\Widget;
   class FirstWidget extends Widget {
      public function init() {
         parent::init();
         ob_start();
      }
      public function run() {
         $content = ob_get_clean();
         return "&lt;h1&gt;$content&lt;/h1&gt;";
      }
   }
?&gt; 
</pre>
<p><b>Step 5</b> &minus; Now h1 tags will surround all the content. Notice that we use the <b>ob_start()</b> function to buffer the output. Modify the testwidget view as given in the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use app\components\FirstWidget;
?&gt;
&lt;?php FirstWidget::begin(); ?&gt;
   First Widget in H1
&lt;?php FirstWidget::end(); ?&gt;
</pre>
<p>You will see the following output &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/h1_first_widget.jpg" alt="First Widget in H1" />
<h2>Important Points</h2>
<p>Widgets should &minus;</p>
<ul class="list">
<li><p>Be created following the MVC pattern. You should keep presentation layers in views and logic in widget classes.</p></li>
<li><p>Be designed to be self-contained. The end developer should be able to design it into a View.</p></li>
</ul>
<h1>Yii - Modules</h1>
<p>A module is an entity that has its own models, views, controllers, and possibly other modules. It is practically an application inside the application.</p>
<p><b>Step 1</b> &minus; Create a folder called <b>modules</b> inside your project root. Inside the modules folder, create a folder named <b>hello</b>. This will be the basic folder for our Hello module.</p>
<p><b>Step 2</b> &minus; Inside the <b>hello</b> folder, create a file <b>Hello.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\modules\hello;
   class Hello extends \yii\base\Module {
      public function init() {
         parent::init();
      }
   }
?&gt;
</pre>
<p>We have just created a module class. This should be located under the module's base path. Every time a module is accessed, an instance of the correspondent module class is created. The <b>init()</b> function is for initializing the module's properties.</p>
<p><b>Step 3</b> &minus; Now, add two more directories inside the hello folder &minus; controllers and views. Add a <b>CustomController.php</b> file to the controller’s folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\modules\hello\controllers;
   use yii\web\Controller;
   class CustomController extends Controller {
      public function actionGreet() {
         return $this-&gt;render('greet');
      }
   }
?&gt;
</pre>
<p>When creating a module, a convention is to put the controller classes into the controller’s directory of the module's base path. We have just defined the <b>actionGreet</b> function, that just returns a <b>greet</b> view.</p>
<p>Views in the module should be put in the views folder of the module's base path. If views are rendered by a controller, they should be located in the folder corresponding to the <b>controllerID</b>. Add <b>custom</b> folder to the <b>views</b> folder.</p>
<p><b>Step 4</b> &minus; Inside the custom directory, create a file called <b>greet.php</b> with the following code.</p>
<pre class="result notranslate">
&lt;h1&gt;Hello world from custom module!&lt;/h1&gt;
</pre>
<p>We have just created a <b>View</b> for our <b>actionGreet</b>. To use this newly created module, we should configure the application. We should add our module to the modules property of the application.</p>
<p><b>Step 5</b> &minus; Modify the <b>config/web.php</b> file.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this is
               //required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello', 
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>A route for a module's controller must begin with the module ID followed by the controller ID and action ID.</p>
<p><b>Step 6</b> &minus; To run the <b>actionGreet</b> in our application, we should use the following route.</p>
<pre class="result notranslate">
hello/custom/greet
</pre>
<p>Where hello is a module ID, custom is a <b>controller ID</b> and greet is an <b>action ID</b>.</p>
<p><b>Step 7</b> &minus; Now, type <b>http://localhost:8080/index.php?r=hello/custom/greet</b> and you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/custom_module.jpg" alt="Custom Module" />
<h2>Important Points</h2>
<p>Modules should &minus;</p>
<ul class="list">
<li><p>Be used in large applications. You should divide its features into several groups. Each feature group can be developed as a module.</p></li>
<li><p>Be reusable. Some commonly used features, as SEO management or blog management, can be developed as modules, so that you can easily reuse them in future projects.</p></li>
</ul>
<h1>Yii - Views</h1>
<p>Views are responsible for presenting the data to end users. In web applications, <b>Views</b> are just PHP script files containing HTML and PHP code.</p>
<h2>Creating Views</h2>
<p><b>Step 1</b> &minus; Let us have a look at the <b>‘About’</b> view of the basic application template.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
?&gt;
&lt;div class="site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   &lt;p&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
   &lt;code&gt;&lt;?= __FILE__ ?&gt;&lt;/code&gt;
&lt;/div&gt;
</pre>
<p>The <b>$this</b> variable refers to the view component that manages and renders this view template.</p>
<p>This is how the <b>‘About’</b> page looks like &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/about_page.jpg" alt="About Page" />
<p>It is important to encode and/or filter the data coming from the end user in order to avoid the XSS attacks. You should always encode a plain text by calling <b>yii\helpers\Html::encode()</b> and HTML content by calling <b>yii\helpers\HtmlPurifier</b>.</p>
<p><b>Step 2</b> &minus; Modify the <b>‘About’</b> View in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   use yii\helpers\HtmlPurifier;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
?&gt;
&lt;div class="site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   &lt;p&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
   &lt;p&gt;
      &lt;?= Html::encode("&lt;script&gt;alert('alert!');&lt;/script&gt;&lt;h1&gt;ENCODE EXAMPLE&lt;/h1&gt;&gt;") ?&gt;
   &lt;/p&gt;
   &lt;p&gt;
      &lt;?= HtmlPurifier::process("&lt;script&gt;alert('alert!');&lt;/script&gt;&lt;h1&gt; HtmlPurifier EXAMPLE&lt;/h1&gt;") ?&gt;
   &lt;/p&gt;
   &lt;code&gt;&lt;?= __FILE__ ?&gt;&lt;/code&gt;
&lt;/div&gt;
</pre>
<p><b>Step 3</b> &minus; Now type <b>http://localhost:8080/index.php?r=site/about</b>. You will see the following screen.</p>
<img src="https://www.tutorialspoint.com/yii/images/about_view.jpg" alt="About View" />
<p>Notice, that the javascript code inside the <b>Html::encode()</b> function is displayed as plain text. The same thing is for <b>HtmlPurifier::process()</b> call. Only h1 tag is being displayed.</p>
<p>Views follow these conventions &minus;</p>
<ul class="list">
<li><p>Views, which are rendered by a controller, should be put into the <b>@app/views/controllerID</b> folder.</p></li>
<li><p>Views, which are rendered in a widget, should be put into the <b>widgetPath/views folder</b>.</p></li>
</ul>
<p>To render a <b>view within a controller,</b> you may use the following methods &minus;</p>
<ul class="list">
<li><p><b>render()</b> &minus; Renders a view and applies a layout.</p></li>
<li><p><b>renderPartial()</b> &minus; Renders a view without a layout.</p></li>
<li><p><b>renderAjax()</b> &minus; Renders a view without a layout, but injects all registered js and css files.</p></li>
<li><p><b>renderFile()</b> &minus; Renders a view in a given file path or alias.</p></li>
<li><p><b>renderContent()</b> &minus; Renders a static string and applies a layout.</p></li>
</ul>
<p>To render a <b>view within another view</b>, you may use the following methods &minus;</p>
<ul class="list">
<li><p><b>render()</b> &minus; Renders a view.</p></li>
<li><p><b>renderAjax()</b> &minus; Renders a view without a layout, but injects all registered js and css files.</p></li>
<li><p><b>renderFile()</b> &minus; Renders a view in a given file path or alias.</p></li>
</ul>
<p><b>Step 4</b> &minus; Inside the views/site folder, create two view files: <b>_part1.php and _part2.php</b>.</p>
<p><b>_part1.php</b> &minus;</p>
<pre class="result notranslate">
&lt;h1&gt;PART 1&lt;/h1&gt;
</pre>
<p><b>_part2.php</b> &minus;</p>
<pre class="result notranslate">
&lt;h1&gt;PART 2&lt;/h1&gt;
</pre>
<p><b>Step 5</b> &minus; Finally, render these two newly created views inside the <b>‘About’</b> View.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
?&gt;
&lt;div class="site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   &lt;p&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
   &lt;?= $this-&gt;render("_part1") ?&gt;
   &lt;?= $this-&gt;render("_part2") ?&gt;
   &lt;code&gt;&lt;?= __FILE__ ?&gt;&lt;/code&gt;
&lt;/div&gt;
</pre>
<p>You will see the following output &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/create_view_files.jpg" alt="Create View Files" />
<p>When rendering a view, you can define the view using as a view name or a view file path/alias. A view name is resolved in the following way &minus;</p>
<ul class="list">
<li><p>A view name can omit the extension. For example, the about view corresponds to the about.php file.</p></li>
<li><p>If the view name starts with “/”, then if currently active module is forum, and the view name is comment/post, the path would be @app/modules/forum/views/comment/post. If there is no active module, the path would be @app/views/comment/post.</p></li>
<li><p>If the view name starts with “//”, the corresponding path would be @app/views/ViewName. For example, //site/contact corresponds to @app/views/site/contact.php.</p></li>
<li><p>If the view name is contact, and the context controller is SiteController, then the path would be @app/views/site/contact.php.</p></li>
<li><p>If the price view is rendered within the goods view, then price would be resolved as @app/views/invoice/price.php if it is being rendered in the @app/views/invoice/goods.php.</p></li>
</ul>
<h2>Accessing Data in Views</h2>
<p>To access data within a view, you should pass the data as the second parameter to the view rendering method.</p>
<p><b>Step 1</b> &minus; Modify the <b>actionAbout</b> of the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionAbout() {
   $email = “admin@support.com”;
   $phone = “+78007898100”;
   return $this-&gt;rende‘('abo’t',[
      ‘ 'ema’l' =&gt; $email,
      ‘ 'pho’e' =&gt; $phone
   ]);
}
</pre>
<p>In the code given above, we pass two variables <b>$email</b> and <b>$phone</b> to render in the <b>About</b> view.</p>
<p><b>Step 2</b> &minus; Change the about view code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
?&gt;
&lt;div class = "site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   &lt;p&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
   &lt;p&gt;
      &lt;b&gt;email:&lt;/b&gt; &lt;?= $email ?&gt;
   &lt;/p&gt;
   &lt;p&gt;
      &lt;b&gt;phone:&lt;/b&gt; &lt;?= $phone ?&gt;
   &lt;/p&gt;
   &lt;code&gt;&lt;?= __FILE__ ?&gt;&lt;/code&gt;
&lt;/div&gt;
</pre>
<p>We have just added two variables that we received from the <b>SiteController</b>.</p>
<p><b>Step 3</b> &minus; Type the URL <b>http://localhost:8080/index.php?r=site/about</b> in the web browser, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/change_about_view_code.jpg" alt="Change About View Code" />
<h1>Yii - Layouts</h1>
<p>Layouts represent the common parts of multiple views i.e. for example, page header and footer. By default, layouts should be stored in the <b>views/layouts</b> folder.</p>
<p>Let us have a look at the main layout of the basic application template &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this \yii\web\View */
   /* @var $content string */
   use yii\helpers\Html;
   use yii\bootstrap\Nav;
   use yii\bootstrap\NavBar;
   use yii\widgets\Breadcrumbs;
   use app\assets\AppAsset;
   AppAsset::register($this);
?&gt;
&lt;?php $this-&gt;beginPage() ?&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang = "&lt;?= Yii::$app-&gt;language ?&gt;"&gt;
   &lt;head&gt;
      &lt;meta charset = "&lt;?= Yii::$app-&gt;charset ?&gt;"&gt;
      &lt;meta name = "viewport" content = "width = device-width, initial-scale = 1"&gt;
      &lt;?= Html::csrfMetaTags() ?&gt;
      &lt;title&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/title&gt;
      &lt;?php $this-&gt;head() ?&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;?php $this-&gt;beginBody() ?&gt;
         &lt;div class = "wrap"&gt;
            &lt;?php
               NavBar::begin([
                  'brandLabel' =&gt; 'My Company',
                  'brandUrl' =&gt; Yii::$app-&gt;homeUrl,
                  'options' =&gt; [
                     'class' =&gt; 'navbar-inverse navbar-fixed-top',
                  ],
               ]);
               echo Nav::widget([
                  'options' =&gt; ['class' =&gt; 'navbar-nav navbar-right'],
                  'items' =&gt; [
                     ['label' =&gt; 'Home', 'url' =&gt; ['/site/index']],
                     ['label' =&gt; 'About', 'url' =&gt; ['/site/about']],
                     ['label' =&gt; 'Contact', 'url' =&gt; ['/site/contact']],
                     Yii::$app-&gt;user-&gt;isGuest ?
                        ['label' =&gt; 'Login', 'url' =&gt; ['/site/login']] :
                        [
                           'label' =&gt; 'Logout (' . Yii::$app-&gt;user-&gt;identity-&gt;username.')',
                           'url' =&gt; ['/site/logout'],
                           'linkOptions' =&gt; ['data-method' =&gt; 'post']
                        ],
                  ],
               ]);
               NavBar::end();
            ?&gt;
            &lt;div class = "container"&gt;
               &lt;?= Breadcrumbs::widget([
                  'links' =&gt; isset($this-&gt;params['breadcrumbs']) ? $this&gt;params
                     ['breadcrumbs'] : [],
               ]) ?&gt;
               &lt;?= $content ?&gt;
            &lt;/div&gt;
         &lt;/div&gt;
         &lt;footer class = "footer"&gt;
            &lt;div class = "container"&gt;
               &lt;p class = "pull-left"&gt;&copy; My Company &lt;?= date('Y') ?&gt;&lt;/p&gt;
               &lt;p class = "pull-right"&gt;&lt;?= Yii::powered() ?&gt;&lt;/p&gt;
            &lt;/div&gt;
         &lt;/footer&gt;
      &lt;?php $this-&gt;endBody() ?&gt;
   &lt;/body&gt;
&lt;/html&gt;
&lt;?php $this-&gt;endPage() ?&gt;
</pre>
<p>This layout generates the HTML page that is common for all pages. The <b>$content</b> variable is the rendering result of content views. The following methods trigger events about the rendering process so that the scripts and tags registered in other places could be properly injected &minus;</p>
<ul class="list">
<li><p><b>head()</b> &minus; Should be called within the <i>head</i> section. Generates a placeholder, which will be replaced with the registered HTML targeted at the head position.</p></li>
<li><p><b>beginBody()</b> &minus; Should be called at the beginning of the <i>body</i> section. Triggers the <b>EVENT_BEGIN_BODY</b> event. Generates a placeholder which will be replaced with the registered HTML targeted at the body begin position.</p></li>
<li><p><b>endBody()</b> &minus; Should be called at the end of the <i>body</i> section. Triggers the <b>EVENT_END_BODY</b> event. Generates a placeholder, which will be replaced with the registered HTML targeted at the body end position.</p></li>
<li><p><b>beginPage()</b> &minus; Should be called at the beginning of the layout.  Triggers the <b>EVENT_BEGIN_PAGE</b> event.</p></li>
<li><p><b>endPage()</b> &minus; Should be called at the end of the layout. Triggers the <b>EVENT_END_PAGE</b> event.</p></li>
</ul>
<h2>Create a Layout</h2>
<p><b>Step 1</b> &minus; Inside the views/layouts directory, create a file called <b>newlayout.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this \yii\web\View */
   /* @var $content string */
   use yii\helpers\Html;
   use yii\bootstrap\Nav;
   use yii\bootstrap\NavBar;
   use yii\widgets\Breadcrumbs;
   use app\assets\AppAsset;
   AppAsset::register($this);
?&gt;
&lt;?php $this-&gt;beginPage() ?&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang = "&lt;?= Yii::$app-&gt;language ?&gt;"&gt;
   &lt;head&gt;
      &lt;meta charset = "&lt;?= Yii::$app-&gt;charset ?&gt;"&gt;
      &lt;meta name = "viewport" content = "width = device-width, initial-scale = 1"&gt;
      &lt;? = Html::csrfMetaTags() ?&gt;
      &lt;title&gt;&lt;? = Html::encode($this-&gt;title) ?&gt;&lt;/title&gt;
      &lt;?php $this-&gt;head() ?&gt;
   &lt;/head&gt;

   &lt;body&gt;
      &lt;?php $this-&gt;beginBody() ?&gt;
         &lt;div class = "wrap"&gt; 
            &lt;div class = "container"&gt;
               &lt;? = $content ?&gt;
            &lt;/div&gt;
         &lt;/div&gt;
			
         &lt;footer class = "footer"&gt;
            &lt;div class = "container"&gt;
               &lt;p class = "pull-left"&gt;&copy; My Company &lt;?= date('Y') ?&gt;&lt;/p&gt;
               &lt;p class = "pull-right"&gt;&lt;? = Yii::powered() ?&gt;&lt;/p&gt;
            &lt;/div&gt;
         &lt;/footer&gt;
      &lt;?php $this-&gt;endBody() ?&gt;
   &lt;/body&gt;
	
&lt;/html&gt;
&lt;?php $this-&gt;endPage() ?&gt;
</pre>
<p>We have removed the top menu bar.</p>
<p><b>Step 2</b> &minus; To apply this layout to the <b>SiteController</b>, add the <b>$layout</b> property to the <b>SiteController</b> class.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\controllers;
   use Yii;
   use yii\filters\AccessControl;
   use yii\web\Controller;
   use yii\filters\VerbFilter;
   use app\models\LoginForm;
   use app\models\ContactForm;
   class SiteController extends Controller {
      public $layout = “newlayout”;
      /* other methods */
   }
?&gt;
</pre>
<p><b>Step 3</b> &minus; Now if you go to the web browser at any view of the SiteController, you will see that the layout has changed.</p>
<img src="https://www.tutorialspoint.com/yii/images/change_about_layout.jpg" alt="Change About Layout" />
<p><b>Step 4</b> &minus; To register various meta tags, you can call <b>yii\web\View::registerMetaTag()</b> in a content view.</p>
<p><b>Step 5</b> &minus; Modify the <b>‘About’</b> view of the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
   $this-&gt;registerMetaTag(['name' =&gt; 'keywords', 'content' =&gt; 'yii, developing, views,
      meta, tags']);
   $this-&gt;registerMetaTag(['name' =&gt; 'description', 'content' =&gt; 'This is the description
      of this page!'], 'description');
?&gt;
&lt;div class="site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   &lt;p&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
   &lt;code&gt;&lt;?= __FILE__ ?&gt;&lt;/code&gt;
&lt;/div&gt;
</pre>
<p>We have just registered two meta tags &minus; <b>keywords and description</b>.</p>
<p><b>Step 6</b> &minus; Now go to <b>http://localhost:8080/index.php?r=site/about,</b> you will find the meta tags in the head section of the page as shown in the following screenshot.</p>
<img src="https://www.tutorialspoint.com/yii/images/meta_tags.jpg" alt="Meta Tags" />
<p>Views trigger several events &minus;</p>
<ul class="list">
<li><p><b>EVENT_BEGIN_BODY</b> &minus; triggered in layouts by the call of <b>yii\web\View::beginBody()</b>.</p></li>
<li><p><b>EVENT_END_BODY</b> &minus; triggered in layouts by the call of <b>yii\web\View::endBody()</b>.</p></li>
<li><p><b>EVENT_BEGIN_PAGE</b> &minus; triggered in layouts by the call of <b>yii\web\View::beginPage()</b>.</p></li>
<li><p><b>EVENT_END_PAGE</b> &minus; triggered in layouts by the call of <b>yii\web\View::endPage()</b>.</p></li>
<li><p><b>EVENT_BEFORE_RENDER</b> &minus; triggered in a controller at the beginning of rendering a file.</p></li>
<li><p><b>EVENT_AFTER_RENDER</b> &minus; triggered after rendering a file.</p></li>
</ul>
<p>You may respond to these events to inject content into views.</p>
<p><b>Step 7</b> &minus; To display the current date and time in the <b>actionAbout</b> of the <b>SiteController</b>, modify it this way.</p>
<pre class="prettyprint notranslate">
public function actionAbout() {
   \Yii::$app-&gt;view-&gt;on(View::EVENT_BEGIN_BODY, function () {
      echo date('m.d.Y H:i:s');
   });
   return $this-&gt;render('about');
}
</pre>
<p><b>Step 8</b> &minus; Type <b>http://localhost:8080/index.php?r=site/about</b> in the address bar of the web browser and you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/trigger_events_example.jpg" alt="Trigger Event Example" />
<h2>Important Points</h2>
<p>To make Views more manageable you should &minus;</p>
<ul class="list">
<li>Divide complex views into several smaller ones.</li>
<li>Use layouts for common HTML sections (headers, footers, menus and so forth).</li>
<li>Use widgets.</li>
</ul>
<p>Views should &minus;</p>
<ul class="list">
<li>Contain HTML and simple PHP code to format and render data.</li>
<li>NOT process requests.</li>
<li>NOT modify model properties.</li>
<li>NOT perform database queries.</li>
</ul>
<h1>Yii - Assets</h1>
<p>An asset is a file (css, js, video, audio or image, etc.) that may be referenced in a web page. Yii manages assets in <b>asset bundles</b>. The purpose of an asset bundle is to have a group of related <b>JS</b> or <b>CSS</b> files in the code base and to be able to register them within a single PHP call. Asset bundles can also depend on other asset bundles.</p>
<p>Inside the assets folder, you will find the asset bundle for the basic application template &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\assets;
   use yii\web\AssetBundle;
   /**
   * @author Qiang Xue &lt;qiang.xue@gmail.com&gt;
   * @since 2.0
   */
   class AppAsset extends AssetBundle {
      public $basePath = '@webroot';
      public $baseUrl = '@web';
      public $css = [
         'css/site.css',
      ];
      public $js = [];
      public $depends = [
         'yii\web\YiiAsset',
         'yii\bootstrap\BootstrapAsset',
      ];
   }
?&gt;
</pre>
<p>The above class specifies that the asset files are located inside the <b>@webroot</b> folder, which corresponds to the URL <b>@web</b>. The bundle contains no <b>JS</b> files and a single <b>CSS</b> file. The bundle depends on other bundles &minus;</p>
<p><b>yii\web\YiiAsset and yii\bootstrap\BootstrapAsset.</b></p>
<h2>Properties of AssetBundle</h2>
<p>Following are the properties of AssetBundle.</p>
<ul class="list">
<li><p><b>basePath</b> &minus; Defines a web-accessible directory that contains the asset files in this bundle.</p></li>
<li><p><b>baseUrl</b> &minus; Specifies the URL corresponding to the basePath property.</p></li>
<li><p><b>js</b> &minus; Defines an array of the JS files contained in this bundle.</p></li>
<li><p><b>css</b> &minus; Defines an array of the CSS files contained in this bundle. </p></li>
<li><p><b>depends</b> &minus; Defines an array of the asset bundles that this bundle depends on. It means that CSS and JS files of the current asset bundle will be included after the bundles, which are declared by the <b>depends</b> property.</p></li>
<li><p><b>sourcePath</b> &minus; Defines the root directory that contains the asset files. You should set this property if the root directory is not web accessible. Otherwise, you should set the <b>basePath</b> and <b>baseUrl</b> properties.</p></li>
<li><p><b>cssOptions</b> &minus; Defines the options that will be passed to the <b>yii\web\View∷registerCssFile</b> function.</p></li>
<li><p><b>jsOptions</b> &minus; Defines the options that will be passed to the <b>yii\web\View::registerJsFile</b> function.</p></li>
<li><p><b>publishOptions</b>: Specifies the options that will be passed to the <b>yii\web\AssetManager::publish</b> function.</p></li>
</ul>
<h3>Classification of Assets</h3>
<p>Depending on location, assets can be classified as &minus;</p>
<ul class="list">
<li><p><b>Source Assets</b> &minus; The assets are located in the directory that cannot be directly accessed via web. They should be copied to a web directory in order to use source assets in a page. This process is called <b>asset publishing</b>.</p></li>
<li><p><b>Published Assets</b> &minus; The assets are located in a web accessible directory</p></li>
<li><p><b>External Assets</b> &minus; The assets are located on another web server.</p></li>
</ul>
<h3>Using Asset Bundles</h3>
<p><b>Step 1</b> &minus; Inside the <b>assets</b> folder, create a new file called <b>DemoAsset.php</b> with the following content.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\assets;
   use yii\web\AssetBundle;
   class DemoAsset extends AssetBundle {
      public $basePath = ‘@webroot’;
      public $baseUrl = ‘@web’;
      public $js = [‘js/demo.js’];
   }
?&gt;
</pre>
<p><b>Step 2</b> &minus; We have just declared a new asset bundle with a single demo.js file. Now, inside the web/js folder, create a file called demo.js with this code.</p>
<pre class="prettyprint notranslate">
console.log("hello from demo asset");
</pre>
<p><b>Step 3</b> &minus; To register the newly created asset bundle, go to the views/layouts directory and at the top of the main.php file, add the following line.</p>
<pre class="prettyprint notranslate">
\app\assets\DemoAsset::register($this);
</pre>
<p><b>Step 4</b> &minus; If point your web browser at <b>http://localhost:8080/index.php</b>, you should see the following chrome console output.</p>
<img src="https://www.tutorialspoint.com/yii/images/using_asset_bundles.jpg" alt="Using Asset Bundles" />
<p>You can also define the <b>jsOptions</b> and <b>cssOptions</b> properties to customize the way that <b>CSS</b> and <b>JS</b> files are included in a page. By default, JS files are included before the closing body tag.</p>
<p><b>Step 5</b> &minus; To include <b>JS</b> files in the head section, modify the <b>DemoAsset.php</b> file in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\assets;
   use yii\web\AssetBundle;
   use yii\web\View;
   class DemoAsset extends AssetBundle {
      public $basePath = '@webroot';
      public $baseUrl = '@web';
      public $js = ['js/demo.js'];
      public  $jsOptions = ['position' =&gt; View::POS_HEAD];
   }
?&gt;
</pre>
<p><b>Step 6</b> &minus; Now go <b>to http://localhost:8080/index.php,</b> you should see that the <b>demo.js</b> script is included in the head section of the page.</p>
<img src="https://www.tutorialspoint.com/yii/images/demoasset_php_file.jpg" alt="Demoset PHP File" />
<p>It is a common practice for a web application, running in production mode, to enable HTTP caching for assets. By doing so, the last modification timestamp will be appended to all published assets.</p>
<p><b>Step 7</b> &minus; Go to the <b>config</b> folder and modify the <b>web.php</b> file as shown in the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'assetManager' =&gt; [
            'appendTimestamp' =&gt; true,
         ],
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this is
               //required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>We have added the <b>AssetManager</b> component and set the <b>appendTimestamp</b> property.</p>
<p><b>Step 8</b> &minus; Now type <b>http://localhost:8080/index.php</b> in the address bar of the web browser. You will notice that all the assets now have a timestamp as shown in the following image.</p>
<img src="https://www.tutorialspoint.com/yii/images/web_php_file.jpg" alt="Web PHP File" />
<h2>Core Yii Assetbundles</h2>
<p>Following are the Core Yii Assetbundles.</p>
<ul class="list">
<li><p><b>yii\web\JqueryAsset</b> &minus; Includes the jquery.js file.</p></li>
<li><p><b>yii\web\YiiAsset</b> &minus; Includes the yii.js file, which implements a mechanism of organizing JS code in modules.</p></li>
<li><p><b>yii\bootstrap\BootstrapAsset</b> &minus; Includes the CSS file from the Twitter Bootstrap framework.</p></li>
<li><p><b>yii\bootstrap\BootstrapPluginAsset</b> &minus; Includes the JS file from the Twitter Bootstrap framework.</p></li>
<li><p><b>yii\jui\JuiAsset</b> &minus; Includes the CSS and JS files from the jQuery UI library.</p></li>
</ul>
<h1>Yii - Asset Conversion</h1>
<p>Instead of writing <b>CSS</b> or <b>JS</b> code, developers often use extended syntax, like <b>LESS, SCSS,</b> Stylus for CSS and TypeScript, CoffeeScript for JS. Then they use special tools to convert these files into real CSS and JS.</p>
<p>The asset manager in Yii converts assets in extended syntax into CSS and JS, automatically. When the view is rendered, it will include the CSS and JS files in the page, instead of the original assets in extended syntax.</p>
<p><b>Step 1</b> &minus; Modify the <b>DemoAsset.php</b> file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\assets;
   use yii\web\AssetBundle;
   use yii\web\View;
   class DemoAsset extends AssetBundle {
      public $basePath = '@webroot';
      public $baseUrl = '@web';
      public $js = [
         'js/demo.js',
         'js/greeting.ts'
      ];
      public  $jsOptions = ['position' =&gt; View::POS_HEAD];
   }
?&gt;
</pre>
<p>We have just added a typescript file.</p>
<p><b>Step 2</b> &minus; Inside the <b>web/js</b> directory, create a file called <b>greeting.ts</b> with the following code.</p>
<pre class="prettyprint notranslate">
class Greeter {
   constructor(public greeting: string) { }
   greet() {
      return this.greeting;
   }
};
var greeter = new Greeter("Hello from typescript!");
console.log(greeter.greet());
</pre>
<p>In the above code, we define a Greeter class with a single method <b>greet()</b>. We write our greeting to the chrome console.</p>
<p><b>Step 3</b> &minus; Go to the URL <b>http://localhost:8080/index.php</b>. You will notice that the <b>greeting.ts</b> file is converted into the greeting.js file as shown in the following screenshot.</p>
<img src="https://www.tutorialspoint.com/yii/images/greeting_ts_file.jpg" alt="Greeting Ts File" />
<p>Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/greeting_ts_file_output.jpg" alt="Greeting Ts File Output" />
<h1>Yii - Extensions</h1>
<p>Extensions are packages specifically designed to be used in Yii applications. You can share your own code as an extension or use third-party extensions to add features to your application.</p>
<h2>Using Extensions</h2>
<p>Most extensions are distributed as Composer packages. Composer installs packages from Packagist – the repository for Composer packages.</p>
<p>To install a third-party extension, you should &minus;</p>
<ul class="list">
<li><p>Add the extension to a <b>composer.json</b> file.</p></li>
<li><p>Run composer install.</p></li>
</ul>
<h3>Adding Date and Time Widget</h3>
<p>Let us add a neat <b>datetime</b> widget to our project.</p>
<p><b>Step 1</b> &minus; Modify the <b>composer.json</b> file of the basic application template this way.</p>
<pre class="prettyprint notranslate">
{
   "name": "yiisoft/yii2-app-basic",
   "description": "Yii 2 Basic Project Template",
   "keywords": ["yii2", "framework", "basic", "project template"],
   "homepage": "http://www.yiiframework.com/",
   "type": "project",
   "license": "BSD-3-Clause",
   "support": {
      "issues": "https://github.com/yiisoft/yii2/issues?state=open",
      "forum": "http://www.yiiframework.com/forum/",
      "wiki": "http://www.yiiframework.com/wiki/",
      "irc": "irc://irc.freenode.net/yii",
      "source": "https://github.com/yiisoft/yii2"
   },
   "minimum-stability": "stable",
   "require": {
      "php": "&gt;=5.4.0",
      "yiisoft/yii2": "&gt;=2.0.5",
      "yiisoft/yii2-bootstrap": "*",
      "yiisoft/yii2-swiftmailer": "*",
      "kartik-v/yii2-widget-datetimepicker": "*"
   },
   "require-dev": {
      "yiisoft/yii2-codeception": "*",
      "yiisoft/yii2-debug": "*",
      "yiisoft/yii2-gii": "*",
      "yiisoft/yii2-faker": "*"
   },
   "config": {
      "process-timeout": 1800
   },
   "scripts": {
      "post-create-project-cmd": [
         "yii\\composer\\Installer::postCreateProject"
      ]
   },
   "extra": {
      "yii\\composer\\Installer::postCreateProject": {
         "setPermission": [
            {
               "runtime": "0777",
               "web/assets": "0777",
               "yii": "0755"
            }
         ],
         "generateCookieValidationKey": [
            "config/web.php"
         ]
      },
      "asset-installer-paths": {
         "npm-asset-library": "vendor/npm",
         "bower-asset-library": "vendor/bower"
      }
   }
}
</pre>
<p>We have added the dependency <b>"kartik-v/yii2-widget-datetimepicker": "*"</b> to the required section.</p>
<p><b>Step 2</b> &minus; Now, inside the project root, run the composer update to update all the dependencies.</p>
<img src="https://www.tutorialspoint.com/yii/images/add_dependencies.jpg" alt="Add Dependencies" />
<p>We have just installed the extension. You will find it inside the <b>vendor/kartik-v/yii2widget-datetimepicker</b> folder.</p>
<p><b>Step 3</b> &minus; To display the newly installed widget in the page, modify the <b>About</b> view of the <b>actionAbout</b> method of the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use kartik\datetime\DateTimePicker;
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
   $this-&gt;registerMetaTag(['name' =&gt; 'keywords', 'content' =&gt; 'yii, developing, views,
      meta, tags']);
   $this-&gt;registerMetaTag(['name' =&gt; 'description',
      'content' =&gt; 'This is the description of this page!'], 'description');
?&gt;
&lt;div class="site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   &lt;p&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
   &lt;?php
      echo DateTimePicker::widget([
         'name' =&gt; 'dp_1',
         'type' =&gt; DateTimePicker::TYPE_INPUT,
         'value' =&gt; '23-Feb-1982 10:10',
         'pluginOptions' =&gt; [
            'autoclose'=&gt;true,
            'format' =&gt; 'dd-M-yyyy hh:ii'
         ]
      ]);
   ?&gt;
&lt;/div&gt;
</pre>
<p><b>Step 4</b> &minus; Now, run the built-in php server from the project root via the <b>php -S localhost:8080t web</b> command.</p>
<p><b>Step 5</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/about.</b> You will see a neat <b>datetime</b> picker as shown in the following screenshot.</p>
<img src="https://www.tutorialspoint.com/yii/images/datetime_picker.jpg" alt="Date Time Picker" />
<h1>Yii - Creating Extensions</h1>
<p>Let us create a simple extension displaying a standard <b>“Hello world”</b> message. This extension will be distributed via the Packagist repository.</p>
<p><b>Step 1</b> &minus; Create a folder called <b>hello-world</b> in your hard drive but not inside the Yii basic application template). Inside the hello-world directory, create a file named <b>composer.json</b> with the following code.</p>
<pre class="prettyprint notranslate">
{
    "name": "tutorialspoint/hello-world",
    "authors": [
        {
            "name": "tutorialspoint"
        }
    ],
    "require": {},
    "autoload": {
        "psr-0": {
            "HelloWorld": "src/"
        }
    }
}
</pre>
<p>We have declared that we are using the PSR-0 standard and all extension files are under the <b>src</b> folder.</p>
<p><b>Step 2</b> &minus; Create the following directory path: <b>hello-world/src/HelloWorld</b>.</p>
<p><b>Step 3</b> &minus; Inside the <b>HelloWorld</b> folder, create a file called <b>SayHello.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace HelloWorld;
   class SayHello {
      public static function world() {
         return 'Hello World, Composer!';
      }
   }
?&gt;
</pre>
<p>We have defined a <b>SayHello</b> class with a world static function, which returns our <b>hello</b> message.</p>
<p><b>Step 4</b> &minus; The extension is ready. Now create an empty repository at your <b>github</b> account and push this extension there.</p>
<p>Inside the <b>hello-world</b> folder run &minus;</p>
<ul class="list">
<li>git init</li>
<li>git add</li>
<li>git commit -m “initial commit”</li>
<li>git remote add origin &lt;YOUR_NEWLY_CREATED_REPOSITORY&gt;</li>
<li>git push -u origin master</li>
</ul>
<img src="https://www.tutorialspoint.com/yii/images/push_extension.jpg" alt="Push Extensions" />
<p>We have just sent our extension to the <b>github</b>. Now, go to the <b>https://packagist.org,</b> sign in and click <b>“submit”</b> at the top menu.</p>
<p>You will see a page where you should enter your github repository to publish it.</p>
<img src="https://www.tutorialspoint.com/yii/images/enter_github_repository.jpg" alt="Enter github Repository" />
<p><b>Step 5</b> &minus; Click the <b>“check”</b> button and your extension is published.</p>
<img src="https://www.tutorialspoint.com/yii/images/extension_publish.jpg" alt="Extension Publish" />
<p><b>Step 6</b> &minus; Go back to the basic application template. Add the extension to the <b>composer.json</b>.</p>
<pre class="prettyprint notranslate">
{
   "name": "yiisoft/yii2-app-basic",
   "description": "Yii 2 Basic Project Template",
   "keywords": ["yii2", "framework", "basic", "project template"],
   "homepage": "http://www.yiiframework.com/",
   "type": "project",
   "license": "BSD-3-Clause",
   "support": {
      "issues": "https://github.com/yiisoft/yii2/issues?state=open",
      "forum": "http://www.yiiframework.com/forum/",
      "wiki": "http://www.yiiframework.com/wiki/",
      "irc": "irc://irc.freenode.net/yii",
      "source": "https://github.com/yiisoft/yii2"
   },
   "minimum-stability": "dev",
   "prefer-stable" : true,
   "require": {
      "php": "&gt;=5.4.0",
      "yiisoft/yii2": "&gt;=2.0.5",
      "yiisoft/yii2-bootstrap": "*",
      "yiisoft/yii2-swiftmailer": "*",
      "kartik-v/yii2-widget-datetimepicker": "*",
      "tutorialspoint/hello-world": "*"
   },
   "require-dev": {
      "yiisoft/yii2-codeception": "*",
      "yiisoft/yii2-debug": "*",
      "yiisoft/yii2-gii": "*",
      "yiisoft/yii2-faker": "*"
   },
   "config": {
      "process-timeout": 1800
   },
   "scripts": {
      "post-create-project-cmd": [
         "yii\\composer\\Installer::postCreateProject"
      ]
   },
   "extra": {
      "yii\\composer\\Installer::postCreateProject": {
         "setPermission": [
            {
               "runtime": "0777",
               "web/assets": "0777",
               "yii": "0755"
            }
         ],
         "generateCookieValidationKey": [
            "config/web.php"
         ]
      },
      "asset-installer-paths": {
         "npm-asset-library": "vendor/npm",
         "bower-asset-library": "vendor/bower"
      }
   }
}
</pre>
<p><b>Step 7</b> &minus; Inside the project root folder, run the <b>composer update</b> to install/update all the dependencies.</p>
<img src="https://www.tutorialspoint.com/yii/images/run_composer_update.jpg" alt="Run Composer Update" />
<p><b>Step 8</b> &minus; Our extension should be installed. To use it, modify the <b>About</b> view of the <b>actionAbout</b> method of the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
   $this-&gt;registerMetaTag(['name' =&gt; 'keywords', 'content' =&gt; 'yii, developing, views,
      meta, tags']);
   $this-&gt;registerMetaTag(['name' =&gt; 'description', 'content' =&gt; 'This is the
      description of this page!'], 'description');
?&gt;
&lt;div class = "site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   &lt;p&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
   &lt;h1&gt;&lt;?= HelloWorld\SayHello::world();  ?&gt;&lt;/h1&gt;
&lt;/div&gt;
</pre>
<p><b>Step 9</b> &minus; Type <b>http://localhost:8080/index.php?r=site/about</b> in the web browser. You will see a <b>hello world</b> message from our extension.</p>
<img src="https://www.tutorialspoint.com/yii/images/hello_world_message.jpg" alt="Hello World Message" />
<h1>Yii - HTTP Requests</h1>
<p>Requests are represented by the <b>yii\web\Request</b> object, which provides information about HTTP headers, request parameters, cookies, and so forth.</p>
<p>The methods <b>get()</b> and <b>post()</b> return request parameters of the request component.</p>
<p><b>Example</b> &minus;</p>
<pre class="prettyprint notranslate">
$req = Yii::$app-&gt;request;
   /*
   * $get = $_GET;
   */
   $get = $req-&gt;get();

   /*
   * if(isset($_GET['id'])) {
   *     $id = $_GET['id'];
   * } else {
   *     $id = null;
   * }
   */
   $id = $req-&gt;get('id');
	
   /*
   * if(isset($_GET['id'])) {
   *     $id = $_GET['id'];
   * } else {
   *     $id = 1;
   * }
   */
   $id = $req-&gt;get('id', 1);
	
   /*
   * $post = $_POST;
	*/
   $post = $req-&gt;post();

   /*
   * if(isset($_POST['name'])) {       
   *     $name = $_POST['name'];          
   * } else {
   *     $name = null;
   * }
   */
   $name = $req-&gt;post('name');
		  
   /*
   * if(isset($_POST['name'])) {
   *     $name = $_POST['name'];
   * } else {
   *     $name = '';
   * }
   */
   $name = $req-&gt;post('name', '');
</pre>
<p><b>Step 1</b> &minus; Add an <b>actionTestGet</b> function to the <b>SiteController</b> of the basic application template.</p>
<pre class="prettyprint notranslate">
public function actionTestGet() {
   var_dump(Yii::$app-&gt;request-&gt;get());
}
</pre>
<p><b>Step 2</b> &minus; Now go to <b>http://localhost:8080/index.php?r=site/testget&amp;id=1&amp;name=tutorialspoint&amp;message=welcome</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/actiontestget_function_output.jpg" alt="actionTestGet Function Output" />
<p>To retrieve parameters of other request methods (PATCH, DELETE, etc.), use the <b>yii\web\Request::getBodyParam()</b> method.</p>
<p>To get the HTTP method of the current request, use the <b>Yii::$app&rarr;request&rarr;method</b> property.</p>
<p><b>Step 3</b> &minus; Modify the <b>actionTestGet</b> function as shown in the following code.</p>
<pre class="prettyprint notranslate">
public function actionTestGet() {
   $req = Yii::$app-&gt;request;
   if ($req-&gt;isAjax) {
      echo "the request is AJAX";
   }
   if ($req-&gt;isGet) {
      echo "the request is GET";
   }
   if ($req-&gt;isPost) {
      echo "the request is POST";
   }
   if ($req-&gt;isPut) {
      echo "the request is PUT";
   }
}
</pre>
<p><b>Step 4</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/test-get</b>. You will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/get_request.jpg" alt="Get Request" />
<p>The request component provides many properties to inspect the requested URL.</p>
<p><b>Step 5</b> &minus; Modify the <b>actionTestGet</b> function as follows.</p>
<pre class="prettyprint notranslate">
public function actionTestGet() {
   //the URL without the host
   var_dump(Yii::$app-&gt;request-&gt;url);
   
   //the whole URL including the host path
   var_dump(Yii::$app-&gt;request-&gt;absoluteUrl);
   
   //the host of the URL
   var_dump(Yii::$app-&gt;request-&gt;hostInfo);
   
   //the part after the entry script and before the question mark
   var_dump(Yii::$app-&gt;request-&gt;pathInfo);
   
   //the part after the question mark
   var_dump(Yii::$app-&gt;request-&gt;queryString);
   
   //the part after the host and before the entry script
   var_dump(Yii::$app-&gt;request-&gt;baseUrl);
   
   //the URL without path info and query string
   var_dump(Yii::$app-&gt;request-&gt;scriptUrl);
   
   //the host name in the URL
   var_dump(Yii::$app-&gt;request-&gt;serverName);
   
   //the port used by the web server
   var_dump(Yii::$app-&gt;request-&gt;serverPort);
}
</pre>
<p><b>Step 6</b> &minus; In the address bar of the web browser, type <b>http://localhost:8080/index.php?r=site/testget&amp;id=1&amp;name=tutorialspoint&amp;message=welcome</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/modify_actiontestget_function_output.jpg" alt="Modify Actiontestget Function Output" />
<p><b>Step 7</b> &minus; To get the HTTP header information, you may use the <b>yii\web\Request::$headers</b> property. Modify the <b>actionTestGet</b> function this way.</p>
<pre class="prettyprint notranslate">
public function actionTestGet() { 
   var_dump(Yii::$app-&gt;request-&gt;headers); 
}
</pre>
<p><b>Step 8</b> &minus; If you go to the URL <b>http://localhost:8080/index.php?r=site/testget&amp;id=1&amp;name=tutorialspoint&amp;message=welcome</b>, you will see the output as shown in the following code.</p>
<img src="https://www.tutorialspoint.com/yii/images/modified_actiontestget_function_output.jpg" alt="Modified Actiontestget Function Output" />
<p>To get the host name and IP address of the client machine, use <b>userHost</b> and <b>userIP</b> properties.</p>
<p><b>Step 9</b> &minus; Modify the <b>actionTestGet</b> function this way.</p>
<pre class="prettyprint notranslate">
public function actionTestGet() {
   var_dump(Yii::$app-&gt;request-&gt;userHost);
   var_dump(Yii::$app-&gt;request-&gt;userIP);
}
</pre>
<p><b>Step 10</b> &minus; Go to the address <b>http://localhost:8080/index.php?r=site/test-get</b> and you see the following screen.</p>
<img src="https://www.tutorialspoint.com/yii/images/actiontestget_function_output_screen.jpg" alt="actionTestGet Function Output Screen" />
<h1>Yii - Responses</h1>
<p>When a web application handles a request, it generates a response object, which contains HTTP headers, body, and HTTP status code. In most cases, you will use the response application component. By default, it is an instance of <b>yii\web\Response</b>.</p>
<p>To manage response HTTP status codes, use the <b>yii\web\Response::$statusCode</b> property. The default value of <b>yii\web\Response::$statusCode</b> is 200.</p>
<p><b>Step 1</b> &minus; Add a function named <b>actionTestResponse</b> to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionTestResponse() {
   Yii::$app&rarr;response-&gt;statusCode = 201;
}
</pre>
<p><b>Step 2</b> &minus; If you point your web browser at <b>http://localhost:8080/index.php?r=site/testresponse</b>, you should notice the 201 Created response HTTP status.</p>
<img src="https://www.tutorialspoint.com/yii/images/created_response_http_status.jpg" alt="Created response HTTP status" />
<p>If you want to indicate that the request is unsuccessful, you may throw one of the predefined HTTP exceptions &minus;</p>
<ul class="list">
<li><p><b>yii\web\BadRequestHttpException</b> &minus; status code 400.</p></li>
<li><p><b>yii\web\UnauthorizedHttpException</b> &minus; status code 401.</p></li>
<li><p><b>yii\web\ForbiddenHttpException</b> &minus; status code 403.</p></li>
<li><p><b>yii\web\NotFoundHttpException</b> &minus; status code 404.</p></li>
<li><p><b>yii\web\MethodNotAllowedHttpException</b> &minus; status code 405.</p></li>
<li><p><b>yii\web\NotAcceptableHttpException</b> &minus; status code 406.</p></li>
<li><p><b>yii\web\ConflictHttpException</b> &minus; status code 409.</p></li>
<li><p><b>yii\web\GoneHttpException</b> &minus; status code 410.</p></li>
<li><p><b>yii\web\UnsupportedMediaTypeHttpException</b> &minus; status code 415.</p></li>
<li><p><b>yii\web\TooManyRequestsHttpException</b> &minus; status code 429.</p></li>
<li><p><b>yii\web\ServerErrorHttpException</b> &minus; status code 500.</p></li>
</ul>
<p><b>Step 3</b> &minus; Modify the <b>actionTestResponse</b> function as shown in the following code.</p>
<pre class="prettyprint notranslate">
public function actionTestResponse() {
   throw new \yii\web\GoneHttpException;
}
</pre>
<p><b>Step 4</b> &minus; Type <b>http://localhost:8080/index.php?r=site/test-response</b> in the address bar of the web browser, you can see the <b>410 Gone</b> response HTTP status as shown in the following image.</p>
<img src="https://www.tutorialspoint.com/yii/images/gone_response_http_status.jpg" alt="Gone Response HTTP Status" />
<p><b>Step 5</b> &minus; You can send HTTP headers by modifying the <b>headers</b> property of the response component. To add a new header to a response, modify the <b>actionTestResponse</b> function as given in the following code.</p>
<pre class="prettyprint notranslate">
public function actionTestResponse() {
   Yii::$app-&gt;response-&gt;headers-&gt;add('Pragma', 'no-cache');
}
</pre>
<p><b>Step 6</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/test-response,</b> you will see our Pragma header.</p>
<img src="https://www.tutorialspoint.com/yii/images/pragma_header.jpg" alt="Pragma header" />
<p>Yii supports the following response formats &minus;</p>
<ul class="list">
<li><p><b>HTML</b> &minus; implemented by yii\web\HtmlResponseFormatter.</p></li>
<li><p><b>XML</b> &minus; implemented by yii\web\XmlResponseFormatter.</p></li>
<li><p><b>JSON</b> &minus; implemented by yii\web\JsonResponseFormatter.</p></li>
<li><p><b>JSONP</b> &minus; implemented by yii\web\JsonResponseFormatter.</p></li>
<li><p><b>RAW</b> &minus; the response without any formatting.</p></li>
</ul>
<p><b>Step 7</b> &minus; To respond in the <b>JSON</b> format, modify the <b>actionTestResponse</b> function.</p>
<pre class="prettyprint notranslate">
public function actionTestResponse() {
   \Yii::$app-&gt;response-&gt;format = \yii\web\Response::FORMAT_JSON;
   return [
      'id' =&gt; '1',
      'name' =&gt; 'Ivan',
      'age' =&gt; 24,
      'country' =&gt; 'Poland',
      'city' =&gt; 'Warsaw'
   ];
}
</pre>
<p><b>Step 8</b> &minus; Now, type <b>http://localhost:8080/index.php?r=site/test-response</b> in the address bar, you can see the following <b>JSON</b> response.</p>
<img src="https://www.tutorialspoint.com/yii/images/json_response.jpg" alt="JSON response" />
<p>Yii implements a browser redirection by sending a Location HTTP header. You can call the <b>yii\web\Response::redirect()</b> method to redirect the user browser to a URL.</p>
<p><b>Step 9</b> &minus; Modify the <b>actionTestResponse</b> function this way.</p>
<pre class="prettyprint notranslate">
public function actionTestResponse() {
   return $this-&gt;redirect('http://www.tutorialspoint.com/');
}
</pre>
<p>Now, if you go to <b>http://localhost:8080/index.php?r=site/test-response,</b> your browser will be redirected at the <b>TutorialsPoint</b> web site.</p>
<h2>Sending Files</h2>
<p>Yii provides the following methods to support file sending &minus;</p>
<ul class="list">
<li><p><b>yii\web\Response::sendFile()</b> &minus; Sends an existing file.</p></li>
<li><p><b>yii\web\Response::sendStreamAsFile()</b> &minus; Sends an existing file stream as a file.</p></li>
<li><p><b>yii\web\Response::sendContentAsFile()</b> &minus; Sends a text string as a file.</p></li>
</ul>
<p>Modify the  actionTestResponse function this way &minus;</p>
<pre class="prettyprint notranslate">
public function actionTestResponse() {
   return \Yii::$app-&gt;response-&gt;sendFile('favicon.ico');
}
</pre>
<p>Type <b>http://localhost:8080/index.php?r=site/test-response</b>, you will see a download dialog window for the <b>favicon.ico</b> file &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/favicon_ico_file.jpg" alt="favicon.ico File" />
<p>The response is not sent until the <b>yii\web\Response::send()</b> function is called. By default, this method is called at the end of the <b>yii\base\Application::run()</b> method. To send a response, the <b>yii\web\Response::send()</b> method follows these steps &minus;</p>
<ul class="list">
<li>Triggers the yii\web\Response::EVENT_BEFORE_SEND event.</li>
<li>Calls the yii\web\Response::prepare() method.</li>
<li>Triggers the yii\web\Response::EVENT_AFTER_PREPARE event.</li>
<li>Calls the yii\web\Response::sendHeaders() method.</li>
<li>Calls the yii\web\Response::sendContent() method.</li>
<li>Triggers the yii\web\Response::EVENT_AFTER_SEND event.</li>
</ul>
<h1>Yii - URL Formats</h1>
<p>When a Yii application processes a requested URL, first, it parses the URL into a route. Then, to handle the request, this route is used to instantiate the corresponding controller action. This process is called <b>routing</b>. The reverse process is called URL creation. The <b>urlManager</b> application component is responsible for routing and URL creation. It provides two methods &minus;</p>
<ul class="list">
<li><p><b>parseRequest()</b> &minus; Parses a request into a route.</p></li>
<li><p><b>createUrl()</b> &minus; Creates a URL from a given route.</p></li>
</ul>
<h2>URL Formats</h2>
<p>The <b>urlManager</b> application component supports two URL formats &minus;</p>
<ul class="list">
<li><p>The default format uses a query parameter <i>r</i> to represent the route. For example, the URL <b>/index.php?r=news/view&amp;id=5</b> represents the route <b>news/view</b> and the <b>id</b> query parameter 5.</p></li>
<li><p>The pretty URL format uses the extra path with the entry script name. For example, in the previous example, pretty format would be <b>/index.php/news/view/5</b>. To use this format you need to set the URL rules.</p></li>
</ul>
<p>To enable the pretty URL format and hide the entry script name, follow these steps &minus;</p>
<p><b>Step 1</b> &minus; Modify the <b>config/web.php</b> file in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) -
               //this is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'urlManager' =&gt; [ 
            'showScriptName' =&gt; false, 
            'enablePrettyUrl' =&gt; true 
         ], 
         'db' =&gt; require(__DIR__ . '/db.php'), 
      ], 
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>We have just enabled the <b>pretty URL format</b> and have disabled the entry script name.</p>
<p><b>Step 2</b> &minus; Now, if you type <b>http://localhost:8080/site/about</b> in the address bar of the web browser, you will see the pretty URL in action.</p>
<img src="https://www.tutorialspoint.com/yii/images/pretty_url.jpg" alt="Pretty URL" />
<p>Notice, that the URL is no more <b>http://localhost:8080/index.php?r=site/about</b>.</p>
<h1>Yii - URL Routing</h1>
<p>To change the default route of the application, you should configure the <b>defaultRoute</b> property.</p>
<p><b>Step 1</b> &minus; Modify the <b>config/web.php</b> file in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'defaultRoute' =&gt; 'site/contact',
      'components' =&gt; [
         //other code
?&gt;
</pre>
<p><b>Step 2</b> &minus; Got to <b>http://localhost:8080/index.php</b>. You will see the default <b>contact</b> page.</p>
<img src="https://www.tutorialspoint.com/yii/images/contact_page.jpg" alt="Contact Page" />
<p>To put your application in maintenance mode temporarily, you should configure the <b>yii\web\Application::$catchAll</b> property.</p>
<p><b>Step 3</b> &minus; Add the following function to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionMaintenance() {
   echo "&lt;h1&gt;Maintenance&lt;/h1&gt;";
}
</pre>
<p><b>Step 4</b> &minus; Then, modify the <b>config/web.php</b> file in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'catchAll' =&gt; ['site/maintenance'],
      'components' =&gt; [
         //OTHER CODE
</pre>
<p><b>Step 5</b> &minus; Now enter any URL of your application, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/maintenance.jpg" alt="Maintenance" />
<h2>Creating URLs</h2>
<p>To create various kinds of URLs you may use the <b>yii\helpers\Url::to()</b> helper method. The following example assumes the default URL format is being used.</p>
<p><b>Step 1</b> &minus; Add an <b>actionRoutes()</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionRoutes() {
   return $this-&gt;render('routes');
}
</pre>
<p>This method simply renders the <b>routes</b> view.</p>
<p><b>Step 2</b> &minus; Inside the views/site directory, create a file called <b>routes.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\helpers\Url;
?&gt;

&lt;h4&gt;
   &lt;b&gt;Url::to(['post/index']):&lt;/b&gt;
   &lt;?php
      // creates a URL to a route: /index.php?r = post/index
      echo Url::to(['post/index']);
   ?&gt;
&lt;/h4&gt;

&lt;h4&gt;
   &lt;b&gt;Url::to(['post/view', 'id' =&gt; 100]):&lt;/b&gt;
   &lt;?php
      // creates a URL to a route with parameters: /index.php?r = post/view&amp;id=100
      echo Url::to(['post/view', 'id' =&gt; 100]);
   ?&gt;
&lt;/h4&gt;

&lt;h4&gt;
   &lt;b&gt;Url::to(['post/view', 'id' =&gt; 100, '#' =&gt; 'content']):&lt;/b&gt;
   &lt;?php
      // creates an anchored URL: /index.php?r = post/view&amp;id=100#content
      echo Url::to(['post/view', 'id' =&gt; 100, '#' =&gt; 'content']);
   ?&gt;
&lt;/h4&gt;

&lt;h4&gt;
   &lt;b&gt;Url::to(['post/index'], true):&lt;/b&gt;
   &lt;?php
      // creates an absolute URL: http://www.example.com/index.php?r=post/index
      echo Url::to(['post/index'], true);
   ?&gt;
&lt;/h4&gt;

&lt;h4&gt;
   &lt;b&gt;Url::to(['post/index'], 'https'):&lt;/b&gt;
   &lt;?php
      // creates an absolute URL using the https scheme: https://www.example.com/index.php?r=post/index
      echo Url::to(['post/index'], 'https');
   ?&gt;
&lt;/h4&gt;
</pre>
<p><b>Step 3</b> &minus; Type <b>http://localhost:8080/index.php?r=site/routes</b>, you will see some uses of the <b>to()</b> function.</p>
<img src="https://www.tutorialspoint.com/yii/images/to_funtion.jpg" alt="to Function" />
<p>The route passed to the <b>yii\helpers\Url::to()</b> method can be relative or absolute according to the following rules &minus;</p>
<ul class="list">
<li><p>if the route is empty, the currently requested route will be used.</p></li>
<li><p>if the route has no leading slash, it is considered to be a route relative to the current module.</p></li>
<li><p>if the route contains no slashes, it is considered to be an action ID of the current controller.</p></li>
</ul>
<p>The <b>yii\helpers\Url</b> helper class also provides several useful methods.</p>
<p><b>Step 4</b> &minus; Modify the <b>routes</b> View as given in the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\helpers\Url;
?&gt;

&lt;h4&gt;
   &lt;b&gt;Url::home():&lt;/b&gt;
   &lt;?php
      // home page URL: /index.php?r=site/index
      echo Url::home();
   ?&gt;
&lt;/h4&gt;
 
&lt;h4&gt;
   &lt;b&gt;Url::base():&lt;/b&gt;
   &lt;?php
      // the base URL, useful if the application is deployed in a sub-folder of the Web root
      echo Url::base();
   ?&gt;
&lt;/h4&gt;
 
&lt;h4&gt;
   &lt;b&gt;Url::canonical():&lt;/b&gt;
   &lt;?php
      // the canonical URL of the currently requested URL
      // see https://en.wikipedia.org/wiki/Canonical_link_element
      echo Url::canonical();
   ?&gt;
&lt;/h4&gt;
 
&lt;h4&gt;
   &lt;b&gt;Url::previous():&lt;/b&gt;
   &lt;?php
      // remember the currently requested URL and retrieve it back in later requests
      Url::remember();
      echo Url::previous();
   ?&gt;
&lt;/h4&gt;
</pre>
<p><b>Step 5</b> &minus; If you enter the address <b>http://localhost:8080/index.php?r=site/routes</b> in the web browser,  you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/modified_routes_view_output.jpg" alt="Modified Routes View Outputs" />
<h1>Yii - Rules of URL</h1>
<p>A URL rule is an instance if <b>yii\web\UrlRule</b>. The <b>urlManager</b> components uses the URL rules declared in its <b>rules</b> property when the pretty URL format is enabled.</p>
<p>To parse a request, the URL manager obtains the rules in the order they are declared and looks for the first rule.</p>
<p><b>Step 1</b> &minus; Modify the <b>urlManager</b> component in the <b>config/web.php</b> file.</p>
<pre class="prettyprint notranslate">
'urlManager' =&gt; [
   'showScriptName' =&gt; false,
   'enablePrettyUrl' =&gt; true,
   'rules' =&gt; [
      'about' =&gt; 'site/about',
   ]
],
</pre>
<p><b>Step 2</b> &minus; Go to your web browser at <b>http://localhost:8080/about,</b> you will see the about page.</p>
<img src="https://www.tutorialspoint.com/yii/images/modified_urlmanager_component.jpg" alt="Modified urlManager Component" />
<p>A URL rule can be associated with query parameters in this pattern &minus;</p>
<p>&lt;ParamName:RegExp&gt;, where &minus;</p>
<ul class="list">
<li><p><b>ParamName</b> &minus; The parameter name</p></li>
<li><p><b>RegExp</b> &minus; An optional regular expression used to match parameter values</p></li>
</ul>
<p>Suppose, we have declared the following URL rules &minus;</p>
<pre class="prettyprint notranslate">
[
   'articles/&lt;year:\d{4}&gt;/&lt;category&gt;' =&gt; 'article/index',
   'articles' =&gt; 'article/index',
   'article/&lt;id:\d+&gt;' =&gt; 'article/view',
]
</pre>
<p>When the rules are used for <b>parsing</b> &minus;</p>
<ul class="list">
<li>/index.php/articles is parsed into the article/index</li>
<li>/index.php/articles/2014/php is parsed into the article/index</li>
<li>/index.php/article/100 is parsed into the article/view</li>
<li>/index.php/articles/php is parsed into articles/php</li>
</ul>
<p>When the rules are used for <b>creating URLs</b> &minus;</p>
<ul class="list">
<li><p>Url::to(['article/index']) creates /index.php/articles</p></li>
<li><p>Url::to(['article/index', 'year' =&gt; 2014, 'category' =&gt; 'php']) creates /index.php/articles/2014/php</p></li>
<li><p>Url::to(['article/view', 'id' =&gt; 100]) creates /index.php/article/100</p></li>
<li><p>Url::to(['article/view', 'id' =&gt; 100, 'source' =&gt; 'ad']) creates /index.php/article/100?source=ad</p></li>
<li><p>Url::to(['article/index', 'category' =&gt; 'php']) creates /index.php/article/index?category=php</p></li>
</ul>
<p>To add a suffix to the URL, you should configure the <b>yii\web\UrlManager::$suffix</b> property.</p>
<p><b>Step 3</b> &minus; Modify the <b>urlComponent</b> in the <b>config/web.php</b> file.</p>
<pre class="prettyprint notranslate">
'urlManager' =&gt; [
   'showScriptName' =&gt; false,
   'enablePrettyUrl' =&gt; true,
   'enableStrictParsing' =&gt; true,
   'suffix' =&gt; '.html'
],
</pre>
<p><b>Step 4</b> &minus; Type the address <b>http://localhost:8080/site/contact.html</b> in the address bar of the web browser and you will see the following on your screen. Notice the <b>html</b> suffix.</p>
<img src="https://www.tutorialspoint.com/yii/images/notice_html_suffix.jpg" alt="Notice HTML Suffix" />
<h1>Yii - HTML Forms</h1>
<p>When a form is based upon a model, the common way of creating this form in Yii is via the <b>yii\widgets\ActiveForm</b> class. In most cases, a form has a corresponding model which is used for data validation. If the model represents data from a database, then the model should be derived from the <b>ActiveRecord</b> class. If the model captures arbitrary input, it should be derived from the <b>yii\base\Model</b> class.</p>
<p>Let us create a registration form.</p>
<p><b>Step 1</b> &minus; Inside the <b>models</b> folder, create a file called <b>RegistrationForm.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use Yii;
   use yii\base\Model;
   class RegistrationForm extends Model {
      public $username;
      public $password;
      public $email;
      public $subscriptions;
      public $photos;
      /**
      * @return array customized attribute labels
      */
      public function attributeLabels() {
         return [
            'username' =&gt; 'Username',
            'password' =&gt; 'Password',
            'email' =&gt; 'Email',
            'subscriptions' =&gt; 'Subscriptions',
            'photos' =&gt; 'Photos',
         ];
      }
   }
?&gt;
</pre>
<p>We have declared a model for our registration form with five properties &minus; username, password, email, subscriptions, and photos.</p>
<p><b>Step 2</b> &minus; To display this form, add the <b>actionRegistration</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionRegistration() {
   $mRegistration = new RegistrationForm();
   return $this-&gt;render('registration', ['model' =&gt; $mRegistration]);
}
</pre>
<p>We create an instance of the <b>RegistrationForm</b> and pass it to the registration view. Now, it is time to create a view.</p>
<p><b>Step 3</b> &minus; Inside the views/site folder, add a file called <b>registration.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\bootstrap\ActiveForm;
   use yii\bootstrap\Html;
?&gt;
&lt;div class = "row"&gt;
   &lt;div class = "col-lg-5"&gt;
      &lt;?php $form = ActiveForm::begin(['id' =&gt; 'registration-form']); ?&gt;
      &lt;?= $form-&gt;field($model, 'username') ?&gt;
      &lt;?= $form-&gt;field($model, 'password')-&gt;passwordInput() ?&gt;
      &lt;?= $form-&gt;field($model, 'email')-&gt;input('email') ?&gt;
      &lt;?= $form-&gt;field($model, 'photos[]')-&gt;fileInput(['multiple'=&gt;'multiple']) ?&gt;
      &lt;?= $form-&gt;field($model, 'subscriptions[]')-&gt;checkboxList(['a' =&gt; 'Item A',
         'b' =&gt; 'Item B', 'c' =&gt; 'Item C']) ?&gt;
      &lt;div class = "form-group"&gt;
         &lt;?= Html::submitButton('Submit', ['class' =&gt; 'btn btn-primary',
            'name' =&gt; 'registration-button']) ?&gt;
      &lt;/div&gt;
      &lt;?php ActiveForm::end(); ?&gt;
   &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>We observe the following &minus;</p>
<ul class="list">
<li><p>The <b>ActiveForm::begin()</b> function marks the beginning of the form. All the code between <b>ActiveForm::begin()</b> and <b>ActiveForm::end()</b> functions will be wrapped within the <b>form</b> tag.</p></li>
<li><p>To create a field in the form you should call the <b>ActiveForm::field()</b> method. It creates all the <b>input and label</b> tags. Input names are determined automatically.</p></li>
<li><p>For example, the <b>password</b> attribute will be <b><i>RegistrationForm[password]</i></b>. If you want an attribute to take an array, you should append [ ] to the attribute name.</p></li>
</ul>
<p><b>Step 4</b> &minus; If you go to the address bar of the web browser and type <b>http://localhost:8080/index.php?r=site/registration</b>, you will see our form.</p>
<img src="https://www.tutorialspoint.com/yii/images/registration.jpg" alt="Registration" />
<h1>Yii - Validation</h1>
<p>You should never trust the data received from users. To validate a model with user inputs, you should call <b>yii\base\Model::validate()</b> method. It returns a Boolean value if the validation succeeds. If there are errors, you may get them from the <b>yii\base\Model::$errors</b> property.</p>
<h2>Using Rules</h2>
<p>To make the <b>validate()</b> function work, you should override the <b>yii\base\Model::rules()</b> method.</p>
<p><b>Step 1</b> &minus; The <b>rules()</b> method returns an array in the following format.</p>
<pre class="prettyprint notranslate">
[
   // required, specifies which attributes should be validated
   ['attr1', 'attr2', ...],
   // required, specifies the type a rule.
   'type_of_rule',
   // optional, defines in which scenario(s) this rule should be applied
   'on' =&gt; ['scenario1', 'scenario2', ...],
   // optional, defines additional configurations
   'property' =&gt; 'value', ...
]
</pre>
<p>For each rule, you should define at least which attributes the rule applies to and the type of rule applied.</p>
<p>The core validation rules are &minus; <b>boolean, captcha, compare, date, default, double, each, email, exist, file, filter, image, ip, in, integer, match, number, required, safe, string, trim, unique, url.</b></p>
<p><b>Step 2</b> &minus; Create a new model in the <b>models</b> folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use Yii;
   use yii\base\Model;
   class RegistrationForm extends Model {
      public $username;
      public $password;
      public $email;
      public $country;
      public $city;
      public $phone;
      public function rules() {
         return [
            // the username, password, email, country, city, and phone attributes are
            //required
            [['username' ,'password', 'email', 'country', 'city', 'phone'], 'required'],
            // the email attribute should be a valid email address
            ['email', 'email'],
         ];
      }
   }
?&gt;
</pre>
<p>We have declared the model for the registration form. The model has five properties &minus; username, password, email, country, city, and phone. They are all required and the email property must be a valid email address.</p>
<p><b>Step 3</b> &minus; Add the <b>actionRegistration</b> method to the <b>SiteController</b> where we create a new <b>RegistrationForm</b> model and pass it to a view.</p>
<pre class="prettyprint notranslate">
public function actionRegistration() {
   $model = new RegistrationForm();
   return $this-&gt;render('registration', ['model' =&gt; $model]);
}
</pre>
<p><b>Step 4</b> &minus; Add a view for our registration form. Inside the views/site folder, create a file called registration.php with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\bootstrap\ActiveForm;
   use yii\bootstrap\Html;
?&gt;

&lt;div class = "row"&gt;
   &lt;div class = "col-lg-5"&gt;
      &lt;?php $form = ActiveForm::begin(['id' =&gt; 'registration-form']); ?&gt;
         &lt;?= $form-&gt;field($model, 'username') ?&gt;
         &lt;?= $form-&gt;field($model, 'password')-&gt;passwordInput() ?&gt;
         &lt;?= $form-&gt;field($model, 'email')-&gt;input('email') ?&gt;
         &lt;?= $form-&gt;field($model, 'country') ?&gt;
         &lt;?= $form-&gt;field($model, 'city') ?&gt;
         &lt;?= $form-&gt;field($model, 'phone') ?&gt;
         &lt;div class = "form-group"&gt;
            &lt;?= Html::submitButton('Submit', ['class' =&gt; 'btn btn-primary',
               'name' =&gt; 'registration-button']) ?&gt;
         &lt;/div&gt;
      &lt;?php ActiveForm::end(); ?&gt;
   &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>We are using the <b>ActiveForm</b> widget for displaying our registration form.</p>
<p><b>Step 5</b> &minus; If you go to the local host <b>http://localhost:8080/index.php?r=site/registration</b> and click the submit button, you will see validation rules in action.</p>
<img src="https://www.tutorialspoint.com/yii/images/validation_rules.jpg" alt="Validation Rules" />
<p><b>Step 6</b> &minus; To customize the error message for the <b>username</b> property, modify the <b>rules()</b> method of the <b>RegistrationForm</b> in the following way.</p>
<pre class="prettyprint notranslate">
public function rules() {
   return [
      // the username, password, email, country, city, and phone attributes are required
      [['password', 'email', 'country', 'city', 'phone'], 'required'],
      <b>['username', 'required', 'message' =&gt; 'Username is required'],</b>
      // the email attribute should be a valid email address
      ['email', 'email'],
   ];
}
</pre>
<p><b>Step 7</b> &minus; Go to the local host <b>http://localhost:8080/index.php?r=site/registration</b> and click the submit button. You will notice that the error message of the username property has changed.</p>
<img src="https://www.tutorialspoint.com/yii/images/change_username_property.jpg" alt="Change Username Property" />
<p><b>Step 8</b> &minus; To customize the validation process, you may override these methods.</p>
<ul class="list">
<li><p>yii\base\Model::beforeValidate(): triggers a</p>
<p>yii\base\Model::EVENT_BEFORE_VALIDATE event.</p></li>
<li><p>yii\base\Model::afterValidate(): triggers a</p>
<p>yii\base\Model::EVENT_AFTER_VALIDATE event.</p></li>
</ul>
<p><b>Step 9</b> &minus; To trim the spaces around the country property and turn empty input of the city property into a null, you may the <b>trim</b> and <b>default</b> validators.</p>
<pre class="prettyprint notranslate">
public function rules() {
   return [
      // the username, password, email, country, city, and phone attributes are required
      [['password', 'email', 'country', 'city', 'phone'], 'required'],
      ['username', 'required', 'message' =&gt; 'Username is required'],
      <b>['country', 'trim'],
      ['city', 'default'],</b>
      // the email attribute should be a valid email address
      ['email', 'email'],
   ];
}
</pre>
<p><b>Step 10</b> &minus; If an input is empty, you can set a default value for it.</p>
<pre class="prettyprint notranslate">
public function rules() {
   return [
      ['city', 'default', 'value' =&gt; 'Paris'],
   ];
}
</pre>
<p>If the city property is empty, then the default “Paris” value will be used.</p>
<h1>Yii - Ad Hoc Validation</h1>
<p>Sometimes you need to validate values that are not bound to any model. You can use the <b>yii\base\DynamicModel</b> class, which supports defining both attributes and rules on the fly.</p>
<p><b>Step 1</b> &minus; Add the <b>actionAdHocValidation</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionAdHocValidation() {
   $model = DynamicModel::validateData([
      'username' =&gt; 'John',
      'email' =&gt; 'john@gmail.com'
   ], [
      [['username', 'email'], 'string', 'max' =&gt; 12],
      ['email', 'email'],
   ]);
	
   if ($model-&gt;hasErrors()) {
      var_dump($model-&gt;errors);
   } else {
      echo "success";
   }
}
</pre>
<p>In the above code, we define a <b>“dynamic”</b> model with username and email attributes and validate them.</p>
<p><b>Step 2</b> &minus; Type <b>http://localhost:8080/index.php?r=site/ad-hoc-validation</b> in the address bar of the web browser, you will see an error message because our email is 14 characters long.</p>
<img src="https://www.tutorialspoint.com/yii/images/fourteen_characters_long.jpg" alt="Fourteen Character Long" />
<h2>Custom Validators</h2>
<p>There are two types of custom validators &minus;</p>
<ul class="list">
<li>Inline validators</li>
<li>Standalone validators</li>
</ul>
<p>An inline validator is defined by a model method or an anonymous function. If an attribute fails the validation, you should call the <b>yii\base\Model::addError()</b> method to save the error message.</p>
<p>The following example of the <b>RegistrationForm</b> validates the city property, so it can accept only two values – London and Paris.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use Yii;
   use yii\base\Model;
   class RegistrationForm extends Model {
      public $username;
      public $password;
      public $email;
      public $country;
      public $city;
      public $phone;
      public function rules() {
         return [
            ['city', 'validateCity']
         ];
      }
      public function validateCity($attribute, $params) {
         if (!in_array($this-&gt;$attribute, ['Paris', 'London'])) {
            $this-&gt;addError($attribute, 'The city must be either "London" or "Paris".');
         }
      }
   }
?&gt;
</pre>
<p>A standalone validator extends the <b>yii\validators\Validator</b> class. To implement the validation logic, you should override the <b>yii\validators\Validator::validateAttribute()</b> method.</p>
<p><b>Step 1</b> &minus; To implement the previous example using the standalone validator, add a <b>CityValidator.php</b> file to the <b>components</b> folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\components;
   use yii\validators\Validator;
   class CityValidator extends Validator {
      public function validateAttribute($model, $attribute) {
         if (!in_array($model-&gt;$attribute, ['Paris', 'London'])) {
            $this-&gt;addError($model, $attribute, 'The city must be either "Paris"
               or "London".');
         }
      }
   }
?&gt;
</pre>
<p><b>Step 2</b> &minus; Then, modify the <b>RegistrationForm</b> model this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use app\components\CityValidator;
   use Yii;
   use yii\base\Model;
   class RegistrationForm extends Model {
      public $username;
      public $password;
      public $email;
      public $country;
      public $city;
      public $phone;
      public function rules() {
         return [
            ['city', CityValidator::className()]
         ];
      }
   }
?&gt;
</pre>
<h1>Yii - AJAX Validation</h1>
<p>The username validation should only be done on the server side because only the server has the needed information. In this case, you can use AJAX-based validation.</p>
<p><b>Step 1</b> &minus; To enable the AJAX validation, modify the <b>registration</b> view this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\bootstrap\ActiveForm;
   use yii\bootstrap\Html;
?&gt;
  
&lt;div class = "row"&gt;
   &lt;div class = "col-lg-5"&gt;  
   
      &lt;?php <b>$form = ActiveForm::begin(['id' =&gt; 'registration-form', 
         'enableAjaxValidation' =&gt; true]);</b> ?&gt;  
      &lt;?= $form-&gt;field($model, 'username') ?&gt;  
      &lt;?= $form-&gt;field($model, 'password')-&gt;passwordInput() ?&gt;  
      &lt;?= $form-&gt;field($model, 'email')-&gt;input('email') ?&gt;  
      &lt;?= $form-&gt;field($model, 'country') ?&gt;  
      &lt;?= $form-&gt;field($model, 'city') ?&gt;  
      &lt;?= $form-&gt;field($model, 'phone') ?&gt;  
      &lt;div class = "form-group"&gt;             
         &lt;?= Html::submitButton('Submit', ['class' =&gt; 'btn btn-primary', 
            'name' =&gt; 'registration-button']) ?&gt;
      &lt;/div&gt;
      
      &lt;?php ActiveForm::end(); ?&gt;  
   &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>We should also prepare the server, so that it can handle the AJAX requests.</p>
<p><b>Step 2</b> &minus; Modify the <b>actionRegistration</b> method of the <b>SiteController</b> this way.</p>
<pre class="prettyprint notranslate">
public function actionRegistration() { 
   $model = new RegistrationForm(); 
   if (Yii::$app-&gt;request-&gt;isAjax &amp;&amp; $model-&gt;load(Yii::$app-&gt;request&gt;post())) { 
      Yii::$app-&gt;response-&gt;format = Response::FORMAT_JSON; 
      return ActiveForm::validate($model); 
   } 
   return $this-&gt;render('registration', ['model' =&gt; $model]); 
}
</pre>
<p><b>Step 3</b> &minus; Now, go to <b>http://localhost:8080/index.php?r=site/registration</b>, you will notice that the form validation is done by AJAX requests.</p>
<img src="https://www.tutorialspoint.com/yii/images/ajax_requests.jpg" alt="Ajax Requests" />
<h1>Yii - Sessions</h1>
<p>Sessions make data accessible across various pages. A session creates a file on the server in a temporary directory where all session variables are stored. This data is available to all the pages of your web site during the visit of that particular user.</p>
<p>When a session starts, the following happens &minus;</p>
<ul class="list">
<li><p>PHP creates a unique ID for that particular session.</p></li>
<li><p>A cookie called PHPSESSID is sent on the client side (to the browser).</p></li>
<li><p>The server creates a file in the temporary folder where all session variables are saved.</p></li>
<li><p>When a server wants to retrieve the value from a session variable, PHP automatically gets the unique session ID from the PHPSESSID cookie. Then, it looks in its temporary directory for the needed file.</p></li>
</ul>
<p>To start a session, you should call the <b>session_start()</b> function. All session variables are stored in the <b>$_SESSION</b> global variable. You can also use the <b>isset()</b> function to check whether the session variable is set &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   session_start();
   if( isset( $_SESSION['number'] ) ) {
      $_SESSION['number'] += 1;
   }else {
      $_SESSION['number'] = 1;
   }
   $msg = "This page was visited ".  $_SESSION['number'];
   $msg .= "in this session.";
   echo $msg;
?&gt;
</pre>
<p>To destroy a session, you should call the <b>session_destroy()</b> function. To destroy a single session variable, call the <b>unset()</b> function &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   unset($_SESSION['number']);
   session_destroy();
?&gt;
</pre>
<h2>Using Sessions in Yii</h2>
<p>Sessions allow data to be persisted across user requests. In PHP, you may access them through the <b>$_SESSION</b> variable. In Yii, you can get access to sessions via the session application component.</p>
<p><b>Step 1</b> &minus; Add the <b>actionOpenAndCloseSession</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionOpenAndCloseSession() {
   $session = Yii::$app-&gt;session;
   // open a session
   $session-&gt;open();
   // check if a session is already opened
   if ($session-&gt;isActive) echo "session is active";
   // close a session
   $session-&gt;close();
   // destroys all data registered to a session
   $session-&gt;destroy();
}
</pre>
<p>In the above code, we get the session application component, open a session, check whether it is active, close the session, and finally destroy it.</p>
<p><b>Step 2</b> &minus; Type <b>http://localhost:8080/index.php?r=site/open-and-close-session</b> in the address bar of the web browser, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/session_active.jpg" alt="Session Active" />
<p>To access session variables, you may use <b>set()</b> and <b>get()</b> methods.</p>
<p><b>Step 3</b> &minus; Add an <b>actionAccessSession</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionAccessSession() {

   $session = Yii::$app-&gt;session;
	
   // set a session variable
   $session-&gt;set('language', 'ru-RU');
	
   // get a session variable
   $language = $session-&gt;get('language');
   var_dump($language);
		  
   // remove a session variable
   $session-&gt;remove('language');
		  
   // check if a session variable exists
   if (!$session-&gt;has('language')) echo "language is not set";
		  
   $session['captcha'] = [
      'value' =&gt; 'aSBS23',
      'lifetime' =&gt; 7200,
   ];
   var_dump($session['captcha']);
}
</pre>
<p><b>Step 4</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/access-session</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/access_session.jpg" alt="Action Session" />
<h1>Yii - Using Flash Data</h1>
<p>Yii provides a concept of flash data. Flash data is a session data which &minus;</p>
<ul class="list">
<li>Is set in one request.</li>
<li>Will only be available on the next request.</li>
<li>Will be automatically deleted afterwards.</li>
</ul>
<p><b>Step 1</b> &minus; Add an <b>actionShowFlash</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionShowFlash() {
   $session = Yii::$app-&gt;session;
   // set a flash message named as "greeting"
   $session-&gt;setFlash('greeting', 'Hello user!');
   return $this-&gt;render('showflash');
}
</pre>
<p><b>Step 2</b> &minus; Inside the views/site folder, create a View file called <b>showflash.php</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\bootstrap\Alert;
   echo Alert::widget([
      'options' =&gt; ['class' =&gt; 'alert-info'],
      'body' =&gt; Yii::$app-&gt;session-&gt;getFlash('greeting'),
   ]);
?&gt;
</pre>
<p><b>Step 3</b> &minus; When you type <b>http://localhost:8080/index.php?r=site/show-flash</b> in the address bar of the web browser, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/showflash_php_file.jpg" alt="showflash php file" />
<p>Yii also provides the following session classes &minus;</p>
<ul class="list">
<li><p><b>yii\web\CacheSession</b> &minus; Stores session information in a cache.</p></li>
<li><p><b>yii\web\DbSession</b> &minus; Stores session information in a database.</p></li>
<li><p><b>yii\mongodb\Session</b> &minus; Stores session information in a MongoDB.</p></li>
<li><p><b>yii\redis\Session</b> &minus; Stores session information using redis database.</p></li>
</ul>
<h1>Yii - Cookies</h1>
<p>Cookies are plain text files stored on the client side. You can use them for tracking purpose.</p>
<p>There are three steps to identify a returning user &minus;</p>
<ul class="list">
<li><p>Server sends a set of cookies to the client (browser). For example, id or token.</p></li>
<li><p>Browser stores it.</p></li>
<li><p>Next time a browser sends a request to the web server, it also sends those cookies, so that the server can use that information to identify the user.</p></li>
</ul>
<p>Cookies are usually set in an HTTP header as shown in the following code.</p>
<pre class="prettyprint notranslate">
HTTP/1.1 200 OK
Date: Fri, 05 Feb 2015 21:03:38 GMT
Server: Apache/1.3.9 (UNIX) PHP/4.0b3
Set-Cookie: name = myname; expires = Monday, 06-Feb-16 22:03:38 GMT;
   path = /; domain = tutorialspoint.com 
Connection: close
Content-Type: text/html
</pre>
<p>PHP provides the <b>setcookie()</b> function to set cookies &minus;</p>
<pre class="result notranslate">
setcookie(name, value, expire, path, domain, security);
</pre>
<p>where &minus;</p>
<ul class="list">
<li><p><b>name</b> &minus; Sets the name of the cookie and is stored in an environment variable called HTTP_COOKIE_VARS.</p></li>
<li><p><b>value</b> &minus; Sets the value of the named variable.</p></li>
<li><p><b>expiry</b> &minus; Specifies a future time in seconds since 00:00:00 GMT on 1st Jan 1970. After this time cookie will become inaccessible.</p></li>
<li><p><b>path</b> &minus; Specifies the directories for which the cookie is valid.</p></li>
<li><p><b>domain</b> &minus; This can be used to define the domain name in very large domains. All cookies are only valid for the host and domain which created them.</p></li>
<li><p><b>security</b> &minus; If set to, it means that the cookie should only be sent by HTTPS, otherwise, when set to 0, cookie can be sent by regular HTTP.</p></li>
</ul>
<p>To access cookies in PHP, you may use the <b>$_COOKIE or $HTTP_COOKIE_VARS</b> variables.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   echo $_COOKIE["token"]. "&lt;br /&gt;"; 
   /* is equivalent to */ 
   echo $HTTP_COOKIE_VARS["token"]. "&lt;br /&gt;"; 
   echo $_COOKIE["id"] . "&lt;br /&gt;"; 
   /* is equivalent to */ 
   echo $HTTP_COOKIE_VARS["id"] . "&lt;br /&gt;"; 
?&gt;
</pre>
<p>To delete a cookie, you should set the cookie with a date that has already expired.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   setcookie( "token", "", time()- 60, "/","", 0); 
   setcookie( "id", "", time()- 60, "/","", 0); 
?&gt;
</pre>
<h1>Yii - Using Cookies</h1>
<p>Cookies allow data to be persisted across requests. In PHP, you may access them through the <b>$_COOKIE</b> variable. Yii represents cookie as an object of the <b>yii\web\Cookie</b> class. In this chapter, we describe several methods for reading cookies.</p>
<p><b>Step 1</b> &minus; Create an <b>actionReadCookies</b> method in the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionReadCookies() { 
   // get cookies from the "request" component 
   $cookies = Yii::$app-&gt;request-&gt;cookies; 
   // get the "language" cookie value 
   // if the cookie does not exist, return "ru" as the default value 
   $language = $cookies-&gt;getValue('language', 'ru'); 
   // an alternative way of getting the "language" cookie value 
   if (($cookie = $cookies-&gt;get('language')) !== null) { 
      $language = $cookie-&gt;value; 
   } 
   // you may also use $cookies like an array 
   if (isset($cookies['language'])) { 
      $language = $cookies['language']-&gt;value; 
   } 
   // check if there is a "language" cookie 
   if ($cookies-&gt;has('language')) echo "Current language: $language"; 
}
</pre>
<p><b>Step 2</b> &minus; To see sending cookies in action, create a method called <b>actionSendCookies</b> in the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionSendCookies() { 
   // get cookies from the "response" component 
   $cookies = Yii::$app-&gt;response-&gt;cookies; 
   // add a new cookie to the response to be sent 
   $cookies-&gt;add(new \yii\web\Cookie([ 
      'name' =&gt; 'language', 
      'value' =&gt; 'ru-RU', 
   ])); 
   $cookies-&gt;add(new \yii\web\Cookie([
      'name' =&gt; 'username', 
      'value' =&gt; 'John', 
   ])); 
   $cookies-&gt;add(new \yii\web\Cookie([ 
      'name' =&gt; 'country', 
      'value' =&gt; 'USA', 
   ])); 
} 
</pre>
<p><b>Step 3</b> &minus; Now, if you go to <b>http://localhost:8080/index.php?r=site/send-cookies</b>, you will notice that cookies are saved inside the browser.</p>
<img src="https://www.tutorialspoint.com/yii/images/save_cookies.jpg" alt="Save Cookies" />
<p>In Yii, by default, cookie validation is enabled. It protects the cookies from being modified on the client side. The hash string from the config/web.php file signs each cookie.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   $params = require(__DIR__ . '/params.php'); 
   $config = [ 
      'id' =&gt; 'basic', 
      'basePath' =&gt; dirname(__DIR__), 
      'bootstrap' =&gt; ['log'], 
      'components' =&gt; [ 
         <b>'request' =&gt; [ 
            // !!! insert a secret key in the following (if it is empty) - this is 
            //required by cookie validation 
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO', 
         ],</b> 
         'cache' =&gt; [ 
            'class' =&gt; 'yii\caching\FileCache', 
         ], 
         'user' =&gt; [ 
            'identityClass' =&gt; 'app\models\User', 
            'enableAutoLogin' =&gt; true, 
         ], 
         'errorHandler' =&gt; [ 
            'errorAction' =&gt; 'site/error', 
         ], 
         'mailer' =&gt; [ 
            'class' =&gt; 'yii\swiftmailer\Mailer', 
            // send all mails to a file by default. You have to set 
            // 'useFileTransport' to false and configure a transport 
            // for the mailer to send real emails. 
            'useFileTransport' =&gt; true, 
         ], 
         'log' =&gt; [ 
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0, 
            'targets' =&gt; [ 
               [ 
                  'class' =&gt; 'yii\log\FileTarget', 
                     'levels' =&gt; ['error', 'warning'], 
                ], 
            ], 
         ], 
         'urlManager' =&gt; [ 
            //'showScriptName' =&gt; false, 
            //'enablePrettyUrl' =&gt; true, 
            //'enableStrictParsing' =&gt; true, 
            //'suffix' =&gt; '/' 
         ], 
         'db' =&gt; require(__DIR__ . '/db.php'), 
      ], 
      'modules' =&gt; [ 
         'hello' =&gt; [ 
            'class' =&gt; 'app\modules\hello\Hello', 
         ], 
      ], 
      'params' =&gt; $params,
   ]; 
   if (YII_ENV_DEV) { 
      // configuration adjustments for 'dev' environment 
      $config['bootstrap'][] = 'debug'; 
      $config['modules']['debug'] = [ 
         'class' =&gt; 'yii\debug\Module', 
      ]; 
      $config['bootstrap'][] = 'gii'; 
      $config['modules']['gii'] = [ 
         'class' =&gt; 'yii\gii\Module', 
      ]; 
   } 
   return $config; 
?&gt;
</pre>
<p>You can disable cookie validation by setting the <b>yii\web\Request::$enableCookieValidation</b> property to <b>false</b>.</p>
<h1>Yii - Files Upload</h1>
<p>You can easily implement a file uploading function with the help of <b>yii\web\UploadedFile, models</b> and <b>yii\widgets\ActiveForm</b>.</p>
<p>Create a directory <b>‘uploads’</b> in the root folder. This directory will hold all of the uploaded images. To upload a single file, you need to create a model and an attribute of the model for uploaded file instance. You should also validate the file upload.</p>
<p><b>Step 1</b> &minus; Inside the <b>models</b> folder, create a file called <b>UploadImageForm.php</b> with the
following content.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use yii\base\Model;
   class UploadImageForm extends Model {
      public $image;
      public function rules() {
         return [
            [['image'], 'file', 'skipOnEmpty' =&gt; false, 'extensions' =&gt; 'jpg, png'],
         ];
      }
      public function upload() {
         if ($this-&gt;validate()) {
            $this-&gt;image-&gt;saveAs('../uploads/' . $this-&gt;image-&gt;baseName . '.' .
               $this-&gt;image-&gt;extension);
            return true;
         } else {
            return false;
         }
      }
   }
?&gt;
</pre>
<p>The <b>image</b> attribute is used to keep the file instance. The <b>file</b> validation rule ensures that a file has a <b>png</b> or a <b>jpg</b> extension. The <i>upload</i> function validates the file and saves it on the server.</p>
<p><b>Step 2</b> &minus; Now, add the <b>actionUploadImage</b> function to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionUploadImage() {
   $model = new UploadImageForm();
   if (Yii::$app-&gt;request-&gt;isPost) {
      $model-&gt;image = UploadedFile::getInstance($model, 'image');
      if ($model-&gt;upload()) {
         // file is uploaded successfully
         echo "File successfully uploaded";
         return;
     }
   }
   return $this-&gt;render('upload', ['model' =&gt; $model]);
}
</pre>
<p><b>Step 3</b> &minus; When the form is submitted, we call the <b>yii\web\UploadedFile::getInstance()</b> function to represent the uploaded file as an <b>UploadedFile</b> instance. Then, we validate the file and save it on the server.</p>
<p><b>Step 4</b> &minus; Next, create an <b>upload.php</b> view file inside the <b>views/site</b> directory.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\widgets\ActiveForm;
?&gt;
&lt;?php $form = ActiveForm::begin(['options' =&gt; ['enctype' =&gt; 'multipart/formdata']])?&gt;
&lt;?= $form-&gt;field($model, 'image')-&gt;fileInput() ?&gt;
   &lt;button&gt;Submit&lt;/button&gt;
&lt;?php ActiveForm::end() ?&gt;
</pre>
<p>Remember to add the <b>enctype</b> option when you upload a file. <b>The fileInput()</b> method renders the following html code &minus;</p>
<pre class="result notranslate">
&lt;input type = "file"&gt;
</pre>
<p>The above html code allows the users to select and upload files.</p>
<p><b>Step 5</b> &minus; Now, if you go to <b>http://localhost:8080/index.php?r=site/upload-image</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/select_upload_files.jpg" alt="Select Upload Files" />
<p><b>Step 6</b> &minus; Select an image to upload and click the “submit” button. The file will be saved on the server inside the <b>‘uploads’</b> folder.</p>
<img src="https://www.tutorialspoint.com/yii/images/uploads.jpg" alt="Uploads" />
<h1>Yii - Formatting</h1>
<p>To display data in a readable format, you can use the <b>formatter</b> application component.</p>
<p><b>Step1</b> &minus; Add the <b>actionFormatter</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionFormatter(){
   return $this-&gt;render('formatter');
}
</pre>
<p>In the above code, we just render the <b>formatter</b> view.</p>
<p><b>Step 2</b> &minus; Now, create a <b>formatter.php</b> view file inside the <b>views/site folder</b>.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $formatter = \Yii::$app-&gt;formatter;
   // output: January 1, 2016
   echo $formatter-&gt;asDate('2016-01-01', 'long'),"&lt;br&gt;";
   // output: 51.50%
   echo $formatter-&gt;asPercent(0.515, 2),"&lt;br&gt;";
   // output: &lt;a href = "mailto:test@test.com"&gt;test@test.com&lt;/a&gt;
   echo $formatter-&gt;asEmail('test@test.com'),"&lt;br&gt;";
   // output: Yes
   echo $formatter-&gt;asBoolean(true),"&lt;br&gt;";
   // output: (Not set)
   echo $formatter-&gt;asDate(null),"&lt;br&gt;";
?&gt;
</pre>
<p><b>Step 3</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/formatter</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/view_file.jpg" alt="View File" />
<p>The <b>formatter</b> component supports the following formats related with date and time &minus;</p>
<table style="text-align:center;" class="table table-bordered">
<tr>
<th style="text-align:center;">Output format</th>
<th style="text-align:center;">Example</th>
</tr>
<tr>
<td>date</td>
<td>January 01, 2016</td>
</tr>
<tr>
<td>time</td>
<td>16:06</td>
</tr>
<tr>
<td>datetime</td>
<td>January 01, 2016 16:06</td>
</tr>
<tr>
<td>timestamp</td>
<td>1512609983</td>
</tr>
<tr>
<td>relativeTime</td>
<td>1 hour ago</td>
</tr>
<tr>
<td>duration</td>
<td>5 minutes</td>
</tr>
</table>
<p><b>Step 4</b> &minus; Modify the <b>formatter</b> view this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $formatter = \Yii::$app-&gt;formatter;
   echo $formatter-&gt;asDate(date('Y-m-d'), 'long'),"&lt;br&gt;";
   echo $formatter-&gt;asTime(date("Y-m-d")),"&lt;br&gt;";
   echo $formatter-&gt;asDatetime(date("Y-m-d")),"&lt;br&gt;";

   echo $formatter-&gt;asTimestamp(date("Y-m-d")),"&lt;br&gt;";
   echo $formatter-&gt;asRelativeTime(date("Y-m-d")),"&lt;br&gt;";
?&gt;
</pre>
<p><b>Step 5</b> &minus; Type <b>http://localhost:8080/index.php?r=site/formatter</b> in the address bar of your web browser, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/formatter_output.jpg" alt="Formatter Output" />
<h2>Date Formats</h2>
<p>There are also four date format shortcuts: <b>short, medium, long, and full</b>.</p>
<p><b>Step 1</b> &minus; Modify the <b>formatter</b> view file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $formatter = \Yii::$app-&gt;formatter;
   echo $formatter-&gt;asDate(date('Y-m-d'), 'short'),"&lt;br&gt;";
   echo $formatter-&gt;asDate(date('Y-m-d'), 'medium'),"&lt;br&gt;";
   echo $formatter-&gt;asDate(date('Y-m-d'), 'long'),"&lt;br&gt;";
   echo $formatter-&gt;asDate(date('Y-m-d'), 'full'),"&lt;br&gt;";
?&gt;
</pre>
<p><b>Step 2</b> &minus; If you go to the web browser and type <b>http://localhost:8080/index.php?r=site/formatter</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/data_formats_output.jpg" alt="Data Formats Output" />
<h2>Number Formats</h2>
<p>The <b>formatter</b> component supports the following formats related with numbers &minus;</p>
<table style="text-align:center;" class="table table-bordered">
<tr>
<th style="text-align:center;">Output format</th>
<th style="text-align:center;">Example</th>
</tr>
<tr>
<td>integer</td>
<td>51</td>
</tr>
<tr>
<td>decimal</td>
<td>105.51</td>
</tr>
<tr>
<td>percent</td>
<td>51%</td>
</tr>
<tr>
<td>scientific</td>
<td>1.050000E+2</td>
</tr>
<tr>
<td>currency</td>
<td>$105</td>
</tr>
<tr>
<td>size</td>
<td>105 bytes</td>
</tr>
<tr>
<td>shortSize</td>
<td>105 B</td>
</tr>
</table>
<p><b>Step 1</b> &minus; Modify the <b>formatter</b> view this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $formatter = \Yii::$app-&gt;formatter;
   echo Yii::$app-&gt;formatter-&gt;asInteger(105),"&lt;br&gt;";
   echo Yii::$app-&gt;formatter-&gt;asDecimal(105.41),"&lt;br&gt;";
   echo Yii::$app-&gt;formatter-&gt;asPercent(0.51),"&lt;br&gt;";
   echo Yii::$app-&gt;formatter-&gt;asScientific(105),"&lt;br&gt;";
   echo Yii::$app-&gt;formatter-&gt;asCurrency(105, "$"),"&lt;br&gt;";
   echo Yii::$app-&gt;formatter-&gt;asSize(105),"&lt;br&gt;";
   echo Yii::$app-&gt;formatter-&gt;asShortSize(105),"&lt;br&gt;";
?&gt;
</pre>
<p><b>Step 2</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/formatter</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/number_formats_output.jpg" alt="Number Formats Output" />
<h2>Other Formats</h2>
<p>Yii also supports other formats &minus;</p>
<ul class="list">
<li><p><b>text</b> &minus; The value is HTML-encoded.</p></li>
<li><p><b>raw</b> &minus; The value is outputted as is.</p></li>
<li><p><b>paragraphs</b> &minus; The value is formatted as HTML text paragraphs wrapped into the <i>p</i> tag.</p></li>
<li><p><b>ntext</b> &minus; The value is formatted as an HTML plain text where newlines are converted into line breaks.</p></li>
<li><p><b>html</b> &minus; The value is purified using HtmlPurifier to avoid XSS attacks.</p></li>
<li><p><b>image</b> &minus; The value is formatted as an image tag.</p></li>
<li><p><b>boolean</b> &minus; The value is formatted as a boolean.</p></li>
<li><p><b>url</b> &minus; The value is formatted as a link.</p></li>
<li><p><b>email</b> &minus; The value is formatted as a mailto-link.</p></li>
</ul>
<p>The formatter may use the currently active locale to determine how to format a value for a specific country.</p>
<p>The following example shows how to format date for different locales.</p>
<pre class="prettyprint notranslate">
&lt;?php
   Yii::$app-&gt;formatter-&gt;locale = 'ru-RU';
   echo Yii::$app-&gt;formatter-&gt;asDate('2016-01-01'); // output: 1 января 2016 г.
   Yii::$app-&gt;formatter-&gt;locale = 'de-DE';
   // output: 1. Januar 2016
   echo Yii::$app-&gt;formatter-&gt;asDate('2016-01-01');
   Yii::$app-&gt;formatter-&gt;locale = 'en-US';
   // output: January 1, 2016
   echo Yii::$app-&gt;formatter-&gt;asDate('2016-01-01');
?&gt;
</pre>
<h1>Yii - Pagination</h1>
<p>When you have too much data to display on a single page, you should display it on multiple pages. This is also known as pagination.</p>
<p>To show pagination in action, we need data.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root -p</i></p></li>
<li><p>Create a new database via <i>CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</i></p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Create Model" />
<p>The <b>MyUser</b> model appears in the models directory.</p>
<h2>Pagination in Action</h2>
<p><b>Step 1</b> &minus; Add an <b>actionPagination</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionPagination() {
   //preparing the query
   $query = MyUser::find();
   // get the total number of users
   $count = $query-&gt;count();
   //creating the pagination object
   $pagination = new Pagination(['totalCount' =&gt; $count, 'defaultPageSize' =&gt; 10]);
   //limit the query using the pagination and retrieve the users
   $models = $query-&gt;offset($pagination-&gt;offset)
      -&gt;limit($pagination-&gt;limit)
      -&gt;all();
   return $this-&gt;render('pagination', [
      'models' =&gt; $models,
      'pagination' =&gt; $pagination,
   ]);
}
</pre>
<p><b>Step 2</b> &minus; Create a view file called <b>pagination.php</b> inside the <b>views/site</b> folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\widgets\LinkPager;
?&gt;
&lt;?php foreach ($models as $model): ?&gt;
   &lt;?= $model-&gt;id; ?&gt;
   &lt;?= $model-&gt;name; ?&gt;
   &lt;?= $model-&gt;email; ?&gt;
   &lt;br/&gt;
&lt;?php endforeach; ?&gt;
&lt;?php
   // display pagination
   echo LinkPager::widget([
      'pagination' =&gt; $pagination,
   ]);
?&gt;
</pre>
<p>Now, go to the local host <b>http://localhost:8080/index.php?r=site/pagination</b> through the web browser, you will see a pagination widget &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/pagination_widget.jpg" alt="Pagination Widget" />
<h1>Yii - Sorting</h1>
<p>When displaying lots of data, we often need to sort the data. Yii uses an <b>yii\data\Sort object</b> to represent a sorting schema.</p>
<p>To show sorting in action, we need data.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i></p></li>
<li><p>Create a new database via <i>CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</i></p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host=localhost;dbname=helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class(“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Preparing DB" />
<p>The MyUser model should appear in the models directory.</p>
<h2>Sorting in Action</h2>
<p><b>Step 1</b> &minus; Add an <b>actionSorting</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionSorting() {
   //declaring the sort object
   $sort = new Sort([
      'attributes' =&gt; ['id', 'name', 'email'], 
   ]);
   //retrieving all users
   $models = MyUser::find()
      -&gt;orderBy($sort-&gt;orders)
      -&gt;all();
   return $this-&gt;render('sorting', [
      'models' =&gt; $models,
      'sort' =&gt; $sort,
   ]);
}
</pre>
<p><b>Step 2</b> &minus; Create a <b>View</b> file called <b>sorting inside</b> the views/site folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   // display links leading to sort actions
   echo $sort-&gt;link('id') . ' | ' . $sort-&gt;link('name') . ' | ' . $sort-&gt;link('email');
?&gt;&lt;br/&gt;
&lt;?php foreach ($models as $model): ?&gt;
   &lt;?= $model-&gt;id; ?&gt;
   &lt;?= $model-&gt;name; ?&gt;
   &lt;?= $model-&gt;email; ?&gt;
   &lt;br/&gt;
&lt;?php endforeach; ?&gt;
</pre>
<p><b>Step 3</b> &minus; Now, if you type <b>http://localhost:8080/index.php?r=site/sorting</b> in the web browser, you can see that the id, name, and email fields is sortable as shown in the following image.</p>
<img src="https://www.tutorialspoint.com/yii/images/sorting_action.jpg" alt="Sorting Action" />
<h1>Yii - Properties</h1>
<p>Class member variables in PHP are also called <b>properties</b>. They represent the state of class instance. Yii introduces a class called <b>yii\base\Object</b>. It supports defining properties via <b>getter</b> or <b>setter</b> class methods.</p>
<p>A getter method starts with the word <b>get</b>. A setter method starts with <b>set</b>. You can use properties defined by getters and setters like class member variables.</p>
<p>When a property is being read, the getter method will be called. When a property is being assigned, the setter method will be called. A property defined by a getter is <b>read only</b> if a setter is not defined.</p>
<p><b>Step 1</b> &minus; Create a file called <b>Taxi.php</b> inside the components folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\components;
   use yii\base\Object;
   class Taxi extends Object {
      private $_phone;
      public function getPhone() {
         return $this-&gt;_phone;
      }
      public function setPhone($value) {
         $this-&gt;_phone = trim($value);
      }
   }
?&gt;
</pre>
<p>In the code above, we define the Taxi class derived from the Object class. We set a getter – <b>getPhone()</b> and a setter – <b>setPhone()</b>.</p>
<p><b>Step 2</b> &minus; <b>Now</b>, add an <b>actionProperties</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionProperties() {
   $object = new Taxi();
   // equivalent to $phone = $object-&gt;getPhone();
   $phone = $object-&gt;phone;
   var_dump($phone);
   // equivalent to $object-&gt;setLabel('abc');
   $object-&gt;phone = '79005448877';
   var_dump($object);
}
</pre>
<p>In the above function we created a Taxi object, tried to access the <b>phone</b> property via the getter, and set the <b>phone</b> property via the setter.</p>
<p><b>Step 3</b> &minus; In your web browser, type <b>http://localhost:8080/index.php?r=site/properties</b>, in the address bar, you should see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/properties_output.jpg" alt="Properties Output" />
<h1>Yii - Data Providers</h1>
<p>Yii provides a set of data provider classes that encapsulate pagination and sorting. A data provider implements yii\data\DataProviderInterface. It supports retrieving sorted and paginated data. Data providers usually work with data widgets.</p>
<p>Yii includes &minus;</p>
<ul class="list">
<li><p><b>ActiveDataProvider</b> &minus; Uses <b>yii\db\ActiveQuery</b> or <b>yii\db\Query</b> to query data from databases.</p></li>
<li><p><b>SqlDataProvider</b> &minus; Executes SQL and returns data as arrays.</p></li>
<li><p><b>ArrayDataProvider</b> &minus; Takes a big array and returns a slice of it.</p></li>
</ul>
<p>You define the sorting and pagination behaviors of a data-provider by configuring its <b>pagination</b> and <b>sort</b> properties. Data widgets, such as <b>yii\grid\GridView</b>, have a property called <b>dataProvider</b>, which takes a data provider instance and displays the data on the screen.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i>.</p></li>
<li><p>Create a new database via <b>CREATE DATABASE</b> helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Generate Button" />
<p>The MyUser model should appear in the models directory.</p>
<h2>Active Data Provider</h2>
<p><b>Step 1</b> &minus; Create a function called <b>actionDataProvider</b> inside the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionDataProvider(){
   $query = MyUser::find();
   $provider = new ActiveDataProvider([
      'query' =&gt; $query,
      'pagination' =&gt; [
         'pageSize' =&gt; 2,
      ],
   ]);
   // returns an array of users objects
   $users = $provider-&gt;getModels();
   var_dump($users);
}
</pre>
<p>In the code above, we define an instance of the <b>ActiveDataProvider</b> class and display users from the first page. The <b>yii\data\ActiveDataProvider</b> class uses the DB application component as the DB connection.</p>
<p><b>Step 2</b> &minus; If you enter the local host address <b>http://localhost:8080/index.php?r=site/dataprovider</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/active_data_provider.jpg" alt="Active Data Provider" />
<h2>SQL Data Provider</h2>
<p>The <b>yii\data\SqlDataProvider</b> class works with raw SQL statements.</p>
<p><b>Step 1</b> &minus; Modify the <b>actionDataProvider</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionDataProvider() {
   $count = Yii::$app-&gt;db-&gt;createCommand('SELECT COUNT(*) FROM user')-&gt;queryScalar();
   $provider = new SqlDataProvider([
      'sql' =&gt; 'SELECT * FROM user',
      'totalCount' =&gt; $count,
      'pagination' =&gt; [
         'pageSize' =&gt; 5,
      ],
      'sort' =&gt; [
         'attributes' =&gt; [
            'id',
            'name',
            'email',
         ],
      ],
   ]);
   // returns an array of data rows
   $users = $provider-&gt;getModels();
   var_dump($users);
}
</pre>
<p><b>Step 2</b> &minus; Type <b>http://localhost:8080/index.php?r=site/data-provider</b> in the address bar of the web browser, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/sql_data_provider_output.jpg" alt="SQL Data Provider Output" />
<h2>Array Data Provider</h2>
<p>The <b>yii\data\ArrayDataProvider</b> class is best for working with big arrays. Elements in this array can be either query results of DAO or Active Record instances.</p>
<p><b>Step 1</b> &minus; Modify the <b>actionDataProvider</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionDataProvider() {
   $data = MyUser::find()-&gt;asArray()-&gt;all();
   $provider = new ArrayDataProvider([
      'allModels' =&gt; $data,
      'pagination' =&gt; [
         'pageSize' =&gt; 3,
      ],
      'sort' =&gt; [
         'attributes' =&gt; ['id', 'name'],
      ],
   ]);
   // get the rows in the currently requested page
   $users = $provider-&gt;getModels();
   var_dump($users);
}
</pre>
<p><b>Step 2</b> &minus; If you go to the address <b>http://localhost:8080/index.php?r=site/data-provider</b> through the web browser, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/array_data_provider_output.jpg" alt="Array Data Provider Output" />
<p>Notice, that unlike SQL Data Provider and Active Data Provider, Array Data Provider loads all data into the memory, so it is less efficient.</p>
<h1>Yii - Data Widgets</h1>
<p>Yii provides a set of widgets for displaying data. You can use the DetailView widget to display a single record. The ListView widget, as well as Grid View, can be used to display a table of records with features like filtering, sorting, and pagination.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i></p></li>
<li><p>Create a new database via CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host=localhost;dbname=helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class(“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Data Widget Preparing DB" />
<p>The MyUser model should appear in the models directory.</p>
<h2>DetailView Widget</h2>
<p>The <b>DetailView widget</b> shows the data of a single model. The <b>$attributes</b> property defines which model attributes should be displayed.</p>
<p><b>Step 1</b> &minus; Add the <b>actionDataWidget</b> method to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionDataWidget() {
   $model = MyUser::find()-&gt;one();
   return $this-&gt;render('datawidget', [
      'model' =&gt; $model
   ]);
}
</pre>
<p>In the above code, we find that the first MyUser model and pass it to the <b>datawidget</b> view.</p>
<p><b>Step 2</b> &minus; Create a file called <b><i>datawidget.php</b></i> inside the <b>views/site</b> folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\widgets\DetailView;
   echo DetailView::widget([
      'model' =&gt; $model,
      'attributes' =&gt; [
         'id',
         //formatted as html
         'name:html',
         [
            'label' =&gt; 'e-mail',
            'value' =&gt; $model-&gt;email,
         ],
      ],
   ]);
?&gt;
</pre>
<p><b>Step 3</b> &minus; If you go to <b>http://localhost:8080/index.php?r=site/data-widget</b>, you will see a typical usage of the <b>DetailView</b> widget.</p>
<img src="https://www.tutorialspoint.com/yii/images/detailview_widget.jpg" alt="DetailView Widget" />
<h1>Yii - ListView Widget</h1>
<p>The ListView widget uses a data provider to display data. Each model is rendered using the specified view file.</p>
<p><b>Step 1</b> &minus; Modify the <b>actionDataWidget()</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionDataWidget() {
   $dataProvider = new ActiveDataProvider([
      'query' =&gt; MyUser::find(),
      'pagination' =&gt; [
         'pageSize' =&gt; 20,
      ],
   ]);
   return $this-&gt;render('datawidget', [
      'dataProvider' =&gt; $dataProvider
   ]);
}
</pre>
<p>In the above code, we create a data provider and pass it to the datawidget view.</p>
<p><b>Step 2</b> &minus; Modify the datawidget view file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\widgets\ListView;
   echo ListView::widget([
      'dataProvider' =&gt; $dataProvider,
      'itemView' =&gt; '_user',
   ]);
?&gt;
</pre>
<p>We render the ListView widget. Each model is rendered in the <i>_user</i> view.</p>
<p><b>Step 3</b> &minus; Create a file called <b>_user.php</b> inside the <b>views/site</b> folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\helpers\Html;
   use yii\helpers\HtmlPurifier;
?&gt;
&lt;div class = "user"&gt;
   &lt;?= $model-&gt;id ?&gt;
   &lt;?= Html::encode($model-&gt;name) ?&gt;
   &lt;?= HtmlPurifier::process($model-&gt;email) ?&gt;
&lt;/div&gt;
</pre>
<p><b>Step 4</b> &minus; Type <b>http://localhost:8080/index.php?r=site/data-widget</b> in the address bar of the web browser, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/listview_widget_example_output.jpg" alt="ListView Widget Example Output" />
<h1>Yii - GridView Widget</h1>
<p>The GridView widget takes data from a data provider and presents data in the form of a table. Each row of the table represents a single data item, and a column represents an attribute of the item.</p>
<p><b>Step 1</b> &minus; Modify the <b>datawidget</b> view this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\grid\GridView;
   echo GridView::widget([
      'dataProvider' =&gt; $dataProvider,
   ]);
?&gt;
</pre>
<p><b>Step 2</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/data-widget</b>, you will see a typical usage of the DataGrid widget.</p>
<img src="https://www.tutorialspoint.com/yii/images/datagrid_widget.jpg" alt="DataGrid widget" />
<p>The columns of the DataGrid widget are configured in terms of the <b>yii\grid\Column</b> class. It represents a model attribute and can be filtered and sorted.</p>
<p><b>Step 3</b> &minus; To add a custom column to the grid, modify the <b>datawidget</b> view this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   yii\grid\GridView;
   echo GridView::widget([
      'dataProvider' =&gt; $dataProvider,
      'columns' =&gt; [
         'id',
         [
            'class' =&gt; 'yii\grid\DataColumn', // can be omitted, as it is the default
            'label' =&gt; 'Name and email',
            'value' =&gt; function ($data) {
               return $data-&gt;name . " writes from " . $data-&gt;email;
            },
         ],
      ],
   ]);
?&gt;
</pre>
<p><b>Step 4</b> &minus; If you go to the address <b>http://localhost:8080/index.php?r=site/data-widget</b>,
you will see the output as shown in the following image.</p>
<img src="https://www.tutorialspoint.com/yii/images/datagrid_view.jpg" alt="DataGrid view" />
<p>Grid columns can be customized by using different column classes, like yii\grid\SerialColumn, yii\grid\ActionColumn, and yii\grid\CheckboxColumn.</p>
<p><b>Step 5</b> &minus; Modify the <b>datawidget</b> view in the following way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\grid\GridView;
   echo GridView::widget([
      'dataProvider' =&gt; $dataProvider,
      'columns' =&gt; [
         ['class' =&gt; 'yii\grid\SerialColumn'], 'name',
         ['class' =&gt; 'yii\grid\ActionColumn'],
         ['class' =&gt; 'yii\grid\CheckboxColumn'],
      ],
   ]);
?&gt;
</pre>
<p><b>Step 6</b> &minus;Go to <b>http://localhost:8080/index.php?r=site/data-widget</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/modified_datagrid_view.jpg" alt="Modified DataGrid view" />
<h1>Yii - Events</h1>
<p>You can use <b>events</b> to inject custom code at certain execution points. You can attach custom code to an event, and when the event is triggered, the code gets executed. For example, a logger object may trigger a <b>userRegistered</b> event when a new user registers on your web site. If a class needs to trigger events, you should extend it from the yii\base\Component class.</p>
<p>An event handler is a PHP callback. You can use the following callbacks &minus;</p>
<ul class="list">
<li><p>A global PHP function specified as a string.</p></li>
<li><p>An anonymous function.</p></li>
<li><p>An array of a class name and a method as a string, for example, ['ClassName', 'methodName']</p></li>
<li><p>An array of an object and a method as a string, for example, [$obj, 'methodName']</p></li>
</ul>
<p><b>Step 1</b> &minus; To attach a handler to an event you should call the <b>yii\base\Component::on()</b> method.</p>
<pre class="prettyprint notranslate">
$obj = new Obj;
// this handler is a global function
$obj-&gt;on(Obj::EVENT_HELLO, 'function_name');
// this handler is an object method
$obj-&gt;on(Obj::EVENT_HELLO, [$object, 'methodName']);
// this handler is a static class method
$obj-&gt;on(Obj::EVENT_HELLO, ['app\components\MyComponent', 'methodName']);
// this handler is an anonymous function

$obj-&gt;on(Obj::EVENT_HELLO, function ($event) {
   // event handling logic
});
</pre>
<p>You can attach one or more handlers to an event. The attached handlers are called in the order they were attached to the event.</p>
<p><b>Step 2</b> &minus; To stop in the invocation of the handlers, you should set the <b>yii\base\Event::$handled property</b> to <b>true</b>.</p>
<pre class="prettyprint notranslate">
$obj-&gt;on(Obj::EVENT_HELLO, function ($event) {
   $event-&gt;handled = true;
});
</pre>
<p><b>Step 3</b> &minus; To insert the handler at the start of the queue, you may call <b>yii\base\Component::on()</b>, passing false for the fourth parameter.</p>
<pre class="prettyprint notranslate">
$obj-&gt;on(Obj::EVENT_HELLO, function ($event) {
   // ...
}, $data, false);
</pre>
<p><b>Step 4</b> &minus; To trigger an event, call the <b>yii\base\Component::trigger()</b> method.</p>
<pre class="prettyprint notranslate">
namespace app\components;
use yii\base\Component;
use yii\base\Event;
class Obj extends Component {
   const EVENT_HELLO = 'hello';
   public function triggerEvent() {
      $this-&gt;trigger(self::EVENT_HELLO);
   }
}
</pre>
<p><b>Step 5</b> &minus; To detach a handler from an event, you should call the <b>yii\base\Component::off()</b> method.</p>
<pre class="prettyprint notranslate">
$obj = new Obj;
// this handler is a global function
$obj-&gt;off(Obj::EVENT_HELLO, 'function_name');
// this handler is an object method
$obj-&gt;off(Obj::EVENT_HELLO, [$object, 'methodName']);
// this handler is a static class method
$obj-&gt;off(Obj::EVENT_HELLO, ['app\components\MyComponent', 'methodName']);
// this handler is an anonymous function

$obj-&gt;off(Obj::EVENT_HELLO, function ($event) {
   // event handling logic
});
</pre>
<h1>Yii - Creating Event</h1>
<p>In this chapter we will see to create an event in Yii. To show events in action, we need data.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i></p></li>
<li><p>Create a new database via <i>CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</i></p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host=localhost;dbname=helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Creating Event Preparing DB" />
<p>The MyUser model should appear in the models directory.</p>
<h2>Create an Event</h2>
<p>Assume we want to send an email to the admin whenever a new user registers on our web site.</p>
<p><b>Step 1</b> &minus; Modify the <b>models/MyUser.php</b> file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use Yii;
   /**
   * This is the model class for table "user".
   *
   * @property integer $id
   * @property string $name
   * @property string $email
   */
   class MyUser extends \yii\db\ActiveRecord {
      const EVENT_NEW_USER = 'new-user';
      public function init() {
         // first parameter is the name of the event and second is the handler.
         $this-&gt;on(self::EVENT_NEW_USER, [$this, 'sendMailToAdmin']);
      }
      /**
      * @inheritdoc
      */
      public static function tableName() {
         return 'user';
      }
      /**
      * @inheritdoc
      */
      public function rules() {
         return [
            [['name', 'email'], 'string', 'max' =&gt; 255]
         ];
      }
      /**
      * @inheritdoc
      */
      public function attributeLabels() {
         return [
            'id' =&gt; 'ID',
            'name' =&gt; 'Name',
            'email' =&gt; 'Email',
         ];
      }
      public function sendMailToAdmin($event) {
         echo 'mail sent to admin using the event';
      }
   }
?&gt;
</pre>
<p>In the above code, we define a “new-user” event. Then, in the init() method we attach the <b>sendMailToAdmin</b> function to the “new-user” event. Now, we need to trigger this event.</p>
<p><b>Step 2</b> &minus; Create a method called <b>actionTestEvent</b> in the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionTestEvent() {
   $model = new MyUser();
   $model-&gt;name = "John";
   $model-&gt;email = "john@gmail.com";
   if($model-&gt;save()) {
      $model-&gt;trigger(MyUser::EVENT_NEW_USER);
   }
}
</pre>
<p>In the above code, we create a new user and trigger the “new-user” event.</p>
<p><b>Step 3</b> &minus; Now type <b>http://localhost:8080/index.php?r=site/test-event</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/creating_event.jpg" alt="Creating Event" />
<h1>Yii - Behaviors</h1>
<p>Behaviors are instances of the yii\base\Behavior class. A behavior injects its methods and properties to the component it is attached to. Behaviors can also respond to the events triggered by the component.</p>
<p><b>Step 1</b> &minus; To define a behavior, extend the <b>yii\base\Behavior</b> class.</p>
<pre class="prettyprint notranslate">
namespace app\components;
use yii\base\Behavior;
class MyBehavior extends Behavior {
   private $_prop1;
   public function getProp1() {
      return $this-&gt;_prop1;
   }
   public function setProp1($value) {
      $this-&gt;_prop1 = $value;
   }
   public function myFunction() {
      // ...
   }
}
</pre>
<p>The above code defines the behavior with one property (prop1) and one method (myFunction). When this behavior is attached to a component, that component will also have the <b>prop1</b> property and the <b>myFunction</b> method.</p>
<p>To access the component the behavior is attached to, you may use the <b>yii\base\Behavior::$owner property</b>.</p>
<p><b>Step 2</b> &minus; If you want a behavior to respond to the component events, you should override the <b>yii\base\Behavior::events()</b> method.</p>
<pre class="prettyprint notranslate">
namespace app\components;
use yii\db\ActiveRecord;
use yii\base\Behavior;
class MyBehavior extends Behavior {
   public function events() {
      return [
         ActiveRecord::EVENT_AFTER_VALIDATE =&gt; 'afterValidate',
      ];
   }
   public function afterValidate($event) {
      // ...
   }
}
</pre>
<p><b>Step 3</b> &minus; To attach a behavior, you should override the <b>behaviors()</b> method of the component class.</p>
<pre class="prettyprint notranslate">
namespace app\models;
use yii\db\ActiveRecord;
use app\components\MyBehavior;
class MyUser extends ActiveRecord {
   public function behaviors() {
      return [
         // anonymous behavior, behavior class name only
         MyBehavior::className(),
         // named behavior, behavior class name only
         'myBehavior2' =&gt; MyBehavior::className(),
         // anonymous behavior, configuration array
         [
            'class' =&gt; MyBehavior::className(),
            'prop1' =&gt; 'value1',
            'prop2' =&gt; 'value2',
            'prop3' =&gt; 'value3',
         ],
         // named behavior, configuration array
         'myBehavior4' =&gt; [
            'class' =&gt; MyBehavior::className(),
            'prop1' =&gt; 'value1'
         ]
      ];
   }
}
</pre>
<p><b>Step 4</b> &minus; To detach a behavior, call <b>the yii\base\Component::detachBehavior()</b> method.</p>
<pre class="prettyprint notranslate">
$component-&gt;detachBehavior('myBehavior');
</pre>
<p>To show behaviors in action, we need data.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i>.</p></li>
<li><p>Create a new database via <i>CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</i></p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus;Inside the project root <b>run./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user table</b>. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Behaviors Preparing DB" />
<p>The MyUser model should appear in the models directory.</p>
<h1>Yii - Creating a Behavior</h1>
<p>Assume we want to create a behavior that will uppercase the “name” property of the component the behavior is attached to.</p>
<p><b>Step 1</b> &minus; Inside the components folder, create a file called <b>UppercaseBehavior.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\components;
   use yii\base\Behavior;
   use yii\db\ActiveRecord;
   class UppercaseBehavior extends Behavior {
      public function events() {
         return [
            ActiveRecord::EVENT_BEFORE_VALIDATE =&gt; 'beforeValidate',
         ];
      }
      public function beforeValidate($event) {
         $this-&gt;owner-&gt;name = strtoupper($this-&gt;owner-&gt;name);
     }
   }
?&gt;
</pre>
<p>In the above code we create the <b>UppercaseBehavior</b>, which uppercase the name property when the “beforeValidate” event is triggered.</p>
<p><b>Step 2</b> &minus; To attach this behavior to the <b>MyUser</b> model, modify it this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use app\components\UppercaseBehavior;
   use Yii;
   /**
   * This is the model class for table "user".
   *
   * @property integer $id
   * @property string $name
   * @property string $email
   */
   class MyUser extends \yii\db\ActiveRecord {
      public function behaviors() {
         return [
            // anonymous behavior, behavior class name only
            UppercaseBehavior::className(),
         ];
      }
      /**
      * @inheritdoc
      */
      public static function tableName() {
         return 'user';
      }
      /**
      * @inheritdoc
      */
      public function rules() {
         return [
            [['name', 'email'], 'string', 'max' =&gt; 255]
         ];
      }
      /**
      * @inheritdoc
      */
      public function attributeLabels() {
         return [
            'id' =&gt; 'ID',
            'name' =&gt; 'Name',
            'email' =&gt; 'Email',
         ];
      }
   }
</pre>
<p>Now, whenever we create or update a user, its name property will be in uppercase.</p>
<p><b>Step 3</b> &minus; Add an <b>actionTestBehavior</b> function to the <b>SiteController</b>.</p>
<pre class="prettyprint notranslate">
public function actionTestBehavior() {
   //creating a new user
   $model = new MyUser();
   $model-&gt;name = "John";
   $model-&gt;email = "john@gmail.com";
   if($model-&gt;save()){
      var_dump(MyUser::find()-&gt;asArray()-&gt;all());
   }
}
</pre>
<p><b>Step 4</b> &minus; Type <b>http://localhost:8080/index.php?r=site/test-behavior</b> in the address bar you will see that the <b>name</b> property of your newly created <b>MyUser</b> model is in uppercase.</p>
<img src="https://www.tutorialspoint.com/yii/images/uppercasebehavior.jpg" alt="UppercaseBehavior" />
<h1>Yii - Configurations</h1>
<p>Configurations are used to create new objects or initializing the existing ones. Configurations usually include a class name and a list of initial values. They may also include a list of event handlers and behaviors.</p>
<p>The following is an example of the database configuration &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   $config = [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
   $db = Yii::createObject($config);
?&gt;
</pre>
<p>The <b>Yii::createObject()</b> method takes a configuration array and creates an object based on the class named in the configuration.</p>
<p>The format of a configuration &minus;</p>
<pre class="prettyprint notranslate">
[
   //a fully qualified class name for the object being created
   'class' =&gt; 'ClassName',
   //initial values for the named property
   'propertyName' =&gt; 'propertyValue',
   //specifies what handlers should be attached to the object's events
   'on eventName' =&gt; $eventHandler,
   //specifies what behaviors should be attached to the object
   'as behaviorName' =&gt; $behaviorConfig,
]
</pre>
<p>The configuration file of a basic application template is one of the most complex &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this 
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'urlManager' =&gt; [
            //'showScriptName' =&gt; false,
            //'enablePrettyUrl' =&gt; true,
            //'enableStrictParsing' =&gt; true,
            //'suffix' =&gt; '/'
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>In the above configuration file, we do not define the class name. This is because we have already defined it in the <b>index.php</b> file &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   //defining global constans
   defined('YII_DEBUG') or define('YII_DEBUG', true);
   defined('YII_ENV') or define('YII_ENV', 'dev');
   //register composer autoloader
   require(__DIR__ . '/../vendor/autoload.php');
   //include yii files
   require(__DIR__ . '/../vendor/yiisoft/yii2/Yii.php');
   //load application config
   $config = require(__DIR__ . '/../config/web.php');
   //create, config, and process request
   (new yii\web\Application($config))-&gt;run();
?&gt;
</pre>
<p>Many widgets also use configurations as shown in the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   NavBar::begin([
      'brandLabel' =&gt; 'My Company',
      'brandUrl' =&gt; Yii::$app-&gt;homeUrl,
      'options' =&gt; [
         'class' =&gt; 'navbar-inverse navbar-fixed-top',
      ],
   ]);
   echo Nav::widget([
      'options' =&gt; ['class' =&gt; 'navbar-nav navbar-right'],
      'items' =&gt; [
         ['label' =&gt; 'Home', 'url' =&gt; ['/site/index']],
         ['label' =&gt; 'About', 'url' =&gt; ['/site/about']],
         ['label' =&gt; 'Contact', 'url' =&gt; ['/site/contact']],
         Yii::$app-&gt;user-&gt;isGuest ?
         ['label' =&gt; 'Login', 'url' =&gt; ['/site/login']] :
         [
            'label' =&gt; 'Logout (' . Yii::$app-&gt;user-&gt;identity-&gt;username . ')',
            'url' =&gt; ['/site/logout'],
            'linkOptions' =&gt; ['data-method' =&gt; 'post']
         ],
      ],
   ]);
   NavBar::end();
?&gt;
</pre>
<p>When a configuration is too complex, a common practice is to create a PHP file, which returns an array. Take a look at the <b>config/console.php</b> configuration file &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   Yii::setAlias('@tests', dirname(__DIR__) . '/tests');

   $params = require(__DIR__ . '/params.php');
   $db = require(__DIR__ . '/db.php');

   return [
      'id' =&gt; 'basic-console',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log', 'gii'],
      'controllerNamespace' =&gt; 'app\commands',
      'modules' =&gt; [
         'gii' =&gt; 'yii\gii\Module',
      ],
      'components' =&gt; [
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'log' =&gt; [
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'db' =&gt; $db,
      ],
      'params' =&gt; $params,
   ];
?&gt;
</pre>
<p>The default configurations can be specified by calling the <b>Yii::$container-&gt;set()</b> method. It allows you to apply default configurations to all instances of the specified classes when they are called via the <b>Yii::createObject()</b> method.</p>
<p>For example, to customize the <b>yii\widgets\LinkPager</b> class, so that all link pagers will show at most three buttons, you can use the following code.</p>
<pre class="prettyprint notranslate">
\Yii::$container-&gt;set('yii\widgets\LinkPager', [
   'maxButtonCount' =&gt; 3,
]);
</pre>
<h1>Yii - Dependency Injection</h1>
<p>A DI(dependency injection) container is an object that knows how to instantiate and configure objects. Yii provides the DI container via the <b>yii\di\Container class</b>.</p>
<p>It supports the following kinds of DI &minus;</p>
<ul class="list">
<li>Setter and property injection</li>
<li>PHP callable injection</li>
<li>Constructor injection</li>
<li>Controller action injection</li>
</ul>
<p>The DI container supports constructor injection with the help of type hints &minus;</p>
<pre class="prettyprint notranslate">
class Object1 {
   public function __construct(Object2 $object2) {

   }
}
$object1 = $container-&gt;get('Object1');
// which is equivalent to the following:
$object2 = new Object2;
$object1 = new Object1($object2);
</pre>
<p>Property and setter injections are supported through configurations &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\base\Object;
   class MyObject extends Object {
      public $var1;
      private $_var2;
      public function getVar2() {
         return $this-&gt;_var2;
      }
      public function setVar2(MyObject2 $var2) {
         $this-&gt;_var2 = $var2;
      }
   }
   $container-&gt;get('MyObject', [], [
      'var1' =&gt; $container-&gt;get('MyOtherObject'),
      'var2' =&gt; $container-&gt;get('MyObject2'),
   ]);
?&gt;
</pre>
<p>In case of the PHP callable injection, the container will use a registered PHP callback to build new instances of a class &minus;</p>
<pre class="prettyprint notranslate">
$container-&gt;set('Object1', function () {
   $object1 = new Object1(new Object2);
   return $object1;
});
$object1 = $container-&gt;get('Object1');
</pre>
<p>Controller action injection is a type of DI where dependencies are declared using the type hints. It is useful for keeping the MVC controllers slim light-weighted and slim &minus;</p>
<pre class="prettyprint notranslate">
public function actionSendToAdmin(EmailValidator $validator, $email) {
   if ($validator-&gt;validate($email)) {
      // sending email
   }
}
</pre>
<p>You can use the <b>yii\db\Container::set()</b> method to register dependencies &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   $container = new \yii\di\Container;
   // register a class name as is. This can be skipped.
   $container-&gt;set('yii\db\Connection');
   // register an alias name. You can use $container-&gt;get('MyObject')
   // to create an instance of Connection
   $container-&gt;set('MyObject', 'yii\db\Connection');
   // register an interface
   // When a class depends on the interface, the corresponding class
   // will be instantiated as the dependent object
   $container-&gt;set('yii\mail\MailInterface', 'yii\swiftmailer\Mailer');
   // register an alias name with class configuration
   // In this case, a "class" element is required to specify the class
   $container-&gt;set('db', [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host=127.0.0.1;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ]);
   // register a class with configuration. The configuration
   // will be applied when the class is instantiated by get()
   $container-&gt;set('yii\db\Connection', [
      'dsn' =&gt; 'mysql:host=127.0.0.1;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ]);
   // register a PHP callable
   // The callable will be executed each time when $container-&gt;get('db') is called
   $container-&gt;set('db', function ($container, $params, $config) {
      return new \yii\db\Connection($config);
   });
   // register a component instance
   // $container-&gt;get('pageCache') will return the same instance each time when it 
      //is called
   $container-&gt;set('pageCache', new FileCache);
?&gt;
</pre>
<h2>Using the DI</h2>
<p><b>Step 1</b> &minus; Inside the <b>components</b> folder create a file called <b>MyInterface.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\components;
   interface MyInterface {
      public function test();
   }
?&gt;
</pre>
<p><b>Step 2</b> &minus; Inside the components folder, create two files.</p>
<p><b>First.php</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\components;
   use app\components\MyInterface;
   class First implements MyInterface {
      public function test() {
         echo "First class &lt;br&gt;";
      }
   }
?&gt;
</pre>
<p><b>Second.php</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   app\components;
   use app\components\MyInterface;
      class Second implements MyInterface {
      public function test() {
         echo "Second class &lt;br&gt;";
      }
   }
?&gt;
</pre>
<p><b>Step 3</b> &minus; Now, add an <b>actionTestInterface</b> to the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionTestInterface() {
   $container = new \yii\di\Container();
   $container-&gt;set
      ("\app\components\MyInterface","\app\components\First");
   $obj = $container-&gt;get("\app\components\MyInterface");
   $obj-&gt;test(); // print "First class"
   $container-&gt;set
      ("\app\components\MyInterface","\app\components\Second");
   $obj = $container-&gt;get("\app\components\MyInterface");
   $obj-&gt;test(); // print "Second class"
}
</pre>
<p><b>Step 4</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/test-interface</b> you should see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/using_di.jpg" alt="Using DI" />
<p>This approach is convenient as we can set classes in one place and other code will use new classes automatically.</p>
<h1>Yii - Database Access</h1>
<p>Yii DAO (Database Access Object) provides an API for accessing databases. It also serves as the foundation for other database access methods: active record and query builder.</p>
<p>Yii DAO supports the following databases &minus;</p>
<ul class="list">
<li>MySQL</li>
<li>MSSQL</li>
<li>SQLite</li>
<li>MariaDB</li>
<li>PostgreSQL</li>
<li>ORACLE</li>
<li>CUBRID</li>
</ul>
<h2>Creating a Database Connection</h2>
<p><b>Step 1</b> &minus; To create a database connection, you need to create an instance of the yii\db\Connection class.</p>
<pre class="prettyprint notranslate">
$mydb = new yii\db\Connection([
   'dsn' =&gt; 'mysql:host=localhost;dbname=mydb',
   'username' =&gt; 'username',
   'password' =&gt; 'password',
   'charset' =&gt; 'utf8',
]);
</pre>
<p>A common practice is to configure a DB connection inside the application components. For example, in the basic application template the DB connection configuration is located in the <b>config/db.php</b> file as shown in the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '123574896',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 2</b> &minus; To access the DB connection you may use this expression.</p>
<pre class="result notranslate">
Yii::$app-&gt;db
</pre>
<p>To configure a DB connection, you should specify its DSN (Data Source Name) via the <b>dsn</b> property. The DSN format varies for different databases &minus;</p>
<ul class="list">
<li><p><b>MySQL, MariaDB</b> &minus; mysql:host = localhost;dbname = mydb</p></li>
<li><p><b>PostgreSQL</b> &minus; pgsql:host = localhost;port = 5432;dbname = mydb</p></li>
<li><p><b>SQLite</b> &minus; sqlite:/path/to/db/file</p></li>
<li><p><b>MS SQL Server (via sqlsrv driver)</b> &minus; sqlsrv:Server = localhost;Database = mydb</p></li>
<li><p><b>MS SQL Server (via mssql driver)</b> &minus; mssql:host = localhost;dbname = mydb</p></li>
<li><p><b>MS SQL Server (via dblib driver)</b> &minus; dblib:host = localhost;dbname = mydb</p></li>
<li><p><b>CUBRID</b> &minus; cubrid:dbname = mydb;host = localhost;port = 33000</p></li>
<li><p><b>Oracle</b> &minus; oci:dbname = //localhost:1521/mydb</p></li>
</ul>
<p>To show database querying in action, we need data.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i>.</p></li>
<li><p>Create a new database via <i>CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</i></p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="database Access Preparing DB" />
<p>The MyUser model should appear in the models directory.</p>
<h1>Yii - Data Access Objects</h1>
<p>To execute an <b>SQL query</b>, you should follow these steps &minus;</p>
<ul class="list">
<li>Create an <i>yii\db\Command</i> with an SQL query.</li>
<li>Bind parameters (not required)</li>
<li>Execute the command.</li>
</ul>
<p><b>Step 1</b> &minus; Create a function called <b>actionTestDb</b> in the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionTestDb(){
   // return a set of rows. each row is an associative array of column names and values.
   // an empty array is returned if the query returned no results
   $users = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user LIMIT 5')
      -&gt;queryAll();
   var_dump($users);
   // return a single row (the first row)
   // false is returned if the query has no result
   $user = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user WHERE id=1')
      -&gt;queryOne();
   var_dump($user);
   // return a single column (the first column)
   // an empty array is returned if the query returned no results
   $userName = Yii::$app-&gt;db-&gt;createCommand('SELECT name FROM user')
      -&gt;queryColumn();
   var_dump($userName);
   // return a scalar value
   // false is returned if the query has no result
   $count = Yii::$app-&gt;db-&gt;createCommand('SELECT COUNT(*) FROM user')
      -&gt;queryScalar();
   var_dump($count);
}
</pre>
<p>The above example shows various ways of fetching data from a DB.</p>
<p><b>Step 2</b> &minus; Go to the address <b>http://localhost:8080/index.php?r=site/test-db</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_actiontestdb_output.jpg" alt="Create actionTestDb Output" />
<h2>Create an SQL Command</h2>
<p>To create an SQL command with parameters, you should always use the approach of binding parameters to prevent the SQL injection.</p>
<p><b>Step 1</b> &minus; Modify the <b>actionTestDb</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $firstUser = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user WHERE id = :id')
      -&gt;bindValue(':id', 1)
      -&gt;queryOne();
   var_dump($firstUser);
   $params = [':id' =&gt; 2, ':name' =&gt; 'User2'];
   $secondUser = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user WHERE
      id = :id AND name = :name')
      -&gt;bindValues($params)
      -&gt;queryOne();
   var_dump($secondUser);
      //another approach
   $params = [':id' =&gt; 3, ':name' =&gt; 'User3'];
   $thirdUser = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user WHERE
      id = :id AND name = :name', $params)
      -&gt;queryOne();
   var_dump($thirdUser);
}
</pre>
<p>In the code above &minus;</p>
<ul class="list">
<li><p><b>bindValue()</b> &minus; binds a single parameter value.</p></li>
<li><p><b>bindValues()</b> &minus; binds multiple parameter values.</p></li>
</ul>
<p><b>Step 2</b> &minus; If you go to the address <b>http://localhost:8080/index.php?r=site/test-db</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/modified_actiontestdb_output.jpg" alt="Modified actionTestDb Output" />
<h3>INSERT, UPDATE and DELETE Queries</h3>
<p>For INSERT, UPDATE, and DELETE queries, you may call insert(), update(), and delete() methods.</p>
<p><b>Step 1</b> &minus; Modify the <b>actionTestDb</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   public function actionTestDb(){
      // INSERT (table name, column values)
      Yii::$app-&gt;db-&gt;createCommand()-&gt;insert('user', [
         'name' =&gt; 'My New User',
         'email' =&gt; 'mynewuser@gmail.com',
      ])-&gt;execute();
      $user = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user WHERE name = :name')
         -&gt;bindValue(':name', 'My New User')
         -&gt;queryOne();
      var_dump($user);
      // UPDATE (table name, column values, condition)
      Yii::$app-&gt;db-&gt;createCommand()-&gt;update('user', ['name' =&gt; 'My New User
         Updated'], 'name = "My New User"')-&gt;execute();
      $user = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user WHERE name = :name')
         -&gt;bindValue(':name', 'My New User Updated')
         -&gt;queryOne();
      var_dump($user);
      // DELETE (table name, condition)
      Yii::$app-&gt;db-&gt;createCommand()-&gt;delete('user', 'name = "My New User
         Updated"')-&gt;execute();
      $user = Yii::$app-&gt;db-&gt;createCommand('SELECT * FROM user WHERE name = :name')
         -&gt;bindValue(':name', 'My New User Updated')
         -&gt;queryOne();
      var_dump($user);
   }
}
</pre>
<p><b>Step 2</b> &minus; Type the URL <b>http://localhost:8080/index.php?r=site/test-db</b> in the address bar of the web browser and you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/insert_update_delete_queries_example.jpg" alt="Insert Update Delete Queries Example" />
<h1>Yii - Query Builder</h1>
<p>Query builder allows you to create SQL queries in a programmatic way. Query builder helps you write more readable SQL-related code.</p>
<p>To use query builder, you should follow these steps &minus;</p>
<ul class="list">
<li>Build an yii\db\Query object.</li>
<li>Execute a query method.</li>
</ul>
<p>To build an <b>yii\db\Query</b> object, you should call different query builder functions to define different parts of an SQL query.</p>
<p><b>Step 1</b> &minus; To show a typical usage of the query builder, modify the <b>actionTestDb</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   //generates "SELECT id, name, email FROM user WHERE name = 'User10';"
   $user = (new \yii\db\Query())
      -&gt;select(['id', 'name', 'email'])
      -&gt;from('user')
      -&gt;where(['name' =&gt; 'User10'])
      -&gt;one();
   var_dump($user);
}
</pre>
<p><b>Step 2</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/test-db</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/query_builder.jpg" alt="Query Builder" />
<h2>Where() function</h2>
<p>The <b>where()</b> function defines the WHERE fragment of a query. To specify a <b>WHERE</b> condition, you can use three formats.</p>
<ul class="list">
<li><p><b>string format</b> &minus; 'name = User10'</p></li>
<li><p><b>hash format</b> &minus; ['name' =&gt; 'User10', 'email =&gt; user10@gmail.com']</p></li>
<li><p><b>operator format</b> &minus; ['like', 'name', 'User']</p></li>
</ul>
<h3>Example of String format</h3>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $user = (new \yii\db\Query())
      -&gt;select(['id', 'name', 'email'])
      -&gt;from('user')
      -&gt;where('name = :name', [':name' =&gt; 'User11'])
      -&gt;one();
   var_dump($user);
}
</pre>
<p>Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/string_format_example_output.jpg" alt="String Format Example Output" />
<h3>Example of Hash format</h3>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $user = (new \yii\db\Query())
      -&gt;select(['id', 'name', 'email'])
      -&gt;from('user')
      -&gt;where([
         'name' =&gt; 'User5',
         'email' =&gt; 'user5@gmail.com'
      ])
      -&gt;one();
   var_dump($user);
}
</pre>
<p>Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/hash_format_example_output.jpg" alt="Hash Format Example Output" />
<p>Operator format allows you to define arbitrary conditions in the following format &minus;</p>
<pre class="result notranslate">
[operator, operand1, operand2]
</pre>
<p>The operator can be &minus;</p>
<ul class="list">
<li><p><b>and</b> &minus; ['and', 'id = 1', 'id = 2'] will generate id = 1 AND id = 2 or: similar to the and
operator</p></li>
<li><p><b>between</b> &minus; ['between', 'id', 1, 15] will generate id BETWEEN 1 AND 15</p></li>
<li><p><b>not between</b> &minus; similar to the between operator, but BETWEEN is replaced with NOT BETWEEN</p></li>
<li><p><b>in</b> &minus; ['in', 'id', [5,10,15]] will generate id IN (5,10,15)</p></li>
<li><p><b>not in</b> &minus; similar to the in operator, but IN is replaced with NOT IN</p></li>
<li><p><b>like</b> &minus; ['like', 'name', 'user'] will generate name LIKE '%user%'</p></li>
<li><p><b>or like</b> &minus; similar to the like operator, but OR is used to split the LIKE predicates</p></li>
<li><p><b>not like</b> &minus; similar to the like operator, but LIKE is replaced with NOT LIKE</p></li>
<li><p><b>or not like</b> &minus; similar to the not like operator, but OR is used to concatenate the NOT LIKE predicates</p></li>
<li><p><b>exists</b> &minus; requires one operand which must be an instance of the yii\db\Query
class</p></li>
<li><p><b>not exists</b> &minus; similar to the exists operator, but builds a NOT EXISTS (subquery) expression</p></li>
<li><p><b>&lt;, &lt;=, &gt;, &gt;=,</b> or any other DB operator: ['&lt;', 'id', 10] will generate id&lt;10</p></li>
</ul>
<h3>Example of Operator format</h3>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $users = (new \yii\db\Query())
      -&gt;select(['id', 'name', 'email'])
      -&gt;from('user')
      -&gt;where(['between', 'id', 5, 7])
      -&gt;all();
   var_dump($users);
}
</pre>
<p>Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/operator_format_example_output.jpg" alt="Operator Format Example Output" />
<h2>OrderBy() Function</h2>
<p>The <b>orderBy()</b> function defines the ORDER BY fragment.</p>
<p><b>Example</b> &minus;</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $users = (new \yii\db\Query())
      -&gt;select(['id', 'name', 'email'])
      -&gt;from('user')
      -&gt;orderBy('name DESC')
      -&gt;all();
   var_dump($users);
}
</pre>
<p>Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/orderby_function_example_output.jpg" alt="OrderBy Function Example Output" />
<h2>groupBy() Function</h2>
<p>The <b>groupBy()</b> function defines the GROUP BY fragment, while the <b>having()</b> method specifies the HAVING fragment.</p> 
<p><b>Example</b> &minus;</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $users = (new \yii\db\Query())
      -&gt;select(['id', 'name', 'email'])
      -&gt;from('user')
      -&gt;groupBy('name')
      -&gt;having('id &lt; 5')
      -&gt;all();
   var_dump($users);
}
</pre>
<p>Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/groupby_function_example_output.jpg" alt="groupBy Function Example Output" />
<p>The <b>limit()</b> and <b>offset()</b> methods defines the <b>LIMIT</b> and <b>OFFSET</b> fragments.</p>
<p><b>Example</b> &minus;</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $users = (new \yii\db\Query())
      -&gt;select(['id', 'name', 'email'])
      -&gt;from('user')
      -&gt;limit(5)
      -&gt;offset(5)
      -&gt;all();
   var_dump($users);
}
</pre>
<p>You can see the following output &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/limit_offset_fragments.jpg" alt="Limit Offset Fragments" />
<p>The <b>yii\db\Query</b> class provides a set of methods for different purposes &minus;</p>
<ul class="list">
<li><p><b>all()</b> &minus; Returns an array of rows of name-value pairs.</p></li>
<li><p><b>one()</b> &minus; Returns the first row.</p></li>
<li><p><b>column()</b> &minus; Returns the first column.</p></li>
<li><p><b>scalar()</b> &minus; Returns a scalar value from the first row and first column of the result.</p></li>
<li><p><b>exists()</b> &minus; Returns a value indicating whether the query contains any result</p></li>
<li><p><b>count()</b> Returns the result of a COUNT query</p></li>
<li><p><b>other aggregation query methods</b> &minus; Includes sum($q), average($q), max($q), min($q). The $q parameter can be either a column name or a DB expression.</p></li>
</ul>
<h1>Yii - Active Record</h1>
<p>Active Record provides an object-oriented API for accessing data. An Active Record class is associated with a database table.</p>
<p>Yii provides the Active Record support for the following relational databases &minus;</p>
<ul class="list">
<li>MySQL 4.1 or later</li>
<li>SQLite 2 and 3:</li>
<li>PostgreSQL 7.3 or later</li>
<li>Microsoft SQL Server 2008 or later</li>
<li>CUBRID 9.3 or later</li>
<li>Oracle</li>
<li>ElasticSearch</li>
<li>Sphinx</li>
</ul>
<p>Additionally, the Active Record class supports the following <b>NoSQL</b> databases &minus;</p>
<ul class="list">
<li>Redis 2.6.12 or later</li>
<li>MongoDB 1.3.0 or later</li>
</ul>
<p>After declaring an Active Record class(<b>MyUser</b> model in our case) for a separate database table, you should follow these steps to query data from it &minus;</p>
<ul class="list">
<li>Create a new query object, using the yii\db\ActiveRecord::find() method.</li>
<li>Build the query object.</li>
<li>Call a query method to retrieve data.</li>
</ul>
<p><b>Step 1</b> &minus; Modify the <b>actionTestDb()</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   // return a single user whose ID is 1
   // SELECT * FROM `user` WHERE `id` = 1
   $user = MyUser::find()
      -&gt;where(['id' =&gt; 1])
      -&gt;one();
   var_dump($user);
   // return the number of users
   // SELECT COUNT(*) FROM `user`
   $users = MyUser::find()
      -&gt;count();
   var_dump($users);
   // return all users and order them by their IDs
   // SELECT * FROM `user` ORDER BY `id`
   $users = MyUser::find()
      -&gt;orderBy('id')
      -&gt;all();
   var_dump($users);
}
</pre>
<p>The code given above shows how to use ActiveQuery to query data.</p>
<p><b>Step 2</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/test-db</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/active_record.jpg" alt="Active Record" />
<p>Querying by primary key values or a set of column values is a common task, that is why Yii provides the following methods &minus;</p>
<ul class="list">
<li><p><b>yii\db\ActiveRecord::findOne()</b> &minus; Returns a single Active Record instance</p></li>
<li><p><b>yi\db\ActiveRecord::findAll()</b> &minus; Returns an array of Active Record instances</p></li>
</ul>
<p><b>Example</b> &minus;</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   // returns a single customer whose ID is 1
   // SELECT * FROM `user` WHERE `id` = 1
   $user = MyUser::findOne(1);
   var_dump($user);
   // returns customers whose ID is 1,2,3, or 4
   // SELECT * FROM `user` WHERE `id` IN (1,2,3,4)
   $users = MyUser::findAll([1, 2, 3, 4]);
   var_dump($users);
   // returns a user whose ID is 5
   // SELECT * FROM `user` WHERE `id` = 5
   $user = MyUser::findOne([
      'id' =&gt; 5
   ]);
   var_dump($user);
}
</pre>
<h2>Save Data to Database</h2>
<p>To save data to the database, you should call the <b>yii\db\ActiveRecord::save()</b> method.</p>
<p><b>Step 1</b> &minus; Modify the <b>actionTestDb()</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   // insert a new row of data
   $user = new MyUser();
   $user-&gt;name = 'MyCustomUser2';
   $user-&gt;email = 'mycustomuser@gmail.com';
   $user-&gt;save();
   var_dump($user-&gt;attributes);
   
   // update an existing row of data
   $user = MyUser::findOne(['name' =&gt; 'MyCustomUser2']);
   $user-&gt;email = 'newemail@gmail.com';
   $user-&gt;save();
   var_dump($user-&gt;attributes);
}
</pre>
<p><b>Step 2</b> &minus; Go to <b>http://localhost:8080/index.php?r=site/test-db</b>, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/save_data_database.jpg" alt="Save Data to Database" />
<p>To delete a single row of data, you should &minus;</p>
<ul class="list">
<li><p>Retrieve the Active Record instance</p></li>
<li><p>Call the <b><i>yii\db\ActiveRecord::delete()</i></b> method</p></li>
</ul>
<p><b>Step 1</b> &minus; Modify the <b>actionTestDb()</b> method this way.</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
   $user = MyUser::findOne(2);
   if($user-&gt;delete()) {
      echo "deleted";
   } 
}
</pre>
<p><b>Step 2</b> &minus; Type <b>http://localhost:8080/index.php?r=site/test-db</b> in the address bar of the web browser, you will see the following output.</p>
<img src="https://www.tutorialspoint.com/yii/images/delete_single_row_data.jpg" alt="Delete Single Row Data" />
<p><b>Step 3</b> &minus; You can also call the <b>yii\db\ActiveRecord::deleteAll()</b> method to delete multiple rows of data, for example.</p>
<pre class="prettyprint notranslate">
public function actionTestDb() {
    MyUser::deleteAll('id &gt;= 20');
}
</pre>
<h1>Yii - Database Migration</h1>
<p>During the developing of a database-driven application, the database structure evolves with the source code. Yii provides the <b>database migration</b> feature that allows you to keep track of database changes.</p>
<p>Yii provides the following migration command line tools &minus;</p>
<ul class="list">
<li>Create new migrations</li>
<li>Revert migrations</li>
<li>Apply migrations</li>
<li>Re-apply migrations</li>
<li>Show migration status and history</li>
</ul>
<h2>Creating a Migration</h2>
<p>Let us create a new database migration.</p>
<p><b>Step 1</b> &minus; Inside the project root of the basic application template open the console window and run.</p>
<pre class="result notranslate">
./yii migrate/create add_news_table
</pre>
<p>The above command will create a new migration file (m160113_102634_add_news_table.php in this case) in the <b>migrations</b> folder.</p>
<p>The file contains the following code &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160113_102634_add_news_table extends Migration {
      public function up() {
   
      }
      public function down() {
         echo "m160113_102634_add_news_table cannot be reverted.\n";
         return false;
      }
      /*
      // Use safeUp/safeDown to run migration code within a transaction
      public function safeUp() {
 
      }
      public function safeDown() {
   
      }
      */
   }
?&gt;
</pre>
<p>Each DB migrations is a PHP class extending the <b>yii\db\Migration</b> class. The class name is generated in the following format &minus;</p>
<pre class="result notranslate">
m&lt;YYMMDD_HHMMSS&gt;_&lt;Name&gt;
</pre>
<p>where <b>&lt;YYMMDD_HMMSS&gt;</b> is the UTC datetime at which the migration command was executed and &lt;Name&gt; is the argument you provided in the console command.</p>
<p>The up() method is invoked when you upgrade your database, while the down() method is called when you downgrade it.</p>
<p><b>Step 2</b> &minus; To add a new table to the database, modify the migration file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160113_102634_add_news_table extends Migration {
      public function up() {
         $this-&gt;createTable("news", [
            "id" =&gt; Schema::TYPE_PK,
            "title" =&gt; Schema::TYPE_STRING,
            "content" =&gt; Schema::TYPE_TEXT,
         ]);
      }
      public function down() {
         $this-&gt;dropTable('news');
      }
      /*
      // Use safeUp/safeDown to run migration code within a transaction
      public function safeUp() {
	
      }
      public function safeDown() {

      }
      */
   }
?&gt;
</pre>
<p>In the above code we created a new table called news in the <b>up()</b> method and dropped this table in the <b>down()</b> method.</p>
<p>The <b>news</b> table consists of three fields: id, title, and content. When creating a table or a column we should use abstract types so that migrations are independent of a database type. For example, in the case of MySQL, TYPE_PK will be converted into int(11) NOT NUL AUTO_INCREMETN PRIMARY KEY.</p>
<p><b>Step 3</b> &minus; To upgrade a database, run this command.</p>
<pre class="result notranslate">
./yii migrate
</pre><p></p>
<img src="https://www.tutorialspoint.com/yii/images/upgrade_database.jpg" alt="Upgrade Database" />
<p>The above command will list all available migrations that have not been applied yet. Then, if you confirm to apply migrations, it will run safeUp() or up() in all new migration classes.</p>
<p><b>Step 4</b> &minus; To apply only three available migrations, you may run.</p>
<pre class="result notranslate">
./yii migrate 3
</pre>
<p><b>Step 5</b> &minus; You can also define a particular migration the database should be migrated to.</p>
<p># using timestamp to specify the migration</p>
<pre class="result notranslate">
yii migrate/to 160202_195501
</pre>
<p># using a string that can be parsed by strtotime()</p>
<pre class="result notranslate">
yii migrate/to "2016-01-01 19:55:01"
</pre>
<p># using full name</p>
<pre class="result notranslate">
yii migrate/to m160202_195501_create_news_table
</pre>
<p># using UNIX timestamp</p>
<pre class="result notranslate">
yii migrate/to 1393964718
</pre>
<p><b>Step 6</b> &minus; To revert a migration(execute down() or safeDown() methods), run.</p>
<pre class="result notranslate">
./yii migrate/down
</pre><p></p>
<img src="https://www.tutorialspoint.com/yii/images/revert_migration.jpg" alt="Revert Migration" />
<p><b>Step 7</b> &minus; To revert the most five recently applied migrations, you may run.</p>
<pre class="result notranslate">
./yii migrate/down 5
</pre>
<p><b>Step 8</b> &minus; To redo(revert and then apply again) migrations, run.</p>
<pre class="result notranslate">
./yii migrate/redo
</pre><p></p>
<img src="https://www.tutorialspoint.com/yii/images/redo_migration.jpg" alt="Redo Migration" />
<p>To list the migrations already applied, use these commands &minus;</p>
<ul class="list">
<li><p><b>yii migrate/new</b> <span style="padding-left:14%"># shows the first 10 new migrations</span></p></li>
<li><p><b>yii migrate/new 3</b> <span style="padding-left:12%"># shows the first 3 new migrations</span></p></li>
<li><p><b>yii migrate/new all</b> <span style="padding-left:10%"># shows all new migrations</span></p></li>
<li><p><b>yii migrate/history</b> <span style="padding-left:10%"># shows the last 10 applied migrations</span></p></li>
<li><p><b>yii migrate/history 20</b> <span style="padding-left:6.5%"># shows the last 20 applied migrations</span></p></li>
<li><p><b>yii migrate/history all</b> <span style="padding-left:6.5%"># shows all applied migrations</span></p></li>
</ul>
<p>Sometimes you need to add or drop a column from a specific table. You can use <b>addColumn()</b> and <b>dropColumn()</b> methods.</p>
<p><b>Step 1</b> &minus; Create a new migration.</p>
<pre class="result notranslate">
./yii migrate/create add_category_to_news
</pre>
<p><b>Step 2</b> &minus; Modify the newly created migration file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160113_110909_add_category_to_news extends Migration {
      public function up() {
         $this-&gt;addColumn('news', 'category', $this-&gt;integer());
      }
      public function down() {
         $this-&gt;dropColumn('news', 'category');
      }
   }
?&gt;
</pre>
<p>Now, if you run <b>./yii migrate</b>, the category column should be added to the news table. On the contrary, if you run <b>./yii migrate/down 1</b>, the category column should be dropped.</p>
<p>When performing DB migrations, it is important to ensure each migration has succeded or failed. It is recommended to enclose DB operations in a transaction. To implement transactional migrations, you should just put the migration code in the <b>safeUp()</b> and <b>safeDown()</b> methods. If any operation in these methods fails, all previous operations will be rolled back.</p>
<p>The previous example in the “transactional way” will be &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160113_110909_add_category_to_news extends Migration {
      public function safeUp() {
         $this-&gt;addColumn('news', 'category', $this-&gt;integer());
      }
      public function safeDown() {
         $this-&gt;dropColumn('news', 'category');
      }
   }
?&gt;
</pre>
<p>The <b>yii\db\Migration</b> class provides the following methods for manipulating databases &minus;</p>
<ul class="list">
<li><p><b>execute()</b> &minus; Executes a raw SQL statement</p></li>
<li><p><b>createTable()</b> &minus; Creates a table</p></li>
<li><p><b>renameTable()</b> &minus; Renames a table</p></li>
<li><p><b>insert()</b> &minus; Inserts a single row</p></li>
<li><p><b>batchInsert()</b> &minus; Inserts multiple rows</p></li>
<li><p><b>update()</b> &minus; Updates rows</p></li>
<li><p><b>delete()</b> &minus; Deletes rows</p></li>
<li><p><b>addColumn()</b> &minus; Adds a column</p></li>
<li><p><b>renameColumn()</b> &minus; Renames a column</p></li>
<li><p><b>dropColumn()</b> &minus; Removes a column</p></li>
<li><p><b>alterColumn()</b> &minus; Alters a column</p></li>
<li><p><b>dropTable()</b> &minus; Removes a table</p></li>
<li><p><b>truncateTable()</b> &minus; Removes all rows in a table</p></li>
<li><p><b>createIndex()</b> &minus; Creates an index</p></li>
<li><p><b>dropIndex()</b> &minus; Removes an index</p></li>
<li><p><b>addPrimaryKey()</b> &minus; Adds a primary key</p></li>
<li><p><b>dropPrimaryKey()</b> &minus; Removes a primary key</p></li>
<li><p><b>addForeignKey()</b> &minus; Adds a foreign key</p></li>
<li><p><b>dropForeignKey()</b> &minus; Removes a foreign key</p></li>
</ul>
<h1>Yii - Theming</h1>
<p>Theming helps you replace a set of views with another one without the need of modifying original view files. You should set the <b>theme</b> property of the view application component to use theming.</p>
<p>You should also define the following properties &minus;</p>
<ul class="list">
<li><p><b><i>yii\base\Theme::$basePath</i></b> &minus; Defines the base directory for CSS, JS, images, and so forth.</p></li>
<li><p><b><i>yii\base\Theme::$baseUrl</i></b> &minus; Defines the base URL of the themed
resources.</p></li>
<li><p><b><i>yii\base\Theme::$pathMap</i></b> &minus; Defines the replacement rules.</p></li>
</ul>
<p>For example, if you call <b>$this-&gt;render('create')</b> in UserController, the <b>@app/views/user/create.php</b> view file will be rendered. Nevertheless, if you enable theming like in the following application configuration, the view file @app/themes/basic/user/create.php will be rendered, instead.</p>
<p><b>Step 1</b> &minus; Modify the <b>config/web.php</b> file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'view' =&gt; [
            'theme' =&gt; [
               'basePath' =&gt; '@app/themes/basic',
               'baseUrl' =&gt; '@web/themes/basic',
               'pathMap' =&gt; [
                  '@app/views' =&gt; '@app/themes/basic',
               ],
            ],
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>We have added the view application component.</p>
<p><b>Step 2</b> &minus; Now create the <b>web/themes/basic</b> directory structure and <b>themes/basic/site</b>. Inside the themes/basic/site folder create a file called <b>about.php</b> with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
   $this-&gt;registerMetaTag(['name' =&gt; 'keywords', 'content' =&gt; 'yii, developing,
      views, meta, tags']);
   $this-&gt;registerMetaTag(['name' =&gt; 'description', 'content' =&gt; 'This is the
      description of this page!'], 'description');
?&gt;

&lt;div class = "site-about"&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
	
   &lt;p style = "color: red;"&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt; 
&lt;/div&gt;
</pre>
<p><b>Step 3</b> &minus; Now, go to <b>http://localhost:8080/index.php?r=site/about</b>, the <b>themes/basic/site/about.php</b> file will be rendered, instead of <b>views/site/about.php</b>.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_themes.jpg" alt="Create Themes" />
<p><b>Step 4</b> &minus; To theme modules, configure the yii\base\Theme::$pathMap property this way.</p>
<pre class="prettyprint notranslate">
'pathMap' =&gt; [
   '@app/views' =&gt; '@app/themes/basic',
   '@app/modules' =&gt; '@app/themes/basic/modules',
],
</pre>
<p><b>Step 5</b> &minus; To theme widgets, configure the <b>yii\base\Theme::$pathMap</b> property this way.</p>
<pre class="prettyprint notranslate">
'pathMap' =&gt; [
   '@app/views' =&gt; '@app/themes/basic',
   '@app/widgets' =&gt; '@app/themes/basic/widgets', // &lt;-- !!!
],
</pre>
<p>Sometimes you need to specify a basic theme which contains a basic look and feel of the application. To achieve this goal, you can use theme inheritance.</p>
<p><b>Step 6</b> &minus; Modify the view application component this way.</p>
<pre class="prettyprint notranslate">
'view' =&gt; [
   'theme' =&gt; [
      'basePath' =&gt; '@app/themes/basic',
      'baseUrl' =&gt; '@web/themes/basic',
      'pathMap' =&gt; [
         '@app/views' =&gt; [
            '@app/themes/christmas',
            '@app/themes/basic',
         ],
      ]
   ],
],
</pre>
<p>In the above configuration, the <b>@app/views/site/index.php</b> view file will be themed as either @app/themes/christmas/site/index.php or @app/themes/basic/site/index.php, depending on which file exists. If both files exist, the first one will be used.</p>
<p><b>Step 7</b> &minus; Create the <b>themes/christmas/site</b> directory structure.</p>
<p><b>Step 8</b> &minus; Now, inside the themes/christmas/site folder, create a file called about.php with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   use yii\helpers\Html;
   $this-&gt;title = 'About';
   $this-&gt;params['breadcrumbs'][] = $this-&gt;title;
   $this-&gt;registerMetaTag(['name' =&gt; 'keywords', 'content' =&gt; 'yii, developing,
      views, meta, tags']);
   $this-&gt;registerMetaTag(['name' =&gt; 'description', 'content' =&gt; 'This is the
      description of this page!'], 'description');
?&gt;

&lt;div class = "site-about"&gt;
   &lt;h2&gt;Christmas theme&lt;/h2&gt;
   &lt;img src = "http://pngimg.com/upload/fir_tree_PNG2514.png" alt = ""/&gt;
   &lt;p style = "color: red;"&gt;
      This is the About page. You may modify the following file to customize its content:
   &lt;/p&gt;
&lt;/div&gt;
</pre>
<p><b>Step 9</b> &minus; If you go to <b>http://localhost:8080/index.php?r=site/about</b>, you will see the updated about page using the Christmas theme.</p>
<img src="https://www.tutorialspoint.com/yii/images/christmas_theme.jpg" alt="Christmas Theme" />
<h1>Yii - RESTful APIs</h1>
<p>Yii provides the following useful features for implementing RESTful APIs &minus;</p>
<ul class="list">
<li>Quick prototyping</li>
<li>Customizable object serialization</li>
<li>Response format (supporting JSON and XML by default)</li>
<li>Formatting of collection data and validation errors</li>
<li>Efficient routing</li>
<li>Support for HATEOAS</li>
<li>Built-in support for the OPTIONS and HEAD verbs</li>
<li>Data caching and HTTP caching</li>
<li>Authentication and authorization</li>
<li>Rate limiting</li>
</ul>
<p>To show RESTful APIs in action, we need data.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i>.</p></li>
<li><p>Create a new database via <i>CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</i></p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"], 
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Model Generator" />
<p>The MyUser model should appear in the models directory.</p>
<h2>Installing Postman</h2>
<p>Postman is a handy tool when developing a RESTful service. It provides a useful interface for constructing requests.</p>
<p>You can find this tool at <a target="_blank" rel="nofollow" href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en">https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en</a> .</p>
<p>To install it, press the “Add to Chrome” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/installing_postman.jpg" alt="Installing Postman" />
<h1>Yii - RESTful APIs in Action</h1>
<p>The controller class extends from the <b>yii\rest\ActiveController</b> class, which implements common RESTful actions. We specify the <b>$modelClass</b> property so that the controller knows which model to use for manipulating data.</p>
<p><b>Step 1</b> &minus; Create a file called <b>UserController.php</b> inside the controllers folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\controllers;
   use yii\rest\ActiveController;
   class UserController extends ActiveController {
      public $modelClass = 'app\models\MyUser';
   }
?&gt;
</pre>
<p>Next we need to set up the urlManager component, so that the user data can be accessed and manipulated with meaningful HTTP verbs and pretty URLs. To let the API access data in JSON, we should configure the parsers property of the <b>request</b> application component.</p>
<p><b>Step 2</b> &minus; Modify the <b>config/web.php</b> file this way &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this is 
               //required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'urlManager' =&gt; [
            'enablePrettyUrl' =&gt; true,
            'enableStrictParsing' =&gt; true,
            'showScriptName' =&gt; false,
            'rules' =&gt; [
               ['class' =&gt; 'yii\rest\UrlRule', 'controller' =&gt; 'user'],
            ],
         ],
         'request' =&gt; [
            'parsers' =&gt; [
               'application/json' =&gt; 'yii\web\JsonParser',
            ]
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>With the minimal amount of effort, we've just built a RESTful API for accessing user data. The APIs include &minus;</p>
<ul class="list">
<li><p><b>GET /users</b> &minus; list all users page by page</p></li>
<li><p><b>HEAD /users</b> &minus; show the overview information of user listing</p></li>
<li><p><b>POST /users</b> &minus; create a new user</p></li>
<li><p><b>GET /users/20</b> &minus; return the details of the user 20</p></li>
<li><p><b>HEAD /users/20</b> &minus; show the overview information of user 20</p></li>
<li><p><b>PATCH /users/ 20 and PUT /users/20</b> &minus; update the user 20</p></li>
<li><p><b>DELETE /users/20</b> &minus; delete the user 20</p></li>
<li><p><b>OPTIONS /users</b> &minus; show the supported verbs regarding endpoint /users</p></li>
<li><p><b>OPTIONS /users/20</b> &minus; show the supported verbs regarding endpoint /users/ 20</p></li>
</ul>
<p>Notice, that Yii automatically pluralizes controller name.</p>
<p><b>Step 3</b> &minus; Now, open Postman, punch in <b>http://localhost:8080/users</b>, and click “Send”. You will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/open_postman.jpg" alt="Open Postman" />
<p><b>Step 4</b> &minus; To create a new user, change the request type to POST, add two body parameters: name and email, and click “Send”.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_new_user.jpg" alt="Create New User" />
<p><b>Step 5</b> &minus; You can use the <b>fields</b> parameter to specify which fields should be included in the result. For example, the URL <b>http://localhost:8080/users?fields=id</b>, name will only return the <b>id</b> and <b>name</b> fields as shown in the following screenshot.</p>
<img src="https://www.tutorialspoint.com/yii/images/use_fields.jpg" alt="Use Fields" />
<h1>Yii - Fields</h1>
<p>By overriding <b>fields() and extraFields()</b> methods, you can define what data can be put into a response. The difference between these two methods is that the former defines the default set of fields, which should be included in the response while the latter defines additional fields, which may be included in the response if an end user requests for them via the <b>expand</b> query parameter.</p>
<p><b>Step 1</b> &minus; Modify the <b>MyUser</b> model this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use app\components\UppercaseBehavior;
   use Yii;
   /**
   * This is the model class for table "user".
   *@property integer $id
   * @property string $name
   * @property string $email
   */
   class MyUser extends \yii\db\ActiveRecord {
      public function fields() {
         return [
            'id',
            'name',
            //PHP callback
            'datetime' =&gt; function($model) {
               return date("d:m:Y H:i:s");
            }
         ];
      }
      /**
      * @inheritdoc
      */
      public static function tableName() {
         return 'user';
      }
      /**
      * @inheritdoc
      */
      public function rules() {
         return [
            [['name', 'email'], 'string', 'max' =&gt; 255]
         ];
      }
      /**
      * @inheritdoc
      */
      public function attributeLabels() {
         return [
            'id' =&gt; 'ID',
            'name' =&gt; 'Name',
            'email' =&gt; 'Email',
         ];
      }
   }
?&gt;
</pre>
<p>Besides default fields: id and name, we have added a custom field – <b>datetime</b>.</p>
<p><b>Step 2</b> &minus; In Postman, run the URL <b>http://localhost:8080/users</b>.</p>
<img src="https://www.tutorialspoint.com/yii/images/run_url.jpg" alt="Run URL" />
<p><b>Step 3</b> &minus; Now, modify the <b>MyUser</b> model this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use app\components\UppercaseBehavior;
   use Yii;
   /**
   * This is the model class for table "user".
   *
   * @property integer $id
   * @property string $name
   * @property string $email
   */
   class MyUser extends \yii\db\ActiveRecord {
      public function fields() {
         return [
            'id',
            'name',
         ];
      }
      public function extraFields() {
         return ['email'];
      }
      /**
      * @inheritdoc
      */
      public static function tableName() {
         return 'user';
      }
      /**
      * @inheritdoc
      */
      public function rules() { 
         return [
            [['name', 'email'], 'string', 'max' =&gt; 255]
         ];
      }
      /**
      * @inheritdoc
      */
      public function attributeLabels() { 
         return [
            'id' =&gt; 'ID',
            'name' =&gt; 'Name',
            'email' =&gt; 'Email',
         ];
      }
   } 
?&gt;
</pre>
<p>Notice, that the email field is returned by the <b>extraFields()</b> method.</p>
<p><b>Step 4</b> &minus; To get data with this field, run <b>http://localhost:8080/users?expand=email</b>.</p>
<img src="https://www.tutorialspoint.com/yii/images/get_data.jpg" alt="Get Data" />
<h2>Customizing Actions</h2>
<p>The <b>yii\rest\ActiveController</b> class provides the following actions &minus;</p>
<ul class="list">
<li><p><b>Index</b> &minus; Lists resources page by page</p></li>
<li><p><b>View</b> &minus; Returns the details of a specified resource</p></li>
<li><p><b>Create</b> &minus; Creates a new resource</p></li>
<li><p><b>Update</b> &minus; Updates an existing resource</p></li>
<li><p><b>Delete</b> &minus; Deletes the specified resource</p></li>
<li><p><b>Options</b> &minus; Returns the supported HTTP methods</p></li>
</ul>
<p>All above actions are declared in the actions method().</p>
<p>To disable the “delete” and “create” actions, modify the <b>UserController</b> this way &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\controllers;
   use yii\rest\ActiveController;
   class UserController extends ActiveController {
      public $modelClass = 'app\models\MyUser';
      public function actions() {
         $actions = parent::actions();
         // disable the "delete" and "create" actions
         unset($actions['delete'], $actions['create']);
         return $actions;
      }
   }
?&gt;
</pre>
<h2>Handling Errors</h2>
<p>When obtaining a RESTful API request, if there is an error in the request or something unexpected happens on the server, you may simply throw an exception. If you can identify the cause of the error, you should throw an exception along with a proper HTTP status code. Yii REST uses the following statuses &minus;</p>
<ul class="list">
<li><p><b>200</b> &minus; OK.</p></li>
<li><p><b>201</b> &minus; A resource was successfully created in response to a POST request. The Location header contains the URL pointing to the newly created resource.</p></li>
<li><p><b>204</b> &minus; The request was handled successfully and the response contains no content.</p></li>
<li><p><b>304</b> &minus; The resource was not modified.</p></li>
<li><p><b>400</b> &minus; Bad request.</p></li>
<li><p><b>401</b> &minus; Authentication failed.</p></li>
<li><p><b>403</b> &minus; The authenticated user is not allowed to access the specified API endpoint.</p></li>
<li><p><b>404</b> &minus; The resource does not exist.</p></li>
<li><p><b>405</b> &minus; Method not allowed.</p></li>
<li><p><b>415</b> &minus; Unsupported media type.</p></li>
<li><p><b>422</b> &minus; Data validation failed.</p></li>
<li><p><b>429</b> &minus; Too many requests.</p></li>
<li><p><b>500</b> &minus; Internal server error.</p></li>
</ul>
<h1>Yii - Testing</h1>
<p>When we write a PHP class, we debug it step by step or use die or echo statements to verify how it works. If we develop a web application, we are entering test data in forms to ensure the page works as we expected. This test process can be automated.</p>
<p>Automatic test approach makes sense for long term projects, which are &minus;</p>
<ul class="list">
<li>Complex and large</li>
<li>Grows constantly</li>
<li>Too expensive in terms of cost of the failure</li>
</ul>
<p>If your project is not getting complex and is relatively simple or it is just a one-time project, then automated testing can be an overkill.</p>
<h2>Preparing for the Tests</h2>
<p><b>Step 1</b> &minus; Install the Codeception framework. Run the following code.</p>
<pre class="result notranslate">
composer global require "codeception/codeception = 2.0.*"
composer global require "codeception/specify = *"
composer global require "codeception/verify = *"
</pre>
<p><b>Step 2</b> &minus; Run the following.</p>
<pre class="result notranslate">
composer global status
</pre>
<p>The output is “Changed current directory to &lt;directory&gt;”. You should add the '&lt;directory&gt;/vendor/bin' to your PATH variable. In this case, run the following code &minus;</p>
<pre class="result notranslate">
export PATH = $PATH:~/.composer/vendor/bin
</pre>
<p><b>Step 3</b> &minus; Create a new database called <b>'yii2_basic_tests'</b>.</p>
<p><b>Step 4</b> &minus; Inside the tests directory run.</p>
<pre class="result notranslate">
codeception/bin/yii migrate
</pre>
<p>The database configuration can be found at <b>tests/codeception/config/config.php</b>.</p>
<p><b>Step 5</b> &minus; Build the test suites via.</p>
<pre class="result notranslate">
codecept build
</pre>
<h2>Fixtures</h2>
<p>The main purpose of fixtures is to set up the environment in an unknown state so that your tests run in an expected way. Yii provides a near fixture framework. A key concept of the Yii fixture framework is the fixture object. It represents a particular aspect of a test environment. The fixture object is an instance of the <b>yii\test\Fixture class</b>.</p>
<p>To define a fixture, you should create a new class and extend it from yii\test\Fixture or yii\test\ActiveFixture. The former is better for general purpose fixtures while the latter is specifically designed to work with database and ActiveRecord.</p>
<h2>Unit Tests</h2>
<p>Unit tests help you testing individual functions. For example, model functions or a component class.</p>
<p><b>Step 1</b> &minus; Create a new fixture in the file called <b>ExampleFixture.php</b> under the <b>tests/codeception/fixtures</b> directory.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\tests\codeception\fixtures;
   use yii\test\ActiveFixture;
   class ExampleFixture extends ActiveFixture {
      public $modelClass = ‘app⊨’MyUser';
   }
?&gt;
</pre>
<p><b>Step 2</b> &minus; Then, create a new test file called ExampleTest.php in the tests/codeception/unit/models folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace tests\codeception\unit\models;
   use app\models\MyUser;
   use yii\codeception\TestCase;
   class ExampleTest extends TestCase {
      public function testCreateMyUser() {
         $m = new MyUser();
         $m-&gt;name = "myuser";
         $m-&gt;email = "myser@email.com";
         $this-&gt;assertTrue($m-&gt;save());
      }
      public function testUpdateMyUser() {
         $m = new MyUser();
         $m-&gt;name = "myuser2";
         $m-&gt;email = "myser2@email.com";
         $this-&gt;assertTrue($m-&gt;save());
         $this-&gt;assertEquals("myuser2", $m-&gt;name);
      }
      public function testDeleteMyUser() {
         $m = MyUser::findOne(['name' =&gt; 'myuser2']);
         $this-&gt;assertNotNull($m);
         MyUser::deleteAll(['name' =&gt; $m-&gt;name]);
         $m = MyUser::findOne(['name' =&gt; 'myuser2']);
         $this-&gt;assertNull($m);
      }
   }
?&gt;
</pre>
<p>In the above code, we define three tests &minus;</p>
<ul class="list">
<li>testCreateMyUser,</li>
<li>testUpdateMyUser, and</li>
<li>testDeleteMyUser.</li>
</ul>
<p>We just created a new user, updated his name, and trying to delete him. We manage the <b>MyUser</b> model in terms of the yii2_basic_tests database, which is a complete copy of our real DB.</p>
<p><b>Step 3</b> &minus; To start the <b>tests</b>, move to the tests folder and run.</p>
<pre class="result notranslate">
codecept run unit models/ExampleTest
</pre>
<p>It should pass all the tests. You will see the following &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/unit_tests.jpg" alt="Unit Tests" />
<h2>Functional Tests</h2>
<p>Functional tests help you in &minus;</p>
<ul class="list">
<li>testing the application using browser emulator</li>
<li>verify that the function works properly</li>
<li>interact with the database</li>
<li>submit data to server-side scripts</li>
</ul>
<p>Inside the tests folder run &minus;</p>
<pre class="result notranslate">
generate:cept functional AboutPageCept
</pre>
<p>The above command creates the <b>AboutPageCept.php</b> file under the tests/codeception/functional folder. In this functional test, we are going to check whether our <b>about</b> page exists.</p>
<p><b>Step 1</b> &minus; Modify the <b>AboutPageCept.php</b> file.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $I = new FunctionalTester($scenario);
   $I-&gt;wantTo('perform actions and see result');
   $I-&gt;amOnPage('site/about');
   $I-&gt;see('about');
   $I-&gt;dontSee('apple');
?&gt;
</pre>
<p>In the above given code, we checked whether we are on the about page. Obviously, we should see the word 'about' and no 'apple' on the page.</p>
<p><b>Step 2</b> &minus; Run the test via.</p>
<pre class="result notranslate">
run functional AboutPageCept
</pre>
<p>You will see the following output &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/run_unit_tests.jpg" alt="Run Unit Tests" />
<h1>Yii - Caching</h1>
<p>Caching is an effective way to improve the performance of your application. Caching mechanisms store static data in cache and get it from cache when requested. On the server side, you may use cache to store basic data, such as a list of most recent news. You can also store page fragments or whole web pages. On the client side, you can use HTTP caching to keep most recently visited pages in the browser cache.</p>
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways.</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i></p>.</li>
<li><p>Create a new database via <i>CREATE DATABASE helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</i></p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host=localhost;dbname=helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp()\ {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Caching Preparing DB" />
<p>The MyUser model should appear in the models directory.</p>
<h2>Data Caching</h2>
<p>Data caching helps you in storing PHP variables in cache and retrieve them later. Data caching relies on cache components, which are usually registered as application components. To access the application component, you may call <b>Yii::$app &rarr; cache</b>. You can register several cache application components.</p>
<p>Yii supports the following cache storages &minus;</p>
<ul class="list">
<li><p><i>yii\caching\DbCache</i> &minus; Uses a database table to store cached data. Uou must create a table as specified in yii\caching\DbCache::$cacheTable.</p></li>
<li><p><i>yii\caching\ApcCache</i> &minus; Uses PHP APC extension.</p></li>
<li><p><i>yii\caching\FileCache</i> &minus; Uses files to store cached data.</p></li>
<li><p><i>yii\caching\DummyCache</i> &minus; Serves as a cache placeholder which does no real caching. The purpose of this component is to simplify the code that needs to check the availability of cache.</p></li>
<li><p><i>yii\caching\MemCache</i> &minus; Uses PHP memcache extension.</p></li>
<li><p><i>yii\caching\WinCache</i> &minus; Uses PHP WinCache extension.</p></li>
<li><p><i>yii\redis\Cache</i> &minus; Implements a cache component based on Redis database.</p></li>
<li><p><i>yii\caching\XCache</i> &minus; Uses PHP XCache extension.</p></li>
</ul>
<p>All cache components support the following APIs &minus;</p>
<ul class="list">
<li><p><i>get()</i> &minus; Retrieves a data value from cache with a specified key. A false value will be returned if the data value is expired/invalidated or not found.</p></li>
<li><p><i>add()</i> &minus; Stores a data value identified by a key in cache if the key is not found in the cache.</p></li>
<li><p><i>set()</i> &minus; Stores a data value identified by a key in cache.</p></li>
<li><p><i>multiGet()</i> &minus; Retrieves multiple data values from cache with the specified keys.</p></li>
<li><p><i>multiAdd()</i> &minus; Stores multiple data values in cache. Each item is identified by a key. If a key already exists in the cache, the data value will be skipped.</p></li>
<li><p><i>multiSet()</i> &minus; Stores multiple data values in cache. Each item is identified by a key.</p></li>
<li><p><i>exists()</i> &minus; Returns a value indicating whether the specified key is found in the cache.</p></li>
<li><p><i>flush()</i> &minus; Removes all data values from the cache.</p></li>
<li><p><i>delete()</i> &minus; Removes a data value identified by a key from the cache.</p></li>
</ul>
<p>A data value stored in a cache will remain there forever unless it is removed. To change this behavior, you can set an expiration parameter when calling the set() method to store a data value.</p>
<p>Cached data values can also be invalidated by changes of the <b>cache dependencies</b> &minus;</p>
<ul class="list">
<li><p><i>yii\caching\DbDependency</i> &minus; The dependency is changed if the query result of the specified SQL statement is changed.</p></li>
<li><p><i>yii\caching\ChainedDependency</i> &minus; The dependency is changed if any of the dependencies on the chain is changed.</p></li>
<li><p><i>yii\caching\FileDependency</i> &minus; The dependency is changed if the file's last modification time is changed.</p></li>
<li><p><i>yii\caching\ExpressionDependency</i> &minus; The dependency is changed if the result of the specified PHP expression is changed.</p></li>
</ul>
<p>Now, add the <b>cache</b> application component to your application.</p>
<p><b>Step 1</b> &minus; Modify the <b>config/web.php</b> file.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p><b>Step 2</b> &minus; Add a new function called <b>actionTestCache()</b> to the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionTestCache() {
   $cache = Yii::$app-&gt;cache;
   // try retrieving $data from cache
   $data = $cache-&gt;get("my_cached_data");
   if ($data === false) {
      // $data is not found in cache, calculate it from scratch
      $data = date("d.m.Y H:i:s");
      // store $data in cache so that it can be retrieved next time
      $cache-&gt;set("my_cached_data", $data, 30);
   }
   // $data is available here
   var_dump($data);
}
</pre>
<p><b>Step 3</b> &minus; Type <b>http://localhost:8080/index.php?r=site/test-cache</b> in the address bar of the web browser, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/test_cache.jpg" alt="Test Cache" />
<p><b>Step 4</b> &minus; If you reload the page, you should notice the date has not changed. The date value is cached and the cache will expire within 30 seconds. Reload the page after 30 seconds.</p>
<img src="https://www.tutorialspoint.com/yii/images/date_value_cached.jpg" alt="Date Value Cached" />
<h2>Query Caching</h2>
<p>Query caching provides you caching the result of database queries. Query caching requires a DB connection and the cache application component.</p>
<p><b>Step 1</b> &minus; Add a new method called <b>actionQueryCaching()</b> to the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionQueryCaching() {
   $duration = 10;
   $result = MyUser::getDb()-&gt;cache(function ($db) {
      return MyUser::find()-&gt;count();
   }, $duration);
   var_dump($result);
   $user = new MyUser();
   $user-&gt;name = "cached user name";
   $user-&gt;email = "cacheduseremail@gmail.com";
   $user-&gt;save();
   echo "==========";
   var_dump(MyUser::find()-&gt;count());
}
</pre>
<p>In the above code, we cache the database query, add a new user, and display user count.</p>
<p><b>Step 2</b> &minus; Go to the URL <b>http://localhost:8080/index.php?r=site/query-caching</b> and reload the page.</p>
<img src="https://www.tutorialspoint.com/yii/images/query_caching.jpg" alt="Query Caching" />
<p>When we open the page for the first, we cache the DB query and display all users count. When we reload the page, the result of the cached DB query is the same as it was because the database query is cached.</p>
<p>You can flush the cache from the console using the following commands &minus;</p>
<ul class="list">
<li><p><b>yii cache</b> &minus; Shows the available cache components.</p></li>
<li><p><b>yii cache/flush cache1 cache2 cache3</b> &minus; Flushes the cache components cache1, cache2, and cache3.</p></li>
<li><p><b>yii cache/flush-all</b> &minus; Flushes all cache components.</p></li>
</ul>
<p><b>Step 3</b> &minus; Inside the project root of your application run <b>./yii cache/flush-all</b>.</p>
<img src="https://www.tutorialspoint.com/yii/images/running_project_root_application.jpg" alt="Running Project Root Application" />
<h1>Yii - Fragment Caching</h1>
<p>Fragment caching provides caching of a fragment of a web page.</p>
<p><b>Step 1</b> &minus; Add a new function called <b>actionFragmentCaching()</b> to the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionFragmentCaching() {
   $user = new MyUser();
   $user-&gt;name = "cached user name";
   $user-&gt;email = "cacheduseremail@gmail.com";
   $user-&gt;save();
   $models = MyUser::find()-&gt;all();
   return $this-&gt;render('cachedview', ['models' =&gt; $models]);
}
</pre>
<p>In the above code, we created a new user and displayed a <b>cachedview</b> view file.</p>
<p><b>Step 2</b> &minus; Now, create a new file called <b>cachedview.php</b> in the <b>views/site</b> folder.</p>
<pre class="prettyprint notranslate">
&lt;?php if ($this-&gt;beginCache('cachedview')) { ?&gt;
   &lt;?php foreach ($models as $model): ?&gt;
      &lt;?= $model-&gt;id; ?&gt;
      &lt;?= $model-&gt;name; ?&gt;
      &lt;?= $model-&gt;email; ?&gt;
      &lt;br/&gt;
   &lt;?php endforeach; ?&gt;
&lt;?php $this-&gt;endCache(); } ?&gt;
&lt;?php echo "Count:", \app\models\MyUser::find()-&gt;count(); ?&gt;
</pre>
<p>We have enclosed a content generation logic in a pair of beginCache() and endCache() methods. If the content is found in cache, the beginCache() method will render it.</p>
<p><b>Step 3</b> &minus; Go to the URL <b>http://localhost:8080/index.php?r=site/fragment-caching</b> and reload the page. Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/fragment_caching.jpg" alt="Fragment Caching" />
<p>Notice, that the content between the beginCache() and endCache() methods is cached. In the database, we have 13 users but only 12 are displayed.</p>
<h2>Page Caching</h2>
<p>Page caching provides caching the content of a whole web page. Page caching is supported by <b>yii\filter\PageCache</b>.</p>
<p><b>Step 1</b> &minus; Modify the <b>behaviors()</b> function of the SiteController.</p>
<pre class="prettyprint notranslate">
public function behaviors() {
   return [
      'access' =&gt; [
         'class' =&gt; AccessControl::className(),
         'only' =&gt; ['logout'],
         'rules' =&gt; [
            [
               'actions' =&gt; ['logout'],
               'allow' =&gt; true,
               'roles' =&gt; ['@'],
            ],
         ],
      ],
      'verbs' =&gt; [
         'class' =&gt; VerbFilter::className(),
         'actions' =&gt; [
            'logout' =&gt; ['post'],
         ],
      ],
      [
         'class' =&gt; 'yii\filters\PageCache',
         'only' =&gt; ['index'],
         'duration' =&gt; 60
      ],
   ];
}
</pre>
<p>The above code caches the index page for 60 seconds.</p>
<p><b>Step 2</b> &minus; Go to the URL <b>http://localhost:8080/index.php?r=site/index</b>. Then, modify the congratulation message of the index view file. If you reload the page, you will not notice any changes because the page is cached. Wait a minute and reload the page again.</p>
<img src="https://www.tutorialspoint.com/yii/images/page_caching.jpg" alt="Page Caching" />
<h2>HTTP Caching</h2>
<p>Web applications can also use client-side caching. To use it, you may configure the <b>yii\filter\HttpCache</b> filter for controller actions.</p>
<p>The Last-Modified header uses a timestamp to indicate whether the page has been modified.</p>
<p><b>Step 1</b> &minus; To enable sending the Last-Modified header, configure the yii\filter\HttpCache::$lastModified property.</p>
<pre class="prettyprint notranslate">
public function behaviors() {
   return [
      [
         'class' =&gt; 'yii\filters\HttpCache',
         'only' =&gt; ['index'],
         'lastModified' =&gt; function ($action, $params) {
            $q = new \yii\db\Query();
            return $q-&gt;from('news')-&gt;max('created_at');
         },
      ],
   ];
}
</pre>
<p>In the above code, we enabled the HTTP caching only for the index page. When a browser opens the index page for the first time, the page is generated on the server side and sent to the browser. The second time, if no news is created, the server will not regenerate the page.</p>
<p>The Etag header provides a hash representing the content of the page. If the page is changed, the hash will be changed as well.</p>
<p><b>Step 2</b> &minus; To enable sending the Etag header, configure the <b>yii\filters\HttpCache::$etagSeed</b> property.</p>
<pre class="prettyprint notranslate">
public function behaviors() {
   return [
      [
         'class' =&gt; 'yii\filters\HttpCache',
         'only' =&gt; ['index'],
         'etagSeed' =&gt; function ($action, $params) {
            $user = $this-&gt;findModel(\Yii::$app-&gt;request-&gt;get('id'));
            return serialize([$user-&gt;name, $user-&gt;email]);
         },
      ],
   ];
}
</pre>
<p>In the above code, we enabled the HTTP caching for the <b>index</b> action only. It should generate the Etag HTTP header based on the name and email of the user. When a browser opens the index page for the first time, the page is generated on the server side and sent to the browser. The second time, if there are no changes to the name or email, the server will not regenerate the page.</p>
<h1>Yii - Aliases</h1>
<p>Aliases help you not to hard-code absolute paths or URLs in your project. An alias starts with the @ character.</p>
<p>To define an alias you should call the <b>Yii::setAlias()</b> method &minus;</p>
<pre class="result notranslate">
// an alias of a file path
Yii::setAlias('@alias', '/path/to/alias');
// an alias of a URL
Yii::setAlias('@urlAlias', 'http://www.google.com');
</pre>
<p>You can also derive a new alias from an existing one &minus;</p>
<pre class="result notranslate">
Yii::setAlias('@pathToSomewhere', '@alias/path/to/somewhere');
</pre>
<p>You can call the Yii::setAlias() method in the entry script or in a writable property called aliases in the application configuration &minus;</p>
<pre class="prettyprint notranslate">
$config = [
   'id' =&gt; 'basic',
   'basePath' =&gt; dirname(__DIR__),
   'bootstrap' =&gt; ['log'],
   'components' =&gt; [
      'aliases' =&gt; [
         '@alias' =&gt; '/path/to/somewhere',
         '@urlAlias' =&gt; 'http://www.google.com',
      ],
      //other components...
   ]
]
</pre>
<p>To resolve alias, you should call the Yii::getAlias() method.</p>
<p>Yii predefines the following aliases &minus;</p>
<ul class="list">
<li><p><b>@app</b> &minus; The base path of the application.</p></li>
<li><p><b>@yii</b> &minus; The folder where the BaseYii.php file is located.</p></li>
<li><p><b>@webroot</b> &minus; The Web root directory of the application.</p></li>
<li><p><b>@web</b> &minus; The base URL of the application.</p></li>
<li><p><b>@runtime</b> &minus; The runtime path of the application. Defaults to @app/runtime.</p></li>
<li><p><b>@vendor</b> &minus; The Composer vendor directory. Defaults to @app/vendor.</p></li>
<li><p><b>@npm</b> &minus; The root directory for npm packages. Defaults to @vendor/npm.</p></li>
<li><p><b>@bower</b> &minus; The root directory for bower packages. Defaults to @vendor/bower.</p></li>
</ul>
<p>Now, add a new function called <i>actionAliases()</i> to the SiteController &minus;</p>
<pre class="prettyprint notranslate">
public function actionAliases() {
   Yii::setAlias("@components", "@app/components");
   Yii::setAlias("@imagesUrl", "@web/images");
   var_dump(Yii::getAlias("@components"));
   var_dump(Yii::getAlias("@imagesUrl"));
}
</pre>
<p>In the above code, we created two aliases: @components for application components and @imagesUrl for URL where we stored all application images.</p>
<p>Type http://localhost:8080/index.php?r=site/aliases, you will see the following output &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/site_aliases.jpg" alt="Set Aliases" />
<h1>Yii - Logging</h1>
<p>Yii provides a highly customizable and extensible framework. With the help of this framework, you can easily log various types of messages.</p>
<p>To log a message, you should call one of the following methods &minus;</p>
<ul class="list">
<li><p><b>Yii::error()</b> &minus; Records a fatal error message.</p></li>
<li><p><b>Yii::warning()</b> &minus; Records a warning message.</p></li>
<li><p><b>Yii::info()</b> &minus; Records a message with some useful information.</p></li>
<li><p><b>Yii::trace()</b> &minus; Records a message to trace how a piece of code runs.</p></li>
</ul>
<p>The above methods record log messages at various categories. They share the following function signature &minus;</p>
<pre class="result notranslate">
function ($message, $category = 'application')
</pre>
<p>where &minus;</p>
<ul class="list">
<li><p><b>$message</b> &minus; The log message to be recorded</p></li>
<li><p><b>$category</b> &minus; The category of the log message</p></li>
</ul>
<p>A simple and convenient way of naming scheme is using the PHP __METHOD__ magic constant. For example &minus;</p>
<pre class="prettyprint notranslate">
Yii::info('this is a log message', __METHOD__);
</pre>
<p>A log target is an instance of the yii\log\Target class. It filters all log messages by categories and exports them to file, database, and/or email.</p>
<p><b>Step 1</b> &minus; You can register multiple log target as well, like.</p>
<pre class="prettyprint notranslate">
return [
   // the "log" component is loaded during bootstrapping time
   'bootstrap' =&gt; ['log'],
   'components' =&gt; [
      'log' =&gt; [
         'targets' =&gt; [
            [
               'class' =&gt; 'yii\log\DbTarget',
               'levels' =&gt; ['error', 'warning', 'trace', 'info'],
            ],
            [
               'class' =&gt; 'yii\log\EmailTarget',
               'levels' =&gt; ['error', 'warning'],
               'categories' =&gt; ['yii\db\*'],
               'message' =&gt; [
                  'from' =&gt; ['log@mydomain.com'],
                  'to' =&gt; ['admin@mydomain.com', 'developer@mydomain.com'],
                  'subject' =&gt; 'Application errors at mydomain.com',
               ],
            ],
         ],
      ],
   ],
];
</pre>
<p>In the code above, two targets are registered. The first target selects all errors, warnings, traces, and info messages and saves them in a database. The second target sends all error and warning messages to the admin email.</p>
<p>Yii provides the following built-in log targets &minus;</p>
<ul class="list">
<li><p><b>yii\log\DbTarget</b> &minus; Stores log messages in a database.</p></li>
<li><p><b>yii\log\FileTarget</b> &minus; Saves log messages in files.</p></li>
<li><p><b>yii\log\EmailTarget</b> &minus; Sends log messages to predefined email addresses.</p></li>
<li><p><b>yii\log\SyslogTarget</b> &minus; Saves log messages to syslog by calling the PHP
function syslog().</p></li>
</ul>
<p>By default, log messages are formatted as follows &minus;</p>
<pre class="result notranslate">
Timestamp [IP address][User ID][Session ID][Severity Level][Category] Message Text
</pre>
<p><b>Step 2</b> &minus; To customize this format, you should configure the <b>yii\log\Target::$prefix</b> property. For example.</p>
<pre class="prettyprint notranslate">
[
   'class' =&gt; 'yii\log\FileTarget',
   'prefix' =&gt; function ($message) {
      $user = Yii::$app-&gt;has('user', true) ? Yii::$app-&gt;get('user') :
      'undefined user';
      $userID = $user ? $user-&gt;getId(false) : 'anonym';
      return "[$userID]";
   }
]
</pre>
<p>The above code snippet configures a log target to prefix all log messages with the current userID.</p>
<p>By default, log messages include the values from these global PHP variables: $_GET, $_POST, $_SESSION, $_COOKIE, $_FILES, and $_SERVER. To modify this behavior, you should configure the <b>yii\log\Target::$logVars</b> property with the names of variables that you want to include.</p>
<p>All log messages are maintained in an array by the logger object. The logger object flushed the recorded messages to the log targets each time the array accumulates a certain number of messages(default is 1000).</p>
<p><b>Step 3</b> &minus; To customize this number, you should call the <b>flushInterval property</b>.</p>
<pre class="prettyprint notranslate">
return [
   'bootstrap' =&gt; ['log'],
   'components' =&gt; [
      'log' =&gt; [
         'flushInterval' =&gt; 50, // default is 1000
         'targets' =&gt; [...],
      ],
   ],
];
</pre>
<p>Even when the logger object flushes log messages to log targets, they do not get exported immediately. The export occurs when a log target accumulates a certain number of messages(default is 1000).</p>
<p><b>Step 4</b> &minus; To customize this number, you should configure the <b>exportInterval</b> property.</p>
<pre class="prettyprint notranslate">
[
   'class' =&gt; 'yii\log\FileTarget',
   'exportInterval' =&gt; 50, // default is 1000
]
</pre>
<p><b>Step 5</b> &minus; Now, modify the <b>config/web.php</b> file this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'flushInterval' =&gt; 1,
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'exportInterval' =&gt; 1,
                  'logVars' =&gt; []
               ],
            ],
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>In the above code, we define the log application component, set the <b>flushInterval</b> and <b>exportInteval</b> properties to 1 so that all log messages appear in the log files immediately. We also omit the levels property of the log target. It means that log messages of all categories(error, warning, info, trace) will appear in the log files.</p>
<p><b>Step 6</b> &minus; Then, create a function called actionLog() in the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionLog() {
   Yii::trace('trace log message');
   Yii::info('info log message');
   Yii::warning('warning log message');
   Yii::error('error log message');
}
</pre>
<p>In the above code, we just write four log messages of different categories to the log files.</p>
<p><b>Step 7</b> &minus; Type the URL <b>http://localhost:8080/index.php?r=site/log</b> in the address bar of the web browser. Log messages should appear under the app/runtime/logs directory in the app.log file.</p>
<img src="https://www.tutorialspoint.com/yii/images/actionlog_function.jpg" alt="Action Log Function" />
<h1>Yii - Error Handling</h1>
<p>Yii includes a built-in error handler. The Yii error handler does the following &minus;</p>
<ul class="list">
<li>Converts all non-fatal PHP errors into catchable exceptions.</li>
<li>Displays all errors and exceptions with a detailed call stack.</li>
<li>Supports different error formats.</li>
<li>Supports using a controller action to display errors.</li>
</ul>
<p>To disable the error handler, you should define the YII_ENABLE_ERROR_HANDLER constant to be false in the entry script. The error handler is registered as an application component.</p>
<p><b>Step 1</b> &minus; You can configure it in the following way.</p>
<pre class="prettyprint notranslate">
return [
   'components' =&gt; [
      'errorHandler' =&gt; [
         'maxSourceLines' =&gt; 10,
      ],
   ],
];
</pre>
<p>The above configuration sets the number of source code lines to be displayed to 10. The error handler converts all non-fatal PHP errors into catchable exceptions.</p>
<p><b>Step 2</b> &minus; Add a new function called <b>actionShowError()</b> to the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionShowError() {
   try {
      5/0;
   } catch (ErrorException $e) {
      Yii::warning("Ooops...division by zero.");
   }
   // execution continues...
}
</pre>
<p><b>Step 3</b> &minus; Go to the URL <b>http://localhost:8080/index.php?r=site/show-error</b>. You will see a warning message.</p>
<img src="https://www.tutorialspoint.com/yii/images/add_actionshowerror_method.jpg" alt="Add actionShowError Method" />
<p>If you want to show the user that his request is invalid, you may throw the <b>yii\web\NotFoundHttpException</b>.</p>
<p><b>Step 4</b> &minus; Modify the <b>actionShowError()</b> function.</p>
<pre class="prettyprint notranslate">
public function actionShowError() {
   throw new NotFoundHttpException("Something unexpected happened");
}
</pre>
<p><b>Step 5</b> &minus; Type the address <b>http://localhost:8080/index.php?r=site/show-error</b> in the address bar. You will see the following HTTP error.</p>
<img src="https://www.tutorialspoint.com/yii/images/modify_actionshowerror_method.jpg" alt="Modify actionShowError Method" />
<p>When the YII_DEBUG constant is true, the error handler will display errors with a detailed call stack. When the constant is false, only the error message will be displayed. By default, the error handler shows errors using these views &minus;</p>
<ul class="list">
<li><p><b>@yii/views/errorHandler/exception.php</b> &minus; the view file is used when errors should be displayed with call stack information.</p></li>
<li><p><b>@yii/views/errorHandler/error.php</b> &minus; the view file is used when errors should be displayed without call stack information.</p></li>
</ul>
<p>You can use dedicated error actions to customize the error display.</p>
<p><b>Step 6</b> &minus; Modify the <b>errorHandler</b> application component in the <b>config/web.php</b> file.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         <b>'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],</b>
         //other components...
            'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>The above configuration defines that when an error needs to be displayed without the call stack, the <b>site/error</b> action will be executed.</p>
<p><b>Step 7</b> &minus; Modify the <b>actions()</b> method of the SiteController.</p>
<pre class="prettyprint notranslate">
public function actions() {
   return [
      'error' =&gt; [
         'class' =&gt; 'yii\web\ErrorAction',
      ],
   ];
}
</pre>
<p>The above code defines, that when an <b>error</b> occurs, the error view will be rendered.</p>
<p><b>Step 8</b> &minus; Create a file called <b>error.php</b> under the views/site directory.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   /* @var $name string */
   /* @var $message string */
   /* @var $exception Exception */
   use yii\helpers\Html;
   $this-&gt;title = $name;
?&gt;

&lt;div class = "site-error"&gt;
   &lt;h2&gt;customized error&lt;/h2&gt;
   &lt;h1&gt;&lt;?= Html::encode($this-&gt;title) ?&gt;&lt;/h1&gt;
   
   &lt;div class = "alert alert-danger"&gt;
      &lt;?= nl2br(Html::encode($message)) ?&gt;
   &lt;/div&gt;
   
   &lt;p&gt;
      The above error occurred while the Web server was processing your request.
   &lt;/p&gt;
   
   &lt;p&gt;
      Please contact us if you think this is a server error. Thank you.
   &lt;/p&gt;
&lt;/div&gt;
</pre>
<p><b>Step 9</b> &minus; Go to the address <b>http://localhost:8080/index.php?r=site/show-error</b>, you will see the customized error view.</p>
<img src="https://www.tutorialspoint.com/yii/images/error_page.jpg" alt="Error Page" />
<h1>Yii - Authentication</h1>
<p>The process of verifying the identity of a user is called <b>authentication</b>. It usually uses a username and a password to judge whether the user is one who he claims as.</p>
<p>To use the Yii authentication framework, you need to &minus;</p>
<ul class="list">
<li>Configure the user application component.</li>
<li>Implement the yii\web\IdentityInterface interface.</li>
</ul>
<p>The basic application template comes with a built-in authentication system. It uses the user application component as shown in the following code &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         //other components...
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>In the above configuration, the identity class for user is configured to be app\models\User.</p>
<p>The identity class must implement the <b>yii\web\IdentityInterface</b> with the following methods &minus;</p>
<ul class="list">
<li><p><b>findIdentity()</b> &minus; Looks for an instance of the identity class using the specified user ID.</p></li>
<li><p><b>findIdentityByAccessToken()</b> &minus; Looks for an instance of the identity class using the specified access token.</p></li>
<li><p><b>getId()</b> &minus; It returns the ID of the user.</p></li>
<li><p><b>getAuthKey()</b> &minus; Returns a key used to verify cookie-based login.</p></li>
<li><p><b>validateAuthKey()</b> &minus; Implements the logic for verifying the cookie-based login key.</p></li>
</ul>
<p>The User model from the basic application template implements all the above functions. User data is stored in the <b>$users</b> property &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   class User extends \yii\base\Object implements \yii\web\IdentityInterface {
      public $id;
      public $username;
      public $password;
      public $authKey;
      public $accessToken;
      private static $users = [
         '100' =&gt; [
            'id' =&gt; '100',
            'username' =&gt; 'admin',
            'password' =&gt; 'admin',
            'authKey' =&gt; 'test100key',
            'accessToken' =&gt; '100-token',
         ],
         '101' =&gt; [
            'id' =&gt; '101',
            'username' =&gt; 'demo',
            'password' =&gt; 'demo',
            'authKey' =&gt; 'test101key',
            'accessToken' =&gt; '101-token',
         ],
      ];
      /**
      * @inheritdoc
      */
      public static function findIdentity($id) {
         return isset(self::$users[$id]) ? new static(self::$users[$id]) : null;
      }
      /**
      * @inheritdoc
      */
      public static function findIdentityByAccessToken($token, $type = null) {
         foreach (self::$users as $user) {
            if ($user['accessToken'] === $token) {
               return new static($user);
            }
         }
         return null;
      }
      /**
      * Finds user by username
      *
      * @param string $username
      * @return static|null
      */
      public static function findByUsername($username) {
         foreach (self::$users as $user) {
            if (strcasecmp($user['username'], $username) === 0) {
               return new static($user);
            }
         }
         return null;
      }
      /**
      * @inheritdoc
      */
      public function getId() {
         return $this-&gt;id;
      }
      /**
      * @inheritdoc
      */
      public function getAuthKey() {
         return $this-&gt;authKey;
      }
      /**
      * @inheritdoc
      */
      public function validateAuthKey($authKey) {
         return $this-&gt;authKey === $authKey;
      }
      /**
      * Validates password 
      *
      * @param string $password password to validate
      * @return boolean if password provided is valid for current user
      */
      public function validatePassword($password) {
         return $this-&gt;password === $password;
      }
   }
?&gt;
</pre>
<p><b>Step 1</b> &minus; Go to the URL <b>http://localhost:8080/index.php?r=site/login</b> and log in into the web site using admin for a login and a password.</p>
<img src="https://www.tutorialspoint.com/yii/images/admin_login.jpg" alt="Admin Login" />
<p><b>Step 2</b> &minus; Then, add a new function called <b>actionAuth()</b> to the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionAuth(){
   // the current user identity. Null if the user is not authenticated.
   $identity = Yii::$app-&gt;user-&gt;identity;
   var_dump($identity);
   // the ID of the current user. Null if the user not authenticated.
   $id = Yii::$app-&gt;user-&gt;id;
   var_dump($id);
   // whether the current user is a guest (not authenticated)
   $isGuest = Yii::$app-&gt;user-&gt;isGuest;
   var_dump($isGuest);
}
</pre>
<p><b>Step 3</b> &minus; Type the address <b>http://localhost:8080/index.php?r=site/auth</b> in the web browser, you will see the detailed information about <b>admin</b> user.</p>
<img src="https://www.tutorialspoint.com/yii/images/actionauth_method.jpg" alt="actionAuth Method" />
<p><b>Step 4</b> &minus; To login and logou,t a user you can use the following code.</p>
<pre class="prettyprint notranslate">
public function actionAuth() {
   // whether the current user is a guest (not authenticated)
   var_dump(Yii::$app-&gt;user-&gt;isGuest);
   // find a user identity with the specified username.
   // note that you may want to check the password if needed
   $identity = User::findByUsername("admin");
   // logs in the user
   Yii::$app-&gt;user-&gt;login($identity);
   // whether the current user is a guest (not authenticated)
   var_dump(Yii::$app-&gt;user-&gt;isGuest);
   Yii::$app-&gt;user-&gt;logout();
   // whether the current user is a guest (not authenticated)
   var_dump(Yii::$app-&gt;user-&gt;isGuest);
}
</pre>
<p>At first, we check whether a user is logged in. If the value returns <b>false</b>, then we log in a user via the <b>Yii::$app &rarr; user &rarr; login()</b> call, and log him out using the <b>Yii::$app &rarr; user &rarr; logout()</b> method.</p>
<p><b>Step 5</b> &minus; Go to the URL <b>http://localhost:8080/index.php?r=site/auth</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/verifying_user_login.jpg" alt="Verifying User Login" />
<p>The <b>yii\web\User</b> class raises the following events &minus;</p>
<ul class="list">
<li><p><b>EVENT_BEFORE_LOGIN</b> &minus; Raised at the beginning of <i>yii\web\User::login()</i></p></li>
<li><p><b>EVENT_AFTER_LOGIN</b> &minus; Raised after a successful login</p></li>
<li><p><b>EVENT_BEFORE_LOGOUT</b> &minus; Raised at the beginning of <i>yii\web\User::logout()</i></p></li>
<li><p><b>EVENT_AFTER_LOGOUT</b> &minus; Raised after a successful logout</p></li>
</ul>
<h1>Yii - Authorization</h1>
<p>The process of verifying that a user has enough permission to do something is called <b>authorization</b>. Yii provides an ACF (Access Control Filter), an authorization method implemented as <b>yii\filters\AccessControl</b>. Modify the behaviors() function of the SiteController &minus;</p>
<pre class="prettyprint notranslate">
public function behaviors() {
   return [
      'access' =&gt; [
         'class' =&gt; AccessControl::className(),
         'only' =&gt; ['about', 'contact'],
         'rules' =&gt; [
            [
               'allow' =&gt; true,
               'actions' =&gt; ['about'],
               'roles' =&gt; ['?'],
            ],
            [
               'allow' =&gt; true,
               'actions' =&gt; ['contact', 'about'],
               'roles' =&gt; ['@'],
            ],
         ],
      ],
   ];
}
</pre>
<p>In the above code, ACF is attached as a behavior. The only property specifies that the ACF should be applied only to the about and contact actions. All other actions are not subjected to the access control. The rules property lists the access rules. All guests (with the “?” role) will be allowed to access the <b>about</b> action. All authenticated users(with the “@” role) will be allowed to access the contact and about actions.</p>
<p>If you go to the URL <b>http://localhost:8080/index.php?r=site/about</b>, you will see the page, but if you open the URL <b>http://localhost:8080/index.php?r=site/contact</b>, you will be redirected to the login page because only authenticated users can access the <b>contact</b> action.</p>
<p>Access rules support many options &minus;</p>
<ul class="list">
<li><p><b>allow</b> &minus; Defines whether this is an "allow" or "deny" rule.</p></li>
<li><p><b>actions</b> &minus; Defines which actions this rule matches.</p></li>
<li><p><b>controllers</b> &minus; Defines which controllers this rule matches.</p></li>
<li><p><b>roles</b> &minus; Defines user roles that this rule matches. Two special roles are recognized &minus;</p>
<ul class="list">
<li><p><b>?</b> &minus; matches a guest user.</p></li>
<li><p><b>@</b> &minus; matches an authenticated user.</p></li>
</ul></li>
<li><p><b>ips</b> &minus; Defines IP addresses this rule matches.</p></li>
<li><p><b>verbs</b> &minus; Defines which request method (POST, GET, PUT, etc.) this rule matches.</p></li>
<li><p><b>matchCallback</b> &minus; Defines a PHP callable function that should be called to check if this rule should be applied.</p></li>
<li><p><b>denyCallback</b> &minus; Defines a PHP callable function that should be called when this rule will deny the access.</p></li>
</ul>
<h2>Passwords</h2>
<p><b>Step 1</b> &minus; Yii provides the following handy methods for working with passwords.</p>
<pre class="prettyprint notranslate">
public function actionAuth() {

   $password = "asd%#G3";
   
   //generates password hasg
   $hash = Yii::$app-&gt;getSecurity()-&gt;generatePasswordHash($password);
   var_dump($hash);
   
   //validates password hash
   if (Yii::$app-&gt;getSecurity()-&gt;validatePassword($password, $hash)) {
      echo "correct password";
   } else {
      echo "incorrect password";
   }
   
   //generate a token
   $key = Yii::$app-&gt;getSecurity()-&gt;generateRandomString();
   var_dump($key);
   
   //encrypt data with a secret key
   $encryptedData = Yii::$app-&gt;getSecurity()-&gt;encryptByPassword("mydata", $key);
   var_dump($encryptedData);
   
   //decrypt data with a secret key
   $data = Yii::$app-&gt;getSecurity()-&gt;decryptByPassword($encryptedData, $key);
   var_dump($data);
   
   //hash data with a secret key
   $data = Yii::$app-&gt;getSecurity()-&gt;hashData("mygenuinedata", $key);
   var_dump($data);
   
   //validate data with a secret key
   $data = Yii::$app-&gt;getSecurity()-&gt;validateData($data, $key);
   var_dump($data);
}
</pre>
<p><b>Step 2</b> &minus; Enter the URL <b>http://localhost:8080/index.php?r=site/auth</b>, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/passwords.jpg" alt="Passwords" />
<h1>Yii - Localization</h1>
<p><b>I18N (Internationalization)</b> is the process of designing an application that can be adapted to various languages. Yii offers a full spectrum of I18N features.</p>
<p>Locale is a set of parameters that specify a user's language and country. For example, the en-US stands for the English locale and the United States. Yii provides two types of languages: source language and target language. The source language is the language in which all text messages in the application are written. The target language is the language that should be used to display content to end users.</p>
<p>The message translation component translates text messages from the source language to the target language. To translate the message, the message translation service must look it up in a message source.</p>
<p>To use the message translation service, you should &minus;</p>
<ul class="list">
<li>Wrap text messages you want to be translated in the Yii::t() method.</li>
<li>Configure message sources.</li>
<li>Store messages in the message source.</li>
</ul>
<p><b>Step 1</b> &minus; The Yii::t() method can be used like this.</p>
<pre class="prettyprint notranslate">
echo \Yii::t('app', 'This is a message to translate!');
</pre>
<p>In the above code snippet, the 'app' stands for a message category.</p>
<p><b>Step 2</b> &minus; Now, modify the <b>config/web.php</b> file.</p>
<pre class="prettyprint notranslate">
&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'ymoaYrebZHa8gURuolioHGlK8fLXCKjO',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'i18n' =&gt; [
            'translations' =&gt; [
               'app*' =&gt; [
                  'class' =&gt; 'yii\i18n\PhpMessageSource',
                  'fileMap' =&gt; [
                     'app' =&gt; 'app.php'
                  ],
               ],
            ],
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'flushInterval' =&gt; 1,
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'exportInterval' =&gt; 1,
                  'logVars' =&gt; [],
               ],
            ],
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      // set target language to be Russian
      'language' =&gt; 'ru-RU',
      // set source language to be English
      'sourceLanguage' =&gt; 'en-US',
      'modules' =&gt; [
         'hello' =&gt; [
            'class' =&gt; 'app\modules\hello\Hello',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;
</pre>
<p>In the above code, we define the source and the target languages. We also specify a message source supported by <b>yii\i18n\PhpMessageSource</b>. The app* pattern indicates that all messages categories starting with app must be translated using this particular message source. In the above configuration, all Russian translations will be located in the messages/ru-RU/app.php file.</p>
<p><b>Step 3</b> &minus; Now, create the messages/ru-RU directory structure. Inside the ru-RU folder create a file called app.php. This will store all EN &rarr; RU translations.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'This is a string to translate!' =&gt; 'Эта строка для перевода!'
   ];
?&gt;
</pre>
<p><b>Step 4</b> &minus; Create a function called actionTranslation() in the SiteController.</p>
<pre class="prettyprint notranslate">
public function actionTranslation() {
   echo \Yii::t('app', 'This is a string to translate!');
}
</pre>
<p><b>Step 5</b> &minus; Enter the URL <b>http://localhost:8080/index.php?r=site/translation</b> in the web browser, you will see the following.</p>
<img src="https://www.tutorialspoint.com/yii/images/translation.jpg" alt="Translation" />
<p>The message was translated into Russian as we set the target language to ru-RU. We can dynamically change the language of the application.</p>
<p><b>Step 6</b> &minus; Modify the <b>actionTranslation()</b> method.</p>
<pre class="prettyprint notranslate">
public function actionTranslation() {
   \Yii::$app-&gt;language = 'en-US';
   echo \Yii::t('app', 'This is a string to translate!');
}
</pre>
<p>Now, the message is displayed in English &minus;</p>
<img src="https://www.tutorialspoint.com/yii/images/action_translation_method.jpg" alt="Action Translation Method" />
<p><b>Step 7</b> &minus; In a translated message, you can insert one or multiple parameters.</p>
<pre class="prettyprint notranslate">
public function actionTranslation() {
   $username = 'Vladimir';
   // display a translated message with username being "Vladimir"
   echo \Yii::t('app', 'Hello, {username}!', [
      'username' =&gt; $username,
   ]), "&lt;br&gt;";
   $username = 'John';
   // display a translated message with username being "John"
   echo \Yii::t('app', 'Hello, {username}!', [
      'username' =&gt; $username,
   ]), "&lt;br&gt;";
   $price = 150;
   $count = 3;
   $subtotal = 450;
   echo \Yii::t('app', 'Price: {0}, Count: {1}, Subtotal: {2}', [$price, $count, $subtotal]);
}
</pre>
<p>Following will be the output.</p>
<img src="https://www.tutorialspoint.com/yii/images/translated_message.jpg" alt="Translated Message" />
<p>You can translate a whole view script, instead of translating individual text messages. For example, if the target language is ru-RU and you want to translate the views/site/index.php view file, you should translate the view and save it under the views/site/ru-RU directory.</p>
<p><b>Step 8</b> &minus; Create the views/site/ru-RU directory structure. Then, inside the ru-RU folder create a file called index.php with the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php
   /* @var $this yii\web\View */
   $this-&gt;title = 'My Yii Application';
?&gt;

&lt;div class = "site-index"&gt;
   &lt;div class = "jumbotron"&gt;
      &lt;h1&gt;Добро пожаловать!&lt;/h1&gt;
   &lt;/div&gt;
&lt;/div&gt;
</pre>
<p><b>Step 9</b> &minus; The target language is ru-RU, so if you enter the URL <b>http://localhost:8080/index.php?r=site/index</b>, you will see the page with Russian translation.</p>
<img src="https://www.tutorialspoint.com/yii/images/russian_translation.jpg" alt="Russian Translation" />
<h1>Yii - Gii</h1>
<p>Gii is the extension, that provides a web-based code generator for generating models, forms, modules, CRUD, and so forth.</p>
<p>By default, the following generators are available &minus;</p>
<ul class="list">
<li><p><b>Model Generator</b> &minus; Generates an ActiveRecord class for the specified database table.</p></li>
<li><p><b>CRUD Generator</b> &minus; Generates a controller and views that implement CRUD (Create, Read, Update, Delete) operations for the specified model.</p></li>
<li><p><b>Controller Generator</b> &minus; Generates a new controller class with one or several controller actions and their corresponding views.</p></li>
<li><p><b>Form Generator</b> &minus; Generates a view script file that displays a form to collect input for the specified model class.</p></li>
<li><p><b>Module Generator</b> &minus; Generates the skeleton code needed by an Yii module.</p></li>
<li><p><b>Extension Generator</b> &minus; GenerateS the files needed by a Yii extension.</p></li>
</ul>
<p>To open the gii generation tool, type <b>http://localhost:8080/index.php?r=gii:</b> in the address bar of the web browser.</p>
<img src="https://www.tutorialspoint.com/yii/images/generation_tool.jpg" alt="Generation Tool" />
<h2>Preparing the DB</h2>
<p><b>Step 1</b> &minus; Create a new database. Database can be prepared in the following two ways &minus;</p>
<ul class="list">
<li><p>In the terminal run <i>mysql -u root –p</i></p></li>
<li><p>Create a new database via <b>CREATE DATABASE</b> helloworld CHARACTER SET utf8 COLLATE utf8_general_ci;</p></li>
</ul>
<p><b>Step 2</b> &minus; Configure the database connection in the <b>config/db.php</b> file. The following configuration is for the system used currently.</p>
<pre class="prettyprint notranslate">
&lt;?php
   return [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host=localhost;dbname=helloworld',
      'username' =&gt; 'vladimir',
      'password' =&gt; '12345',
      'charset' =&gt; 'utf8',
   ];
?&gt;
</pre>
<p><b>Step 3</b> &minus; Inside the root folder <b>run ./yii migrate/create test_table</b>. This command will create a database migration for managing our DB. The migration file should appear in the <b>migrations</b> folder of the project root.</p>
<p><b>Step 4</b> &minus; Modify the migration file (<b>m160106_163154_test_table.php</b> in this case) this way.</p>
<pre class="prettyprint notranslate">
&lt;?php
   use yii\db\Schema;
   use yii\db\Migration;
   class m160106_163154_test_table extends Migration {
      public function safeUp() {
         $this-&gt;createTable("user", [
            "id" =&gt; Schema::TYPE_PK,
            "name" =&gt; Schema::TYPE_STRING,
            "email" =&gt; Schema::TYPE_STRING,
         ]);
         $this-&gt;batchInsert("user", ["name", "email"], [
            ["User1", "user1@gmail.com"],
            ["User2", "user2@gmail.com"],
            ["User3", "user3@gmail.com"],
            ["User4", "user4@gmail.com"],
            ["User5", "user5@gmail.com"],
            ["User6", "user6@gmail.com"],
            ["User7", "user7@gmail.com"],
            ["User8", "user8@gmail.com"],
            ["User9", "user9@gmail.com"],
            ["User10", "user10@gmail.com"],
            ["User11", "user11@gmail.com"],
         ]);
      }
      public function safeDown() {
         $this-&gt;dropTable('user');
      }
   }
?&gt;
</pre>
<p>The above migration creates a <b>user</b> table with these fields: id, name, and email. It also adds a few demo users.</p>
<p><b>Step 5</b> &minus; Inside the project root <b>run ./yii migrate</b> to apply the migration to the database.</p>
<p><b>Step 6</b> &minus; Now, we need to create a model for our <b>user</b> table. For the sake of simplicity, we are going to use the <b>Gii</b> code generation tool. Open up this <b>url: http://localhost:8080/index.php?r=gii</b>. Then, click the “Start” button under the “Model generator” header. Fill in the Table Name (“user”) and the Model Class (“MyUser”), click the “Preview” button and finally, click the “Generate” button.</p>
<img src="https://www.tutorialspoint.com/yii/images/create_model.jpg" alt="Gii Preparing DB" />
<p>The MyUser model should appear in the models directory.</p>
<h1>Gii - Creating a Model</h1>
<p>To create a Model in Gii &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\models;
   use app\components\UppercaseBehavior;
   use Yii;
   /**
   * This is the model class for table "user".
   *
   * @property integer $id
   * @property string $name
   * @property string $email
   */
   class MyUser extends \yii\db\ActiveRecord {
      /**
      * @inheritdoc
      */
      public static function tableName() {
         return 'user';
      }
      /**
      * @inheritdoc
      */
      public function rules() {
         return [
            [['name', 'email'], 'string', 'max' =&gt; 255]
         ];
      }
      /**
      * @inheritdoc
      */
      public function attributeLabels() {
         return [
            'id' =&gt; 'ID',
            'name' =&gt; 'Name',
            'email' =&gt; 'Email',
         ];
      }
   }
?&gt;
</pre>
<h2>Generating CRUD</h2>
<p>Let us generate CRUD for the MyUser model.</p>
<p><b>Step 1</b> &minus; Open the CRUD generator interface, fill in the form.</p>
<img src="https://www.tutorialspoint.com/yii/images/crud_generator_interface.jpg" alt="Crud Generator Interface" />
<p><b>Step 2</b> &minus; Then, click the “Preview” button and “Generate”. Go to the URL <b>http://localhost:8080/index.php?r=my-user</b>, you will see the list of all users.</p>
<img src="https://www.tutorialspoint.com/yii/images/click_preview_button.jpg" alt="Click Preview Button" />
<p><b>Step 3</b> &minus; Open the URL <b>http://localhost:8080/index.php?r=my-user/create</b>. You should see a user create form.</p>
<img src="https://www.tutorialspoint.com/yii/images/user_create_form.jpg" alt="User Create Form" />
<h1>Gii - Generating Controller</h1>
<p>Let us see how to generate a Controller.</p>
<p><b>Step 1</b> &minus; To generate a controller with several actions, open the controller generator interface fill in the form.</p>
<img src="https://www.tutorialspoint.com/yii/images/generate_controller.jpg" alt="Generate Controller" />
<p><b>Step 2</b> &minus; Then, click the “Preview” button and “Generate”. The <b>CustomController.php</b> file with index, hello, and world actions will be generated in the controllers folder.</p>
<pre class="prettyprint notranslate">
&lt;?php
   namespace app\controllers;
   class CustomController extends \yii\web\Controller {
      public function actionHello() {
         return $this-&gt;render('hello');
      }
      public function actionIndex() {
         return $this-&gt;render('index');
      }
      public function actionWorld() {
         return $this-&gt;render('world');
      }
   }
?&gt;
</pre>
<h2>Form Generation</h2>
<p><b>Step 1</b> &minus; To generate a view file from an existing model, open the form generation interface and fill in the form.</p>
<img src="https://www.tutorialspoint.com/yii/images/form_generation.jpg" alt="Form Generation" />
<p>Then, click the “Preview” button and “Generate”. The customview view file will be generated in the view folder.</p>
<p><b>Step 2</b> &minus; To display it, add a new method to the <b>CustomController</b>.</p>
<pre class="prettyprint notranslate">
public function actionView() {
   $model = new MyUser();
   return $this-&gt;render('/customview', [
      'model' =&gt; $model,
   ]);
}
</pre>
<p><b>Step 3</b> &minus; To see the generated view file, open the URL <b>http://localhost:8080/index.php?r=custom/view</b>.</p>
<img src="https://www.tutorialspoint.com/yii/images/generated_view_file.jpg" alt="Generated View File" />
<h1>Gii - Generating Module</h1>
<p>Let us see how to generate a Module.</p>
<p><b>Step 1</b> &minus; To generate a module, open the module generation interface and fill in the form.</p>
<img src="https://www.tutorialspoint.com/yii/images/module_generator.jpg" alt="Module generator" />
<p><b>Step 2</b> &minus; Then, click the “Preview” button and “Generate”.</p>
<p><b>Step 3</b> &minus; We need to activate the module. Modify the <b>modules</b> application component in the <b>config/web.php</b> file.</p>
<pre class="prettyprint notranslate">
'modules' =&gt; [
   'admin' =&gt; [
      'class' =&gt; 'app\modules\admin\Module',
   ],
],
</pre>
<p><b>Step 4</b> &minus; To check whether our newly generated module works, type the UR <b>http://localhost:8080/index.php?r=admin/default/index</b> in the web browser.</p>
<img src="https://www.tutorialspoint.com/yii/images/generated_module_works.jpg" alt="Generated module Works" />
<hr />
<div class="pre-btn">
<a href="https://www.tutorialspoint.com/yii/gii_generating_module.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="print-btn center">
<a href="https://www.tutorialspoint.com/cgi-bin/printpage.cgi" target="_blank"><i class="icon icon-print big-font"></i> Print</a>
</div>
<div class="nxt-btn">
<a href="https://www.tutorialspoint.com/yii/yii_useful_resources.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<hr />
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div class="bottomadtag">Advertisements</div>
<script type="text/javascript"><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
<div class="row">
<div class="col-md-3" id="rightbar">
<div class="simple-ad">
<a href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.facebook.com/sharer.php?u=' + 'http://www.tutorialspoint.com/yii/yii_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/facebookIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://twitter.com/share?url=' + 'http://www.tutorialspoint.com/yii/yii_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/twitterIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.linkedin.com/cws/share?url=' + 'http://www.tutorialspoint.com/yii/yii_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/linkedinIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://plus.google.com/share?url=http://www.tutorialspoint.com/yii/yii_quick_guide.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/googlePlusIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.stumbleupon.com/submit?url=http://www.tutorialspoint.com/yii/yii_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/StumbleUponIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://reddit.com/submit?url=http://www.tutorialspoint.com/yii/yii_quick_guide.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=656,top='+sTop+',left='+sLeft);return false;">
<img src="https://www.tutorialspoint.com/images/reddit.jpg" alt="img" />
</a>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 600;
google_ad_format = "300x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-2537027957187252";
/* Right Side Ad */
google_ad_slot = "right_side_ad";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="footer-copyright">
<div class="container">
<div class="row">
<div class="col-md-1">
<a href="https://www.tutorialspoint.com/index.htm" class="logo"> <img alt="Tutorials Point" class="img-responsive" src="https://www.tutorialspoint.com/scripts/img/logo-footer.png"> </a>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <nav id="sub-menu">
      <ul>
         <li><a href="https://www.tutorialspoint.com/about/tutorials_writing.htm">Write for us</a></li>
         <li><a href="https://www.tutorialspoint.com/about/faq.htm">FAQ's</a></li>
         <li><a href="https://www.tutorialspoint.com/about/about_helping.htm">Helping</a></li>
         <li><a href="https://www.tutorialspoint.com/about/contact_us.htm">Contact</a></li>
      </ul>
   </nav>
</div>
<div class="col-md-3 col-sm-12 col-xs-12">
<p>&copy; Copyright 2017. All Rights Reserved.</p>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <div class="news-group">
      <input type="text" class="form-control-foot search" name="textemail" id="textemail" autocomplete="off" placeholder="Enter email for newsletter" onfocus="if (this.value == 'Enter email for newsletter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Enter email for newsletter...';}">
      <span class="input-group-btn"> <button class="btn btn-default btn-footer" id="btnemail" type="submit" onclick="javascript:void(0);">go</button> </span>
      <div id="newsresponse"></div>
   </div>
</div>
</div>
</div>
</div>
</div>
<!-- Libs -->
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/custom-min.js?v=4"></script>
<script src="https://www.google-analytics.com/urchin.js">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
$('.pg-icon').click(function(){
   $('.wrapLoader').show();
});
</script>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/yii/yii_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Aug 2017 18:15:26 GMT -->
</html>
